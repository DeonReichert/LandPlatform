# ğŸ§ª äº¤æ˜“æµ‹è¯•æŒ‡å— - Transaction Test Guide

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. Gas Limit é”™è¯¯ - å·²ä¿®å¤ âœ…
- **ä¹‹å‰**: Gas limit 21,000,000ï¼ˆè¶…è¿‡ Sepolia ä¸Šé™ 16,777,216ï¼‰
- **ç°åœ¨**: Gas limit 5,000,000ï¼ˆå®‰å…¨èŒƒå›´å†…ï¼‰
- **æ–‡ä»¶**: `src/components/RegisterZoneForm.tsx:49`
- **ä¿®å¤å†…å®¹**: æ·»åŠ  `gas: BigInt(5000000)`

### 2. WalletConnect 403 é”™è¯¯ - ä¸å½±å“åŠŸèƒ½ âš ï¸
- **é”™è¯¯ä¿¡æ¯**: `Origin http://localhost:1272 not found on Allowlist`
- **å½±å“**: WalletConnect é…ç½®è·å–å¤±è´¥ï¼Œä½†åº”ç”¨ä½¿ç”¨æœ¬åœ°é»˜è®¤å€¼ç»§ç»­è¿è¡Œ
- **ç»“æœ**: **ä¸å½±å“ MetaMask è¿æ¥å’Œäº¤æ˜“æäº¤**
- **è¯´æ˜**: è¿™æ˜¯ WalletConnect v2 çš„åŸŸåç™½åå•è¦æ±‚ï¼Œéœ€è¦åœ¨ cloud.reown.com é…ç½®

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè¿æ¥ MetaMask é’±åŒ…

1. **æ‰“å¼€åº”ç”¨**
   ```
   http://localhost:1272
   ```

2. **ç‚¹å‡» "Connect Wallet" æŒ‰é’®**
   - åº”è¯¥çœ‹åˆ°é’±åŒ…é€‰æ‹©å¼¹çª—
   - é€‰æ‹© **MetaMask**ï¼ˆä¸è¦é€‰ WalletConnectï¼‰

3. **ç¡®è®¤è¿æ¥**
   - MetaMask ä¼šå¼¹å‡ºè¿æ¥è¯·æ±‚
   - ç‚¹å‡» "Connect" ç¡®è®¤
   - é¡µé¢åº”æ˜¾ç¤ºæ‚¨çš„é’±åŒ…åœ°å€

**é¢„æœŸç»“æœ**: âœ… é’±åŒ…è¿æ¥æˆåŠŸï¼Œé¡µé¢æ˜¾ç¤ºæ‚¨çš„åœ°å€

---

### ç¬¬äºŒæ­¥ï¼šæ³¨å†Œ Land Zoneï¼ˆæµ‹è¯•äº¤æ˜“ï¼‰

1. **å¡«å†™è¡¨å•**
   ```
   Land Area: 5000
   Population Density: 1200
   Land Value: 850
   Zoning Type: Residential
   Public Description: Test Zone for Gas Limit Testing
   ```

2. **ç‚¹å‡» "ğŸ”’ Register Confidential Zone" æŒ‰é’®**

3. **æŸ¥çœ‹ MetaMask å¼¹çª—**
   - MetaMask åº”è¯¥å¼¹å‡ºäº¤æ˜“ç¡®è®¤çª—å£
   - **å…³é”®æ£€æŸ¥**: Gas Limit åº”è¯¥æ˜¾ç¤º **5,000,000** å·¦å³
   - **ä¸åº”è¯¥**: çœ‹åˆ° "gas limit too high" é”™è¯¯
   - **ä¸åº”è¯¥**: Gas Limit æ˜¾ç¤ºä¸º 21,000,000

4. **ç¡®è®¤äº¤æ˜“**
   - ç‚¹å‡» "Confirm" æäº¤äº¤æ˜“
   - ç­‰å¾…äº¤æ˜“ç¡®è®¤ï¼ˆSepolia æµ‹è¯•ç½‘çº¦éœ€ 15-30 ç§’ï¼‰

**é¢„æœŸç»“æœ**: âœ… äº¤æ˜“æˆåŠŸæäº¤å¹¶ç¡®è®¤

---

## ğŸ“Š é”™è¯¯å¯¹ç…§è¡¨

### Gas Limit é”™è¯¯ï¼ˆå·²ä¿®å¤ï¼‰

**ä¿®å¤å‰**:
```
âŒ MetaMask - RPC Error: transaction gas limit too high
   (cap: 16777216, tx: 21000000)
âŒ ContractFunctionExecutionError: The contract function "registerLandZone" reverted
```

**ä¿®å¤å**:
```
âœ… MetaMask æ˜¾ç¤º Gas Limit: 5,000,000
âœ… äº¤æ˜“æˆåŠŸæäº¤
âœ… æ—  "gas limit too high" é”™è¯¯
```

---

### WalletConnect 403 é”™è¯¯ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰

**é”™è¯¯ä¿¡æ¯**ï¼ˆå¯ä»¥å¿½ç•¥ï¼‰:
```
âš ï¸ api.web3modal.org - 403 ()
âš ï¸ [Reown Config] Failed to fetch remote project configuration.
   Using local/default values.
```

**è¯´æ˜**:
- è¿™ä¸ªé”™è¯¯**ä¸ä¼šå¯¼è‡´äº¤æ˜“å¤±è´¥**
- åªå½±å“ WalletConnectï¼ˆäºŒç»´ç æ‰«ç è¿æ¥ï¼‰åŠŸèƒ½
- **MetaMask æµè§ˆå™¨æ‰©å±•è¿æ¥ä¸å—å½±å“**
- åº”ç”¨ä¼šä½¿ç”¨æœ¬åœ°é»˜è®¤é…ç½®ç»§ç»­å·¥ä½œ

---

## ğŸ” é—®é¢˜æ’æŸ¥

### å¦‚æœäº¤æ˜“ä»ç„¶å¤±è´¥

1. **æ£€æŸ¥ MetaMask ç½‘ç»œ**
   - ç¡®ä¿è¿æ¥åˆ° **Sepolia Testnet**
   - ä¸æ˜¯ Mainnet æˆ–å…¶ä»–æµ‹è¯•ç½‘

2. **æ£€æŸ¥ Sepolia ETH ä½™é¢**
   - éœ€è¦è‡³å°‘ 0.01 Sepolia ETH ç”¨äº gas è´¹ç”¨
   - è·å–æµ‹è¯• ETH: https://sepoliafaucet.com

3. **æ£€æŸ¥åˆçº¦åœ°å€**
   - åˆçº¦æ˜¯å¦å·²éƒ¨ç½²åˆ° Sepoliaï¼Ÿ
   - `src/lib/contract.ts` ä¸­çš„ CONTRACT_ADDRESS æ˜¯å¦æ­£ç¡®ï¼Ÿ

4. **æŸ¥çœ‹å®Œæ•´é”™è¯¯ä¿¡æ¯**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - æŸ¥çœ‹ Console æ ‡ç­¾é¡µ
   - å¤åˆ¶å®Œæ•´é”™è¯¯ä¿¡æ¯

5. **æ£€æŸ¥ Gas Limit æ˜¯å¦ç”Ÿæ•ˆ**
   - åœ¨ MetaMask ç¡®è®¤çª—å£ä¸­
   - ç‚¹å‡» "View full transaction details"
   - æŸ¥çœ‹ "Gas Limit" æ˜¯å¦ä¸º 5,000,000

---

## ğŸ“ æµ‹è¯•è®°å½•æ¨¡æ¿

è¯·æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è®°å½•æµ‹è¯•ç»“æœï¼š

### æµ‹è¯•ç¯å¢ƒ
- æµè§ˆå™¨: Chrome / Firefox / Edge
- MetaMask ç‰ˆæœ¬: _______
- ç½‘ç»œ: Sepolia Testnet
- é’±åŒ…åœ°å€: 0x...
- ä½™é¢: _____ Sepolia ETH

### æµ‹è¯•æ­¥éª¤ 1: è¿æ¥é’±åŒ…
- [ ] ç‚¹å‡» "Connect Wallet"
- [ ] é€‰æ‹© MetaMask
- [ ] è¿æ¥æˆåŠŸ
- [ ] é¡µé¢æ˜¾ç¤ºåœ°å€

**ç»“æœ**: âœ… æˆåŠŸ / âŒ å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼ˆå¦‚æœå¤±è´¥ï¼‰:
```
ï¼ˆåœ¨è¿™é‡Œç²˜è´´é”™è¯¯ä¿¡æ¯ï¼‰
```

---

### æµ‹è¯•æ­¥éª¤ 2: æäº¤äº¤æ˜“
- [ ] å¡«å†™è¡¨å•
- [ ] ç‚¹å‡» "Register Zone"
- [ ] MetaMask å¼¹çª—å‡ºç°
- [ ] Gas Limit æ˜¾ç¤ºä¸º 5,000,000
- [ ] ç‚¹å‡» "Confirm"
- [ ] äº¤æ˜“æäº¤æˆåŠŸ
- [ ] äº¤æ˜“ç¡®è®¤ï¼ˆé“¾ä¸Šï¼‰

**ç»“æœ**: âœ… æˆåŠŸ / âŒ å¤±è´¥

**Gas Limit æ˜¾ç¤º**: ___________

**Transaction Hash**: 0x...

**é”™è¯¯ä¿¡æ¯**ï¼ˆå¦‚æœå¤±è´¥ï¼‰:
```
ï¼ˆåœ¨è¿™é‡Œç²˜è´´é”™è¯¯ä¿¡æ¯ï¼‰
```

---

## ğŸ¯ é¢„æœŸè¡Œä¸ºæ€»ç»“

### âœ… åº”è¯¥æ­£å¸¸å·¥ä½œçš„åŠŸèƒ½
1. MetaMask é’±åŒ…è¿æ¥
2. æ³¨å†Œ Land Zone è¡¨å•æäº¤
3. Gas Limit è®¾ç½®ä¸º 5,000,000
4. äº¤æ˜“æˆåŠŸæäº¤åˆ° Sepolia æµ‹è¯•ç½‘
5. äº¤æ˜“ç¡®è®¤å¹¶æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯

### âš ï¸ å·²çŸ¥è­¦å‘Šï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
1. WalletConnect 403 é”™è¯¯ï¼ˆæ§åˆ¶å°æ˜¾ç¤ºï¼‰
2. "Failed to fetch remote project configuration"
3. Chrome ç¬¬ä¸‰æ–¹ Cookie è­¦å‘Š

### âŒ ä¸åº”è¯¥å‡ºç°çš„é”™è¯¯
1. "gas limit too high" é”™è¯¯
2. Gas Limit æ˜¾ç¤ºä¸º 21,000,000
3. MetaMask è¿æ¥å¤±è´¥
4. äº¤æ˜“æäº¤å¤±è´¥ï¼ˆå¦‚æœæœ‰è¶³å¤Ÿçš„ ETHï¼‰

---

## ğŸš€ åç»­æ­¥éª¤

### å¦‚æœæµ‹è¯•æˆåŠŸ
- âœ… Gas limit é—®é¢˜å·²å®Œå…¨ä¿®å¤
- âœ… åº”ç”¨å¯ä»¥æ­£å¸¸ä½¿ç”¨
- ğŸ‰ å¯ä»¥å¼€å§‹å®é™…ä½¿ç”¨æˆ–éƒ¨ç½²

### å¦‚æœä»æœ‰é—®é¢˜
è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. å®Œæ•´çš„æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ï¼ˆF12 â†’ Consoleï¼‰
2. MetaMask æ˜¾ç¤ºçš„é”™è¯¯æˆªå›¾
3. åœ¨å“ªä¸€æ­¥å¤±è´¥äº†ï¼ˆè¿æ¥é’±åŒ…ï¼Ÿè¿˜æ˜¯æäº¤äº¤æ˜“ï¼Ÿï¼‰
4. Gas Limit åœ¨ MetaMask ä¸­æ˜¾ç¤ºçš„å®é™…å€¼
5. Sepolia ETH ä½™é¢

---

## ğŸ“š ç›¸å…³æ–‡æ¡£
- [ERROR_FIXES.md](./ERROR_FIXES.md) - è¯¦ç»†é”™è¯¯ä¿®å¤è¯´æ˜
- [LANGUAGE_CONFIG.md](./LANGUAGE_CONFIG.md) - è¯­è¨€é…ç½®è¯´æ˜
- [WALLET_FIX.md](./WALLET_FIX.md) - é’±åŒ…è¿æ¥ä¼˜åŒ–è¯´æ˜

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-20
**æœ€åæ›´æ–°**: 2025-10-20 20:20 UTC
**çŠ¶æ€**: âœ… Gas Limit å·²ä¿®å¤ï¼Œç­‰å¾…ç”¨æˆ·æµ‹è¯•ç¡®è®¤
