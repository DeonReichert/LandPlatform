var YW=Object.defineProperty;var Qx=t=>{throw TypeError(t)};var QW=(t,e,n)=>e in t?YW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ls=(t,e,n)=>QW(t,typeof e!="symbol"?e+"":e,n),h3=(t,e,n)=>e.has(t)||Qx("Cannot "+n);var W=(t,e,n)=>(h3(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?Qx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ie=(t,e,n,r)=>(h3(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ot=(t,e,n)=>(h3(t,e,"access private method"),n);var $y=(t,e,n,r)=>({set _(i){Ie(t,e,i,n)},get _(){return W(t,e,r)}});import{p as JW,o as bi,q as PM,r as XW,w as eG,s as tG,t as h5,C as nG,v as nv,x as f5,y as V4,z as rG,A as iG,B as sG,D as oG,E as aG,F as cG,G as lG,H as uG,I as dG,S as pu,J as Pn,U as _n,K as p5,L as W4,R as om,M as cb,N as hG,O as fG,h as Xf,P as pG,l as rv,Q as qf,T as U2,V as G4,W as gG,X as mG,Y as gu,Z as lb,_ as TM,$ as Jx,a0 as g5,a1 as wG,a2 as yG,a3 as bG,a4 as vG,a5 as Ba,a6 as kM,a7 as NM,a8 as $M,a9 as EG,aa as CG,ab as _G,ac as SG,ad as AG,ae as xG,af as RM,ag as IG,ah as OG,ai as PG,aj as TG,ak as Xx}from"./web3-wallet.1yHtwIPy.js";import{g as Lu,r as Et,j as Nn,h as Mn,i as Z4}from"./react-vendor.D7v7it0Q.js";import{_ as me}from"./rainbowkit.hmIfq-va.js";function kG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var MM={exports:{}},DM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,C){var P=E.length;E.push(C);e:for(;0<P;){var M=P-1>>>1,I=E[M];if(0<i(I,C))E[M]=C,E[P]=I,P=M;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var C=E[0],P=E.pop();if(P!==C){E[0]=P;e:for(var M=0,I=E.length,k=I>>>1;M<k;){var R=2*(M+1)-1,U=E[R],q=R+1,H=E[q];if(0>i(U,P))q<I&&0>i(H,U)?(E[M]=H,E[q]=P,M=q):(E[M]=U,E[R]=P,M=R);else if(q<I&&0>i(H,P))E[M]=H,E[q]=P,M=q;else break e}}return C}function i(E,C){var P=E.sortIndex-C.sortIndex;return P!==0?P:E.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(E){for(var C=n(l);C!==null;){if(C.callback===null)r(l);else if(C.startTime<=E)r(l),C.sortIndex=C.expirationTime,e(c,C);else break;C=n(l)}}function _(E){if(g=!1,y(E),!p)if(n(c)!==null)p=!0,S(A);else{var C=n(l);C!==null&&N(_,C.startTime-E)}}function A(E,C){p=!1,g&&(g=!1,w(D),D=-1),f=!0;var P=h;try{for(y(C),d=n(c);d!==null&&(!(d.expirationTime>C)||E&&!F());){var M=d.callback;if(typeof M=="function"){d.callback=null,h=d.priorityLevel;var I=M(d.expirationTime<=C);C=t.unstable_now(),typeof I=="function"?d.callback=I:d===n(c)&&r(c),y(C)}else r(c);d=n(c)}if(d!==null)var k=!0;else{var R=n(l);R!==null&&N(_,R.startTime-C),k=!1}return k}finally{d=null,h=P,f=!1}}var T=!1,$=null,D=-1,O=5,j=-1;function F(){return!(t.unstable_now()-j<O)}function L(){if($!==null){var E=t.unstable_now();j=E;var C=!0;try{C=$(!0,E)}finally{C?B():(T=!1,$=null)}}else T=!1}var B;if(typeof b=="function")B=function(){b(L)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,v=x.port2;x.port1.onmessage=L,B=function(){v.postMessage(null)}}else B=function(){m(L,0)};function S(E){$=E,T||(T=!0,B())}function N(E,C){D=m(function(){E(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,S(A))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(E){switch(h){case 1:case 2:case 3:var C=3;break;default:C=h}var P=h;h=C;try{return E()}finally{h=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,C){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var P=h;h=E;try{return C()}finally{h=P}},t.unstable_scheduleCallback=function(E,C,P){var M=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?M+P:M):P=M,E){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=P+I,E={id:u++,callback:C,priorityLevel:E,startTime:P,expirationTime:I,sortIndex:-1},P>M?(E.sortIndex=P,e(l,E),n(c)===null&&E===n(l)&&(g?(w(D),D=-1):g=!0,N(_,P-M))):(E.sortIndex=I,e(c,E),p||f||(p=!0,S(A))),E},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(E){var C=h;return function(){var P=h;h=C;try{return E.apply(this,arguments)}finally{h=P}}}})(DM);MM.exports=DM;var KBe=MM.exports;const NG="1.1.0";let Xi=class m5 extends Error{constructor(e,n={}){const r=n.cause instanceof m5?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof m5&&n.cause.docsPath||n.docsPath,s=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${NG}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Jc(t,e){return t.exec(e)?.groups}const BM=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,LM=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,UM=/^\(.+?\).*?$/,eI=/^tuple(?<array>(\[(\d*)\])*)$/;function w5(t){let e=t.type;if(eI.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let i=0;i<n;i++){const s=t.components[i];e+=w5(s),i<n-1&&(e+=", ")}const r=Jc(eI,t.type);return e+=`)${r?.array??""}`,w5({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Hf(t){let e="";const n=t.length;for(let r=0;r<n;r++){const i=t[r];e+=w5(i),r!==n-1&&(e+=", ")}return e}function y5(t){return t.type==="function"?`function ${t.name}(${Hf(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${Hf(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Hf(t.inputs)})`:t.type==="error"?`error ${t.name}(${Hf(t.inputs)})`:t.type==="constructor"?`constructor(${Hf(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const jM=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function $G(t){return jM.test(t)}function RG(t){return Jc(jM,t)}const FM=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function MG(t){return FM.test(t)}function DG(t){return Jc(FM,t)}const qM=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function BG(t){return qM.test(t)}function LG(t){return Jc(qM,t)}const HM=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function j2(t){return HM.test(t)}function UG(t){return Jc(HM,t)}const zM=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function jG(t){return zM.test(t)}function FG(t){return Jc(zM,t)}const KM=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function qG(t){return KM.test(t)}function HG(t){return Jc(KM,t)}const zG=/^receive\(\) external payable$/;function KG(t){return zG.test(t)}const tI=new Set(["memory","indexed","storage","calldata"]),VG=new Set(["indexed"]),b5=new Set(["calldata","memory","storage"]);class WG extends Xi{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class GG extends Xi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class ZG extends Xi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class YG extends Xi{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class QG extends Xi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class JG extends Xi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class XG extends Xi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class eZ extends Xi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class tZ extends Xi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Hg extends Xi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class nZ extends Xi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class rZ extends Xi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class iZ extends Xi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class sZ extends Xi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function oZ(t,e,n){let r="";if(n)for(const i of Object.entries(n)){if(!i)continue;let s="";for(const o of i[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${i[0]}{${s}})`}return e?`${e}:${t}${r}`:t}const f3=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function v5(t,e={}){if(BG(t))return aZ(t,e);if(MG(t))return cZ(t,e);if($G(t))return lZ(t,e);if(jG(t))return uZ(t,e);if(qG(t))return dZ(t);if(KG(t))return{type:"receive",stateMutability:"payable"};throw new nZ({signature:t})}function aZ(t,e={}){const n=LG(t);if(!n)throw new Hg({signature:t,type:"function"});const r=Es(n.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(Vc(r[a],{modifiers:b5,structs:e,type:"function"}));const o=[];if(n.returns){const a=Es(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Vc(a[l],{modifiers:b5,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:i,outputs:o}}function cZ(t,e={}){const n=DG(t);if(!n)throw new Hg({signature:t,type:"event"});const r=Es(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Vc(r[o],{modifiers:VG,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:i}}function lZ(t,e={}){const n=RG(t);if(!n)throw new Hg({signature:t,type:"error"});const r=Es(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Vc(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:i}}function uZ(t,e={}){const n=FG(t);if(!n)throw new Hg({signature:t,type:"constructor"});const r=Es(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Vc(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:i}}function dZ(t){const e=HG(t);if(!e)throw new Hg({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const hZ=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,fZ=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,pZ=/^u?int$/;function Vc(t,e){const n=oZ(t,e?.type,e?.structs);if(f3.has(n))return f3.get(n);const r=UM.test(t),i=Jc(r?fZ:hZ,t);if(!i)throw new QG({param:t});if(i.name&&mZ(i.name))throw new JG({param:t,name:i.name});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,l={};if(r){c="tuple";const d=Es(i.type),h=[],f=d.length;for(let p=0;p<f;p++)h.push(Vc(d[p],{structs:a}));l={components:h}}else if(i.type in a)c="tuple",l={components:a[i.type]};else if(pZ.test(i.type))c=`${i.type}256`;else if(i.type==="address payable")c="address";else if(c=i.type,e?.type!=="struct"&&!VM(c))throw new ZG({type:c});if(i.modifier){if(!e?.modifiers?.has?.(i.modifier))throw new XG({param:t,type:e?.type,modifier:i.modifier});if(b5.has(i.modifier)&&!wZ(c,!!i.array))throw new eZ({param:t,type:e?.type,modifier:i.modifier})}const u={type:`${c}${i.array??""}`,...s,...o,...l};return f3.set(n,u),u}function Es(t,e=[],n="",r=0){const i=t.trim().length;for(let s=0;s<i;s++){const o=t[s],a=t.slice(s+1);switch(o){case",":return r===0?Es(a,[...e,n.trim()]):Es(a,e,`${n}${o}`,r);case"(":return Es(a,e,`${n}${o}`,r+1);case")":return Es(a,e,`${n}${o}`,r-1);default:return Es(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new sZ({current:n,depth:r});return e.push(n.trim()),e}function VM(t){return t==="address"||t==="bool"||t==="function"||t==="string"||BM.test(t)||LM.test(t)}const gZ=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function mZ(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||BM.test(t)||LM.test(t)||gZ.test(t)}function wZ(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Y4(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!j2(a))continue;const c=UG(a);if(!c)throw new Hg({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Vc(p,{type:"struct"});u.push(g)}if(!u.length)throw new rZ({signature:a});e[c.name]=u}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,c]=i[o];r[a]=WM(c,e)}return r}const yZ=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function WM(t,e,n=new Set){const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(UM.test(o.type))r.push(o);else{const c=Jc(yZ,o.type);if(!c?.type)throw new tZ({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new iZ({type:u});r.push({...o,type:`tuple${l??""}`,components:WM(e[u]??[],e,new Set([...n,u]))})}else if(VM(u))r.push(o);else throw new GG({type:u})}}return r}function VBe(t){const e=Y4(t),n=[],r=t.length;for(let i=0;i<r;i++){const s=t[i];j2(s)||n.push(v5(s,e))}return n}function nI(t){let e;if(typeof t=="string")e=v5(t);else{const n=Y4(t),r=t.length;for(let i=0;i<r;i++){const s=t[i];if(!j2(s)){e=v5(s,n);break}}}if(!e)throw new WG({signature:t});return e}function rI(t){const e=[];if(typeof t=="string"){const n=Es(t),r=n.length;for(let i=0;i<r;i++)e.push(Vc(n[i],{modifiers:tI}))}else{const n=Y4(t),r=t.length;for(let i=0;i<r;i++){const s=t[i];if(j2(s))continue;const o=Es(s),a=o.length;for(let c=0;c<a;c++)e.push(Vc(o[c],{modifiers:tI,structs:n}))}}if(e.length===0)throw new YG({params:t});return e}const bZ="0.1.1";function vZ(){return bZ}let wt=class E5 extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof E5){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof E5&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${vZ()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return GM(this,e)}};function GM(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?GM(t.cause,e):e?null:t}function Bw(t,e){if(ep(t)>e)throw new BZ({givenSize:ep(t),maxSize:e})}const Ga={zero:48,nine:57,A:65,F:70,a:97,f:102};function iI(t){if(t>=Ga.zero&&t<=Ga.nine)return t-Ga.zero;if(t>=Ga.A&&t<=Ga.F)return t-(Ga.A-10);if(t>=Ga.a&&t<=Ga.f)return t-(Ga.a-10)}function EZ(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new LZ({size:t.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";i[o?s:r-s-1]=t[o?s:t.length-s-1]}return i}function ZM(t,e={}){const{dir:n="left"}=e;let r=t,i=0;for(let s=0;s<r.length-1&&r[n==="left"?s:r.length-s-1].toString()==="0";s++)i++;return r=n==="left"?r.slice(i):r.slice(0,r.length-i),r}function F2(t,e){if(xs(t)>e)throw new zZ({givenSize:xs(t),maxSize:e})}function CZ(t,e){if(typeof e=="number"&&e>0&&e>xs(t)-1)throw new iD({offset:e,position:"start",size:xs(t)})}function _Z(t,e,n){if(typeof e=="number"&&typeof n=="number"&&xs(t)!==n-e)throw new iD({offset:n,position:"end",size:xs(t)})}function YM(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const i=t.replace("0x","");if(i.length>r*2)throw new KZ({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const SZ="#__bigint";function QM(t,e,n){return JSON.stringify(t,(r,i)=>typeof i=="bigint"?i.toString()+SZ:i,n)}const AZ=new TextDecoder,xZ=new TextEncoder;function IZ(t){return t instanceof Uint8Array?t:typeof t=="string"?JM(t):OZ(t)}function OZ(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function JM(t,e={}){const{size:n}=e;let r=t;n&&(F2(t,n),r=Xd(t,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=iI(i.charCodeAt(c++)),u=iI(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new wt(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function PZ(t,e={}){const{size:n}=e,r=xZ.encode(t);return typeof n=="number"?(Bw(r,n),TZ(r,n)):r}function TZ(t,e){return EZ(t,{dir:"right",size:e})}function ep(t){return t.length}function kZ(t,e,n,r={}){const{strict:i}=r;return t.slice(e,n)}function NZ(t,e={}){const{size:n}=e;typeof n<"u"&&Bw(t,n);const r=Wo(t,e);return tD(r,e)}function $Z(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(Bw(r,n),r=XM(r)),r.length>1||r[0]>1)throw new DZ(r);return!!r[0]}function Lc(t,e={}){const{size:n}=e;typeof n<"u"&&Bw(t,n);const r=Wo(t,e);return nD(r,e)}function RZ(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(Bw(r,n),r=MZ(r)),AZ.decode(r)}function XM(t){return ZM(t,{dir:"left"})}function MZ(t){return ZM(t,{dir:"right"})}class DZ extends wt{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let BZ=class extends wt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},LZ=class extends wt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const UZ=new TextEncoder,jZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function FZ(t,e={}){const{strict:n=!1}=e;if(!t)throw new sI(t);if(typeof t!="string")throw new sI(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new oI(t);if(!t.startsWith("0x"))throw new oI(t)}function Vo(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function qZ(t){return t instanceof Uint8Array?Wo(t):Array.isArray(t)?Wo(new Uint8Array(t)):t}function eD(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(F2(n,e.size),Jd(n,e.size)):n}function Wo(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=jZ[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(F2(r,e.size),Xd(r,e.size)):r}function wi(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new rD({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Jd(c,r):c}function Q4(t,e={}){return Wo(UZ.encode(t),e)}function Jd(t,e){return YM(t,{dir:"left",size:e})}function Xd(t,e){return YM(t,{dir:"right",size:e})}function Pa(t,e,n,r={}){const{strict:i}=r;CZ(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return i&&_Z(s,e,n),s}function xs(t){return Math.ceil((t.length-2)/2)}function tD(t,e={}){const{signed:n}=e;e.size&&F2(t,e.size);const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n)-1n,o=s>>1n;return r<=o?r:r-s-1n}function nD(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:tD(t,e))}function HZ(t,e={}){const{strict:n=!1}=e;try{return FZ(t,{strict:n}),!0}catch{return!1}}let rD=class extends wt{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},sI=class extends wt{constructor(e){super(`Value \`${typeof e=="object"?QM(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},oI=class extends wt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},zZ=class extends wt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},iD=class extends wt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},KZ=class extends wt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function VZ(t){return{address:t.address,amount:wi(t.amount),index:wi(t.index),validatorIndex:wi(t.validatorIndex)}}function tLe(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:wi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:wi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:wi(t.gasLimit)},...typeof t.number=="bigint"&&{number:wi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:wi(t.prevRandao)},...typeof t.time=="bigint"&&{time:wi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(VZ)}}}class WZ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const GZ={checksum:new WZ(8192)},p3=GZ.checksum;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function aI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function iv(t,...e){if(!ZZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function YZ(t,e){iv(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function QZ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function sD(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const JZ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function XZ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function eY(t){for(let e=0;e<t.length;e++)t[e]=XZ(t[e]);return t}const lI=JZ?t=>t:eY;function tY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function oD(t){return typeof t=="string"&&(t=tY(t)),iv(t),t}let nY=class{};function rY(t){const e=r=>t().update(oD(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const Ry=BigInt(2**32-1),uI=BigInt(32);function iY(t,e=!1){return e?{h:Number(t&Ry),l:Number(t>>uI&Ry)}:{h:Number(t>>uI&Ry)|0,l:Number(t&Ry)|0}}function sY(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=iY(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const oY=(t,e,n)=>t<<n|e>>>32-n,aY=(t,e,n)=>e<<n|t>>>32-n,cY=(t,e,n)=>e<<n-32|t>>>64-n,lY=(t,e,n)=>t<<n-32|e>>>64-n,uY=BigInt(0),h0=BigInt(1),dY=BigInt(2),hY=BigInt(7),fY=BigInt(256),pY=BigInt(113),aD=[],cD=[],lD=[];for(let t=0,e=h0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],aD.push(2*(5*r+n)),cD.push((t+1)*(t+2)/2%64);let i=uY;for(let s=0;s<7;s++)e=(e<<h0^(e>>hY)*pY)%fY,e&dY&&(i^=h0<<(h0<<BigInt(s))-h0);lD.push(i)}const uD=sY(lD,!0),gY=uD[0],mY=uD[1],dI=(t,e,n)=>n>32?cY(t,e,n):oY(t,e,n),hI=(t,e,n)=>n>32?lY(t,e,n):aY(t,e,n);function wY(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=dI(l,u,1)^n[a],h=hI(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=cD[o],c=dI(i,s,a),l=hI(i,s,a),u=aD[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=gY[r],t[1]^=mY[r]}sD(n)}let yY=class dD extends nY{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,aI(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=QZ(this.state)}clone(){return this._cloneInto()}keccak(){lI(this.state32),wY(this.state32,this.rounds),lI(this.state32),this.posOut=0,this.pos=0}update(e){cI(this),e=oD(e),iv(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){cI(this,!1),iv(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return aI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(YZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,sD(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new dD(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const bY=(t,e,n)=>rY(()=>new yY(e,t,n)),vY=bY(1,136,256/8);function hD(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=vY(IZ(t));return n==="Bytes"?r:Wo(r)}const EY=/^0x[a-fA-F0-9]{40}$/;function q2(t,e={}){const{strict:n=!0}=e;if(!EY.test(t))throw new fI({address:t,cause:new CY});if(n){if(t.toLowerCase()===t)return;if(fD(t)!==t)throw new fI({address:t,cause:new _Y})}}function fD(t){if(p3.has(t))return p3.get(t);q2(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=hD(PZ(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return p3.set(t,i),i}function C5(t,e={}){const{strict:n=!0}=e??{};try{return q2(t,{strict:n}),!0}catch{return!1}}class fI extends wt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class CY extends wt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class _Y extends wt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const SY=/^(.*)\[([0-9]*)\]$/,AY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,pD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,pI=2n**256n-1n;function bp(t,e,n){const{checksumAddress:r,staticPosition:i}=n,s=e6(e.type);if(s){const[o,a]=s;return IY(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:i})}if(e.type==="tuple")return kY(t,e,{checksumAddress:r,staticPosition:i});if(e.type==="address")return xY(t,{checksum:r});if(e.type==="bool")return OY(t);if(e.type.startsWith("bytes"))return PY(t,e,{staticPosition:i});if(e.type.startsWith("uint")||e.type.startsWith("int"))return TY(t,e);if(e.type==="string")return NY(t,{staticPosition:i});throw new n6(e.type)}const gI=32,_5=32;function xY(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(s=>n?fD(s):s)(Wo(kZ(r,-20))),32]}function IY(t,e,n){const{checksumAddress:r,length:i,staticPosition:s}=n;if(!i){const c=Lc(t.readBytes(_5)),l=s+c,u=l+gI;t.setPosition(l);const d=Lc(t.readBytes(gI)),h=Nm(e);let f=0;const p=[];for(let g=0;g<d;++g){t.setPosition(u+(h?g*32:f));const[m,w]=bp(t,e,{checksumAddress:r,staticPosition:u});f+=w,p.push(m)}return t.setPosition(s+32),[p,32]}if(Nm(e)){const c=Lc(t.readBytes(_5)),l=s+c,u=[];for(let d=0;d<i;++d){t.setPosition(l+d*32);const[h]=bp(t,e,{checksumAddress:r,staticPosition:l});u.push(h)}return t.setPosition(s+32),[u,32]}let o=0;const a=[];for(let c=0;c<i;++c){const[l,u]=bp(t,e,{checksumAddress:r,staticPosition:s+o});o+=u,a.push(l)}return[a,o]}function OY(t){return[$Z(t.readBytes(32),{size:32}),32]}function PY(t,e,{staticPosition:n}){const[r,i]=e.type.split("bytes");if(!i){const o=Lc(t.readBytes(32));t.setPosition(n+o);const a=Lc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Wo(c),32]}return[Wo(t.readBytes(Number.parseInt(i,10),32)),32]}function TY(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),i=t.readBytes(32);return[r>48?NZ(i,{signed:n}):Lc(i,{signed:n}),32]}function kY(t,e,n){const{checksumAddress:r,staticPosition:i}=n,s=e.components.length===0||e.components.some(({name:c})=>!c),o=s?[]:{};let a=0;if(Nm(e)){const c=Lc(t.readBytes(_5)),l=i+c;for(let u=0;u<e.components.length;++u){const d=e.components[u];t.setPosition(l+a);const[h,f]=bp(t,d,{checksumAddress:r,staticPosition:l});a+=f,o[s?u:d?.name]=h}return t.setPosition(i+32),[o,32]}for(let c=0;c<e.components.length;++c){const l=e.components[c],[u,d]=bp(t,l,{checksumAddress:r,staticPosition:i});o[s?c:l?.name]=u,a+=d}return[o,a]}function NY(t,{staticPosition:e}){const n=Lc(t.readBytes(32)),r=e+n;t.setPosition(r);const i=Lc(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=RZ(XM(s));return t.setPosition(e+32),[o,32]}function $Y({checksumAddress:t,parameters:e,values:n}){const r=[];for(let i=0;i<e.length;i++)r.push(J4({checksumAddress:t,parameter:e[i],value:n[i]}));return r}function J4({checksumAddress:t=!1,parameter:e,value:n}){const r=e,i=e6(r.type);if(i){const[s,o]=i;return MY(n,{checksumAddress:t,length:s,parameter:{...r,type:o}})}if(r.type==="tuple")return jY(n,{checksumAddress:t,parameter:r});if(r.type==="address")return RY(n,{checksum:t});if(r.type==="bool")return BY(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const s=r.type.startsWith("int"),[,,o="256"]=pD.exec(r.type)??[];return LY(n,{signed:s,size:Number(o)})}if(r.type.startsWith("bytes"))return DY(n,{type:r.type});if(r.type==="string")return UY(n);throw new n6(r.type)}function X4(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=xs(a)}const n=[],r=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(n.push(wi(e+i,{size:32})),r.push(a),i+=xs(a)):n.push(a)}return Vo(...n,...r)}function RY(t,e){const{checksum:n=!1}=e;return q2(t,{strict:n}),{dynamic:!1,encoded:Jd(t.toLowerCase())}}function MY(t,e){const{checksumAddress:n,length:r,parameter:i}=e,s=r===null;if(!Array.isArray(t))throw new ZY(t);if(!s&&t.length!==r)throw new GY({expectedLength:r,givenLength:t.length,type:`${i.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=J4({checksumAddress:n,parameter:i,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(s||o){const c=X4(a);if(s){const l=wi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Vo(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Vo(...a.map(({encoded:c})=>c))}}function DY(t,{type:e}){const[,n]=e.split("bytes"),r=xs(t);if(!n){let i=t;return r%32!==0&&(i=Xd(i,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Vo(Jd(wi(r,{size:32})),i)}}if(r!==Number.parseInt(n,10))throw new mD({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Xd(t)}}function BY(t){if(typeof t!="boolean")throw new wt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Jd(eD(t))}}function LY(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,i=e?-r-1n:0n;if(t>r||t<i)throw new rD({max:r.toString(),min:i.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:wi(t,{size:32,signed:e})}}function UY(t){const e=Q4(t),n=Math.ceil(xs(e)/32),r=[];for(let i=0;i<n;i++)r.push(Xd(Pa(e,i*32,(i+1)*32)));return{dynamic:!0,encoded:Vo(Xd(wi(xs(e),{size:32})),...r)}}function jY(t,e){const{checksumAddress:n,parameter:r}=e;let i=!1;const s=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=J4({checksumAddress:n,parameter:a,value:t[c]});s.push(l),l.dynamic&&(i=!0)}return{dynamic:i,encoded:i?X4(s):Vo(...s.map(({encoded:o})=>o))}}function e6(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Nm(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(Nm);const n=e6(t.type);return!!(n&&Nm({...t,type:n[1]}))}const FY={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new zY({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new HY({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new mI({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new mI({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function qY(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(FY);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class mI extends wt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class HY extends wt{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class zY extends wt{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function KY(t,e,n={}){const{as:r="Array",checksumAddress:i=!1}=n,s=typeof e=="string"?JM(e):e,o=qY(s);if(ep(s)===0&&t.length>0)throw new WY;if(ep(s)&&ep(s)<32)throw new VY({data:typeof e=="string"?e:Wo(e),parameters:t,size:ep(s)});let a=0;const c=r==="Array"?[]:{};for(let l=0;l<t.length;++l){const u=t[l];o.setPosition(a);const[d,h]=bp(o,u,{checksumAddress:i,staticPosition:0});a+=h,r==="Array"?c.push(d):c[u.name??l]=d}return c}function t6(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new wD({expectedLength:t.length,givenLength:e.length});const i=$Y({checksumAddress:r,parameters:t,values:e}),s=X4(i);return s.length===0?"0x":s}function S5(t,e){if(t.length!==e.length)throw new wD({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=e[r];n.push(S5.encode(i,s))}return Vo(...n)}(function(t){function e(n,r,i=!1){if(n==="address"){const c=r;return q2(c),Jd(c.toLowerCase(),i?32:0)}if(n==="string")return Q4(r);if(n==="bytes")return r;if(n==="bool")return Jd(eD(r),i?32:1);const s=n.match(pD);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u,10)/8;return wi(r,{size:i?32:d,signed:l==="int"})}const o=n.match(AY);if(o){const[c,l]=o;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new mD({expectedSize:Number.parseInt(l,10),value:r});return Xd(r,i?32:0)}const a=n.match(SY);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Vo(...u)}throw new n6(n)}t.encode=e})(S5||(S5={}));function gD(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?rI(t):t}class VY extends wt{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Hf(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class WY extends wt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class GY extends wt{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class mD extends wt{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${xs(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class wD extends wt{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ZY extends wt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class n6 extends wt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function yD(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new g3({signature:t});if(typeof t.s>"u")throw new g3({signature:t});if(n&&typeof t.yParity>"u")throw new g3({signature:t});if(t.r<0n||t.r>pI)throw new nQ({value:t.r});if(t.s<0n||t.s>pI)throw new rQ({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new i6({value:t.yParity})}function YY(t){return bD(Wo(t))}function bD(t){if(t.length!==130&&t.length!==132)throw new tQ({signature:t});const e=BigInt(Pa(t,0,32)),n=BigInt(Pa(t,32,64)),r=(()=>{const i=+`0x${t.slice(130)}`;if(!Number.isNaN(i))try{return r6(i)}catch{throw new i6({value:i})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function QY(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return JY(t)}function JY(t){const e=typeof t=="string"?bD(t):t instanceof Uint8Array?YY(t):typeof t.r=="string"?eQ(t):t.v?XY(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return yD(e),e}function XY(t){return{r:t.r,s:t.s,yParity:r6(t.v)}}function eQ(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=r6(n)),typeof r!="number")throw new i6({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function r6(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new iQ({value:t})}let tQ=class extends wt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xs(qZ(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},g3=class extends wt{constructor({signature:e}){super(`Signature \`${QM(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},nQ=class extends wt{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},rQ=class extends wt{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},i6=class extends wt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},iQ=class extends wt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function sQ(t,e={}){return typeof t.chainId=="string"?oQ(t):{...t,...e.signature}}function oQ(t){const{address:e,chainId:n,nonce:r}=t,i=QY(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...i}}const aQ="0x8010801080108010801080108010801080108010801080108010801080108010",cQ=gD("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function vD(t){if(typeof t=="string"){if(Pa(t,-32)!==aQ)throw new lQ(t)}else yD(t.authorization)}function lLe(t){vD(t);const e=nD(Pa(t,-64,-32)),n=Pa(t,-e-64,-64),r=Pa(t,0,-e-64),[i,s,o]=KY(cQ,n);return{authorization:sQ({address:i.delegation,chainId:Number(i.chainId),nonce:i.nonce,yParity:i.yParity,r:i.r,s:i.s}),signature:r,...o&&o!=="0x"?{data:o,to:s}:{}}}function uLe(t){try{return vD(t),!0}catch{return!1}}let lQ=class extends wt{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function A5(t){let e=!0,n="",r=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}i+=a,n+=a}}if(!s)throw new wt("Unable to normalize signature.");return i}function x5(t,e){const n=typeof t,r=e.type;switch(r){case"address":return C5(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>x5(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(i=>x5(i,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ED(t,e,n){for(const r in t){const i=t[r],s=e[r];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return ED(i.components,s.components,n[r]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?C5(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?C5(n[r],{strict:!1}):!1)return o}}function CD(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?nI(t):t;return{...r,...n?{hash:tp(r)}:{}}}function H2(t,e,n){const{args:r=[],prepare:i=!0}=n??{},s=HZ(e,{strict:!1}),o=t.filter(l=>s?l.type==="function"||l.type==="error"?_D(l)===Pa(e,0,4):l.type==="event"?tp(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new sv({name:e});if(o.length===1)return{...o[0],...i?{hash:tp(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...i?{hash:tp(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?x5(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=ED(l.inputs,a.inputs,r);if(d)throw new dQ({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new sv({name:e});return{...c,...i?{hash:tp(c)}:{}}}function _D(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return H2(n,r)}return t[0]})();return Pa(tp(e),0,4)}function uQ(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,i]=t;return H2(r,i)}return t[0]})(),n=typeof e=="string"?e:y5(e);return A5(n)}function tp(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return H2(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:hD(Q4(uQ(e)))}class dQ extends wt{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${A5(y5(e.abiItem))}\`, and`,`\`${n.type}\` in \`${A5(y5(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class sv extends wt{constructor({name:e,data:n,type:r="item"}){const i=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${i} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function hLe(...t){const[e,n]=(()=>{if(Array.isArray(t[0])){const[s,o]=t;return[hQ(s),o]}return t})(),{bytecode:r,args:i}=n;return Vo(r,e.inputs?.length&&i?.length?t6(e.inputs,i):"0x")}function fLe(t){return CD(t)}function hQ(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new sv({name:"constructor"});return e}function pLe(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[l,u,d]=t;return[wI(l,u,{args:d}),d]}const[a,c]=t;return[a,c]})(),{overloads:r}=e,i=r?wI([e,...r],e.name,{args:n}):e,s=fQ(i),o=n.length>0?t6(i.inputs,n):void 0;return o?Vo(s,o):s}function gLe(t,e={}){return CD(t,e)}function wI(t,e,n){const r=H2(t,e,n);if(r.type!=="function")throw new sv({name:e,type:"function"});return r}function fQ(t){return _D(t)}const SD="0x6492649264926492649264926492649264926492649264926492649264926492";function pQ(t){if(Pa(t,-32)!==SD)throw new gQ(t)}function mLe(t){const{data:e,signature:n,to:r}=t;return Vo(t6(gD("address, bytes, bytes"),[r,e,n]),SD)}function wLe(t){try{return pQ(t),!0}catch{return!1}}class gQ extends wt{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Ta(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const i=t[n];return typeof i=="function"?i:s=>e(t,s)}const ub="2.22.1",mQ=()=>`@wagmi/core@${ub}`;var AD=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ov,xD;let Uu=class I5 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return mQ()}constructor(e,n={}){super(),ov.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof I5?n.cause.details:n.cause?.message?n.cause.message:n.details,i=n.cause instanceof I5&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${this.docsBaseUrl}${i}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return AD(this,ov,"m",xD).call(this,this,e)}};ov=new WeakSet,xD=function t(e,n){return n?.(e)?e:e.cause?AD(this,ov,"m",t).call(this,e.cause,n):e};class eh extends Uu{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class wQ extends Uu{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class yQ extends Uu{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class bQ extends Uu{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class vQ extends Uu{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class EQ extends Uu{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function CQ(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new wQ;try{t.setState(o=>({...o,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...i}=e,s=await n.connect(i);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(o=>({...o,connections:new Map(o.connections).set(n.uid,{accounts:i.withCapabilities?s.accounts.map(a=>typeof a=="object"?a.address:a):s.accounts,chainId:s.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:i.withCapabilities?s.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):s.accounts,chainId:s.chainId}}catch(r){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),r}}async function ID(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new EQ({connector:u});const[d,h]=await Promise.all([u.getAccounts().catch(f=>{if(e.account===null)return[];throw f}),u.getChainId()]);r={accounts:d,chainId:h,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new yQ;const i=e.chainId??r.chainId,s=await r.connector.getChainId();if(n&&s!==i)throw new vQ({connectionChainId:i,connectorChainId:s});const o=r.connector;if(o.getClient)return o.getClient({chainId:i});const a=JW(e.account??r.accounts[0]);if(a&&(a.address=bi(a.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===a.address.toLowerCase()))throw new bQ({address:a.address,connector:o});const c=t.chains.find(u=>u.id===i),l=await r.connector.getProvider({chainId:i});return PM({account:a,chain:c,name:"Connector Client",transport:u=>XW(l)({...u,retryCount:0})})}async function _Q(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:i,current:s}=t.state;n=i.get(s)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(i=>{if(r.size===0)return{...i,connections:new Map,current:null,status:"disconnected"};const s=r.values().next().value;return{...i,connections:new Map(r),current:s.connector.uid}});{const i=t.state.current;if(!i)return;const s=t.state.connections.get(i)?.connector;if(!s)return;await t.storage?.setItem("recentConnectorId",s.id)}}function OD(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(eG[t])}function SQ(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,i=r?.[0],s=t.chains.find(a=>a.id===n?.chainId),o=t.state.status;switch(o){case"connected":return{address:i,addresses:r,chain:s,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:i,addresses:r,chain:s,chainId:n?.chainId,connector:n?.connector,isConnected:!!i,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:i,addresses:r,chain:s,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function AQ(t,e){const{allowFailure:n=!0,chainId:r,contracts:i,...s}=e,o=t.getClient({chainId:r});return Ta(o,tG,"multicall")({allowFailure:n,contracts:i,...s})}function xQ(t,e){const{chainId:n,...r}=e,i=t.getClient({chainId:n});return Ta(i,h5,"readContract")(r)}async function IQ(t,e){const{allowFailure:n=!0,blockNumber:r,blockTag:i,...s}=e,o=e.contracts;try{const a={};for(const[d,h]of o.entries()){const f=h.chainId??t.state.chainId;a[f]||(a[f]=[]),a[f]?.push({contract:h,index:d})}const c=()=>Object.entries(a).map(([d,h])=>AQ(t,{...s,allowFailure:n,blockNumber:r,blockTag:i,chainId:Number.parseInt(d,10),contracts:h.map(({contract:f})=>f)})),l=(await Promise.all(c())).flat(),u=Object.values(a).flatMap(d=>d.map(({index:h})=>h));return l.reduce((d,h,f)=>(d&&(d[u[f]]=h),d),[])}catch(a){if(a instanceof nG)throw a;const c=()=>o.map(l=>xQ(t,{...l,blockNumber:r,blockTag:i}));return n?(await Promise.allSettled(c())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(c())}}async function OQ(t,e){const{address:n,blockNumber:r,blockTag:i,chainId:s,token:o,unit:a="ether"}=e;if(o)try{return await yI(t,{balanceAddress:n,chainId:s,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await yI(t,{balanceAddress:n,chainId:s,symbolType:"bytes32",tokenAddress:o}),p=nv(f5(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:s}),u=await Ta(c,rG,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:i}),d=t.chains.find(h=>h.id===s)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:V4(u,OD(a)),symbol:d.nativeCurrency.symbol,value:u}}async function yI(t,e){const{balanceAddress:n,chainId:r,symbolType:i,tokenAddress:s,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:s},[c,l,u]=await IQ(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=V4(c??"0",OD(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function yLe(t){return t.state.chainId}function Kp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kp(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(s&&!Kp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}let m3=[];function bLe(t){const e=t.chains;return Kp(m3,e)?m3:(m3=e,e)}function PQ(t,e={}){try{return t.getClient(e)}catch{return}}let My=[];function TQ(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Kp(My,e)?My:(My=e,e)}let Dy=[];function vLe(t){const e=t.connectors;return Dy.length===e.length&&Dy.every((n,r)=>n===e[r])?Dy:(Dy=e,e)}function kQ(t,e){const{chainId:n,...r}=e,i=t.getClient({chainId:n});return Ta(i,iG,"getEnsAvatar")(r)}function NQ(t,e){const{chainId:n,...r}=e,i=t.getClient({chainId:n});return Ta(i,sG,"getEnsName")(r)}function $Q(t,e={}){return PQ(t,e)?.extend(oG)}let w3=!1;async function RQ(t,e={}){if(w3)return[];w3=!0,t.setState(l=>({...l,status:l.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const l of e.connectors){let u;typeof l=="function"?u=t._internal.connectors.setup(l):u=l,n.push(u)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const i={};for(const[,l]of t.state.connections)i[l.connector.id]=1;r&&(i[r]=0);const s=Object.keys(i).length>0?[...n].sort((l,u)=>(i[l.id]??10)-(i[u.id]??10)):n;let o=!1;const a=[],c=[];for(const l of s){const u=await l.getProvider().catch(()=>{});if(!u||c.some(f=>f===u)||!await l.isAuthorized())continue;const h=await l.connect({isReconnecting:!0}).catch(()=>null);h&&(l.emitter.off("connect",t._internal.events.connect),l.emitter.on("change",t._internal.events.change),l.emitter.on("disconnect",t._internal.events.disconnect),t.setState(f=>{const p=new Map(o?f.connections:new Map).set(l.uid,{accounts:h.accounts,chainId:h.chainId,connector:l});return{...f,current:o?f.current:l.uid,connections:p}}),a.push({accounts:h.accounts,chainId:h.chainId,connector:l}),c.push(u),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(l=>({...l,status:"connected"})):t.setState(l=>({...l,connections:new Map,current:null,status:"disconnected"}))),w3=!1,a}async function MQ(t,e){const{account:n,connector:r,...i}=e;let s;return typeof n=="object"&&n.type==="local"?s=t.getClient():s=await ID(t,{account:n,connector:r}),Ta(s,aG,"signMessage")({...i,...n?{account:n}:{}})}class vs extends Uu{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class DQ extends Uu{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function BQ(t,e){const{addEthereumChainParameter:n,chainId:r}=e,i=t.state.connections.get(e.connector?.uid??t.state.current);if(i){const o=i.connector;if(!o.switchChain)throw new DQ({connector:o});return await o.switchChain({addEthereumChainParameter:n,chainId:r})}const s=t.chains.find(o=>o.id===r);if(!s)throw new eh;return t.setState(o=>({...o,chainId:r})),s}async function LQ(t,e){const{chainId:n,timeout:r=0,...i}=e,s=t.getClient({chainId:n}),a=await Ta(s,cG,"waitForTransactionReceipt")({...i,timeout:r});if(a.status==="reverted"){const c=Ta(s,lG,"getTransaction"),{from:l,...u}=await c({hash:a.transactionHash}),h=await Ta(s,uG,"call")({...u,account:l,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),f=h?.data?nv(`0x${h.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...a,chainId:s.chain.id}}function ELe(t,e){const{onChange:n}=e;return t.subscribe(()=>SQ(t),n,{equalityFn(r,i){const{connector:s,...o}=r,{connector:a,...c}=i;return Kp(o,c)&&s?.id===a?.id&&s?.uid===a?.uid}})}function CLe(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function _Le(t,e){const{onChange:n}=e;return t.subscribe(()=>TQ(t),n,{equalityFn:Kp})}function SLe(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,i)=>{n(Object.values(r),i)})}function ALe(t,e){const{onChange:n}=e;return t.subscribe(()=>$Q(t),n,{equalityFn(r,i){return r?.uid===i?.uid}})}async function UQ(t,e){const{account:n,chainId:r,connector:i,...s}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await ID(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:i}),await Ta(o,dG,"writeContract")({...s,...n?{account:n}:{},chain:r?{id:r}:null})}function xLe(t){return t}s6.type="injected";function s6(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...jQ[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l?.ethereum}}}let i,s,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:s6.type,async setup(){const l=await this.getProvider();l?.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),l.on("accountsChanged",i)))},async connect({chainId:l,isReconnecting:u,withCapabilities:d}={}){const h=await this.getProvider();if(!h)throw new vs;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(g=>bi(g)),f.length>0&&(f=await this.getAccounts())}catch(p){const g=p;if(g.code===_n.code)throw new _n(g);if(g.code===om.code)throw g}try{!f?.length&&!u&&(f=(await h.request({method:"eth_requestAccounts"})).map(m=>bi(m))),o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let p=await this.getChainId();return l&&p!==l&&(p=(await this.switchChain({chainId:l}).catch(m=>{if(m.code===_n.code)throw m;return{id:p}}))?.id??p),e&&await c.storage?.removeItem(`${this.id}.disconnected`),t.target||await c.storage?.setItem("injected.connected",!0),{accounts:d?f.map(g=>({address:g,capabilities:{}})):f,chainId:p}}catch(p){const g=p;throw g.code===_n.code?new _n(g):g.code===om.code?new om(g):g}},async disconnect(){const l=await this.getProvider();if(!l)throw new vs;s&&(l.removeListener("chainChanged",s),s=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await W4(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const l=await this.getProvider();if(!l)throw new vs;return(await l.request({method:"eth_accounts"})).map(d=>bi(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new vs;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=db(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const h=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",h),!!await this.getProvider()),f=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(g=>window.addEventListener("ethereum#initialized",()=>g(h()),{once:!0}))]:[],new Promise(g=>setTimeout(()=>g(h()),f))]))return!0}throw new vs}return!!(await p5(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){const d=await this.getProvider();if(!d)throw new vs;const h=c.chains.find(p=>p.id===u);if(!h)throw new pu(new eh);const f=new Promise(p=>{const g=m=>{"chainId"in m&&m.chainId===u&&(c.emitter.off("change",g),p())};c.emitter.on("change",g)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Pn(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(p){const g=p;if(g.code===4902||g?.data?.originalError?.code===4902)try{const{default:m,...w}=h.blockExplorers??{};let b;l?.blockExplorerUrls?b=l.blockExplorerUrls:m&&(b=[m.url,...Object.values(w).map(A=>A.url)]);let y;l?.rpcUrls?.length?y=l.rpcUrls:y=[h.rpcUrls.default?.http[0]??""];const _={blockExplorerUrls:b,chainId:Pn(u),chainName:l?.chainName??h.name,iconUrls:l?.iconUrls,nativeCurrency:l?.nativeCurrency??h.nativeCurrency,rpcUrls:y};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[_]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new _n(new Error("User rejected switch after adding network."))}),f]),h}catch(m){throw new _n(m)}throw g.code===_n.code?new _n(g):new pu(g)}},async onAccountsChanged(l){if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const u=(await this.getChainId()).toString();this.onConnect({chainId:u}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:l.map(u=>bi(u))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(s&&(u.removeListener("chainChanged",s),s=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const jQ={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:db(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return db(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:db(t,"isPhantom")}}};function db(t,e){function n(i){return typeof e=="function"?e(i):typeof e=="string"?i[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(i=>n(i));if(r&&n(r))return r}function FQ(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function qQ(){const t=new Set;let e=[];const n=()=>FQ(i=>{e.some(({info:s})=>s.uuid===i.info.uuid)||(e=[...e,i],t.forEach(s=>s(e,{added:[i]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(i=>i([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:i}){return e.find(s=>s.info.rdns===i)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(i,{emitImmediately:s}={}){return t.add(i),s&&i(e,{added:e}),()=>t.delete(i)}}}const HQ=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=c?.equalityFn||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c?.fireImmediately&&a(d,d)}return i(l)},t(e,n,r)},zQ=HQ;function KQ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const O5=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return O5(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return O5(r)(n)}}}},VQ=(t,e)=>(n,r,i)=>{let s={storage:KQ(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...g)},r,i);const u=()=>{const g=s.partialize({...r()});return l.setItem(s.name,{state:g,version:s.version})},d=i.setState;i.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,i);i.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var y;return b((y=r())!=null?y:h)});const w=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(g=r())!=null?g:h))||void 0;return O5(l.getItem.bind(l))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return[!0,s.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var y;const[_,A]=b;if(f=s.merge(A,(y=r())!=null?y:h),n(f,!0),_)return u()}).then(()=>{w?.(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{w?.(void 0,b)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},s.skipHydration||p(),f||h},WQ=VQ,bI=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,i,a);return a},y3=t=>t?bI(t):bI;var PD={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],w=arguments.length,b,y;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,p),!0}for(y=1,b=new Array(w-1);y<w;y++)b[y-1]=arguments[y];m.fn.apply(m.context,b)}else{var _=m.length,A;for(y=0;y<_;y++)switch(m[y].once&&this.removeListener(l,m[y].fn,void 0,!0),w){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,u);break;case 3:m[y].fn.call(m[y].context,u,d);break;case 4:m[y].fn.call(m[y].context,u,d,h);break;default:if(!b)for(A=1,b=new Array(w-1);A<w;A++)b[A-1]=arguments[A];m[y].fn.apply(m[y].context,b)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(PD);var GQ=PD.exports;const TD=Lu(GQ);let ZQ=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new TD})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}};function YQ(t){return new ZQ(t)}function QQ(t,e){return JSON.parse(t,(n,r)=>{let i=r;return i?.__type==="bigint"&&(i=BigInt(i.value)),i?.__type==="Map"&&(i=new Map(i.value)),e?.(n,i)??i})}function vI(t,e){return t.slice(0,e).join(".")||"."}function EI(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function JQ(t,e){const n=typeof t=="function",r=typeof e=="function",i=[],s=[];return function(a,c){if(typeof c=="object")if(i.length){const l=EI(i,this);l===0?i[i.length]=this:(i.splice(l),s.splice(l)),s[s.length]=a;const u=EI(i,c);if(u!==0)return r?e.call(this,a,c,vI(s,u)):`[ref=${vI(s,u)}]`}else i[0]=c,s[0]=a;return n?t.call(this,a,c):c}}function XQ(t,e,n,r){return JSON.stringify(t,JQ((i,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),e?.(i,o)??o},r),n??void 0)}function eJ(t){const{deserialize:e=QQ,key:n="wagmi",serialize:r=XQ,storage:i=kD}=t;function s(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...i,key:n,async getItem(o,a){const c=i.getItem(`${n}.${o}`),l=await s(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await s(i.removeItem(c)):await s(i.setItem(c,r(a)))},async removeItem(o){await s(i.removeItem(`${n}.${o}`))}}}const kD={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function tJ(){const t=typeof window<"u"&&window.localStorage?window.localStorage:kD;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const P5=256;let By=P5,Ly;function nJ(t=11){if(!Ly||By+t>P5*2){Ly="",By=0;for(let e=0;e<P5;e++)Ly+=(256+Math.random()*256|0).toString(16).substring(1)}return Ly.substring(By,By+++t)}function OLe(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=eJ({storage:tJ()}),syncConnectedChain:r=!0,ssr:i=!1,...s}=t,o=typeof window<"u"&&e?qQ():void 0,a=y3(()=>s.chains),c=y3(()=>{const A=[],T=new Set;for(const $ of s.connectors??[]){const D=l($);if(A.push(D),!i&&D.rdns){const O=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const j of O)T.add(j)}}if(!i&&o){const $=o.getProviders();for(const D of $)T.has(D.info.rdns)||A.push(l(u(D)))}return A});function l(A){const T=YQ(nJ()),$={...A({emitter:T,chains:a.getState(),storage:n,transports:s.transports}),emitter:T,uid:T.uid};return T.on("connect",y),$.setup?.(),$}function u(A){const{info:T}=A,$=A.provider;return s6({target:{...T,id:T.rdns,provider:$}})}const d=new Map;function h(A={}){const T=A.chainId??m.getState().chainId,$=a.getState().find(O=>O.id===T);if(A.chainId&&!$)throw new eh;{const O=d.get(m.getState().chainId);if(O&&!$)return O;if(!$)throw new eh}{const O=d.get(T);if(O)return O}let D;if(s.client)D=s.client({chain:$});else{const O=$.id,j=a.getState().map(B=>B.id),F={},L=Object.entries(s);for(const[B,x]of L)if(!(B==="chains"||B==="client"||B==="connectors"||B==="transports"))if(typeof x=="object")if(O in x)F[B]=x[O];else{if(j.some(S=>S in x))continue;F[B]=x}else F[B]=x;D=PM({...F,chain:$,batch:F.batch??{multicall:!0},transport:B=>s.transports[O]({...B,connectors:c})})}return d.set(T,D),D}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";ub.startsWith(g)?p=Number.parseInt(ub.replace(g,""),10):p=Number.parseInt(ub.split(".")[0]??"0",10);const m=y3(zQ(n?WQ(f,{migrate(A,T){if(T===p)return A;const $=f(),D=w(A,$.chainId);return{...$,chainId:D}},name:"store",partialize(A){return{connections:{__type:"Map",value:Array.from(A.connections.entries()).map(([T,$])=>{const{id:D,name:O,type:j,uid:F}=$.connector;return[T,{...$,connector:{id:D,name:O,type:j,uid:F}}]})},chainId:A.chainId,current:A.current}},merge(A,T){typeof A=="object"&&A&&"status"in A&&delete A.status;const $=w(A,T.chainId);return{...T,...A,chainId:$}},skipHydration:i,storage:n,version:p}):f));m.setState(f());function w(A,T){return A&&typeof A=="object"&&"chainId"in A&&typeof A.chainId=="number"&&a.getState().some($=>$.id===A.chainId)?A.chainId:T}r&&m.subscribe(({connections:A,current:T})=>T?A.get(T)?.chainId:void 0,A=>{if(a.getState().some($=>$.id===A))return m.setState($=>({...$,chainId:A??$.chainId}))}),o?.subscribe(A=>{const T=new Set,$=new Set;for(const O of c.getState())if(T.add(O.id),O.rdns){const j=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const F of j)$.add(F)}const D=[];for(const O of A){if($.has(O.info.rdns))continue;const j=l(u(O));T.has(j.id)||D.push(j)}n&&!m.persist.hasHydrated()||c.setState(O=>[...O,...D],!0)});function b(A){m.setState(T=>{const $=T.connections.get(A.uid);return $?{...T,connections:new Map(T.connections).set(A.uid,{accounts:A.accounts??$.accounts,chainId:A.chainId??$.chainId,connector:$.connector})}:T})}function y(A){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(T=>{const $=c.getState().find(D=>D.uid===A.uid);return $?($.emitter.listenerCount("connect")&&$.emitter.off("connect",b),$.emitter.listenerCount("change")||$.emitter.on("change",b),$.emitter.listenerCount("disconnect")||$.emitter.on("disconnect",_),{...T,connections:new Map(T.connections).set(A.uid,{accounts:A.accounts,chainId:A.chainId,connector:$}),current:A.uid,status:"connected"}):T})}function _(A){m.setState(T=>{const $=T.connections.get(A.uid);if($){const O=$.connector;O.emitter.listenerCount("change")&&$.connector.emitter.off("change",b),O.emitter.listenerCount("disconnect")&&$.connector.emitter.off("disconnect",_),O.emitter.listenerCount("connect")||$.connector.emitter.on("connect",y)}if(T.connections.delete(A.uid),T.connections.size===0)return{...T,connections:new Map,current:null,status:"disconnected"};const D=T.connections.values().next().value;return{...T,connections:new Map(T.connections),current:D.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(A){let T;typeof A=="function"?T=A(m.getState()):T=A;const $=f();typeof T!="object"&&(T=$),Object.keys($).some(O=>!(O in T))&&(T=$),m.setState(T,!0)},subscribe(A,T,$){return m.subscribe(A,T,$?{...$,fireImmediately:$.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const A=m.getState(),T=A.connections;let $=A.current;for(const[,D]of T){const O=D.connector;O.isAuthorized&&await O.isAuthorized()||(T.delete(O.uid),$===O.uid&&($=null))}m.setState(D=>({...D,connections:T,current:$}))},store:m,ssr:!!i,syncConnectedChain:r,transports:s.transports,chains:{setState(A){const T=typeof A=="function"?A(a.getState()):A;if(T.length!==0)return a.setState(T,!0)},subscribe(A){return a.subscribe(A)}},connectors:{providerDetailToConnector:u,setup:l,setState(A){return c.setState(typeof A=="function"?A(c.getState()):A,!0)},subscribe(A){return c.subscribe(A)}},events:{change:b,connect:y,disconnect:_}}}}function PLe(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(i=>i.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(i=>{const s=new Set;for(const c of i??[])if(c.rdns){const l=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const u of l)s.add(u)}const o=[],a=t._internal.mipd?.getProviders()??[];for(const c of a){if(s.has(c.info.rdns))continue;const l=t._internal.connectors.providerDetailToConnector(c),u=t._internal.connectors.setup(l);o.push(u)}return[...i,...o]})),r?RQ(t):t.storage&&t.setState(i=>({...i,connections:new Map}))}}}function ND(t){const{chain:e}=t,n=e.rpcUrls.default.http[0];if(!t.transports)return[n];const r=t.transports?.[e.id]?.({chain:e});return(r?.value?.transports||[r]).map(({value:s})=>s?.url||n)}function TLe(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,i)=>{n(r,i)})}var $D={exports:{}},RD={},MD={exports:{}},DD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=Et;function rJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var iJ=typeof Object.is=="function"?Object.is:rJ,sJ=Vp.useState,oJ=Vp.useEffect,aJ=Vp.useLayoutEffect,cJ=Vp.useDebugValue;function lJ(t,e){var n=e(),r=sJ({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return aJ(function(){i.value=n,i.getSnapshot=e,b3(i)&&s({inst:i})},[t,n,e]),oJ(function(){return b3(i)&&s({inst:i}),t(function(){b3(i)&&s({inst:i})})},[t]),cJ(n),n}function b3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!iJ(t,n)}catch{return!0}}function uJ(t,e){return e()}var dJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uJ:lJ;DD.useSyncExternalStore=Vp.useSyncExternalStore!==void 0?Vp.useSyncExternalStore:dJ;MD.exports=DD;var hJ=MD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z2=Et,fJ=hJ;function pJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gJ=typeof Object.is=="function"?Object.is:pJ,mJ=fJ.useSyncExternalStore,wJ=z2.useRef,yJ=z2.useEffect,bJ=z2.useMemo,vJ=z2.useDebugValue;RD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=wJ(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=bJ(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,gJ(u,f))return p;var g=r(f);return i!==void 0&&i(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,i]);var a=mJ(t,s[0],s[1]);return yJ(function(){o.hasValue=!0,o.value=a},[a]),vJ(a),a};$D.exports=RD;var kLe=$D.exports,zg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},EJ={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Yl,K4,yM,CJ=(yM=class{constructor(){Fe(this,Yl,EJ);Fe(this,K4,!1)}setTimeoutProvider(t){Ie(this,Yl,t)}setTimeout(t,e){return W(this,Yl).setTimeout(t,e)}clearTimeout(t){W(this,Yl).clearTimeout(t)}setInterval(t,e){return W(this,Yl).setInterval(t,e)}clearInterval(t){W(this,Yl).clearInterval(t)}},Yl=new WeakMap,K4=new WeakMap,yM),Ed=new CJ;function _J(t){setTimeout(t,0)}var th=typeof window>"u"||"Deno"in globalThis;function gi(){}function SJ(t,e){return typeof t=="function"?t(e):t}function T5(t){return typeof t=="number"&&t>=0&&t!==1/0}function BD(t,e){return Math.max(t+(e||0)-Date.now(),0)}function mu(t,e){return typeof t=="function"?t(e):t}function oo(t,e){return typeof t=="function"?t(e):t}function CI(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==o6(o,e.options))return!1}else if(!$m(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function _I(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(nh(e.options.mutationKey)!==nh(s))return!1}else if(!$m(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function o6(t,e){return(e?.queryKeyHashFn||nh)(t)}function nh(t){return JSON.stringify(t,(e,n)=>k5(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function $m(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$m(t[n],e[n])):!1}var AJ=Object.prototype.hasOwnProperty;function LD(t,e){if(t===e)return t;const n=SI(t)&&SI(e);if(!n&&!(k5(t)&&k5(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let c=0;for(let l=0;l<o;l++){const u=n?l:s[l],d=t[u],h=e[u];if(d===h){a[u]=d,(n?l<i:AJ.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[u]=h;continue}const f=LD(d,h);a[u]=f,f===d&&c++}return i===o&&c===i?t:a}function av(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function SI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function k5(t){if(!AI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!AI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function AI(t){return Object.prototype.toString.call(t)==="[object Object]"}function xJ(t){return new Promise(e=>{Ed.setTimeout(e,t)})}function N5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?LD(t,e):e}function IJ(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function OJ(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var a6=Symbol();function UD(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===a6?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function jD(t,e){return typeof t=="function"?t(...e):!!t}var $d,Ql,$p,bM,PJ=(bM=class extends zg{constructor(){super();Fe(this,$d);Fe(this,Ql);Fe(this,$p);Ie(this,$p,e=>{if(!th&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Ql)||this.setEventListener(W(this,$p))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Ql))==null||e.call(this),Ie(this,Ql,void 0))}setEventListener(e){var n;Ie(this,$p,e),(n=W(this,Ql))==null||n.call(this),Ie(this,Ql,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,$d)!==e&&(Ie(this,$d,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof W(this,$d)=="boolean"?W(this,$d):globalThis.document?.visibilityState!=="hidden"}},$d=new WeakMap,Ql=new WeakMap,$p=new WeakMap,bM),c6=new PJ;function $5(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var TJ=_J;function kJ(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=TJ;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var rr=kJ(),Rp,Jl,Mp,vM,NJ=(vM=class extends zg{constructor(){super();Fe(this,Rp,!0);Fe(this,Jl);Fe(this,Mp);Ie(this,Mp,e=>{if(!th&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,Jl)||this.setEventListener(W(this,Mp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Jl))==null||e.call(this),Ie(this,Jl,void 0))}setEventListener(e){var n;Ie(this,Mp,e),(n=W(this,Jl))==null||n.call(this),Ie(this,Jl,e(this.setOnline.bind(this)))}setOnline(e){W(this,Rp)!==e&&(Ie(this,Rp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,Rp)}},Rp=new WeakMap,Jl=new WeakMap,Mp=new WeakMap,vM),cv=new NJ;function $J(t){return Math.min(1e3*2**t,3e4)}function FD(t){return(t??"online")==="online"?cv.isOnline():!0}var R5=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function qD(t){let e=!1,n=0,r;const i=$5(),s=()=>i.status!=="pending",o=g=>{if(!s()){const m=new R5(g);h(m),t.onCancel?.(m)}},a=()=>{e=!0},c=()=>{e=!1},l=()=>c6.isFocused()&&(t.networkMode==="always"||cv.isOnline())&&t.canRun(),u=()=>FD(t.networkMode)&&t.canRun(),d=g=>{s()||(r?.(),i.resolve(g))},h=g=>{s()||(r?.(),i.reject(g))},f=()=>new Promise(g=>{r=m=>{(s()||l())&&g(m)},t.onPause?.()}).then(()=>{r=void 0,s()||t.onContinue?.()}),p=()=>{if(s())return;let g;const m=n===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{if(s())return;const b=t.retry??(th?0:3),y=t.retryDelay??$J,_=typeof y=="function"?y(n,w):y,A=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,w);if(e||!A){h(w);return}n++,t.onFail?.(n,w),xJ(_).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r?.(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Rd,EM,HD=(EM=class{constructor(){Fe(this,Rd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),T5(this.gcTime)&&Ie(this,Rd,Ed.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(th?1/0:5*60*1e3))}clearGcTimeout(){W(this,Rd)&&(Ed.clearTimeout(W(this,Rd)),Ie(this,Rd,void 0))}},Rd=new WeakMap,EM),Md,Dp,ro,Dd,fr,Nw,Bd,Ro,hc,CM,RJ=(CM=class extends HD{constructor(e){super();Fe(this,Ro);Fe(this,Md);Fe(this,Dp);Fe(this,ro);Fe(this,Dd);Fe(this,fr);Fe(this,Nw);Fe(this,Bd);Ie(this,Bd,!1),Ie(this,Nw,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ie(this,Dd,e.client),Ie(this,ro,W(this,Dd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ie(this,Md,xI(this.options)),this.state=e.state??W(this,Md),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return W(this,fr)?.promise}setOptions(e){if(this.options={...W(this,Nw),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=xI(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Ie(this,Md,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,ro).remove(this)}setData(e,n){const r=N5(this.state.data,e,this.options);return ot(this,Ro,hc).call(this,{data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){ot(this,Ro,hc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){const n=W(this,fr)?.promise;return W(this,fr)?.cancel(e),n?n.then(gi).catch(gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,Md))}isActive(){return this.observers.some(e=>oo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===a6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>mu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!BD(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),W(this,fr)?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),W(this,fr)?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),W(this,ro).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(W(this,fr)&&(W(this,Bd)?W(this,fr).cancel({revert:!0}):W(this,fr).cancelRetry()),this.scheduleGc()),W(this,ro).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ot(this,Ro,hc).call(this,{type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&W(this,fr)?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(W(this,fr))return W(this,fr).continueRetry(),W(this,fr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,i=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(Ie(this,Bd,!0),r.signal)})},s=()=>{const c=UD(this.options,n),u=(()=>{const d={client:W(this,Dd),queryKey:this.queryKey,meta:this.meta};return i(d),d})();return Ie(this,Bd,!1),this.options.persister?this.options.persister(c,u,this):c(u)},a=(()=>{const c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:W(this,Dd),state:this.state,fetchFn:s};return i(c),c})();this.options.behavior?.onFetch(a,this),Ie(this,Dp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&ot(this,Ro,hc).call(this,{type:"fetch",meta:a.fetchOptions?.meta}),Ie(this,fr,qD({initialPromise:n?.initialPromise,fn:a.fetchFn,onCancel:c=>{c instanceof R5&&c.revert&&this.setState({...W(this,Dp),fetchStatus:"idle"}),r.abort()},onFail:(c,l)=>{ot(this,Ro,hc).call(this,{type:"failed",failureCount:c,error:l})},onPause:()=>{ot(this,Ro,hc).call(this,{type:"pause"})},onContinue:()=>{ot(this,Ro,hc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const c=await W(this,fr).start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),W(this,ro).config.onSuccess?.(c,this),W(this,ro).config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof R5){if(c.silent)return W(this,fr).promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw ot(this,Ro,hc).call(this,{type:"error",error:c}),W(this,ro).config.onError?.(c,this),W(this,ro).config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}},Md=new WeakMap,Dp=new WeakMap,ro=new WeakMap,Dd=new WeakMap,fr=new WeakMap,Nw=new WeakMap,Bd=new WeakMap,Ro=new WeakSet,hc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zD(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ie(this,Dp,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),W(this,ro).notify({query:this,type:"updated",action:e})})},CM);function zD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:FD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xI(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hi,gt,$w,hi,Ld,Bp,Ac,Xl,Rw,Lp,Up,Ud,jd,eu,jp,Ut,H0,M5,D5,B5,L5,U5,j5,F5,KD,_M,MJ=(_M=class extends zg{constructor(e,n){super();Fe(this,Ut);Fe(this,Hi);Fe(this,gt);Fe(this,$w);Fe(this,hi);Fe(this,Ld);Fe(this,Bp);Fe(this,Ac);Fe(this,Xl);Fe(this,Rw);Fe(this,Lp);Fe(this,Up);Fe(this,Ud);Fe(this,jd);Fe(this,eu);Fe(this,jp,new Set);this.options=n,Ie(this,Hi,e),Ie(this,Xl,null),Ie(this,Ac,$5()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(W(this,gt).addObserver(this),II(W(this,gt),this.options)?ot(this,Ut,H0).call(this):this.updateResult(),ot(this,Ut,L5).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return q5(W(this,gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return q5(W(this,gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ot(this,Ut,U5).call(this),ot(this,Ut,j5).call(this),W(this,gt).removeObserver(this)}setOptions(e){const n=this.options,r=W(this,gt);if(this.options=W(this,Hi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof oo(this.options.enabled,W(this,gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ot(this,Ut,F5).call(this),W(this,gt).setOptions(this.options),n._defaulted&&!av(this.options,n)&&W(this,Hi).getQueryCache().notify({type:"observerOptionsUpdated",query:W(this,gt),observer:this});const i=this.hasListeners();i&&OI(W(this,gt),r,this.options,n)&&ot(this,Ut,H0).call(this),this.updateResult(),i&&(W(this,gt)!==r||oo(this.options.enabled,W(this,gt))!==oo(n.enabled,W(this,gt))||mu(this.options.staleTime,W(this,gt))!==mu(n.staleTime,W(this,gt)))&&ot(this,Ut,M5).call(this);const s=ot(this,Ut,D5).call(this);i&&(W(this,gt)!==r||oo(this.options.enabled,W(this,gt))!==oo(n.enabled,W(this,gt))||s!==W(this,eu))&&ot(this,Ut,B5).call(this,s)}getOptimisticResult(e){const n=W(this,Hi).getQueryCache().build(W(this,Hi),e),r=this.createResult(n,e);return BJ(this,r)&&(Ie(this,hi,r),Ie(this,Bp,this.options),Ie(this,Ld,W(this,gt).state)),r}getCurrentResult(){return W(this,hi)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&W(this,Ac).status==="pending"&&W(this,Ac).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){W(this,jp).add(e)}getCurrentQuery(){return W(this,gt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=W(this,Hi).defaultQueryOptions(e),r=W(this,Hi).getQueryCache().build(W(this,Hi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ot(this,Ut,H0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),W(this,hi)))}createResult(e,n){const r=W(this,gt),i=this.options,s=W(this,hi),o=W(this,Ld),a=W(this,Bp),l=e!==r?e.state:W(this,$w),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),j=!O&&II(e,n),F=O&&OI(e,r,n,i);(j||F)&&(d={...d,...zD(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&m==="pending"){let O;s?.isPlaceholderData&&n.placeholderData===a?.placeholderData?(O=s.data,w=!0):O=typeof n.placeholderData=="function"?n.placeholderData(W(this,Up)?.state.data,W(this,Up)):n.placeholderData,O!==void 0&&(m="success",f=N5(s?.data,O,n),h=!0)}if(n.select&&f!==void 0&&!w)if(s&&f===o?.data&&n.select===W(this,Rw))f=W(this,Lp);else try{Ie(this,Rw,n.select),f=n.select(f),f=N5(s?.data,f,n),Ie(this,Lp,f),Ie(this,Xl,null)}catch(O){Ie(this,Xl,O)}W(this,Xl)&&(p=W(this,Xl),f=W(this,Lp),g=Date.now(),m="error");const b=d.fetchStatus==="fetching",y=m==="pending",_=m==="error",A=y&&b,T=f!==void 0,D={status:m,fetchStatus:d.fetchStatus,isPending:y,isSuccess:m==="success",isError:_,isInitialLoading:A,isLoading:A,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!y,isLoadingError:_&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&T,isStale:l6(e,n),refetch:this.refetch,promise:W(this,Ac),isEnabled:oo(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=L=>{D.status==="error"?L.reject(D.error):D.data!==void 0&&L.resolve(D.data)},j=()=>{const L=Ie(this,Ac,D.promise=$5());O(L)},F=W(this,Ac);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(D.status==="error"||D.data!==F.value)&&j();break;case"rejected":(D.status!=="error"||D.error!==F.reason)&&j();break}}return D}updateResult(){const e=W(this,hi),n=this.createResult(W(this,gt),this.options);if(Ie(this,Ld,W(this,gt).state),Ie(this,Bp,this.options),W(this,Ld).data!==void 0&&Ie(this,Up,W(this,gt)),av(n,e))return;Ie(this,hi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!W(this,jp).size)return!0;const o=new Set(s??W(this,jp));return this.options.throwOnError&&o.add("error"),Object.keys(W(this,hi)).some(a=>{const c=a;return W(this,hi)[c]!==e[c]&&o.has(c)})};ot(this,Ut,KD).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ot(this,Ut,L5).call(this)}},Hi=new WeakMap,gt=new WeakMap,$w=new WeakMap,hi=new WeakMap,Ld=new WeakMap,Bp=new WeakMap,Ac=new WeakMap,Xl=new WeakMap,Rw=new WeakMap,Lp=new WeakMap,Up=new WeakMap,Ud=new WeakMap,jd=new WeakMap,eu=new WeakMap,jp=new WeakMap,Ut=new WeakSet,H0=function(e){ot(this,Ut,F5).call(this);let n=W(this,gt).fetch(this.options,e);return e?.throwOnError||(n=n.catch(gi)),n},M5=function(){ot(this,Ut,U5).call(this);const e=mu(this.options.staleTime,W(this,gt));if(th||W(this,hi).isStale||!T5(e))return;const r=BD(W(this,hi).dataUpdatedAt,e)+1;Ie(this,Ud,Ed.setTimeout(()=>{W(this,hi).isStale||this.updateResult()},r))},D5=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(W(this,gt)):this.options.refetchInterval)??!1},B5=function(e){ot(this,Ut,j5).call(this),Ie(this,eu,e),!(th||oo(this.options.enabled,W(this,gt))===!1||!T5(W(this,eu))||W(this,eu)===0)&&Ie(this,jd,Ed.setInterval(()=>{(this.options.refetchIntervalInBackground||c6.isFocused())&&ot(this,Ut,H0).call(this)},W(this,eu)))},L5=function(){ot(this,Ut,M5).call(this),ot(this,Ut,B5).call(this,ot(this,Ut,D5).call(this))},U5=function(){W(this,Ud)&&(Ed.clearTimeout(W(this,Ud)),Ie(this,Ud,void 0))},j5=function(){W(this,jd)&&(Ed.clearInterval(W(this,jd)),Ie(this,jd,void 0))},F5=function(){const e=W(this,Hi).getQueryCache().build(W(this,Hi),this.options);if(e===W(this,gt))return;const n=W(this,gt);Ie(this,gt,e),Ie(this,$w,e.state),this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))},KD=function(e){rr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(W(this,hi))}),W(this,Hi).getQueryCache().notify({query:W(this,gt),type:"observerResultsUpdated"})})},_M);function DJ(t,e){return oo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function II(t,e){return DJ(t,e)||t.state.data!==void 0&&q5(t,e,e.refetchOnMount)}function q5(t,e,n){if(oo(e.enabled,t)!==!1&&mu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&l6(t,e)}return!1}function OI(t,e,n,r){return(t!==e||oo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&l6(t,n)}function l6(t,e){return oo(e.enabled,t)!==!1&&t.isStaleByTime(mu(e.staleTime,t))}function BJ(t,e){return!av(t.getCurrentResult(),e)}function PI(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const d=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},h=UD(e.options,e.fetchOptions),f=async(p,g,m)=>{if(u)return Promise.reject();if(g==null&&p.pages.length)return Promise.resolve(p);const b=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:g,direction:m?"backward":"forward",meta:e.options.meta};return d(T),T})(),y=await h(b),{maxPages:_}=e.options,A=m?OJ:IJ;return{pages:A(p.pages,y,_),pageParams:A(p.pageParams,g,_)}};if(i&&s.length){const p=i==="backward",g=p?LJ:TI,m={pages:s,pageParams:o},w=g(r,m);a=await f(m,w,p)}else{const p=t??s.length;do{const g=c===0?o[0]??r.initialPageParam:TI(r,a);if(c>0&&g==null)break;a=await f(a,g),c++}while(c<p)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=l}}}function TI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function LJ(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var Mw,ma,fi,Fd,wa,Ol,SM,UJ=(SM=class extends HD{constructor(e){super();Fe(this,wa);Fe(this,Mw);Fe(this,ma);Fe(this,fi);Fe(this,Fd);Ie(this,Mw,e.client),this.mutationId=e.mutationId,Ie(this,fi,e.mutationCache),Ie(this,ma,[]),this.state=e.state||VD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){W(this,ma).includes(e)||(W(this,ma).push(e),this.clearGcTimeout(),W(this,fi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ie(this,ma,W(this,ma).filter(n=>n!==e)),this.scheduleGc(),W(this,fi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){W(this,ma).length||(this.state.status==="pending"?this.scheduleGc():W(this,fi).remove(this))}continue(){return W(this,Fd)?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{ot(this,wa,Ol).call(this,{type:"continue"})},r={client:W(this,Mw),meta:this.options.meta,mutationKey:this.options.mutationKey};Ie(this,Fd,qD({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,a)=>{ot(this,wa,Ol).call(this,{type:"failed",failureCount:o,error:a})},onPause:()=>{ot(this,wa,Ol).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,fi).canRun(this)}));const i=this.state.status==="pending",s=!W(this,Fd).canStart();try{if(i)n();else{ot(this,wa,Ol).call(this,{type:"pending",variables:e,isPaused:s}),await W(this,fi).config.onMutate?.(e,this,r);const a=await this.options.onMutate?.(e,r);a!==this.state.context&&ot(this,wa,Ol).call(this,{type:"pending",context:a,variables:e,isPaused:s})}const o=await W(this,Fd).start();return await W(this,fi).config.onSuccess?.(o,e,this.state.context,this,r),await this.options.onSuccess?.(o,e,this.state.context,r),await W(this,fi).config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,e,this.state.context,r),ot(this,wa,Ol).call(this,{type:"success",data:o}),o}catch(o){try{throw await W(this,fi).config.onError?.(o,e,this.state.context,this,r),await this.options.onError?.(o,e,this.state.context,r),await W(this,fi).config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,e,this.state.context,r),o}finally{ot(this,wa,Ol).call(this,{type:"error",error:o})}}finally{W(this,fi).runNext(this)}}},Mw=new WeakMap,ma=new WeakMap,fi=new WeakMap,Fd=new WeakMap,wa=new WeakSet,Ol=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rr.batch(()=>{W(this,ma).forEach(r=>{r.onMutationUpdate(e)}),W(this,fi).notify({mutation:this,type:"updated",action:e})})},SM);function VD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xc,Mo,Dw,AM,jJ=(AM=class extends zg{constructor(e={}){super();Fe(this,xc);Fe(this,Mo);Fe(this,Dw);this.config=e,Ie(this,xc,new Set),Ie(this,Mo,new Map),Ie(this,Dw,0)}build(e,n,r){const i=new UJ({client:e,mutationCache:this,mutationId:++$y(this,Dw)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){W(this,xc).add(e);const n=Uy(e);if(typeof n=="string"){const r=W(this,Mo).get(n);r?r.push(e):W(this,Mo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,xc).delete(e)){const n=Uy(e);if(typeof n=="string"){const r=W(this,Mo).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&W(this,Mo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Uy(e);if(typeof n=="string"){const i=W(this,Mo).get(n)?.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){const n=Uy(e);return typeof n=="string"?W(this,Mo).get(n)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){rr.batch(()=>{W(this,xc).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,xc).clear(),W(this,Mo).clear()})}getAll(){return Array.from(W(this,xc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>_I(n,r))}findAll(e={}){return this.getAll().filter(n=>_I(e,n))}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rr.batch(()=>Promise.all(e.map(n=>n.continue().catch(gi))))}},xc=new WeakMap,Mo=new WeakMap,Dw=new WeakMap,AM);function Uy(t){return t.options.scope?.id}var Ic,tu,zi,Oc,Kc,hb,H5,xM,FJ=(xM=class extends zg{constructor(n,r){super();Fe(this,Kc);Fe(this,Ic);Fe(this,tu);Fe(this,zi);Fe(this,Oc);Ie(this,Ic,n),this.setOptions(r),this.bindMethods(),ot(this,Kc,hb).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const r=this.options;this.options=W(this,Ic).defaultMutationOptions(n),av(this.options,r)||W(this,Ic).getMutationCache().notify({type:"observerOptionsUpdated",mutation:W(this,zi),observer:this}),r?.mutationKey&&this.options.mutationKey&&nh(r.mutationKey)!==nh(this.options.mutationKey)?this.reset():W(this,zi)?.state.status==="pending"&&W(this,zi).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||W(this,zi)?.removeObserver(this)}onMutationUpdate(n){ot(this,Kc,hb).call(this),ot(this,Kc,H5).call(this,n)}getCurrentResult(){return W(this,tu)}reset(){W(this,zi)?.removeObserver(this),Ie(this,zi,void 0),ot(this,Kc,hb).call(this),ot(this,Kc,H5).call(this)}mutate(n,r){return Ie(this,Oc,r),W(this,zi)?.removeObserver(this),Ie(this,zi,W(this,Ic).getMutationCache().build(W(this,Ic),this.options)),W(this,zi).addObserver(this),W(this,zi).execute(n)}},Ic=new WeakMap,tu=new WeakMap,zi=new WeakMap,Oc=new WeakMap,Kc=new WeakSet,hb=function(){const n=W(this,zi)?.state??VD();Ie(this,tu,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},H5=function(n){rr.batch(()=>{if(W(this,Oc)&&this.hasListeners()){const r=W(this,tu).variables,i=W(this,tu).context,s={client:W(this,Ic),meta:this.options.meta,mutationKey:this.options.mutationKey};n?.type==="success"?(W(this,Oc).onSuccess?.(n.data,r,i,s),W(this,Oc).onSettled?.(n.data,null,r,i,s)):n?.type==="error"&&(W(this,Oc).onError?.(n.error,r,i,s),W(this,Oc).onSettled?.(void 0,n.error,r,i,s))}this.listeners.forEach(r=>{r(W(this,tu))})})},xM),ya,IM,qJ=(IM=class extends zg{constructor(e={}){super();Fe(this,ya);this.config=e,Ie(this,ya,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??o6(i,n);let o=this.get(s);return o||(o=new RJ({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){W(this,ya).has(e.queryHash)||(W(this,ya).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,ya).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,ya).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,ya).get(e)}getAll(){return[...W(this,ya).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>CI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>CI(e,r)):n}notify(e){rr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ya=new WeakMap,IM),Sn,nu,ru,Fp,qp,iu,Hp,zp,OM,$Le=(OM=class{constructor(t={}){Fe(this,Sn);Fe(this,nu);Fe(this,ru);Fe(this,Fp);Fe(this,qp);Fe(this,iu);Fe(this,Hp);Fe(this,zp);Ie(this,Sn,t.queryCache||new qJ),Ie(this,nu,t.mutationCache||new jJ),Ie(this,ru,t.defaultOptions||{}),Ie(this,Fp,new Map),Ie(this,qp,new Map),Ie(this,iu,0)}mount(){$y(this,iu)._++,W(this,iu)===1&&(Ie(this,Hp,c6.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Sn).onFocus())})),Ie(this,zp,cv.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Sn).onOnline())})))}unmount(){var t,e;$y(this,iu)._--,W(this,iu)===0&&((t=W(this,Hp))==null||t.call(this),Ie(this,Hp,void 0),(e=W(this,zp))==null||e.call(this),Ie(this,zp,void 0))}isFetching(t){return W(this,Sn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,nu).findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return W(this,Sn).get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,Sn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(mu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,Sn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,Sn).get(r.queryHash)?.state.data,o=SJ(e,s);if(o!==void 0)return W(this,Sn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return rr.batch(()=>W(this,Sn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return W(this,Sn).get(e.queryHash)?.state}removeQueries(t){const e=W(this,Sn);rr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,Sn);return rr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rr.batch(()=>W(this,Sn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(gi).catch(gi)}invalidateQueries(t,e={}){return rr.batch(()=>(W(this,Sn).findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rr.batch(()=>W(this,Sn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(gi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(gi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,Sn).build(this,e);return n.isStaleByTime(mu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gi).catch(gi)}fetchInfiniteQuery(t){return t.behavior=PI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gi).catch(gi)}ensureInfiniteQueryData(t){return t.behavior=PI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return cv.isOnline()?W(this,nu).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,Sn)}getMutationCache(){return W(this,nu)}getDefaultOptions(){return W(this,ru)}setDefaultOptions(t){Ie(this,ru,t)}setQueryDefaults(t,e){W(this,Fp).set(nh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Fp).values()],n={};return e.forEach(r=>{$m(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,qp).set(nh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,qp).values()],n={};return e.forEach(r=>{$m(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,ru).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=o6(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===a6&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...W(this,ru).mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,Sn).clear(),W(this,nu).clear()}},Sn=new WeakMap,nu=new WeakMap,ru=new WeakMap,Fp=new WeakMap,qp=new WeakMap,iu=new WeakMap,Hp=new WeakMap,zp=new WeakMap,OM);function RLe(t){return JSON.stringify(t,(e,n)=>HJ(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):typeof n=="bigint"?n.toString():n)}function HJ(t){if(!kI(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!kI(n)||!n.hasOwnProperty("isPrototypeOf"))}function kI(t){return Object.prototype.toString.call(t)==="[object Object]"}function K2(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:i,initialDataUpdatedAt:s,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:m,getNextPageParam:w,initialPageParam:b,_optimisticResults:y,enabled:_,notifyOnChangeProps:A,placeholderData:T,refetchInterval:$,refetchIntervalInBackground:D,refetchOnMount:O,refetchOnReconnect:j,refetchOnWindowFocus:F,retryOnMount:L,select:B,staleTime:x,suspense:v,throwOnError:S,config:N,connector:E,query:C,...P}=t;return P}function MLe(t){return{mutationFn(e){return CQ(t,e)},mutationKey:["connect"]}}function DLe(t){return{mutationFn(e){return _Q(t,e)},mutationKey:["disconnect"]}}function BLe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:i,...s}=n[1];if(!r)throw new Error("address is required");return await OQ(t,{...s,address:r})??null},queryKey:zJ(e)}}function zJ(t={}){return["balance",K2(t)]}function LLe(t,e={}){return{async queryFn({queryKey:n}){const{name:r,scopeKey:i,...s}=n[1];if(!r)throw new Error("name is required");return kQ(t,{...s,name:r})},queryKey:KJ(e)}}function KJ(t={}){return["ensAvatar",K2(t)]}function ULe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:i,...s}=n[1];if(!r)throw new Error("address is required");return NQ(t,{...s,address:r})},queryKey:VJ(e)}}function VJ(t={}){return["ensName",K2(t)]}function jLe(t){return{mutationFn(e){return MQ(t,e)},mutationKey:["signMessage"]}}function FLe(t){return{mutationFn(e){return BQ(t,e)},mutationKey:["switchChain"]}}function qLe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...i}=n[1];if(!r)throw new Error("hash is required");return LQ(t,{...i,onReplaced:e.onReplaced,hash:r})},queryKey:WJ(e)}}function WJ(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",K2(n)]}function HLe(t){return{mutationFn(e){return UQ(t,e)},mutationKey:["writeContract"]}}var WD=Et.createContext(void 0),GD=t=>{const e=Et.useContext(WD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},zLe=({client:t,children:e})=>(Et.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Nn.jsx(WD.Provider,{value:t,children:e})),ZD=Et.createContext(!1),GJ=()=>Et.useContext(ZD);ZD.Provider;function ZJ(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var YJ=Et.createContext(ZJ()),QJ=()=>Et.useContext(YJ),JJ=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},XJ=t=>{Et.useEffect(()=>{t.clearReset()},[t])},eX=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||jD(n,[t.error,r])),tX=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},nX=(t,e)=>t.isLoading&&t.isFetching&&!e,rX=(t,e)=>t?.suspense&&e.isPending,NI=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function iX(t,e,n){const r=GJ(),i=QJ(),s=GD(),o=s.defaultQueryOptions(t);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",tX(o),JJ(o,i),XJ(i);const a=!s.getQueryCache().get(o.queryHash),[c]=Et.useState(()=>new e(s,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(Et.useSyncExternalStore(Et.useCallback(d=>{const h=u?c.subscribe(rr.batchCalls(d)):gi;return c.updateResult(),h},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),Et.useEffect(()=>{c.setOptions(o)},[o,c]),rX(o,l))throw NI(o,c,i);if(eX({result:l,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,l),o.experimental_prefetchInRender&&!th&&nX(l,r)&&(a?NI(o,c,i):s.getQueryCache().get(o.queryHash)?.promise)?.catch(gi).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?l:c.trackResult(l)}function KLe(t,e){return iX(t,MJ)}function VLe(t,e){const n=GD(),[r]=Et.useState(()=>new FJ(n,t));Et.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Et.useSyncExternalStore(Et.useCallback(o=>r.subscribe(rr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Et.useCallback((o,a)=>{r.mutate(o,a).catch(gi)},[r]);if(i.error&&jD(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function sX(t,e){return Object.defineProperty(t,"__recipe__",{value:e,writable:!1}),t}var YD=sX;function oX(t){var{conditions:e}=t;if(!e)throw new Error("Styles have no conditions");function n(r){if(typeof r=="string"||typeof r=="number"||typeof r=="boolean"){if(!e.defaultCondition)throw new Error("No default condition");return{[e.defaultCondition]:r}}if(Array.isArray(r)){if(!("responsiveArray"in e))throw new Error("Responsive arrays are not supported");var i={};for(var s in e.responsiveArray)r[s]!=null&&(i[e.responsiveArray[s]]=r[s]);return i}return r}return YD(n,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createNormalizeValueFn",args:[{conditions:t.conditions}]})}function WLe(t){var{conditions:e}=t;if(!e)throw new Error("Styles have no conditions");var n=oX(t);function r(i,s){if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"){if(!e.defaultCondition)throw new Error("No default condition");return s(i,e.defaultCondition)}var o=Array.isArray(i)?n(i):i,a={};for(var c in o)o[c]!=null&&(a[c]=s(o[c],c));return a}return YD(r,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createMapValueFn",args:[{conditions:t.conditions}]})}function aX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cX(t){var e=aX(t,"string");return typeof e=="symbol"?e:String(e)}function lX(t,e,n){return e=cX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(r){lX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var uX=t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Object.assign({},...n.map(c=>c.styles)),s=Object.keys(i),o=s.filter(c=>"mappings"in i[c]),a=c=>{var l=[],u={},d=v3({},c),h=!1;for(var f of o){var p=c[f];if(p!=null){var g=i[f];h=!0;for(var m of g.mappings)u[m]=p,d[m]==null&&delete d[m]}}var w=h?v3(v3({},u),d):c,b=function(){var A=w[y],T=i[y];try{if(T.mappings)return 1;if(typeof A=="string"||typeof A=="number")l.push(T.values[A].defaultClass);else if(Array.isArray(A))for(var $=0;$<A.length;$++){var D=A[$];if(D!=null){var O=T.responsiveArray[$];l.push(T.values[D].conditions[O])}}else for(var j in A){var F=A[j];F!=null&&l.push(T.values[F].conditions[j])}}catch(L){throw L}};for(var y in w)b();return t(l.join(" "))};return Object.assign(a,{properties:new Set(s)})},dX=t=>t,GLe=function(){return uX(dX)(...arguments)};function QD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=QD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ZLe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=QD(t))&&(r&&(r+=" "),r+=e);return r}var hX="AEkVMQnvDV0B0wKWAQYBQgDpATQAoQDcAIUApwBsAOMAcACTAEUAigBRAHkAPgA/ACwANwAoAGIAHgAvACsAJQAXAC8AHAAhACIALwAVACsAEQAiAAsAGwARABgAFwA7ACoAKwAsADQAFgAtABIAHAAhAA4AHQAdABUAFgAZAA0ADgAXABAAGQAUABIEtAYQASIUOjfDBdMAsQCuPwFnAKUBA10jAK5/Ly8vLwE/pwUJ6/0HPwbkMQVXBVgAPSs5APa2EQbIwQuUCkEDyJ4zAsUKLwKOoQKG2D+Ob4kCxcsCg/IBH98JAPKtAUECLY0KP48A4wDiChUAF9S5yAwLPZ0EG3cA/QI5GL0P6wkGKekFBIFnDRsHLQCrAGmR76WcfwBbBpMjBukAGwA7DJMAWxVbqft7uycM2yDPCLspA7EUOwD3LWujAKF9GAAXBCXXFgEdALkZzQT6CSBMNwmXCYgeG1ZZTOODQgATAAwAFQAOa1QAIQAOAEfuFdg98zlYypXmLgoQHV9NWD3sABMADAAVAA5rIFxAlwDD6wAbADkMxQAbFVup+3EB224cHQVbBeIC0J8CxLAKTBykZRRzGm1M9QC7DWcC4QALLTSJF8mRAoF7ARMbAL0NZwLhAAstAUhQJZFMCgMt+wUyCddpF60B10MASSsSdwIxFiEC6ye5N2sAOeEB9SUAxw7LtQEbY4EAsQUABQCK00kFG8MfBxcAqCfRAaErLQObAGcBChk+7Td0BBgXAKoBxwIhANMrEnM681CwBZA6dyc1SAX6JwVZBVivuAVpO11CEjpYQZd7k2ZfofgLEwPFByXxdyMEo0sCU1MCdRurJwGPo6U1WwNFFwSDYQkA0QarPy8jBykCOV0AawFhH3EAgx0ZAJUBSbcAJ2kXAa/FAzctIUNTAW9ZBmUCZQDxSRcDKQEFAElBAKsAXQBzACu1Bgfz7xmNfwAJIQApALMbRwHRAdsHCzGXeIHoAAoAEQA0AD0AODN3edPAEF8QXAFNCUxsOhULAqwPpgvlERUM0SrL09gANKkH6wNTB+sDUwNTB+sH6wNTB+sDUwNTA1MDUxwK8BrTwBBfD0gEbQWOBYsE1giDJkkRgQcoCNJUDXQeHEcDRQD8IyVJHDuTMwslQkwMTQMH/DZCbKd9OANHMatU9ZCiA8syTzlsAR5xEqAAKg9zHDW1Tn56R3GgCktPrrV/SWJOZwK+Oqg/+AohCZNvu3dOBj0QFyehEPMMLwGxATcN6UvUBO0GNwTFH3kZFQ/JlZgIoS3ZDOkm3y6dgFYj8Sp/BelL8DzZC0lRZA9VC2EJ3zpfgUoDHQEJIocK2Q01CGkQ7wrFZw3hEUEHNQPRSZYAoQb9Cw0dMRWxJgxiqAsFOXMG9xryC4smqxMlevgFzxodBkkBJRr7AMsu44WsWi1cGE9bBf8LISPDFKRQHA0hQLN4RBoXBxElpQKNQ2xKg1EyHo8h8jw5DWIuD1F4B/E8ARlLC308mkanRQoRzj6JPUQiRUwoBDF7LCsnhwnLD4EMtXxuAVUJHQmtDG0TLRETN8EINQcVKZcgJxEIHUaRYJYE85sD7xPNAwcFOwk9Bw8DsRwpEyoVJQUJgSDTAu820S6vAotWfAETBccPIR/bEExH3A7lCJcCYQN/JecAKRUdABMilwg/XwBbj9RTAS7HCMNqaCNwA2MU410RbweNDlMHoxwvFbsc3XDEXgeGBCifqwlXAXEJlQFbBN8IBTVXjJwgPWdPi1QYlyBdQTtd+AItDGEVm0S5h3QChw9nEhcBMQFvBzUM/QJzEekRZxCRCOeGADWxM/Q6IQRLIX8gDQojA0tsygsjJvUM9GUBnxJeAwg0OXfqZ6dgsiAX+QcVMsFBXCHtC45PyQyYGr0YPlQqGeAHuwPvGu8n5kFTBfsDnw86STPqBLkLZQiHCTsARQ6fEwfTGGYKbYzMAS2HAbOVA1ONfwJriwYzBwcAYweDBXXhABkCowifAAEAywNTADUCqQeZABUAgT0BOQMjKwEd4QKLA48ILccBkSsB7yUEF78MEQDzM25GAsOtAoBmZp4F2VQCigJFMQFJIQQBSkNNA6tt3QDXAEcGD9tDARGnRscW3z8B22snAMMA9wABMQcBPQHJAe9pALMBWwstCZ6vsQFJ5SUAfwARZwHTAoUA2QAxAHvtAU8ASQVV9QXPAktFAQ0tFCdTXQG3AxsBLwEJAHUGx4mhxQMbBGkHzwIQFxXdAu8qB7EDItsTyULBAr3aUQAyEgo0CrUKtB9f81wvAi1uPUwACh+kPsM/SgVNO087VDtPO1Q7TztUO087VDtPO1QDk7veu94KaF9BYecMog3QRMQ6RRPXYE1gLhPELbMUvRXKJVIZORq4JwEl4FUFDwAtz2YsCCg0cRe4ADspZIM9Y4IeLApHHONTjVT0LRcArUueM6sNqBsRRDwFQ3XpYiYWCgoeAmR9AmI+V0mrVzccAqHzAmiUAmYFAp+AOBcHAmY3AmYiBGoEewN/DwN+jjkCOXMTOX46Hx8CbBkCMjI4BgJtwwJtquuGL2NBJwFjANoA3QBGAQeUDIkA+ge+AAmxAncrAnaeOwJ5Rz8CeLYZWNdFqkbTAnw7AnrEAn0FAnzsBVUFHEf8SHlfIAAnEUlUSlcRE0rIAtD9AtDISyMDiEsDh+JEwZEuAvKdXP8DA6pLykwpIctNSE2rAos7AorUvRcDGT9jAbMCjjMCjlg8k30CjtUCjlh0UbBTMQZS0FSBApP3ApMIAOUAGFUaVatVzAIsFymRgjLdeGJFNzUCl5sC765YHaQAVSEClosClniYAKVZqFoFfUkANwKWsQKWSlxAXM0CmccCmWBcxl0DFQKclzm+OpkCnBICn5cCnrSGABkLLSYLAp3tAp6OALE5YTBh6wKezwKgagGlAp6bGwKeSqFjxGQjIScCJ6sCJnoCoPcCoEgCotkCocACpisCpcoCp/sAeQKn7mh4aK3/RWoYas0CrN8CrKoCrWMCrP4CVxkCVdgCsd3TAx9KbJMCsrkJArLkE2zcbV9tRFsDJckCtlg3O26MAylBArhaArlDEQK5JnNwMnDdAr0VArvWcJIDMg0CvoRx/gMzbQK+FnMec0sCw8cCwwBzfnRHMUF03AM8owM8lgM9uwLFeALGQwLGDIUCyGVNAshAAslLAskqAmSZAt3OeHVdeKp5IUvMAxifZv4CYfAZ75Ugewdejl63DQLPZwLPaCtHT87vD5sAwqkCz28BJeYDTg5+RwEC3CMC24YC0ksDUlgDU1sA/QNViICFO8cS6VxBghiCz4LKg4kC2sMC2dqEDIRFpzgDhqEAKwNkCoZtVfUAUQLfYQLetG9zAuIr7RAB8ywjAfSXAfLOgwLr7wLpbHUC6vUC6uAA9UMBtQLuhQLrmJamlv8C7jsDhdyYdXDccZ0C8v8AZQOOEpmPAvcPA5FqA5KDAveUAvnVAvhimhiap7czmxoDnX8C/vYBFwA1nxifrwMFiQOmZgOm1QDNwQMGZqGEogEFAwxFAQsBGwdpBl21YwEAtwRnuw2HHq8JABNxNQAfAy8SSQOFewFfIx0AjOsAHQDmnwObjQizBhufwQCnBRG76R09PhZ4BWg3PkArQiFCtF9xEV+8AJbFBTIAkEwZm7k7JmAyEbrPDi8YxhiJyfYFVwVYBVcFWAVjBVgFVwVYBVcFWAVXBVgFVwVYRhUI14VnAgICCmRe6SsEyQOxBi+7uwC7BKe7AOdAKRayBUY+aT5wQj9Ctl91N1/oAFgRM6sAjP7Ma8v8pudGej0mIwQrFic2NX5t32rB8RnCLGkBa9duMBcFXwVqycHJuAjPSVsAAAAKfF59i74AMz+BAAMW0QblrSMFAIzDCwMBDQDlZR09JB9KQrFCvEE4I18nYDYnOCMJwT0KRD9DPng+gT5wPnECiUK8SUI7X8tOT2pNCixrVC9qC24fX+AzOhsJZ5sKYiMrPB0mQqtCvCvMAcv8X8kOHy4JCAkifp3fajotShfJq8msCWXBy8wKYEFfD+UQoxEAk40dRUIlG6ltOc44CjM/Qz5wQj8cBwodTEdsWywtWuG8Egp97R0rQj8cXQhKCQ4zVENCNwQ7Q5wsCoEbLUI/G/UIUyIjGDAxAAWPYfBeCnFkyWALYC0jbkNgGTkCGx5gswYCaxBlTmBNEQFk52AVYJVgfWCzYEtgkWgWFwa1DtxVqbxaC0MWqwG7K83BAh8VABwDHgF5AmwvMJVSgAGKCrhHGgDkI3SOCsoNpk3qAZsCh5xPBUBfAPf3BwA0FlcMC6UMJB+6r0eAgQw0ABUTnyuCCHoC0gtLZREbANhOBnUECh5aADEAtritAJQnCxZvqyQ4nxkBWwGGCfwD2e0PBqoGSga5AB3LValaCbthE4kLLT8OuwG7ASICR1ooKCggHh8hLBImBiEMjQBUAm5XkEmVAW4fD3FHAdN1D85RIBmpsE3qBxEFTF8A9/cHAHoGJGwKKwulODAtx69WDQsAX7wLAGNAlQh6AOpN7yIbvwAxALa4rQCUJy07Ds4CkBh7ULtYyHRyjsOlmw/ZFUkb7AEpEFwSBh/lAccJOhCTBQ8rDDYLABEAs+AiAQIApADhAJiCCrJrOS8AFABbG8YubHYqDcEQAjskHNPhHB4LG30CewTBCqrxbAAnLQ6mLs6hHAe7CQAQOg+7GkcczaF3HgE9Kl8cLs4RGQB9q9ocAuugCAHCAULz5B9lAb4Jtwz6CDwKPgAFwAs9AksNuwi8DTwKvAk8DrsFmAEbawouzqEqD4sa4QHDAREWOwCgCzsLuxC7BBiqe9wAO2sMPAACpgm8BRvQ9QUBvgH6bsoGewG7D00RErwBAQDqAQAAdBVbBhbLFPxvF7sYOxjbL7ZtvgNIqLsAB7sALrsC6w5WAAq7BAAeuwJVICp/FTwVuwG+J+QAsloBvSjgo7vIAAFbAAG7AAJbAALjAAg7AA67AgAbu6VbDr/EAPQAaPuoOwMBu5UnSwDn3Rm7CBp7CKEFCv9wAN+7p7sau6OLeXIG+6mbgwASuwYbCwG8AACGAG27BgALu6c7ARo7ugihnMoBuwvtB8CpOwDhewG/AADlABW7AAb7AAm7AGmLABq7GLuOaRX7AA5rAC5LHgAGuwAXuwghAA1KAcIAt68mAcAAALQADpsAHBsBv/7hCqEABcYLFRXbAAebAEK7AQIAabsAC3sAHbsACLsJoQAFygBunxnVAJEIIQAFygABOwAH2wAdmwghAAaaAAl7ABsrAG0bAOa7gAAIWwAUuwkhAAbKAOOLAAk7C6EOxPtfAAc7AG6cQEgARwADOwAJrQM3AAcbABl7Abv/Aab7AAobAAo7AAn7p+sGuwAJGwADCwAQOwAIPAAUOwARawAPiwAN6wANuwAZCwYWGwAVOwBumxm7ALobLgATOwMAaSsKAOFLAAI7AARSABd7BRsABtAAGLsAC/sAX7sAa/sA5IsBuwAXdgG8AAFyC6EABUoAbXYAB/sA5XsAHGseAXsoUgA5RQD+Bw0McgAoKnABpAUIXgG8XiMMCQdvS2xfKokfPBRiLTYDoQq0AdgAFgLRA24BdnJHUhQhA08CFT4BLAYDc0a8e1J6QAApADEB+wBTCtsAe5AsASsAduUNETJGAUoAVwUAAVABB4rMAHg7BCClAFoA1hUAlWg3H4sAzWuxAM/UFgjCdXMbGFYdCdEBiJCrIlNTTUgSPMKJ+QB/HDdAKSvgEZdPAHIBKSwwKUIZDwMwVQT3xe4AS2XcAGoCcQI/EXo6x3guNdUGBQAQGx0KCAwqBB8dKU5TTgi5ugAKEs0AJgABGgCGAIkAjjUA7gC0AOAAnTwAuwCrAKYAoQDyAJ8A0wCcAOsBDAEHAMAAeQBaAMsAzQEHANcA6wCIAKIBNQDjANgA1QMBByoz1NTU1LbA3M3QzkMyFwFNAVcvRwFVAWQBYwFWAUdLQ0VoDQFOFQcIAzI2DAcAIg0kJiksODo6PT09Pj8OQB5RUVFRU1NSUylUVVdWVhxdYWFgYmEjZmhwb3JycnJycnR0dHR0dHR0dHR0dnZ3dnVbAEDsAEUAlgB0AC4AYvIAigBTAFMAMwJz6QCH//LyAGAAj+wAmwBLAF4AYPn5qgCBAIEAZQBSAK0AHgCyAH8CPAI/APgA4wD6APoA5AD7AOUA5QDkAOIAKQJ3AU0BPAE6AVABOgE6AToBNQE0ATQBNAEYAVQPACsIAABNFwoWAxUWDgCKAJIAogBLAGQYAi0AcABpAJEDEgMkKgMeQT5HKQCLAksAwwJTAqAAugKSApICkgKSApICkgKHApICkgKSApICkgKSApECkQKUApwCkwKSApICkAKQApACkAKOApECcQHQApMCmwKSApICkRZ5CwD6BQOnAl0CNhcBUBA1At4RCisTAUo3E02RAXekPAFlWQD/Az1HAQAAkykeGI9qAClgAGkALgCJA5TMi/CuhFoFuisOwhEBndV0KgsEIzFsATNabAGyAN5+gH9+gH6BgoJ+g4aEfoWIhoCHgoiCiX6Kfot+jIqNfo5+j4KQfpF+kn6TfpSDlYiWgpd+2gLabOEC2GwAgmwkbKAAg2xsBEkERgRIBEsESQRPBEwERwRNBE8ETgRKBEwETwCWZmwAowOIbAC0ZgEFbADJUWxsAM9sAgxsAPZabAD2ARkA9gD0APQA9QD0A31ebNSEI2XAAPYA9AD0APUA9BxsbACJWmwA9gCJARkA9gCJAL4A6AAIAPYAiQN9XmzUhCNlwBxsAPdabAEZAPYA9gD0APQA9QD0APcA9AD0APUA9AN9XmzUhCNlwBxsbACJWmwBGQD2AIkA9gCJAu0A9gCJAL4CNwD3AIkDfV5s1IQjZcAcbAJDATZsAkoBOWwCS8FsbAJXbGwDnwLtA58DnwOgA6ADoAOg1IQjZcAGA31ebBxsbACJWmwBGQOfAIkDnwCJAu0DnwCJAL4CNwOfAInUhCNlwAYDfV5sHGwEPmwAiQQ/AIkGjTFtIDFs1m4DKGwDrAJsbABVWv4VMgJsbACJAmwAVAEAul5sAmxebGwAiV5sAmxebD3YAEls1gJsbEbCxxP/x5BApA0KYFA89AsjTx97EHmJQPyocItC2JnNFRCEnFU6SFTDoI0PxeRNRoNRWkpzVnWW8pTagkNmgf+jGupqZ3eu50LAFnc+OzfJwdub1AdpOy76VnijWNR/CMEevikQkFyQuLuPajxWi9chqOoMJ7qpCN4sx3LJG4Myu8kD68wC6+iAwt+pU1JEeY13rpCVkXSZfinVKn4xZpxsI3Lp8bJLrJ9ujkrIalMRBAcv/GSKEtowzcEn5XmJw2BagB8V2UWJoJHZ14SXhM7p0XeGFOuw6mlvyq99WYp5XxrO6ru9nn4RHcOkJ7hx5UqWtman7yVMLzYXQefQRUdIY70RYQE8+aAzCNSGQkXiHfnHYRMi+xczKDdZLk3AV1gzxkkSHLjBwuq8shIJ+/RAbqjqQbugFhe0rqklu432EERkM5k9y1DXzds46oLqKAx6OhPT2WiqEfhaITn7OF9Y694AmKmUvbpWp0xJqDaf3jeNJXnK6NpnGcFOmbclbARC+5+5U52ufw5b0Hh+2LrrNimvZe4eYmApRsZnJE310SqB+1xB6rSJfnV1f2D0awB18Oc0sXAFqIlgHgWiaZGdvP5CJUSsCTCQUC335+iSkwPlLJJ5lwjTSn9Lw22NbK1Tu8w+bUpHtDRDPho7Gun8aw2Jzu9i+N0Ot/kPMbLAb/rUQ82kfpk85qLDkfxLl39QPDngo72GYh/Xigbpcm1pA23D2ywt3D8GgMOao040wDqkHxOEx0OhC+ZmHiIdjK7yRbfJD2ouZbAedhD3p7s8WDmCJfNforgDYPGAXSI08fTjPZ5B37lc5VXGzc1vJmibDwBNVzXuaUzg7N5H4BxqjhJ+kz9HLUJys7bpBDYAPvbut13AwJCWd059tS8YTYgC8HwrkewBfa1LSSpmMr9uR2EekTiAMH+Mx4AGzgbquccwBDlLmRhgXL/YiLPCEb6d2k5qJ6o800qddABkpqt7NG+sc2uvHZwZs57W1AHTFM1KkMShasADAh2FvzbzJOzVDMS3ZlT2BSFKdnkZFB6JyqJbhm6XANis9TrtzJdlPVp+rl8v3nIke6Jou7m2TKu53Vounupgkz2LzrQPhhatLIG7rfF/gUKWp15X3LKt+ZvuCDSqPUigF9yJntimC1HJR7Yj/dUrLAXWrT+1tnwPJJLGKAlQ5VeNDWRKCTt2vz3rJuo4+gIt75/Mkfl/gSZblZ9r/SEeeosZXneli/xNh1WVCvkRt2RnyyjtMkMqhzXh1PVOCbILqv0r7rGYm0CHIyKdhHL90cl9E1I6eEtQTCt6RXj8M0HHrHCHLVRpNM6WIbT5BCMGVnL0o5895qSRbCJz+5I8PGMhAN/Xrj4BgIdlKqlHtBHqTJwmK169toZ2IWxNzrAbIG7zh85Q/LG2A4yBcaBel52zdunokB0lv3A7kXnTI7M6ZnfZ7nwuj5lkGhqSpW+w5CI/FmRlplBEbnZy1ZxS3DL8rf1YWhO5XivWZBSRh1gFsjjyj3qRG1cm/6ors7WsEif6WRxns1MKDZa6KrbfMQ/swIb+2nb0tqxHeii6FcgVeAjE/Xwac1owx04dJKG8R5YQgHNnEfHf0qb8WOnU0eQSjazq+IK7cSuCqYzPEUB/x+QgGZqM3dBoYvNvZVOHDkbgdilWdagqO5bkybXfLpyMPuGq8mvAAEZGbR6RwXGlW9ErOWTfnjfx6dXFJqBj0OBSGFz4lWQasNOmVJeN4SFWSLfOGB/7ehV5YuoNNROHZEG9ElVuMnqbDMMuDleOt/cN/gsWxGw128mwU8/HxkOKqdTZnI7dHka67WCTf/FmBrxpNCaKJ1GxBTCSS7MNfhNj8S4Gtotg6Z3AM9cAeVROnppUMaiV5jjudLnNqoVrKO1/FijLlAc74kxydxKX1RQuMqHR63eecYr5o6MJ+B78VsLlCrpelWh6GOrCOBIoQmIcdpJL1pwE2zzZqBkecGTdK8KMOB6r1eNRURyrz6M899TZaoS/vNOxHf+5gORU+OyYIcIW6diP25GHF6u8TNjuL/GJzCnLLXd01KrsjRa51v4+O/VIAWXESJxfxWjv628J+cWUQpoD+Yytzs3jSMRJ23/XT+vUdtUMLDQq1vnIoeg/GjWh88MT6k9dRqDaQ+vodilFgvjuNw5pJpId9mfwyYeLCGb3BmHXdfQfhfPRQaupe/f8TG4Bk3eDKlYBaEK3kZYNN2Sdxz47m/vYBxvIOKtnqplB1pebzuXmAr/MuzQCknKe653dzaWQQ7MUhWYWvzIZwLe1v0rXxImLaz+AkAu+sYikhouNF3EW6w4crZ6MuUiDbIAx8XhAfegcvW6x9BPb3/sCxGWu9YyatqExB+TSm69qIkI9IwhjrcnzME+jWBx4mNQm5WwLzUjSyY4FZ0aMF5YFlXUD4hL4XfOeYv5rDe2s2D/Cn+28fZ9UCnOQvXFMnQqfc0G+ZqOWWD9l/liqUPaNQzZjxCHpUAD8Rcc90MniQ02ugHWsUupFUvhC9usY7zNPt5F2jO7qgzhafsQSd50jgLrC6Qx6bpHbXR3WNAu1BzGmwbz+ebGmwTjdy006Y6zipP7n/OJlvSmbq+SY+nefAVKK6EBMPbce5n3IdRI8+vbxCpN53rw3TvgNds1SuMiuLGxt89L71mxPDeanGhyHvOjmO56tnVpoHalQnL6TqNuqKsHjHCIKB4pCgj4WyYPvRvYvqi5EMr7lN3MotPR/KH7JUD1lZbU0QzfbrEBJnuQiVAyAC9vwXWp2TRU1/0aapyAH2cbglEHVAdl+1rb1u147uV0td1eNoQZsqHrIMIYVPXtLk2TIU3cJE08PjoYNDpfF/IcJnYQHl6nsplczX3Rgah4NbJJHl//5scUufqsSd//kbIS406ZWoMP//+jhGUswX/5nVNz/jAj9KmXPtAmMiK+khhbn1w/mELzZMT/WxcW//y/jsHaOM/61oAW/CjYhJtY622/TtMYuP7bilBvbiT3vB9n8IcFPnwM78H0KfhYDRdY5PhWJ4jWRQzB+HT5NVZV56LG82hcQms+jOTT/c9Y9sx5rPi1/wB7f/+c5UfUCKk3iwwCuywUc2MGnAwsXf1E5hoI55x1Q/Qby+sWH8NRjavZ8VaDsdi1NUVhH86BJHX1yaFt1w1OYeL5LVmdN+5Q+KuTvXEPDzUCg6xp0HhsUhTWSe7MZMM/6rsTUb0/nbUE3YQlGGt48kT1/6cnf6yHnvHtQx9EosOXN077yyEq/jE3YTiG/5SEJmXFeocJJ1EAd6vKeK6VEdJLOZ1km/EwOnZWCQpzCLKPHxrfh4yJhGq//2dos2E/3+MOcdW5EsgIdmTQUQetzRy5fQHhDBl37XbWzsqO/cASEDjyst1/8NEROqVAxWnddQV+umJ8IrKVgKvGaTc0GsQ4s8h0Osql5QKwlddPDjJhKInyWqYUKmmlIts+FIcXZ6yM6cljbsjUG2ksSOkuIw4sYHffRNgBOLApvD6XrR6Rt0rV2Uf8IpnIUVnb9Twt91QjAaD/dStSWDxg7aYY+VXIgnuowYdOkjywa2hlgrnI6PjaU3e3UjQ5Yk5mdIJGyHnv3/P+1EkMav1yFyF+FeJE/RXnWBw+Nh0aOo6TGlKX7d+dkP9+brvr79SdtXJtcD/aXBGiMNfG6/NQniQHYQlK78FEHDqOh+bDI0o+2Ub0h53EL/vlzjrBczVEZz2bOtvIL+DIzDkk9nCWt7tlqsq3l9JMtJk3r5HG2iJ9b/X11TG6wwMAjHLQ2oasaMEsydh88QPvI+hmqIHhvalpKoKOueJR0eZ9J8G2alNOIOy98jwvbc87Ewk9d+5G/tUijTmlbjFlDKXV05HalKxaRTrucc73On7yzAPS6f2v4ogiaWyWeV73dv/MsQT5HjRrsYV9dLAcI3T+zC2qEVINyNpEhoKV+xVSuWtT4AhBfpnZ7unIM+HX3msI0HiI+P+z2PFgkjGi5PqEbG/wNIWeRUjPtDEgbbubN+I4JaDLrW9borRBDob7ZFx+JdKeFVUKVeWqb/c88Ol7DhM0suLtuEd8tkDSMTD3DFx8UphPINHMHi51hAPttXL4Ektt/lKEUG/R4qZKohHjVpAcPIMiHyWr6xR8/EWnNJvBFET76yCdk5er7ADB/1bgoImhpSiZ/omZjPKPCEeZsOwvPmXL+1vlJNeGO3TzySmGA1X6e58gLrazDM71jywM1XL8zKHN6G3kB31Y8vLtP982N975SZXk2JwDvmv7AY/aDsFFk1v+nE7/hbvuOWhBH4kuemeYozPk2K22Vx/YGiDTLU7YilpOt29u3RZMBh4UJjlTP5ItxTzWv6ebL9b+GSU1Vsm2S8LMfVfJczaBSqE8J1A4YUjpsALL7++bwCPXFhaufdpDFtBlHb9makeYbqdg9ltvK/HwF/rNE6KrtWUkEcxmTB7Iyu5TiVaIgW/YxzQhpArliIMkOoK5L7ShVtF+DYqV01mk7fwop04hQRwg4KFmr5z9nYf05VVqkSe7gfnx5bxxlQ0qEV0jiwzf064qG11iEqjHcUgDWWsDs/LEGlzX31T5KVL+7D4EoKim7HBagiqRo5JI3WfDBgpKIruWz9j/J6Hp5Q/EJbMWB8NeSMuFarNw3AEYPBJtYQO/4oD/ZgPTSQ06di0EeumX5EbrdThO+fvYEVSxLtZ3AJkee0Xn0sDwNtiiZhJjJRDuG1YRKB1vOulfd9JjHeyu+UHTmrtra/pm+8Rixh4WKiLaLOCxIbZNoWRZSyyUGLPjAaAo+SQBpfO2uruWrzFxLlpvrXJNMCWtlJDKGAnlWK5xpU2tcxXbeD+sbdfwYXt/qTwDk6UqXR/aUt099DhSNl4Nk8mXwpw+b0nvjKOG6Mg1PRXjrMUMANvNgEArv8nMJs3vj1aHi8MHz/UfJWWzkcrSpZTNBhduXlGR7i+ip/THDp5R9KRNcDKECgtwgXg4EFN5HHfikP/XvsoCkHTg+NbsD8Gl6eknk4Arwn/BWGJ0hgW0/gUKrzuGZhub7igRP3abetpIm+24xEOlWl3YKpm2qTBFvX8ddDRvm1LcwnCJuEfZx12qPY9TrntMIQsv316zvpyWnyStX8VU4j6tQk+CWlLBUCJR6MdH9Cp7g2qdn2WM9qFbREmejH09dlWEPm8hPF0L7RxwRRdiCs0DP8ewk6ApoELkKU9hckSdbnXm8UHJmaNXjxv/q0fTTpu8rnl9lN0vQCpDRbCtcz12rGRFEA7Cfg7FhZn5QFkNmv1ZURKEsiZce1nS9K7HrwpC7yJV4Xt3eAVbLJfoXHrtwG60Z8gwaSnmxoL3s2ZlRqggZN/MHo1oUS4L+GwObFI596Ld4Mvi8l+cQmF1gJpkpnDio7TuO35npaMHiWzFqPSX3qNgkIPGuX0qGYnPIVsM901Yu8oZnOZOY1TbtIdFUNKNq2dP8SJ4F/VCEzIjF0/Rh+7UrZj80tC6rognVH3mqa8eCs/lcQU1Pjj98kBmAKDbZUTwosv02UunRR3n0X6c+f73mtwB7/WbQ16gO431EtwZbNG1SM4TZPBnsQSESlsfG2JLQXx5xWf4bmQ/xcVCPISAX5897JxHKLD/Xkgu57+ABR2+MMtEbX64+MNlBHpKC7sjlWVEShf5qA+dGc59LFVlZrX/Enq9z/v+wnZ1HErmxmjJjxOA+hAjVUWgtq6ygAi/8ewJDjUMFw3zhQFtbyTLDPFd21Ji5S5QPZo9nMSxdg1+DGFSN0wlWt7XeYPbHqLfliV0J1kOhQNp0VbUPy0MS2Ms66OxtSWvaULaWHnfAA+sieVVgtjDwN3nKonWapkSKRN8BKKJQpCfqo8RQI5udhfu5s5+7vwsppmAJDgz2GNA7d43VdbV2l/SrvEu4RYslmNJmfSOVbssxAhSYy6WxpIQdDB0FVBpZ6IM8yr81QN+XLZ3n/wed/R+s6LslkxKbzzst/GkRbe6rFmtvJCwr1T44ETM+IMgOnjUO0eG6a1n2w7lwM1oFBvzMUWRkNFOvKcx3oSb5XdenZ5dXsute6nkRypBiSdAtA2fxAd8UdLOZW/MB7fZoEuFheQXijdaF8kuaRZoSeWdKOkKsGYEGaXfaDKTu0WMTcLniQs7KRCz9iK3SP+Y2xIjkfVGqFLSQ6vh+A1u6FdfwXsv1VPMfi2cxmdM+/xTgMXEyo2ZGcQ2YmPsghnYdv2+z48JpGZA4tUK1p1q2VdVxyfypXEXcrxKKtmt8UdW7sHWmKMqDuBBM3J/JUQx8eUYN4pJ5oRqvdiPHU1o/WPjiKvnlCqOdyxlxF54L9PrtLD1NejZ9aZDivVr6ZfMFK1/psVygoPIAnphcJWWb9+5IKMKmgRQULsTPZi6Bw4wP32zVEoKcHpP73CkFAqS98nSaGoWDjDJiaACJn4p5o1jq9R4Q4VcibhXF//LHP0bdf63kRVZdRbbhGe7sDQcyWS5tpkfeYHnff25WK+4FpzLlAcbaKmHdIBqOw3fImx1uqQIADH0TyHzFlqTG6nMoY81svP0T6BIyELMS8tMe+E1p6TFP6sVpZa6VNaTumufD5aj9goRa9SAmdJT4HhI2r0egj8UrgFb8L59wGLnYlzkLAiUd3m/WWIIEU61kPoEjd3gIVy/fiBcgqQqHnoXpL0SqLGdGGgn7DQeVMSYWHfjno1FngIKP9cjYaTlcRP6bZunjHP13/lbVm4awti894pTf/ZNNqr4OR+tDVie/m+rC8QpVnRbsCMPukOH87B2jM4AG6pHuXl1x9SiKdhYJVOhfo/+SCaGjUW2CoogL1FFhFGN9o+acoVLl0SXs/3vrSccmZeAF3NewFuOg/P12QYKQF+SH+KYcNnsAhIAELPBUgre/KRUJEA+KPD0MHRjv+3J/j2Z23MuJmkfy7leWcMsti8wXLSHgXFJTaksx1Woi6oljwxFVIJG12SBSZLNJDbXMYPekmiXT4FclKI35BFgqnYpKfcsr+f8HUXQoHJ9UYZ4J5YMiHHyAxg6eidhodgqJ2Htf/xYEx+G0zXchuzlt8hcAl+AT8NCQ4orFc4DerabF1enA7NTLnvtZh3FUwqIOvY7Q4DYmoDHwXTSw5UNNh6r7j0B/ezMYJMDcw4+6gCTZX4YQ+7Xs8de72vsR3cmfpxIX64/6KR1p3VX4F6vfHEzxzarh8aDH4G1DFoBBM6npXFpK+Rh+WrcFclAeAxi0PoaR9CpOxxGLSdvxKVSw8oOOanG/soKImRopN38AdcUhhM2GT/PgQeSQrG12njuJJD5Z7vWfAZmFybYLdSA91kB4aoBhoj1Z//KNIVVujqaLLRwCkbyn4vh0739C9V9iSjybeOIeSOvNs7LW1a7EUtNoKAnOGML4U8KBXpfrw73WjAszJG4Qscq+Xr3kZWR4Omm0xT6qE9y6FNSpstV4onMZSqCEJ+3VX9qjvdx5QVrM0WXxmPZxejdfnihcFAjzv5PjlTl6ickDbHe6+Lch52pjOPqk+m3RZ+bh2JSMGtFBuODbMchrpRVlt16NTQ05Ps0IDtWlUmWfP2vX8M4YDynIuOZ4Ck91+591B98Gw9fw+yQogTR8CSg0zaJu+rlBo/mr3A+1NziF+kdubz+whc857AZt6DwIBIF5+5yiaaf3ByQp1Fm3sOkZDAzwsYSQTM/Kv6idkugF63FDobDdUY3huruU+sCaBuRR+HmOowvmZoBjZHNh77SXFtmY/oOUE7ifN7nBHAo83S/xvcS6H4Ci2u/9Id62Wv6Ui+zMNLAzhfkTkVcW2BwrnYvpur0ZDlzs+ZLsmGTWvd1892t78gx1YjEJusGcxphjLkV0UfAKlekfSBVWHE2ahk4AbbRmHyL7GYdtKfdlINwrcdJuf3Cee1nfUojDQn/YmItESOFhtLzrkEv4k2XpMU9oaJQ3VUC+1INh6BE68pkHameGJm4Gvdb24Q0fXWxd9Tp3A9mzFSe4qXDGGDIV4AAGV1jIDfveknH1TwWpUT6HiQxKP3AAHJNkJeRlj/mXBmS4S1j8FK6YmpK7jyyAiRbsMCCLoJcx01fvgpMvKQRxu9IOwymconQjD56g7ksOrcOeoTbius4JnGesAS1DtgdaophYsw1wGIsMS3P7K6doE3K5czznqPQLSRRF/Ylzb5NtSKsL33SgskFNCF4khn5LWaDxI23ZRi2hzqN8uW8UzZEBYy68+VtGLSymQrXGUlr2nO2BbBIT5Vh1RmGAyDXaW0FPrpx3wv2UYdFk9tSl+906bMxCuXQaKDQP/U19UEcVGK4gmksL8lAorxQSAOwpeYX9xrZsh6yoGaL/X5O3tgQC8OM+/GvxnW9XvAtu/JxAigydfSmZfqZfg1XOcHNOpLlN8j64OZ36l5qawDBJ62YaTvxeNmm5gowCdBosgcpHOgNgwA+sknN8XmsR2IYChcafl9bGNMZ/nB5guWuvEziv6QI2bP2DtyKWG/qUjZMaxy+wASkkVGtuwGtywkTYG6MYrZBo18vYcww48G/+f+eITA/qMwbLlJC0S3+/ai2pPvkOhRRVmGTuSupaxhIk0xoXLtixCxSAn4Z3OnUS3wBqVscLI4P3GP7i/6gxYsswsVmkvDXFLhO/OKcur8flegCSKiqmVpIRvCzgbjEA0mXPn+RExXY/2OE1f/BYuWpRQY8gCDpMOYBx9Gn4tL3hihSIR1ixh2PIIT7cr2gUJbfs76EKYG52Jk0UZF/PQkBxGuFCEWXnG6ue/hTIqjTRq1sotVrKrwIGHDrITyuanUzbIYdgdEeV88K1VD82TYB2B61Ft+tB1KqHPmT9+hWoaV+iF3SuvtJqvnoLaA8wxrD56AUMULEgzO9SvBcBAfqz/dzMYzwMt/YLszDbmGe1bcHHfFMcvGql9bf/tp+Hrj4q18aNnftGjmXTfws39emn7/5IBxog9MrmftAA5Oq4awenm8HimWO72dwVlHcHmutVMdrMHw+p2vzpzT+B0iIZ+IEpplwWhClcXlxhxAsF3CHRnnaUEqq3ByQ+cqhe5SvR4SFxh/LZoQwtj8QZQGT1BzY2EMpYnUcZWQEPlwFZw+7UryK9qV8KgruYsvyMoK16KI2sN4SOblrVwhyiL8+IBZ8cpUhsJQSU7TFHAi+L2F0sn0y+FtDODlnuif2Mba8QddPZYYxjTsIgkMe3M6+7kXxUfZvbCUlyq71J1eNczGk6Vqw6rSx2K3vM+DjLxDRGzWepTO2qTT/W8S7u0QXcyFUahcB4vq8xCYTpy8iswtnyz7Kx6lgTEQJ9RqkgEIN6DOUqB0uRdeYuDa7AP7Zy9z+ZlTsmVR5vtV71m3dmdtNeWghbr5PnPJtjXAzcvZjxyV96VEx/B1TA0IEQSI50ywGuIbmAYdQg/l/rxhQLX+6uOLyFsaUt6mtjpAJkLfehnB6MlOHnNOrWLvCBqVBS07jcM+4RzLEed3f3/0Xwp92U+nataNHyEgnnuYR6PXEjRLETz0xrt3UglfK7Bn4aNlXG7cZco4lMziLv5+Mh2JCww3mz69Z9ZMRR/xv5EKJ38IFxKd9dw5CgPIXja/gzAshMbF14/qBIgNkdUQeP8YE7SrICGtiTnAKTyA9cXa3OauDHxZOdTP7yuYBzD1UcHstIO16FxF1bRUAlSkszI83YufTchU8OPnnozDl9bS0y6CnnjGwgj9M61cXcZsljjhLeT/Vq+30ScN2PcT/dOoxUDqDS38+OpCCzLDdnwHQc3ECQVIkaxmdPaZTSdfp2jjGzSdNLM5yPQsgJDl+ZnhclDQi8ltUnkqWJ323IvTZPN8rn0+EshL1cx9PiaLTzUsryn9Zp2Nt/detUAh4N/2I3dlMQqjHFxSihv0uykzflq5clMy2ZBaxoEb0/QMp03IQQus3vnZd/NOmSsmgqXqKFP3ozyDgY7RQS+npabe/hNG+5sa5FtvL8v0uYuag2NewYkcol3TOTadpuncCnDgOGpmLnTQ1PEPUN2cNsrW8LYfIv+hzfb7vod+ipXHzmbgj5Fzc6RcT/5PD7VQ8nTJBNj1urkVUx9uJvTWmqY08OC80rGDLaWXv243VB16gjt4Xtwp5H2UDR0LiKW24Ed/sOO8jl1yEU/XAb3h7ScKnCFy/V3sICrkY1D0K9fSokHIL0s5/7DLShLAPXRbV7fbv4qj6OwHC9d5PlEOX3LRpQ3P7hcSAKlIKPDM83ypz56U5+rJeo0cyUtC7wltL8wqEiNSgZsDWzACc7RFoZqhlD0+sihIBQlkQTXmvUyIOZhkQX2zqME5VRC7ms1sa3CY+odMn3mMBiTvCMKnnCxg5ZPLq4GUDB4jF8Br2K4x4sxfWjGXQatJ25I1JyrIv2Z4bP1jKw5C+B2/s0v4dGUOsaS6IPIQV3ETQ+F2fSl2BPBXHzyYN8VmwWIrKeMX9pyGWuAOVXwkxJsRBaBVzLhZDP8ONGncknL5DpTxHN32GgFWMwsc0GmL0oRDmRT8u2lvjAKUIi0MmXhIHSlFeh3Qh5pP6ap4YUd6b569ZIaHgya2AyD12cPxY0In/PBjzDctTaKJCU+xc6m9RkNLDEE8guvxtJP8sl8N9bLqw0F/qejaBlcHYqw31zYpsutQp07hsP1vhGdl4hJ1wA7OCsAHnKj9879uSHILEmuZ6vI1lT4tvnWCVKZhhYrWHW9oPKPKpbOC6FTjf/OtUvwmiXr2ykvyLzHGQeyS7BenZpL3N/CaF5T7Gkml7JXN5cj0PKaDpZVImD61FuMgFHPqSHvt4Ej4KBdAfdcoO3AjQPLwwtKsgGM+ty4lNZMBEItJSRLunG5ckrM/BeoXWoPZVvEoIzLgFQYPupMwZCXis4W2SCJ2zsefZqCj+aTfSq1FYdUj2UeJALvVTf7vuuikOE1Hit3UIAGUi/sqgMum9vw218y1FlY/9XnOji9nqhGAcMYICc7BiqLZj5N+cKEuSAuiyWbMg81ZD1lHovy/we2eaCcCv4MzEW3O0mVA/t2xdA0cxTVbXmFhn+tARDpvDz5ftLr15OAAmvo2QiAky+feVO4bGibv2nlBmBzqx0lEDfEm4UnEs11pbnwZlJ/0Y73/wBPYfTNZiJKR73TzdCW1BffiJq9bLjQmaKnU0+gN8sfe25IKSUCooQwxePDrFn3a/zUgWxvPoTYVXfobY/GV2qqTkeVDV9D8657fhY0/wiaJ5NfLxhXbE/naxs34N0hd6vxNfdm1TCnozm/NKSCThchoYgMF7Z2tzXFovRfsNVkf86JjrM60r7UIuV3bsmfrMOqzjXjN6HPBG25zCJ3QLueySbj9oFvX/HxWBqh31PBPxduCVAxMqC9HK+YL3oBZqBruoh6LKvdMqoz0PYXUBrwbiioyE8Tj5ImjJmiOOWLbAZvIZ/l9rIPljx3T5glJ2ewlfuIT5GlodQsAf/IEtmYkML5SRQGxxwW+rlZkD8belJNu09Itwx9xDULTnemVDeojdbgcd2gKGM9aO00Jivtbs7ZyOSE8IPh98GfvatD8Ud5uHcZfAfMiPSlIxd4UqeSDzuNfbKDuFepkyC/s3j9fawmhY1b9NqDi0ZS5eP35l7rL2eK5QlWLlyCmxx8AFaFiTuD2pMUxZV5mBSJuJduOaq2ZrWpu28DE8jl/hisBz7bGWH6qLF0ayWNq1Sejtcs8KQrQqJk5P9QHDYHOIolgNsMDmEaWcTelghbfFCDqWrq6YLwDWy+m68ec5nShgq2fduUBpQUuKKKgnttaUX9PRfMmxqJyU7e0RLr1bev+ge1KK0bZyhHKKDE8gQX9Vf7rNHWOxBtZcxwwGusyMpH77qWZxXsQmbgIGhtiO+gSSRCyu/ek+OFsz1HMiQH0IHV7PjJi3dszYfFp8ue9h4+AfKte4MTiehPvxNcm/T1t9vsFZx8rHN5ie77r2jzZOq/Em4Q+H9sNcZakf9HnzCc1fJixppxP8FQABmVnqa6GbJhwaka7WH7Wdoz1WxOjSNV8N9sgW5S3Ppgkut+TTCkjA+AodUOk1KIR+8G8S3WrSZG4nyqfJ6FEjXl6a/LEoRMHZUqfPRWvwqrtXYy9IUsmUGzkqi76ib4NANCe5DnyOxnFRZ9d8FdBVBjra3iNuZhJuWW5Omi/hBigqDsg0mu2AhfJDXdwyMIJ33HHHPfS2JtjegRejX11m41TbNL+Qp7mR0g9CPKTj9PIjuSycGN/YPozXI4zarXuAeLv5CHKtKcJKRbd6R2oLNiEt0T8+QIVJH7zt9ncKMgd49vV2P1AyScZ9Qzbu3m3LBnuu6dw7aE0b6r4kzVkI/GUS88mA53L/rLtntkFlZXGtIoqNP2mD3eVv08AVVPT3wJn81zpbJV9SuqZ6Pd1ge0Zz2RFHeCdV5CLPftH9V5o9+VzFu4R0QeumqDwUhXn3IyYotdJnxr1l3BqWnQVAeDBEOtPyJQx1q5+mODiClXtYeBLTWtsJ42AMBcf/IFIhpfhYO08hsg0Ik+DpQFNOKReK3o3cudkxWX0soPtI5eSFOA6yNylS+IQjrQtYQ/5s4UcixJfokumBUjpH9ofSjUTwPCapGFndfqqG5IHeMMvfg+88SXm7bNyjk6pGKzL+WxDAdqKtQ72WWVbOk3I+ueGuammmB2pvFZvqIcU/lvW3n9+r2lycnQLE4OX9R1jIgW4cDjJ3v8dAa66mVcfC7ptCr5io6mCaA9qI9T9FFWqo1ZAaMxgxAu8aXqmaOYryMND2sTUfoHvxcYK7hEiJhCLYFDx3PBhE97c2a0ub1/ePJcyJOqr7UaTAPTJ+xvZtjb/40sloY1ltRnTkWILmIP2b7S3AdXCR+YiArMUHwdncpjpyDGfzqGOUoAuaamWzAMacQtb34/M32FEgR5lUEf8fRzFrZUhzQj0fR7/6gdzdnVVvcSneLmtqJ930VCCDORY8CVdQWdo/S3PNkX3pQsPVKWIYGAMrFZoq8bQ/OJBDSXP7KSBdL3QN0Zqd393p6VFc7DnlnFiN00SY5Nux7yadeIM0Upl2rVsu8/VAI";const RI=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),MI=4;function fX(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let A=1;A<r;A++)s.push(i+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let m=0;for(let A=0;A<d;A++)m=m<<1|u();let w=[],b=0,y=h;for(;;){let A=Math.floor(((m-b+1)*i-1)/y),T=0,$=r;for(;$-T>1;){let j=T+$>>>1;A<s[j]?$=j:T=j}if(T==0)break;w.push(T);let D=b+Math.floor(y*s[T]/i),O=b+Math.floor(y*s[T+1]/i)-1;for(;!((D^O)&f);)m=m<<1&g|u(),D=D<<1&g,O=O<<1&g|1;for(;D&~O&p;)m=m&f|m<<1&g>>>1|u(),D=D<<1^f,O=(O^f)<<1|f|1;b=D,y=1+O-D}let _=r-4;return w.map(A=>{switch(A-_){case 3:return _+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return _+256+(t[a++]<<8|t[a++]);case 1:return _+t[a++];default:return A-1}})}function pX(t){let e=0;return()=>t[e++]}function JD(t){return pX(fX(gX(t)))}function gX(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function mX(t){return t&1?~t>>1:t>>1}function wX(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=mX(e());return n}function Rm(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function XD(t){return Mm(()=>{let e=Rm(t);if(e.length)return e})}function eB(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(yX(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(bX(n,t))}return e.flat()}function Mm(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function tB(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)wX(t,n).forEach((s,o)=>r[o].push(s));return r}function yX(t,e){let n=1+e(),r=e(),i=Mm(e);return tB(i.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function bX(t,e){let n=1+e();return tB(n,1+t,e).map(i=>[i[0],i.slice(1)])}function vX(t){let e=[],n=Rm(t);return i(r([]),[]),e;function r(s){let o=t(),a=Mm(()=>{let c=Rm(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function EX(t){return t.toString(16).toUpperCase().padStart(2,"0")}function nB(t){return`{${EX(t)}}`}function CX(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function Wp(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function _X(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var SX="AEUDWAHSCGYATwDVADIAdgAiADQAFAAtABQAIQAPACcADQASAAsAGQAJABIACQARAAUACwAFAAwABQAQAAMABwAEAAoABQAJAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACwANAA0AAwAKAAkABAAdAAYAZwDTAecDNACxCmIB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgPi89uj00MsvBXxEPAGPCDwBnQKoEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJEMAJpIBpob5AERSMAKNoAXqaQLRBMCzEiC+AZ4EWRJJFbEu7QDQLARtEbgECxDwAb/RyAk1AV4nD2cEQQKTAzsAGpobPgAahAGPCrysdy0OAKwAfFIcBAQFUmoA/PtZADkBIadVj2UMUgx5Il4ANQC9vLIBDAHUGVsQ8wCzfQIbGVcCHBZHAZ8CBAgXOhG7AqMZ4M7+1M0UAPDNAWsC+mcJDe8AAQA99zkEXLICyQozAo6lAobcP5JvjQLFzwKD9gU/OD8FEQCtEQL6bW+nAKUEvzjDHsuRyUvOFHcacUz5AqIFRSE2kzsBEQCuaQL5DQTlcgO6twSpTiUgCwIFCAUXBHQEqQV6swAVxUlmTmsCwjqsP/wKJQmXb793UgZBEBsnpRD3DDMBtQE7De1L2ATxBjsEyR99GRkPzZWcCKUt3QztJuMuoYBaI/UqgwXtS/Q83QtNUWgPWQtlCeM6Y4FOAyEBDSKLCt0NOQhtEPMKyWsN5RFFBzkD1UmaAKUHAQsRHTUVtSYQYqwLCTl3Bvsa9guPJq8TKXr8BdMaIQZNASka/wDPLueFsFoxXBxPXwYDCyUjxxSoUCANJUC3eEgaGwcVJakCkUNwSodRNh6TIfY8PQ1mLhNRfAf1PAUZTwuBPJ5Gq0UOEdI+jT1IIklMLAQ1fywvJ4sJzw+FDLl8cgFZCSEJsQxxEzERFzfFCDkHGS2XJCcVCCFGlWCaBPefA/MT0QMLBT8JQQcTA7UcLRMuFSkFDYEk1wLzNtUuswKPVoABFwXLDyUf3xBQR+AO6QibAmUDgyXrAC0VIQAXIpsIQ2MAX4/YUwUuywjHamwjdANnFOdhEXMHkQ5XB6ccMxW/HOFwyF4Lhggoo68JWwF1CZkBXwTjCAk1W4ygIEFnU4tYGJsgYUE/XfwCMQxlFZ9EvYd4AosPaxIbATUBcwc5DQECdxHtEWsQlQjrhgQ1tTP4OiUETyGDIBEKJwNPbM4LJyb5DPhpAaMSYgMMND137merYLYkF/0HGTLFQWAh8QuST80MnBrBGEJULhnkB78D8xrzJ+pBVwX/A6MDEzpNM+4EvQtpCIsJPwBJDqMXB9cYagpxjNABMYsBt5kDV5GDAm+PBjcHCwBnC4cFeeUAHQKnCKMABQDPA1cAOQKtB50AGQCFQQE9AycvASHlAo8DkwgxywGVLwHzKQQbwwwVAPc3bkoCw7ECgGpmogXdWAKOAkk1AU0lBAVOR1EDr3HhANsASwYT30cBFatKyxrjQwHfbysAxwD7AAU1BwVBAc0B820AtwFfCzEJorO1AU3pKQCDABVrAdcCiQDdADUAf/EBUwBNBVn5BdMCT0kBETEYK1dhAbsDHwEzAQ0AeQbLjaXJBx8EbQfTAhAbFeEC7y4HtQEDIt8TzULFAr3eVaFgAmSBAmJCW02vWzcgAqH3AmiYAmYJAp+EOBsLAmY7AmYmBG4EfwN/EwN+kjkGOXcXOYI6IyMCbB0CMjY4CgJtxwJtru+KM2dFKwFnAN4A4QBKBQeYDI0A/gvCAA21AncvAnaiPwJ5S0MCeLodXNtFrkbXAnw/AnrIAn0JAnzwBVkFIEgASH1jJAKBbQKAAAKABQJ/rklYSlsVF0rMAtEBAtDMSycDiE8Dh+ZExZEyAvKhXQMDA65LzkwtJQPPTUxNrwKLPwKK2MEbBx1DZwW3Ao43Ao5cQJeBAo7ZAo5ceFG0UzUKUtRUhQKT+wKTDADpABxVHlWvVdAGLBsplYYy4XhmRTs5ApefAu+yWCGoAFklApaPApZ8nACpWaxaCYFNADsClrUClk5cRFzRApnLAplkXMpdBxkCnJs5wjqdApwWAp+bAp64igAdDzEqDwKd8QKekgC1PWE0Ye8CntMCoG4BqQKenx8Cnk6lY8hkJyUrAievAiZ+AqD7AqBMAqLdAqHEAqYvAqXOAqf/AH0Cp/JofGixAANJahxq0QKs4wKsrgKtZwKtAgJXHQJV3AKx4dcDH05slwKyvQ0CsugXbOBtY21IXwMlzQK2XDs/bpADKUUCuF4CuUcVArkqd3A2cOECvRkCu9pwlgMyEQK+iHICAzNxAr4acyJzTwLDywLDBHOCdEs1RXTgAzynAzyaAz2/AsV8AsZHAsYQiQLIaVECyEQCyU8CyS4CZJ0C3dJ4eWF4rnklS9ADGKNnAgJh9BnzlSR7C16SXrsRAs9rAs9sL0tT0vMTnwDGrQLPcwEp6gNOEn5LBQLcJwLbigLSTwNSXANTXwEBA1WMgIk/AMsW7WBFghyC04LOg40C2scC2d6EEIRJpzwDhqUALwNkDoZxWfkAVQLfZQLeuHN3AuIv7RQB8zAnAfSbAfLShwLr8wLpcHkC6vkC6uQA+UcBuQLuiQLrnJaqlwMC7j8DheCYeXDgcaEC8wMAaQOOFpmTAvcTA5FuA5KHAveYAvnZAvhmmhyaq7s3mx4DnYMC/voBGwA5nxyfswMFjQOmagOm2QDRxQMGaqGIogUJAwxJAtQAPwMA4UEXUwER8wNrB5dnBQCTLSu3r73bAYmZFH8RBDkB+ykFIQ6dCZ8Akv0TtRQrxQL3LScApQC3BbmOkRc/xqdtQS4UJo0uAUMBgPwBtSYAdQMOBG0ALAIWDKEAAAoCPQJqA90DfgSRASBFBSF8CgAFAEQAEwA2EgJ3AQAF1QNr7wrFAgD3Cp8nv7G35QGRIUFCAekUfxE0wIkABAAbAFoCRQKEiwAGOlM6lI1tALg6jzrQAI04wTrcAKUA6ADLATqBOjs5/Dn5O3aJOls7nok6bzkYAVYBMwFsBS81XTWeNa01ZjV1NbY1xTWCNZE10jXhNZ41rTXuNf01sjXBNgI2ETXGNdU2FjYnNd417TYuNj02LjUtITY6Nj02PDbJNwgEkDxXNjg23TcgNw82yiA3iTcwCgSwPGc2JDcZN2w6jTchQtRDB0LgQwscDw8JmyhtKFFVBgDpfwDpsAD+mxQ91wLpNSMArQC9BbeOkRdLxptzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgELgEaJZkC7aMAoQCjBcGOmxdNxrsBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUHqSvAj5Gqwr7YrMUACT9AN3rpF27H7fsd/twPt4l+UW1yQYKBt2Cgy7qJpGiLcdE2P1cQSImUbqJ6ICH27H4knQMIRMrFkHu3sx6tC35Y+eLIh4e4CMKJ4DfyV+8mfta499RCAJ0xfeZR8PsoYOApva9pjGn4PhvyZS7/h5JLuhaucfjuU+Z584wwqNO4hWYmaBCcjgQPale1bjoHzMUbut/zTgxHxBnAyrdKpF4IRMASLBtD/jviyLeCgj8twWjAd3HchN/uqaeRYeHJgl7JEY9/cTrvtfybx/r3Y/NtxJ9dp+MTVmiS9bwBH73s8Di56/Ma+mTPMHq4T1yEG1fWcqr0u+hrGnJEvU1JJAm/maQSrKrazIyvSkDFkj8UUlfBq8baniTGPng6YZRL661rDNw4w/1g2figG0IhXnL7wosd/sVNo5dYSmMBTP5c7rYLjRdCwg8quwljOMPf63D8ICAL0r71XRiyFHdgwHbwfgnPOf4Lzjf2v+j+IiDHG2isp5yUnzSDyDRb4i/Vs0qHSHq8PiEQ/JnBP7PxnjN0j6gT4AVAeRx/1o9VnEUlUwvFrzJqHk9jxAw4sYxCnrxaeBdCFFKbnE7z+x54F5W7ZZsU6kx8Qocul6FoAHHy01FGL/nne61mn4+uYXfQ1Uccn+HMLKE+cZzT8BB1E3FRskOgJrRsq25rauLm8+uamXpkS/bTy6y1wDbCrW4eD532kTWrtNUmVVZOIn/C+/JR9KVR5iG9TY8iaT67ubm/whL1xbKZoqtY+a6fNxMJrg211bGYJDUkYMNWA0BMB++9zOm6Eik4roqs9CCEFW0lyAK0PbvlzvoxrZuY/OEhNW/l/63U15Od/RSvmDvXpGLiVmeGi5PDSH2bYz5o2g6wFDQ2FbZgYgTF8rPlvA1ifjZD3NLtFdXdpSIJvgKR7GpjJWG7GZGawPomIH8B5tUmtHH9LpM+/KQKunEPa1GiQkCXv4Cnm9DLORo2joicHdPDZ64obQrPZ5bgqckkj0G6/NEiPYBY4bCkL7W8G5YzsUb6GakFjykSPkT7JGeLeB6uJOGMm+x7N381BCDfbJFx0dtLgV9Q477BfL1fvitX5anV/oYfxeYl+eF5x5bB8+Ep/L2nsmd56aKF4aAD4GbJWsdKyBW22xEmAD3XdbtsMyAFoR5mOla0gEd9U/YVB7zvHGpHbQonay9Sv0bQ8iZ8piaXVrKc5AG1AmqqgaEvzHSP2Wux7aZTWh6quVDVU01JtMIVRdCFwlSbbqqhoFlyzsotQzRexFvZ/MqUSFu3OhRIuNBbufvBpdVgb8XdGJ48/lJPCZ7dsOujTTbKPSEvGXkOnG2Xdi8/nM3EMRqITd5QeU7iOjKqC7URJY6TnLsHij22xAHKnVRD5MDtBYnoGFqZGMDmXCW6Oj+BAWw14hESY/xLF6bLku06AHkiXTHPCFZ0f9YSqqo27eAhhS67OrA2Het4M9JM3jm/yRX6bYxnfmzYl5qQdHxN08FsNuWDrWd4vMUY2QD3hr8vS73SCTkFoXZR3xNzOQt8d/6HfjBmXqvrE6EGkLzK6YK2U2/ksU/iUH+LvVIsJI+ri2AL/klo+ShdDyfs5A83i2prkMs51IKR7ZcqjZJi5X3+bd8GlyWvtddxKEoEqSgEO7A8jIgf2nH0h8FjM7oB6yte3X5mpL0i/E4Rx0CotKnILJj/vJqo4VkPQ93jRtRVfaitQPqldl5xRYPq8387Z0DcnZvOeION0Ht1+P27kFLGQIcLBX4FG3sffccNHh5cPfzp9INoRtqVtdViJfg8RjnXiIz/MNqEN6zvzX3hMzyWC7oSoXIT14ubc0abPX8Rp9GVa5NI/8iv+6ela1oTncbdimRKnrbRffDR/X4nH+bgqAuHWl7hOaeXPWVzIeRl7ga+JzD4Sx3mlj/q6Ra/E2HhDf21eEzTLNGfCZsY+/yxZzQzIAuijG65ii4O/waAJCrEJaWd/DRAKMQ5678Dw5AT7RCKzdadIwd8LsD+DgPBASmWsUlf8R0k1w/2k4lO2Wpb4zMI6EJVJs0xk/wn8/fRUPqrDKhbjHR41SqgFMx5RGMPuduFwlu5lK89tW11sTqiX/5EfGs5nO+y9FKvgXKPOEmgE05EKNL6Sjb3xS40H3BVPhm0ESOZgAjZoymc8be0inDVo4JdJVf+NKd3tN/CaB7GShhH27qf95NoFZVX/6ZkR2lX+CgWrQ2INgkh+bbMz68+uJ3Clsh8HSMPEQtAt+BBE6fXDab7KIlsKxU1lIXW/KWVstpdPanJ0pdXpQinDyUQjtY7ZVcfiecRxRDMAUhHFU2cEaciQ+htiPMPx1kdvtWG9T44w3r037ljHBFJdYR0r55qvMRixtAEFJAqA4T1ES87FAx7UozXasytg8MftZYt0rjYgLe6EJ5aWvy2qscBSBQ7yehoJIA3wIIZ9ukfkyBb6qnue5ko8W50rpV4kXqWjI5nbGRXrNW0tBZHXlY48nSgcUXBHWT4GcgLZJoLlKJnV96kCYpq9eWHh7xJzkCAyrQuQ5AJ0qq/uZ3toJglNterev+Qm0KXxPg/+YbFRJdfhbp1wOnVOEYdVHTya6CtO0afhEaBhx3oHwCb5Kq6RwHDzFMl2vfjL8GwzcCoTj7wZe+UFnYDV2yKpPU9dba29gYBdNqJg/KXozO+CJTlKmlKhnqTf5doeS35DZFV+cYJQVjd+oVY/Gtc/6XPzUxb1gMqf6cEjNNoRC8AObrp+fx0cVtGu4ffC2TgXRC8zPl8moUHCB5HZ25d87mlsiiK0aNwBtcEQjRNBT/QrXbw/8aVXdKMHn9EqYEKEyxSGTpYQOaes1G1Qq8pDgqkZtlO2HRyCXpmeM7TSrRPkAh004BfisVpF6zP44n2Jvxz/gOVocNCyy9V6lkod28QM4pbaMvVJigD/w3BrsjSJrXlqc4ulBYOCceiBN4b/gHajYyupbhEt63a619Ay4wsL6a6w6B+A7TnoyE7BliWHJfzVxxIKM/W3M/J8Bx99Op863Q8eNuIMGRx++VbYfjm+VGYBA3Ap/KEu/wxBNBpJJncwHPG45V8Gh98ZIrGCc20MwijGowZbcS7d1nEgcOW5cddZpHL2XPAIRbColiheZzXTvBxZOY3iMSDSKDrICyJ/iQs1vdplVdH/JrLJsQ2jtTnfCrITIghq3KFX3qAgLWAIp8IffNSdTYptnbGfc8s+qcr3zyzyHp1aJg+jxTF4kD1ry5Wauv5V3xnOGwTFecNzXSLHBW20/pCQjk4uorD0plIhMSTc79+/r4RKPClRYTBYex1Ob5crtfvRQBBv6re/6FhtCqtduag67glqRA77/3ulblh9YRtMdDxkCyJDeNnAuCLPQFmdRRWJtH20Z8DstfJf+5oj5SSB64d0iF5/Ya4KfTWxfivj9Ap2/zbYaTo/1gO3tM6RYsCZharMBFr7Fm61mLSrQnEI4OF1gbVS4k/JE9UotOrnLJZuswoWodCSV8zbybkJSVIP7n8UaE9xCR39rJZmf27HOAPVOGc9pdkQUcRrI0qyVF9Z3j1RHDbxIfwbWzmPVjwIdPJvtmBYwEQIUsIW1S939hcVikK00ozPRI02cqhzVUNzpOxVdrwRPvlh1aIOf0xFEqD3YkGnCnFah/cFN3J2gB7N+bZSGawwkKFu1tpQMrp1W+27YNkyT0TpcFpTqgOqqLabrgcCUPxh97mREOGy4xItzQ9xSl6rq+8BZsHcrQFReS+QeMxJ3P6CnL9EP/eOLDjumLhvrcQrpPiknsofbzBv9gTP0lU+TIVwE6E7CcKfT36q+ZiEOHJ9ayf0dyUJLezAb2M8aNHwd0+OJmsVgTzRWA";const Dm=44032,lv=4352,uv=4449,dv=4519,rB=19,iB=21,Gp=28,hv=iB*Gp,AX=rB*hv,xX=Dm+AX,IX=lv+rB,OX=uv+iB,PX=dv+Gp;function z0(t){return t>>24&255}function sB(t){return t&16777215}let z5,DI,K5,fb;function TX(){let t=JD(SX);z5=new Map(XD(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),DI=new Set(Rm(t)),K5=new Map,fb=new Map;for(let[e,n]of eB(t)){if(!DI.has(e)&&n.length==2){let[r,i]=n,s=fb.get(r);s||(s=new Map,fb.set(r,s)),s.set(i,e)}K5.set(e,n.reverse())}}function oB(t){return t>=Dm&&t<xX}function kX(t,e){if(t>=lv&&t<IX&&e>=uv&&e<OX)return Dm+(t-lv)*hv+(e-uv)*Gp;if(oB(t)&&e>dv&&e<PX&&(t-Dm)%Gp==0)return t+(e-dv);{let n=fb.get(t);return n&&(n=n.get(e),n)?n:-1}}function aB(t){z5||TX();let e=[],n=[],r=!1;function i(s){let o=z5.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(oB(s)){let o=s-Dm,a=o/hv|0,c=o%hv/Gp|0,l=o%Gp;i(lv+a),i(uv+c),l>0&&i(dv+l)}else{let o=K5.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=z0(e[0]);for(let o=1;o<e.length;o++){let a=z0(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=z0(e[--c]),s<=a))break}s=z0(e[o])}}return e}function NX(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=z0(s),a=sB(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let c=kX(r,a);c>=0?r=c:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function cB(t){return aB(t).map(sB)}function $X(t){return NX(aB(t))}const BI=45,lB=".",uB=65039,dB=1,fv=t=>Array.from(t);function Bm(t,e){return t.P.has(e)||t.Q.has(e)}class RX extends Array{get is_emoji(){return!0}}let V5,hB,Cd,W5,fB,vp,E3,zf,id,LI,G5;function u6(){if(V5)return;let t=JD(hX);const e=()=>Rm(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));V5=new Map(eB(t)),hB=n(),Cd=e(),W5=new Set(e().map(u=>Cd[u])),Cd=new Set(Cd),fB=n(),n();let i=XD(t),s=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,i[d])),r(u,e()),u};vp=Mm(u=>{let d=Mm(t).map(h=>h+96);if(d.length){let h=u>=s;d[0]-=32,d=Wp(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),E3=n(),zf=new Map;let a=e().concat(fv(E3)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),E3.has(u)||zf.set(u,f)});for(let{V:u,M:d}of new Set(zf.values())){let h=[];for(let p of u){let g=vp.filter(w=>Bm(w,p)),m=h.find(({G:w})=>g.some(b=>w.has(b)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(p),r(m.G,g)}let f=h.flatMap(p=>fv(p.G));for(let{G:p,V:g}of h){let m=new Set(f.filter(w=>!p.has(w)));for(let w of g)d.set(w,m)}}id=new Set;let c=new Set;const l=u=>id.has(u)?c.add(u):id.add(u);for(let u of vp){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of id)!zf.has(u)&&!c.has(u)&&zf.set(u,dB);r(id,cB(id)),LI=vX(t).map(u=>RX.from(u)).sort(_X),G5=new Map;for(let u of LI){let d=[G5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===uB?d.push(...f):d=f}for(let h of d)h.V=u}}function d6(t){return(pB(t)?"":`${h6(V2([t]))} `)+nB(t)}function h6(t){return`"${t}"‎`}function MX(t){if(t.length>=4&&t[2]==BI&&t[3]==BI)throw new Error(`invalid label extension: "${Wp(t.slice(0,4))}"`)}function DX(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function BX(t){let e=t[0],n=RI.get(e);if(n)throw am(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=RI.get(e);if(o){if(i==s)throw am(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw am(`trailing ${n}`)}function V2(t,e=1/0,n=nB){let r=[];LX(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];pB(a)&&(r.push(Wp(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(Wp(t.slice(i,s))),r.join("")}function LX(t,e){return u6(),Cd.has(t)}function pB(t){return u6(),fB.has(t)}function UX(t){return HX(jX(t,$X,VX))}function jX(t,e,n){if(!t)return[];u6();let r=0;return t.split(lB).map(i=>{let s=CX(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=KX(s,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(DX(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))MX(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Cd.has(u[0]))throw am("leading combining mark");for(let g=1;g<c;g++){let m=a[g];if(!m.is_emoji&&Cd.has(m[0]))throw am(`emoji + combining mark: "${Wp(a[g-1])} + ${V2([m[0]])}"`)}BX(u);let f=fv(new Set(h)),[p]=qX(f);zX(p,h),FX(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function FX(t,e){let n,r=[];for(let i of e){let s=zf.get(i);if(s===dB)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):fv(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Bm(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function qX(t){let e=vp;for(let n of t){let r=e.filter(i=>Bm(i,n));if(!r.length)throw vp.some(i=>Bm(i,n))?mB(e[0],n):gB(n);if(e=r,r.length==1)break}return e}function HX(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${h6(V2(e,63))}: ${i}`)}return Wp(r)}).join(lB)}function gB(t){return new Error(`disallowed character: ${d6(t)}`)}function mB(t,e){let n=d6(e),r=vp.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function am(t){return new Error(`illegal placement: ${t}`)}function zX(t,e){for(let n of e)if(!Bm(t,n))throw mB(t,n);if(t.M){let n=cB(e);for(let r=1,i=n.length;r<i;r++)if(W5.has(n[r])){let s=r+1;for(let o;s<i&&W5.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${d6(o)}`);if(s-r>MI)throw new Error(`excessive non-spacing marks: ${h6(V2(n.slice(r-1,s)))} (${s-r}/${MI})`);r=s}}}function KX(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=WX(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(id.has(o))i.push(o);else{let a=V5.get(o);if(a)i.push(...a);else if(!hB.has(o))throw gB(o)}}}return i.length&&r.push(e(i)),r}function VX(t){return t.filter(e=>e!=uB)}function WX(t,e){let n=G5,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}function YLe(t){return UX(t)}var pv=function(){return pv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pv.apply(this,arguments)};function GX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function QLe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function C3(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ZX(t,e){var n=Et.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var YX=typeof window<"u"?Et.useLayoutEffect:Et.useEffect,UI=new WeakMap;function JLe(t,e){var n=ZX(null,function(r){return t.forEach(function(i){return C3(i,r)})});return YX(function(){var r=UI.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||C3(a,null)}),s.forEach(function(a){i.has(a)||C3(a,o)})}UI.set(n,t)},[t]),n}function QX(t){return t}function JX(t,e){e===void 0&&(e=QX);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function XLe(t){t===void 0&&(t={});var e=JX(null);return e.options=pv({async:!0,ssr:!1},t),e}var wB=function(t){var e=t.sideCar,n=GX(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return Et.createElement(r,pv({},n))};wB.isSideCarExport=!0;function eUe(t,e){return t.useMedium(e),wB}var tUe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jI(t){var e=t.match(/^var\((.*)\)$/);return e?e[1]:t}function XX(t,e){var n=t;for(var r of e){if(!(r in n))throw new Error("Path ".concat(e.join(" -> ")," does not exist in object"));n=n[r]}return n}function yB(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r={};for(var i in t){var s=t[i],o=[...n,i];typeof s=="string"||typeof s=="number"||s==null?r[i]=e(s,o):typeof s=="object"&&!Array.isArray(s)?r[i]=yB(s,e,o):console.warn('Skipping invalid key "'.concat(o.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(s)?"Array":typeof s,'"'))}return r}function nUe(t,e){var n={};if(typeof e=="object"){var r=t;yB(e,(a,c)=>{if(a!=null){var l=XX(r,c);n[jI(l)]=String(a)}})}else{var i=t;for(var s in i){var o=i[s];o!=null&&(n[jI(s)]=o)}}return Object.defineProperty(n,"toString",{value:function(){return Object.keys(this).map(c=>"".concat(c,":").concat(this[c])).join(";")},writable:!1}),n}var Z5={exports:{}};(function(t,e){(function(n,r){var i="1.0.41",s="",o="?",a="function",c="undefined",l="object",u="string",d="major",h="model",f="name",p="type",g="vendor",m="version",w="architecture",b="console",y="mobile",_="tablet",A="smarttv",T="wearable",$="embedded",D=500,O="Amazon",j="Apple",F="ASUS",L="BlackBerry",B="Browser",x="Chrome",v="Edge",S="Firefox",N="Google",E="Honor",C="Huawei",P="Lenovo",M="LG",I="Microsoft",k="Motorola",R="Nvidia",U="OnePlus",q="Opera",H="OPPO",z="Samsung",K="Sharp",G="Sony",Y="Xiaomi",X="Zebra",ie="Facebook",de="Chromium OS",Se="Mac OS",Ee=" Browser",Ae=function(st,bt){var tt={};for(var Kt in st)bt[Kt]&&bt[Kt].length%2===0?tt[Kt]=bt[Kt].concat(st[Kt]):tt[Kt]=st[Kt];return tt},Re=function(st){for(var bt={},tt=0;tt<st.length;tt++)bt[st[tt].toUpperCase()]=st[tt];return bt},Me=function(st,bt){return typeof st===u?Qe(bt).indexOf(Qe(st))!==-1:!1},Qe=function(st){return st.toLowerCase()},et=function(st){return typeof st===u?st.replace(/[^\d\.]/g,s).split(".")[0]:r},ze=function(st,bt){if(typeof st===u)return st=st.replace(/^\s\s*/,s),typeof bt===c?st:st.substring(0,D)},Ye=function(st,bt){for(var tt=0,Kt,yo,Oi,_t,Ve,Bs;tt<bt.length&&!Ve;){var d3=bt[tt],Yx=bt[tt+1];for(Kt=yo=0;Kt<d3.length&&!Ve&&d3[Kt];)if(Ve=d3[Kt++].exec(st),Ve)for(Oi=0;Oi<Yx.length;Oi++)Bs=Ve[++yo],_t=Yx[Oi],typeof _t===l&&_t.length>0?_t.length===2?typeof _t[1]==a?this[_t[0]]=_t[1].call(this,Bs):this[_t[0]]=_t[1]:_t.length===3?typeof _t[1]===a&&!(_t[1].exec&&_t[1].test)?this[_t[0]]=Bs?_t[1].call(this,Bs,_t[2]):r:this[_t[0]]=Bs?Bs.replace(_t[1],_t[2]):r:_t.length===4&&(this[_t[0]]=Bs?_t[3].call(this,Bs.replace(_t[1],_t[2])):r):this[_t]=Bs||r;tt+=2}},Je=function(st,bt){for(var tt in bt)if(typeof bt[tt]===l&&bt[tt].length>0){for(var Kt=0;Kt<bt[tt].length;Kt++)if(Me(bt[tt][Kt],st))return tt===o?r:tt}else if(Me(bt[tt],st))return tt===o?r:tt;return bt.hasOwnProperty("*")?bt["*"]:st},ne={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},le={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ke={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,m],[/opios[\/ ]+([\w\.]+)/i],[m,[f,q+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[f,q+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[f,q]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[f,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[m,[f,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[f,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[f,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[f,"UC"+B]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[f,"Smart Lenovo "+B]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+B],m],[/\bfocus\/([\w\.]+)/i],[m,[f,S+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[f,q+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[f,q+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[f,"MIUI"+Ee]],[/fxios\/([\w\.-]+)/i],[m,[f,S]],[/\bqihoobrowser\/?([\w\.]*)/i],[m,[f,"360"]],[/\b(qq)\/([\w\.]+)/i],[[f,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1"+Ee],m],[/samsungbrowser\/([\w\.]+)/i],[m,[f,z+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[m,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[f,m],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[f],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[m,f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,ie],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[f,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,x+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[f,"Android "+B]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[m,Je,ne]],[/(webkit|khtml)\/([\w\.]+)/i],[f,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],m],[/(wolvic|librewolf)\/([\w\.]+)/i],[f,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[f,S+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[f,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[f,[m,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[w,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[w,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[w,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[w,/ower/,s,Qe]],[/ sun4\w[;\)]/i],[[w,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[w,Qe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[g,z],[p,_]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[h,[g,z],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[g,j],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[g,j],[p,_]],[/(macintosh);/i],[h,[g,j]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[g,K],[p,y]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[h,[g,E],[p,_]],[/honor([-\w ]+)[;\)]/i],[h,[g,E],[p,y]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[h,[g,C],[p,_]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[g,C],[p,y]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[h,/_/g," "],[g,Y],[p,_]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[h,/_/g," "],[g,Y],[p,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[g,H],[p,y]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[h,[g,Je,{OnePlus:["304","403","203"],"*":H}],[p,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[g,"Vivo"],[p,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[g,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[g,k],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[g,k],[p,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[g,M],[p,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[g,M],[p,y]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[h,[g,P],[p,_]],[/(nokia) (t[12][01])/i],[g,h,[p,_]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[h,/_/g," "],[p,y],[g,"Nokia"]],[/(pixel (c|tablet))\b/i],[h,[g,N],[p,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[g,N],[p,y]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[g,G],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[g,G],[p,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[g,U],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[g,O],[p,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[g,O],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[h,g,[p,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[g,L],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[g,F],[p,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[g,F],[p,y]],[/(nexus 9)/i],[h,[g,"HTC"],[p,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[h,/_/g," "],[p,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[h,[g,"TCL"],[p,_]],[/(itel) ((\w+))/i],[[g,Qe],h,[p,Je,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[g,"Acer"],[p,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[g,"Meizu"],[p,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[g,"Ulefone"],[p,y]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[h,[g,"Energizer"],[p,y]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[h,[g,"Cat"],[p,y]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[h,[g,"Smartfren"],[p,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[h,[g,"Nothing"],[p,y]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[h,[g,"Archos"],[p,_]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[h,[g,"Archos"],[p,y]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[g,h,[p,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[g,h,[p,y]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,h,[p,_]],[/(surface duo)/i],[h,[g,I],[p,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[g,"Fairphone"],[p,y]],[/(u304aa)/i],[h,[g,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[h,[g,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[h,[g,"RCA"],[p,_]],[/\b(venue[\d ]{2,7}) b/i],[h,[g,"Dell"],[p,_]],[/\b(q(?:mv|ta)\w+) b/i],[h,[g,"Verizon"],[p,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[g,"Barnes & Noble"],[p,_]],[/\b(tm\d{3}\w+) b/i],[h,[g,"NuVision"],[p,_]],[/\b(k88) b/i],[h,[g,"ZTE"],[p,_]],[/\b(nx\d{3}j) b/i],[h,[g,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[h,[g,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[h,[g,"Swiss"],[p,_]],[/\b((zeki)?tb.*\b) b/i],[h,[g,"Zeki"],[p,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],h,[p,_]],[/\b(ns-?\w{0,9}) b/i],[h,[g,"Insignia"],[p,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[g,"NextBook"],[p,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],h,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],h,[p,y]],[/\b(ph-1) /i],[h,[g,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[g,"Envizen"],[p,_]],[/\b(trio[-\w\. ]+) b/i],[h,[g,"MachSpeed"],[p,_]],[/\btu_(1491) b/i],[h,[g,"Rotor"],[p,_]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[h,[g,R],[p,_]],[/(sprint) (\w+)/i],[g,h,[p,y]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[g,I],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[g,X],[p,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[g,X],[p,y]],[/smart-tv.+(samsung)/i],[g,[p,A]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[g,z],[p,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,M],[p,A]],[/(apple) ?tv/i],[g,[h,j+" TV"],[p,A]],[/crkey/i],[[h,x+"cast"],[g,N],[p,A]],[/droid.+aft(\w+)( bui|\))/i],[h,[g,O],[p,A]],[/(shield \w+ tv)/i],[h,[g,R],[p,A]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[g,K],[p,A]],[/(bravia[\w ]+)( bui|\))/i],[h,[g,G],[p,A]],[/(mi(tv|box)-?\w+) bui/i],[h,[g,Y],[p,A]],[/Hbbtv.*(technisat) (.*);/i],[g,h,[p,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,ze],[h,ze],[p,A]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[h,[p,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,A]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,h,[p,b]],[/droid.+; (shield)( bui|\))/i],[h,[g,R],[p,b]],[/(playstation \w+)/i],[h,[g,G],[p,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[g,I],[p,b]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[h,[g,z],[p,T]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[g,h,[p,T]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[h,[g,H],[p,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[g,j],[p,T]],[/(opwwe\d{3})/i],[h,[g,U],[p,T]],[/(moto 360)/i],[h,[g,k],[p,T]],[/(smartwatch 3)/i],[h,[g,G],[p,T]],[/(g watch r)/i],[h,[g,M],[p,T]],[/droid.+; (wt63?0{2,3})\)/i],[h,[g,X],[p,T]],[/droid.+; (glass) \d/i],[h,[g,N],[p,T]],[/(pico) (4|neo3(?: link|pro)?)/i],[g,h,[p,T]],[/; (quest( \d| pro)?)/i],[h,[g,ie],[p,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[p,$]],[/(aeobc)\b/i],[h,[g,O],[p,$]],[/(homepod).+mac os/i],[h,[g,j],[p,$]],[/windows iot/i],[[p,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[h,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[f,v+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[f,m],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,m],[/ladybird\//i],[[f,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,m],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[f,[m,Je,le]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Je,le],[f,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,Se],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,f],[/(ubuntu) ([\w\.]+) like android/i],[[f,/(.+)/,"$1 Touch"],m],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[f,m],[/\(bb(10);/i],[m,[f,L]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[m,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[f,S+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[f,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,de],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,m],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,m]]},qe=function(st,bt){if(typeof st===l&&(bt=st,st=r),!(this instanceof qe))return new qe(st,bt).getResult();var tt=typeof n!==c&&n.navigator?n.navigator:r,Kt=st||(tt&&tt.userAgent?tt.userAgent:s),yo=tt&&tt.userAgentData?tt.userAgentData:r,Oi=bt?Ae(ke,bt):ke,_t=tt&&tt.userAgent==Kt;return this.getBrowser=function(){var Ve={};return Ve[f]=r,Ve[m]=r,Ye.call(Ve,Kt,Oi.browser),Ve[d]=et(Ve[m]),_t&&tt&&tt.brave&&typeof tt.brave.isBrave==a&&(Ve[f]="Brave"),Ve},this.getCPU=function(){var Ve={};return Ve[w]=r,Ye.call(Ve,Kt,Oi.cpu),Ve},this.getDevice=function(){var Ve={};return Ve[g]=r,Ve[h]=r,Ve[p]=r,Ye.call(Ve,Kt,Oi.device),_t&&!Ve[p]&&yo&&yo.mobile&&(Ve[p]=y),_t&&Ve[h]=="Macintosh"&&tt&&typeof tt.standalone!==c&&tt.maxTouchPoints&&tt.maxTouchPoints>2&&(Ve[h]="iPad",Ve[p]=_),Ve},this.getEngine=function(){var Ve={};return Ve[f]=r,Ve[m]=r,Ye.call(Ve,Kt,Oi.engine),Ve},this.getOS=function(){var Ve={};return Ve[f]=r,Ve[m]=r,Ye.call(Ve,Kt,Oi.os),_t&&!Ve[f]&&yo&&yo.platform&&yo.platform!="Unknown"&&(Ve[f]=yo.platform.replace(/chrome os/i,de).replace(/macos/i,Se)),Ve},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Kt},this.setUA=function(Ve){return Kt=typeof Ve===u&&Ve.length>D?ze(Ve,D):Ve,this},this.setUA(Kt),this};qe.VERSION=i,qe.BROWSER=Re([f,m,d]),qe.CPU=Re([w]),qe.DEVICE=Re([h,g,p,b,y,A,_,T,$]),qe.ENGINE=qe.OS=Re([f,m]),t.exports&&(e=t.exports=qe),e.UAParser=qe;var mn=typeof n!==c&&(n.jQuery||n.Zepto);if(mn&&!mn.ua){var Ds=new qe;mn.ua=Ds.getResult(),mn.ua.get=function(){return Ds.getUA()},mn.ua.set=function(st){Ds.setUA(st);var bt=Ds.getResult();for(var tt in bt)mn.ua[tt]=bt[tt]}}})(typeof window=="object"?window:Mn)})(Z5,Z5.exports);var rUe=Z5.exports;/*!
Copyright (c) 2023 Paul Miller (paulmillr.com)
The library paulmillr-qr is dual-licensed under the Apache 2.0 OR MIT license.
You can select a license of your choice.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/const f0={newline:10,reset:27};function eee(t){if(!Number.isSafeInteger(t))throw new Error(`integer expected: ${t}`)}function tee(t){if(!Number.isSafeInteger(t)||t<1||t>40)throw new Error(`Invalid version=${t}. Expected number [1..40]`)}function Wu(t,e){return t.toString(2).padStart(e,"0")}function FI(t,e){const n=t%e;return n>=0?n:e+n}function ms(t,e){return new Array(t).fill(e)}function qI(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function HI(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function nee(){let t,e=1/0;return{add(n,r){n>=e||(t=r,e=n)},get:()=>t,score:()=>e}}function zI(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(eee(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class ds{constructor(e,n){Ls(this,"data");Ls(this,"height");Ls(this,"width");const{height:r,width:i}=ds.size(e);this.data=n||Array.from({length:r},()=>ms(i,void 0)),this.height=r,this.width=i}static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: invalid height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: invalid width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){e=e.replace(/^\n+/g,"").replace(/\n+$/g,"");const n=e.split(String.fromCharCode(f0.newline)),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new ds({height:r,width:s},i)}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: invalid x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: invalid y=${e.y}`);return e.x=FI(e.x,this.width),e.y=FI(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=ds.size(n,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[s+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,(i,s)=>(r(i,s),s))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=ms(e,n),o=Array.from({length:e},()=>ms(i,n));return new ds({height:r,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,n){return this.rect(e,n.size(),({x:r,y:i})=>n.data[i][r])}rectSlice(e,n=this.size()){const r=new ds(ds.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:i,y:s},o)=>r.data[s][i]=o),r}inverse(){const{height:e,width:n}=this;return new ds({height:n,width:e}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[i][s])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`invalid scale factor: ${e}`);const{height:n,width:r}=this;return new ds({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:s,y:o})=>this.data[Math.floor(o/e)][Math.floor(s/e)])}clone(){return new ds(this.size()).rect({x:0,y:0},this.size(),({x:n,y:r})=>this.data[r][n])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error(`Invalid color type=${typeof n}`)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(String.fromCharCode(f0.newline))}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],c=s+1>=e?!0:r[s+1][o];!a&&!c?i+="█":!a&&c?i+="▀":a&&!c?i+="▄":a&&c&&(i+=" ")}i+=String.fromCharCode(f0.newline)}return i}toTerm(){const e=String.fromCharCode(f0.reset),n=e+"[0m",r=e+"[1;47m  "+n,i=e+"[40m  "+n;return this.data.map(s=>s.map(o=>o?i:r).join("")).join(String.fromCharCode(f0.newline))}toSVG(e=!0){let n=`<svg viewBox="0 0 ${this.width} ${this.height}" xmlns="http://www.w3.org/2000/svg">`,r="",i;return this.rectRead(0,1/0,(s,o)=>{if(!o)return;const{x:a,y:c}=s;if(!e){n+=`<rect x="${a}" y="${c}" width="1" height="1" />`;return}let l=`M${a} ${c}`;if(i){const d=`m${a-i.x} ${c-i.y}`;d.length<=l.length&&(l=d)}const u=a<10?`H${a}`:"h-1";r+=`${l}h1v1${u}Z`,i=s}),e&&(n+=`<path d="${r}"/>`),n+="</svg>",n}toGIF(){const e=a=>[a&255,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(a,c)=>r.push(+(c===!0)));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...ms(3*127,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(i+1,128,...r.slice(i*a,i*(a+1)).map(c=>+c));return s.push(r.length%i+1,128,...r.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const KI=["low","medium","quartile","high"],VI=["numeric","alphanumeric","byte","kanji","eci"],ree=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],iee={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},see={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},oi={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=6,n=oi.size.encode(t)-e-1,r=n-e,i=Math.ceil(r/28);let s=Math.floor(r/i);s%2?s+=1:r%i*2>=i&&(s+=2);const o=[e];for(let a=1;a<i;a++)o.push(n-(i-a)*s);return o.push(n),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=oi.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^(r>>9)*1335;return(n<<10|r)^oi.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^(e>>11)*7973;return t<<12|e},alphabet:{numeric:zI("0123456789"),alphanumerc:zI("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits(t,e){return{numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[e][oi.sizeType(t)]},modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=ree[t-1],r=iee[e][t-1],i=see[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:(n-r*i)*8,total:(r+s)*i+i-o}}},f6=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Ne={tables:(t=>{const e=ms(256,0),n=ms(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,i&256&&(i^=t);return{exp:e,log:n}})(285),exp:t=>Ne.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: invalid arg=${t}`);return Ne.tables.log[t]%255},mul(t,e){return t===0||e===0?0:Ne.tables.exp[(Ne.tables.log[t]+Ne.tables.log[e])%255]},add:(t,e)=>t^e,pow:(t,e)=>Ne.tables.exp[Ne.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: invalid arg=${t}`);return Ne.tables.exp[255-Ne.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: invalid length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: invalid degree=${t}`);if(e==0)return[0];let n=ms(t+1,0);return n[0]=e,Ne.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Ne.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=ms(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Ne.add(n[r+i],Ne.mul(t[r],e[i]));return Ne.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=ms(t.length,0);for(let r=0;r<t.length;r++)n[r]=Ne.mul(t[r],e);return Ne.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: invalid degree");if(n==0)return[0];const r=ms(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Ne.mul(t[i],n);return Ne.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=ms(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=Ne.add(n[a-s],r[a]);return Ne.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=Ne.add(n[r+s],Ne.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Ne.mulPoly(e,[1,Ne.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Ne.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Ne.add(Ne.mul(e,n),t[r]);return n},euclidian(t,e,n){Ne.degree(t)<Ne.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*Ne.degree(i)>=n;){let l=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=l;let d=[0];const h=Ne.inv(r[0]);for(;Ne.degree(i)>=Ne.degree(r)&&i[0]!==0;){const f=Ne.degree(i)-Ne.degree(r),p=Ne.mul(i[0],h);d=Ne.addPoly(d,Ne.monomial(f,p)),i=Ne.addPoly(i,Ne.mulPolyMonomial(r,f,p))}if(d=Ne.mulPoly(d,s),o=Ne.addPoly(d,u),Ne.degree(i)>=Ne.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Ne.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Ne.inv(a);return[Ne.mulPolyScalar(o,c),Ne.mulPolyScalar(i,c)]}};function oee(t){return{encode(e){const n=Ne.divisorPoly(t),r=Array.from(e);return r.push(...n.slice(0,-1).fill(0)),Uint8Array.from(Ne.remainderPoly(r,n))},decode(e){const n=e.slice(),r=Ne.polynomial(Array.from(e));let i=ms(t,0),s=!1;for(let d=0;d<t;d++){const h=Ne.evalPoly(r,Ne.exp(d));i[i.length-1-d]=h,h!==0&&(s=!0)}if(!s)return n;i=Ne.polynomial(i);const o=Ne.monomial(t,1),[a,c]=Ne.euclidian(o,i,t),l=ms(Ne.degree(a),0);let u=0;for(let d=1;d<256&&u<l.length;d++)Ne.evalPoly(a,d)===0&&(l[u++]=Ne.inv(d));if(u!==l.length)throw new Error("RS.decode: invalid errors number");for(let d=0;d<l.length;d++){const h=n.length-1-Ne.log(l[d]);if(h<0)throw new Error("RS.decode: invalid error location");const f=Ne.inv(l[d]);let p=1;for(let g=0;g<l.length;g++)d!==g&&(p=Ne.mul(p,Ne.add(1,Ne.mul(l[g],f))));n[h]=Ne.add(n[h],Ne.mul(Ne.evalPoly(c,f),Ne.inv(p)))}return n}}}function aee(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=oi.capacity(t,e),a=oee(n);return{encode(c){const l=[],u=[];for(let p=0;p<i;p++){const g=p<r,m=s+(g?0:1);l.push(c.subarray(0,m)),u.push(a.encode(c.subarray(0,m))),c=c.subarray(m)}const d=qI(...l),h=qI(...u),f=new Uint8Array(d.length+h.length);return f.set(d),f.set(h,d.length),f},decode(c){if(c.length!==o)throw new Error(`interleave.decode: len(data)=${c.length}, total=${o}`);const l=[];for(let h=0;h<i;h++){const f=h<r;l.push(new Uint8Array(n+s+(f?0:1)))}let u=0;for(let h=0;h<s;h++)for(let f=0;f<i;f++)l[f][h]=c[u++];for(let h=r;h<i;h++)l[h][s]=c[u++];for(let h=s;h<s+n;h++)for(let f=0;f<i;f++){const p=f<r;l[f][h+(p?0:1)]=c[u++]}const d=[];for(const h of l)d.push(...Array.from(a.decode(h)).slice(0,-n));return Uint8Array.from(d)}}}function cee(t,e,n,r=!1){const i=oi.size.encode(t);let s=new ds(i+2);const o=new ds(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);s=s.embed(0,o).embed({x:-o.width,y:0},o).embed({x:0,y:-o.height},o),s=s.rectSlice(1,i);const a=new ds(1).rect(0,1,!0).border(1,!1).border(1,!0),c=oi.alignmentPatterns(t);for(const l of c)for(const u of c)s.data[l][u]===void 0&&s.embed({x:u-2,y:l-2},a);s=s.hLine({x:0,y:6},1/0,({x:l},u)=>u===void 0?l%2==0:u).vLine({x:6,y:0},1/0,({y:l},u)=>u===void 0?l%2==0:u);{const l=oi.formatBits(e,n),u=d=>!r&&(l>>d&1)==1;for(let d=0;d<6;d++)s.data[d][8]=u(d);for(let d=6;d<8;d++)s.data[d+1][8]=u(d);for(let d=8;d<15;d++)s.data[i-15+d][8]=u(d);for(let d=0;d<8;d++)s.data[8][i-d-1]=u(d);for(let d=8;d<9;d++)s.data[8][15-d-1+1]=u(d);for(let d=9;d<15;d++)s.data[8][15-d-1]=u(d);s.data[i-8][8]=!r}if(t>=7){const l=oi.versionBits(t);for(let u=0;u<18;u+=1){const d=!r&&(l>>u&1)==1,h=Math.floor(u/3),f=u%3+i-8-3;s.data[h][f]=d,s.data[f][h]=d}}return s}function lee(t,e,n){const r=t.height,i=f6[e];let s=-1,o=r-1;for(let a=r-1;a>0;a-=2){for(a==6&&(a=5);;o+=s){for(let c=0;c<2;c+=1){const l=a-c;t.data[o][l]===void 0&&n(l,o,i(l,o))}if(o+s<0||o+s>=r)break}s=-s}}function uee(t){let e="numeric";for(let n of t)if(!oi.alphabet.numeric.has(n)&&(e="alphanumeric",!oi.alphabet.alphanumerc.has(n)))return"byte";return e}function dee(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function WI(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=oi.alphabet.numeric.decode(n.split("")),h=d.length;for(let f=0;f<h-2;f+=3)i+=Wu(d[f]*100+d[f+1]*10+d[f+2],10);h%3===1?i+=Wu(d[h-1],4):h%3===2&&(i+=Wu(d[h-2]*10+d[h-1],7))}else if(r==="alphanumeric"){const d=oi.alphabet.alphanumerc.decode(n.split("")),h=d.length;for(let f=0;f<h-1;f+=2)i+=Wu(d[f]*45+d[f+1],11);h%2==1&&(i+=Wu(d[h-1],6))}else if(r==="byte"){const d=dee(n);s=d.length,i=Array.from(d).map(h=>Wu(h,8)).join("")}else throw new Error("encode: unsupported type");const{capacity:o}=oi.capacity(t,e),a=Wu(s,oi.lengthBits(t,r));let c=oi.modeBits[r]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let d=0;c.length!==o;d++)c+=l[d%l.length];const u=Uint8Array.from(c.match(/(.{8})/g).map(d=>+`0b${d}`));return aee(t,e).encode(u)}function GI(t,e,n,r,i=!1){const s=cee(t,e,r,i);let o=0;const a=8*n.length;if(lee(s,r,(c,l,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!==0,o++),s.data[l][c]=d!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function hee(t){const e=t.inverse(),n=f=>{let p=0;for(let g=0,m=1,w=void 0;g<f.length;g++)w===f[g]&&(m++,g!==f.length-1)||(m>=5&&(p+=3+(m-5)),w=f[g],m=1);return p};let r=0;t.data.forEach(f=>r+=n(f)),e.data.forEach(f=>r+=n(f));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let f=0;f<o;f++)for(let p=0;p<a;p++){const g=f+1,m=p+1;s[f][p]===s[g][p]&&s[g][p]===s[f][m]&&s[g][p]===s[g][m]&&(i+=3)}const c=f=>{const p=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],m=[...p,...g],w=[...g,...p];let b=0;for(let y=0;y<f.length;y++)HI(f,m,y)&&(b+=40),HI(f,w,y)&&(b+=40);return b};let l=0;for(const f of t.data)l+=c(f);for(const f of e.data)l+=c(f);let u=0;t.rectRead(0,1/0,(f,p)=>u+=p?1:0);const d=u/(t.height*t.width)*100,h=10*Math.floor(Math.abs(d-50)/5);return r+i+l+h}function fee(t,e,n,r){if(r===void 0){const i=nee();for(let s=0;s<f6.length;s++)i.add(hee(GI(t,e,n,s,!0)),s);r=i.get()}if(r===void 0)throw new Error("Cannot find mask");return GI(t,e,n,r)}function pee(t){if(!KI.includes(t))throw new Error(`Invalid error correction mode=${t}. Expected: ${KI}`)}function gee(t){if(!VI.includes(t))throw new Error(`Encoding: invalid mode=${t}. Expected: ${VI}`);if(t==="kanji"||t==="eci")throw new Error(`Encoding: ${t} is not supported (yet?).`)}function mee(t){if(![0,1,2,3,4,5,6,7].includes(t)||!f6[t])throw new Error(`Invalid mask=${t}. Expected number [0..7]`)}function wee(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";pee(r);const i=n.encoding!==void 0?n.encoding:uee(t);gee(i),n.mask!==void 0&&mee(n.mask);let s=n.version,o,a=new Error("Unknown error");if(s!==void 0)tee(s),o=WI(s,r,t,i);else for(let u=1;u<=40;u++)try{o=WI(u,r,t,i),s=u;break}catch(d){a=d}if(!s||!o)throw a;let c=fee(s,r,o,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error(`invalid border type=${typeof l}`);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG(n.optimize);if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}function yee(t,e={}){const{errorCorrection:n,version:r}=e,i=wee(t,"raw",{border:0,ecc:n,scale:1,version:r});return{edgeLength:i.length,finderLength:7,grid:i,value:t}}function np(t){const{arena:e,...n}=t;return Nn.jsxs(np.Root,{...n,children:[Nn.jsx(np.Finder,{}),Nn.jsx(np.Cells,{}),e&&Nn.jsx(np.Arena,{children:typeof e=="string"?Nn.jsx("img",{alt:"Arena",src:e,style:{borderRadius:1,height:"100%",objectFit:"cover",width:"100%"}}):e})]})}(function(t){t.Context=Et.createContext(null);function e(s){const{children:o,size:a="100%",value:c,version:l,errorCorrection:u,...d}=s,h=Et.useMemo(()=>(Et.Children.map(o,y=>!Et.isValidElement(y)||typeof y.type=="string"?null:"displayName"in y.type&&y.type.displayName==="Arena"?!0:null)??[]).some(Boolean),[o]),f=Et.useMemo(()=>{let y=u;return h&&u==="low"&&(y="medium"),yee(c,{errorCorrection:y,version:l})},[c,h,u,l]),p=1,g=f.edgeLength*p,m=f.finderLength*p/2,w=h?Math.floor(g/4):0,b=Et.useMemo(()=>({arenaSize:w,cellSize:p,edgeSize:g,qrcode:f,finderSize:m}),[w,g,f,m]);return Nn.jsx(t.Context.Provider,{value:b,children:Nn.jsxs("svg",{...d,width:a,height:a,viewBox:`0 0 ${g} ${g}`,xmlns:"http://www.w3.org/2000/svg",children:[Nn.jsx("title",{children:"QR Code"}),o]})})}t.Root=e,function(s){s.displayName="Root"}(e=t.Root||(t.Root={}));function n(s){const{className:o,fill:a,innerClassName:c,radius:l=.25}=s,{cellSize:u,edgeSize:d,finderSize:h}=Et.useContext(t.Context);function f({position:p}){let g=h-(h-u)-u/2;p==="top-right"&&(g=d-h-(h-u)-u/2);let m=h-(h-u)-u/2;p==="bottom-left"&&(m=d-h-(h-u)-u/2);let w=h-u*1.5;p==="top-right"&&(w=d-h-u*1.5);let b=h-u*1.5;return p==="bottom-left"&&(b=d-h-u*1.5),Nn.jsxs(Nn.Fragment,{children:[Nn.jsx("rect",{className:o,stroke:a??"currentColor",fill:"transparent",x:g,y:m,width:u+(h-u)*2,height:u+(h-u)*2,rx:2*l*(h-u),ry:2*l*(h-u),strokeWidth:u}),Nn.jsx("rect",{className:c,fill:a??"currentColor",x:w,y:b,width:u*3,height:u*3,rx:2*l*u,ry:2*l*u})]})}return Nn.jsxs(Nn.Fragment,{children:[Nn.jsx(f,{position:"top-left"}),Nn.jsx(f,{position:"top-right"}),Nn.jsx(f,{position:"bottom-left"})]})}t.Finder=n,function(s){s.displayName="Finder"}(n=t.Finder||(t.Finder={}));function r(s){const{className:o,fill:a="currentColor",inset:c=!0,radius:l=1}=s,{arenaSize:u,cellSize:d,qrcode:h}=Et.useContext(t.Context),{edgeLength:f,finderLength:p}=h,g=Et.useMemo(()=>{let m="";for(let w=0;w<h.grid.length;w++){const b=h.grid[w];if(b)for(let y=0;y<b.length;y++){if(!b[y])continue;const A=f/2-u/2,T=A+u;if(w>=A&&w<=T&&y>=A&&y<=T)continue;const $=w<p&&y<p,D=w<p&&y>=f-p,O=w>=f-p&&y<p;if($||D||O)continue;const j=c?d*.1:0,F=(d-j*2)/2,L=y*d+d/2,B=w*d+d/2,x=L-F,v=L+F,S=B-F,N=B+F,E=l*F;m+=[`M ${x+E},${S}`,`L ${v-E},${S}`,`A ${E},${E} 0 0,1 ${v},${S+E}`,`L ${v},${N-E}`,`A ${E},${E} 0 0,1 ${v-E},${N}`,`L ${x+E},${N}`,`A ${E},${E} 0 0,1 ${x},${N-E}`,`L ${x},${S+E}`,`A ${E},${E} 0 0,1 ${x+E},${S}`,"z"].join(" ")}}return m},[u,d,f,p,h.grid,c,l]);return Nn.jsx("path",{className:o,d:g,fill:a})}t.Cells=r,function(s){s.displayName="Cells"}(r=t.Cells||(t.Cells={}));function i(s){const{children:o}=s,{arenaSize:a,cellSize:c,edgeSize:l}=Et.useContext(t.Context),u=Math.ceil(l/2-a/2),d=a+a%2,h=c/2;return Nn.jsx("foreignObject",{x:u,y:u,width:d,height:d,children:Nn.jsx("div",{style:{alignItems:"center",display:"flex",fontSize:1,justifyContent:"center",height:"100%",overflow:"hidden",width:"100%",padding:h,boxSizing:"border-box"},children:o})})}t.Arena=i,function(s){s.displayName="Arena"}(i=t.Arena||(t.Arena={}))})(np||(np={}));function iUe(t={}){let e,n,r,i;return s=>({id:"baseAccount",name:"Base Account",rdns:"app.base.account",type:"baseAccount",async connect({chainId:o,withCapabilities:a}={}){try{const c=await this.getProvider(),l=(await c.request({method:"eth_requestAccounts",params:[]})).map(d=>bi(d));n||(n=this.onAccountsChanged.bind(this),c.on("accountsChanged",n)),r||(r=this.onChainChanged.bind(this),c.on("chainChanged",r)),i||(i=this.onDisconnect.bind(this),c.on("disconnect",i));let u=await this.getChainId();return o&&u!==o&&(u=(await this.switchChain({chainId:o}).catch(h=>{if(h.code===_n.code)throw h;return{id:u}}))?.id??u),{accounts:a?l.map(d=>({address:d,capabilities:{}})):l,chainId:u}}catch(c){throw/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(c.message)?new _n(c):c}},async disconnect(){const o=await this.getProvider();n&&(o.removeListener("accountsChanged",n),n=void 0),r&&(o.removeListener("chainChanged",r),r=void 0),i&&(o.removeListener("disconnect",i),i=void 0),o.disconnect()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(a=>bi(a))},async getChainId(){const a=await(await this.getProvider()).request({method:"eth_chainId"});return Number(a)},async getProvider(){if(!e){const o=typeof t.preference=="string"?{options:t.preference}:{...t.preference,options:t.preference?.options??"all"},{createBaseAccountSDK:a}=await me(async()=>{const{createBaseAccountSDK:l}=await Promise.resolve().then(()=>rse);return{createBaseAccountSDK:l}},void 0);e=a({...t,appChainIds:s.chains.map(l=>l.id),preference:o}).getProvider()}return e},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:o,chainId:a}){const c=s.chains.find(u=>u.id===a);if(!c)throw new pu(new eh);const l=await this.getProvider();try{return await l.request({method:"wallet_switchEthereumChain",params:[{chainId:Pn(c.id)}]}),c}catch(u){if(u.code===4902)try{let d;o?.blockExplorerUrls?d=o.blockExplorerUrls:d=c.blockExplorers?.default.url?[c.blockExplorers?.default.url]:[];let h;o?.rpcUrls?.length?h=o.rpcUrls:h=[c.rpcUrls.default?.http[0]??""];const f={blockExplorerUrls:d,chainId:Pn(a),chainName:o?.chainName??c.name,iconUrls:o?.iconUrls,nativeCurrency:o?.nativeCurrency??c.nativeCurrency,rpcUrls:h};return await l.request({method:"wallet_addEthereumChain",params:[f]}),c}catch(d){throw new _n(d)}throw new pu(u)}},onAccountsChanged(o){o.length===0?this.onDisconnect():s.emitter.emit("change",{accounts:o.map(a=>bi(a))})},onChainChanged(o){const a=Number(o);s.emitter.emit("change",{chainId:a})},async onDisconnect(o){s.emitter.emit("disconnect");const a=await this.getProvider();n&&(a.removeListener("accountsChanged",n),n=void 0),r&&(a.removeListener("chainChanged",r),r=void 0),i&&(a.removeListener("disconnect",i),i=void 0)}})}bB.type="metaMask";function bB(t={}){let e,n,r,i,s,o,a,c;return l=>({id:"metaMaskSDK",name:"MetaMask",rdns:["io.metamask","io.metamask.mobile"],type:bB.type,async setup(){const u=await this.getProvider();u?.on&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),u.on("accountsChanged",i)))},async connect({chainId:u,isReconnecting:d,withCapabilities:h}={}){const f=await this.getProvider();a||(a=this.onDisplayUri,f.on("display_uri",a));let p=[];d&&(p=await this.getAccounts().catch(()=>[]));try{let g,m;p?.length||(t.connectAndSign||t.connectWith?(t.connectAndSign?g=await e.connectAndSign({msg:t.connectAndSign}):t.connectWith&&(m=await e.connectWith({method:t.connectWith.method,params:t.connectWith.params})),p=await this.getAccounts()):p=(await e.connect()).map(y=>bi(y)));let w=await this.getChainId();return u&&w!==u&&(w=(await this.switchChain({chainId:u}).catch(y=>{if(y.code===_n.code)throw y;return{id:w}}))?.id??w),a&&(f.removeListener("display_uri",a),a=void 0),g?f.emit("connectAndSign",{accounts:p,chainId:w,signResponse:g}):m&&f.emit("connectWith",{accounts:p,chainId:w,connectWithResponse:m}),o&&(f.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),f.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),f.on("disconnect",c)),{accounts:h?p.map(b=>({address:b,capabilities:{}})):p,chainId:w}}catch(g){const m=g;throw m.code===_n.code?new _n(m):m.code===om.code?new om(m):m}},async disconnect(){const u=await this.getProvider();s&&(u.removeListener("chainChanged",s),s=void 0),c&&(u.removeListener("disconnect",c),c=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o)),await e.terminate()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(h=>bi(h))},async getChainId(){const u=await this.getProvider(),d=u.getChainId()||await u?.request({method:"eth_chainId"});return Number(d)},async getProvider(){async function u(){const d=await(async()=>{const{default:g}=await me(async()=>{const{default:m}=await Promise.resolve().then(()=>Vue);return{default:m}},void 0);return typeof g!="function"&&typeof g.default=="function"?g.default:g})(),h={};for(const g of l.chains)h[Pn(g.id)]=ND({chain:g,transports:l.transports})?.[0];e=new d({_source:"wagmi",forceDeleteProvider:!1,forceInjectProvider:!1,injectProvider:!1,...t,readonlyRPCMap:h,dappMetadata:{...t.dappMetadata,name:t.dappMetadata?.name?t.dappMetadata?.name:"wagmi",url:t.dappMetadata?.url?t.dappMetadata?.url:typeof window<"u"?window.location.origin:"https://wagmi.sh"},useDeeplink:t.useDeeplink??!0});const f=await e.init(),p=f?.activeProvider?f.activeProvider:e.getProvider();if(!p)throw new vs;return p}return n||(r||(r=u()),n=await r),n},async isAuthorized(){try{return!!(await p5(()=>W4(()=>this.getAccounts(),{timeout:200}),{delay:201,retryCount:3})).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:d}){const h=await this.getProvider(),f=l.chains.find(m=>m.id===d);if(!f)throw new pu(new eh);try{return await h.request({method:"wallet_switchEthereumChain",params:[{chainId:Pn(d)}]}),await p(),await g(d),f}catch(m){const w=m;if(w.code===_n.code)throw new _n(w);if(w.code===4902||w?.data?.originalError?.code===4902)try{return await h.request({method:"wallet_addEthereumChain",params:[{blockExplorerUrls:(()=>{const{default:b,...y}=f.blockExplorers??{};if(u?.blockExplorerUrls)return u.blockExplorerUrls;if(b)return[b.url,...Object.values(y).map(_=>_.url)]})(),chainId:Pn(d),chainName:u?.chainName??f.name,iconUrls:u?.iconUrls,nativeCurrency:u?.nativeCurrency??f.nativeCurrency,rpcUrls:u?.rpcUrls?.length?u.rpcUrls:[f.rpcUrls.default?.http[0]??""]}]}),await p(),await g(d),f}catch(b){const y=b;throw y.code===_n.code?new _n(y):new pu(y)}throw new pu(w)}async function p(){await p5(async()=>{const m=cb(await h.request({method:"eth_chainId"}));if(m!==d)throw new Error("User rejected switch after adding network.");return m},{delay:50,retryCount:20})}async function g(m){await new Promise(w=>{const b=y=>{"chainId"in y&&y.chainId===m&&(l.emitter.off("change",b),w())};l.emitter.on("change",b),l.emitter.emit("change",{chainId:m})})}},async onAccountsChanged(u){if(u.length===0)if(e.isExtensionActive())this.onDisconnect();else return;else if(l.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d})}else l.emitter.emit("change",{accounts:u.map(d=>bi(d))})},onChainChanged(u){const d=Number(u);l.emitter.emit("change",{chainId:d})},async onConnect(u){const d=await this.getAccounts();if(d.length===0)return;const h=Number(u.chainId);l.emitter.emit("connect",{accounts:d,chainId:h});const f=await this.getProvider();o&&(f.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),f.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),f.on("disconnect",c))},async onDisconnect(u){const d=await this.getProvider();u&&u.code===1013&&d&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),s&&(d.removeListener("chainChanged",s),s=void 0),c&&(d.removeListener("disconnect",c),c=void 0),o||(o=this.onConnect.bind(this),d.on("connect",o)))},onDisplayUri(u){l.emitter.emit("message",{type:"display_uri",data:u})}})}function vB(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Y5=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Y5(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Y5(r)(n)}}}},bee=(t,e)=>(n,r,i)=>{let s={storage:vB(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...g)},r,i);const u=()=>{const g=s.partialize({...r()});return l.setItem(s.name,{state:g,version:s.version})},d=i.setState;i.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,i);i.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var y;return b((y=r())!=null?y:h)});const w=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(g=r())!=null?g:h))||void 0;return Y5(l.getItem.bind(l))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate){const y=s.migrate(b.state,b.version);return y instanceof Promise?y.then(_=>[!0,_]):[!0,y]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var y;const[_,A]=b;if(f=s.merge(A,(y=r())!=null?y:h),n(f,!0),_)return u()}).then(()=>{w?.(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{w?.(void 0,b)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},s.skipHydration||p(),f||h},vee=bee,ZI=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,i,a);return a},p6=t=>t?ZI(t):ZI;function Oh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function W2(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Oh(n);return(i,s)=>r.then(o=>s(o.transaction(e,i).objectStore(e)))}let _3;function Lw(){return _3||(_3=W2("keyval-store","keyval")),_3}function Lm(t,e=Lw()){return e("readonly",n=>Oh(n.get(t)))}function g6(t,e,n=Lw()){return n("readwrite",r=>(r.put(e,t),Oh(r.transaction)))}function m6(t,e=Lw()){return e("readwrite",n=>(n.delete(t),Oh(n.transaction)))}function EB(t=Lw()){return t("readwrite",e=>(e.clear(),Oh(e.transaction)))}function Eee(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Oh(t.transaction)}function CB(t=Lw()){return t("readonly",e=>{if(e.getAllKeys)return Oh(e.getAllKeys());const n=[];return Eee(e,r=>n.push(r.key)).then(()=>n)})}_B.type="safe";function _B(t={}){const{shimDisconnect:e=!1}=t;let n,r;return i=>({id:"safe",name:"Safe",type:_B.type,async connect({withCapabilities:s}={}){const o=await this.getProvider();if(!o)throw new vs;const a=await this.getAccounts(),c=await this.getChainId();return r||(r=this.onDisconnect.bind(this),o.on("disconnect",r)),e&&await i.storage?.removeItem("safe.disconnected"),{accounts:s?a.map(l=>({address:l,capabilities:{}})):a,chainId:c}},async disconnect(){const s=await this.getProvider();if(!s)throw new vs;r&&(s.removeListener("disconnect",r),r=void 0),e&&await i.storage?.setItem("safe.disconnected",!0)},async getAccounts(){const s=await this.getProvider();if(!s)throw new vs;return(await s.request({method:"eth_accounts"})).map(bi)},async getProvider(){if(typeof window<"u"&&window?.parent!==window){if(!n){const{default:o}=await me(async()=>{const{default:u}=await Promise.resolve().then(()=>Mq);return{default:u}},void 0),a=new o(t),c=await W4(()=>a.safe.getInfo(),{timeout:t.unstable_getInfoTimeout??10});if(!c)throw new Error("Could not load Safe information");const l=await(async()=>{const u=await me(()=>Promise.resolve().then(()=>vde),void 0);return typeof u.SafeAppProvider!="function"&&typeof u.default.SafeAppProvider=="function"?u.default.SafeAppProvider:u.SafeAppProvider})();n=new l(c,a)}return n}},async getChainId(){const s=await this.getProvider();if(!s)throw new vs;return Number(s.chainId)},async isAuthorized(){try{return e&&await i.storage?.getItem("safe.disconnected")?!1:!!(await this.getAccounts()).length}catch{return!1}},onAccountsChanged(){},onChainChanged(){},onDisconnect(){i.emitter.emit("disconnect")}})}SB.type="walletConnect";function SB(t){const e=t.isNewChainsStale??!0;let n,r;const i="eip155";let s,o,a,c,l,u;return d=>({id:"walletConnect",name:"WalletConnect",type:SB.type,async setup(){const h=await this.getProvider().catch(()=>null);h&&(a||(a=this.onConnect.bind(this),h.on("connect",a)),l||(l=this.onSessionDelete.bind(this),h.on("session_delete",l)))},async connect({chainId:h,withCapabilities:f,...p}={}){try{const g=await this.getProvider();if(!g)throw new vs;c||(c=this.onDisplayUri,g.on("display_uri",c));let m=h;if(!m){const _=await d.storage?.getItem("state")??{};d.chains.some(T=>T.id===_.chainId)?m=_.chainId:m=d.chains[0]?.id}if(!m)throw new Error("No chains found on connector.");const w=await this.isChainsStale();if(g.session&&w&&await g.disconnect(),!g.session||w){const _=d.chains.filter(A=>A.id!==m).map(A=>A.id);await g.connect({optionalChains:[m,..._],..."pairingTopic"in p?{pairingTopic:p.pairingTopic}:{}}),this.setRequestedChainsIds(d.chains.map(A=>A.id))}const b=(await g.enable()).map(_=>bi(_));let y=await this.getChainId();return h&&y!==h&&(y=(await this.switchChain({chainId:h}).catch(A=>{if(A.code===_n.code&&A.cause?.message!=="Missing or invalid. request() method: wallet_addEthereumChain")throw A;return{id:y}}))?.id??y),c&&(g.removeListener("display_uri",c),c=void 0),a&&(g.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),g.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),g.on("chainChanged",o)),u||(u=this.onDisconnect.bind(this),g.on("disconnect",u)),l||(l=this.onSessionDelete.bind(this),g.on("session_delete",l)),{accounts:f?b.map(_=>({address:_,capabilities:{}})):b,chainId:y}}catch(g){throw/(user rejected|connection request reset)/i.test(g?.message)?new _n(g):g}},async disconnect(){const h=await this.getProvider();try{await h?.disconnect()}catch(f){if(!/No matching key/i.test(f.message))throw f}finally{o&&(h?.removeListener("chainChanged",o),o=void 0),u&&(h?.removeListener("disconnect",u),u=void 0),a||(a=this.onConnect.bind(this),h?.on("connect",a)),s&&(h?.removeListener("accountsChanged",s),s=void 0),l&&(h?.removeListener("session_delete",l),l=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map(f=>bi(f))},async getProvider({chainId:h}={}){async function f(){const p=d.chains.map(m=>m.id);if(!p.length)return;const{EthereumProvider:g}=await me(async()=>{const{EthereumProvider:m}=await Promise.resolve().then(()=>kSe);return{EthereumProvider:m}},void 0);return await g.init({...t,disableProviderPing:!0,optionalChains:p,projectId:t.projectId,rpcMap:Object.fromEntries(d.chains.map(m=>{const[w]=ND({chain:m,transports:d.transports});return[m.id,w]})),showQrModal:t.showQrModal??!0})}return n||(r||(r=f()),n=await r,n?.events.setMaxListeners(Number.POSITIVE_INFINITY)),h&&await this.switchChain?.({chainId:h}),n},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{const[h,f]=await Promise.all([this.getAccounts(),this.getProvider()]);return h.length?await this.isChainsStale()&&f.session?(await f.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:h,chainId:f}){const p=await this.getProvider();if(!p)throw new vs;const g=d.chains.find(m=>m.id===f);if(!g)throw new pu(new eh);try{await Promise.all([new Promise(w=>{const b=({chainId:y})=>{y===f&&(d.emitter.off("change",b),w())};d.emitter.on("change",b)}),p.request({method:"wallet_switchEthereumChain",params:[{chainId:Pn(f)}]})]);const m=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...m,f]),g}catch(m){const w=m;if(/(user rejected)/i.test(w.message))throw new _n(w);try{let b;h?.blockExplorerUrls?b=h.blockExplorerUrls:b=g.blockExplorers?.default.url?[g.blockExplorers?.default.url]:[];let y;h?.rpcUrls?.length?y=h.rpcUrls:y=[...g.rpcUrls.default.http];const _={blockExplorerUrls:b,chainId:Pn(f),chainName:h?.chainName??g.name,iconUrls:h?.iconUrls,nativeCurrency:h?.nativeCurrency??g.nativeCurrency,rpcUrls:y};await p.request({method:"wallet_addEthereumChain",params:[_]});const A=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...A,f]),g}catch(b){throw new _n(b)}}},onAccountsChanged(h){h.length===0?this.onDisconnect():d.emitter.emit("change",{accounts:h.map(f=>bi(f))})},onChainChanged(h){const f=Number(h);d.emitter.emit("change",{chainId:f})},async onConnect(h){const f=Number(h.chainId),p=await this.getAccounts();d.emitter.emit("connect",{accounts:p,chainId:f})},async onDisconnect(h){this.setRequestedChainsIds([]),d.emitter.emit("disconnect");const f=await this.getProvider();s&&(f.removeListener("accountsChanged",s),s=void 0),o&&(f.removeListener("chainChanged",o),o=void 0),u&&(f.removeListener("disconnect",u),u=void 0),l&&(f.removeListener("session_delete",l),l=void 0),a||(a=this.onConnect.bind(this),f.on("connect",a))},onDisplayUri(h){d.emitter.emit("message",{type:"display_uri",data:h})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return n?n.session?.namespaces[i]?.accounts?.map(f=>Number.parseInt(f.split(":")[1]||"",10))??[]:[]},async getRequestedChainsIds(){return await d.storage?.getItem(this.requestedChainsStorageKey)??[]},async isChainsStale(){if(!e)return!1;const h=d.chains.map(g=>g.id),f=this.getNamespaceChainsIds();if(f.length&&!f.some(g=>h.includes(g)))return!1;const p=await this.getRequestedChainsIds();return!h.every(g=>p.includes(g))},async setRequestedChainsIds(h){await d.storage?.setItem(this.requestedChainsStorageKey,h)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}var Cee=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Wh=new WeakMap,jy=new WeakMap,Fy={},S3=0,AB=function(t){return t&&(t.host||AB(t.parentNode))},_ee=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=AB(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},See=function(t,e,n,r){var i=_ee(e,Array.isArray(t)?t:[t]);Fy[n]||(Fy[n]=new WeakMap);var s=Fy[n],o=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(r),p=f!==null&&f!=="false",g=(Wh.get(h)||0)+1,m=(s.get(h)||0)+1;Wh.set(h,g),s.set(h,m),o.push(h),g===1&&p&&jy.set(h,!0),m===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return u(e),a.clear(),S3++,function(){o.forEach(function(d){var h=Wh.get(d)-1,f=s.get(d)-1;Wh.set(d,h),s.set(d,f),h||(jy.has(d)||d.removeAttribute(r),jy.delete(d)),f||d.removeAttribute(n)}),S3--,S3||(Wh=new WeakMap,Wh=new WeakMap,jy=new WeakMap,Fy={})}},sUe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Cee(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),See(r,i,n,"aria-hidden")):function(){return null}};const Aee="@base-org/account",xee="1.1.1",xB={name:Aee,version:xee},Iee="https://keys.coinbase.com/connect",IB="https://rpc.wallet.coinbase.com",G2=xB.name,Kg=xB.version,Oee=()=>({chains:[]}),Pee=()=>({keys:{}}),Tee=()=>({account:{}}),kee=()=>({subAccount:void 0}),Nee=()=>({subAccountConfig:{}}),$ee=()=>({spendPermissions:[]}),Ree=()=>({config:{version:Kg}}),Hn=p6(vee((...t)=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oee(...t)),Pee(...t)),Tee(...t)),kee(...t)),$ee(...t)),Ree(...t)),Nee(...t)),{name:"base-acc-sdk.store",storage:vB(()=>localStorage),partialize:t=>({chains:t.chains,keys:t.keys,account:t.account,subAccount:t.subAccount,spendPermissions:t.spendPermissions,config:t.config})})),Mee={get:()=>Hn.getState().subAccountConfig,set:t=>{Hn.setState(e=>({subAccountConfig:Object.assign(Object.assign({},e.subAccountConfig),t)}))},clear:()=>{Hn.setState({subAccountConfig:{}})}},Dee={get:()=>Hn.getState().subAccount,set:t=>{Hn.setState(e=>({subAccount:e.subAccount?Object.assign(Object.assign({},e.subAccount),t):Object.assign({address:t.address},t)}))},clear:()=>{Hn.setState({subAccount:void 0})}},Bee={get:()=>Hn.getState().spendPermissions,set:t=>{Hn.setState({spendPermissions:t})},clear:()=>{Hn.setState({spendPermissions:[]})}},Lee={get:()=>Hn.getState().account,set:t=>{Hn.setState(e=>({account:Object.assign(Object.assign({},e.account),t)}))},clear:()=>{Hn.setState({account:{}})}},Uee={get:()=>Hn.getState().chains,set:t=>{Hn.setState({chains:t})},clear:()=>{Hn.setState({chains:[]})}},jee={get:t=>Hn.getState().keys[t],set:(t,e)=>{Hn.setState(n=>({keys:Object.assign(Object.assign({},n.keys),{[t]:e})}))},clear:()=>{Hn.setState({keys:{}})}},OB={get:()=>Hn.getState().config,set:t=>{Hn.setState(e=>({config:Object.assign(Object.assign({},e.config),t)}))}},Fee={subAccounts:Dee,subAccountsConfig:Mee,spendPermissions:Bee,account:Lee,chains:Uee,keys:jee,config:OB},xe=Object.assign(Object.assign({},Hn),Fee),qee='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},562:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p="mark.",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f="4g",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn("Perfume.js:",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return"number"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?u():(s=u,"requestIdleCallback"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?"good":t<=L[e][1]?"needsImprovement":"poor":null},R=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;"FCP"===n&&(b.value=i),["FCP","LCP"].includes(n)&&!T[0]&&(T[0]=S("longtask",I)),"FID"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:"TBT",rating:U("TBT",w.value),value:w.value,navigationType:o}),R("dataConsumption",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},z=function(e){if("loading"===document.readyState)return"loading";var t=F();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},$=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:K(r)+(r.className&&r.className.length?"."+r.className.replace(/\\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||V()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J("FCP"),o=X("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J("FCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:"first-input",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},me=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J("TTFB"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J("TTFB",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J("CLS"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X("layout-shift",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J("CLS",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X("first-input",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J("FID"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X("largest-contentful-paint",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J("LCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||D||(D=X("event",be,{type:"event",buffered:!0,durationThreshold:0}));var r,i=J("INP"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),"first-input"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X("event",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J("INP"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S("resource",je),a.isElementTiming&&S("element",Oe)},Ie=function(e){var t="usageDetails"in e?e.usageDetails:{};R("storageEstimate",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(N("userJourneyStep",d,m,{stepName:e},void 0),u.measure("step.".concat(e,"_vitals_").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:"stepVital",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){"PerformanceObserver"in o&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",_);var t=function(){if(!m())return{};var e=u.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R("navigationTiming",t),t.redirectTime&&q({attribution:{},name:"RT",rating:U("RT",t.redirectTime),value:t.redirectTime}),R("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark("mark_".concat(e,"_end")),delete g[e];var r=function(e){u.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=u.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks("mark_".concat(e,"_start")),u.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),q({attribution:{},name:"NTBT",rating:U("NTBT",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{"use strict";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",p="name",m="type",f="vendor",v="version",g="architecture",b="console",h="mobile",w="tablet",y="smarttv",T="wearable",k="embedded",_="Amazon",S="Apple",E="ASUS",x="BlackBerry",O="Browser",j="Chrome",N="Firefox",I="Google",P="Huawei",M="LG",B="Microsoft",C="Motorola",D="Opera",A="Samsung",L="Sharp",U="Sony",R="Xiaomi",q="Zebra",F="Facebook",z="Chromium OS",K="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\s\\s*/,""),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return"?"===n?a:n}else if(Q(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[p,v],[/opios[\\/ ]+([\\w\\.]+)/i],[v,[p,D+" Mini"]],[/\\bopr\\/([\\w\\.]+)/i],[v,[p,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[p,v],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[v,[p,"UC"+O]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[v,[p,"WeChat(Win) Desktop"]],[/micromessenger\\/([\\w\\.]+)/i],[v,[p,"WeChat"]],[/konqueror\\/([\\w\\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[v,[p,"Yandex"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],v],[/\\bfocus\\/([\\w\\.]+)/i],[v,[p,N+" Focus"]],[/\\bopt\\/([\\w\\.]+)/i],[v,[p,D+" Touch"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\\/([\\w\\.]+)/i],[v,[p,"Dolphin"]],[/coast\\/([\\w\\.]+)/i],[v,[p,D+" Coast"]],[/miuibrowser\\/([\\w\\.]+)/i],[v,[p,"MIUI "+O]],[/fxios\\/([-\\w\\.]+)/i],[v,[p,N]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 "+O],v],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[p,/_/g," "],v],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[p,v],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[p],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[p,v],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[v,[p,j+" Headless"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[p,j+" WebView"],v],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[p,v],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[p,[v,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[p,v],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[p,"Netscape"],v],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[v,[p,N+" Reality"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\/([\\w\\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\)]/i],[[g,"ia32"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[g,"arm64"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[g,/ower/,"",W]],[/(sun4\\w)[;\\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[g,W]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[f,A],[m,h]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[d,[f,S],[m,h]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[f,P],[m,h]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,h]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,w]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[f,"OPPO"],[m,h]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[m,h]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[f,"Realme"],[m,h]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[f,C],[m,h]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[f,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[m,h]],[/(pixel c)\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,"Xperia Tablet"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[f,"OnePlus"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,_],[m,h]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,f,[m,w]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[f,x],[m,h]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[f,[d,/_/g," "],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[f,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[f,"Meizu"],[m,h]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[f,"Fairphone"],[m,h]],[/(u304aa)/i],[d,[f,"AT&T"],[m,h]],[/\\bsie-(\\w*)/i],[d,[f,"Siemens"],[m,h]],[/\\b(rct\\w+) b/i],[d,[f,"RCA"],[m,w]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[f,"Dell"],[m,w]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[f,"Verizon"],[m,w]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[f,"Barnes & Noble"],[m,w]],[/\\b(tm\\d{3}\\w+) b/i],[d,[f,"NuVision"],[m,w]],[/\\b(k88) b/i],[d,[f,"ZTE"],[m,w]],[/\\b(nx\\d{3}j) b/i],[d,[f,"ZTE"],[m,h]],[/\\b(gen\\d{3}) b.+49h/i],[d,[f,"Swiss"],[m,h]],[/\\b(zur\\d{3}) b/i],[d,[f,"Swiss"],[m,w]],[/\\b((zeki)?tb.*\\b) b/i],[d,[f,"Zeki"],[m,w]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[f,"Dragon Touch"],d,[m,w]],[/\\b(ns-?\\w{0,9}) b/i],[d,[f,"Insignia"],[m,w]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[f,"NextBook"],[m,w]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[m,h]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[f,"LvTel"],d,[m,h]],[/\\b(ph-1) /i],[d,[f,"Essential"],[m,h]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[f,"Envizen"],[m,w]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[f,"MachSpeed"],[m,w]],[/\\btu_(1491) b/i],[d,[f,"Rotor"],[m,w]],[/(shield[\\w ]+) b/i],[d,[f,"Nvidia"],[m,w]],[/(sprint) (\\w+)/i],[f,d,[m,h]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g," "],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,"SmartTV"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+" TV"],[m,y]],[/crkey/i],[[d,j+"cast"],[f,I],[m,y]],[/droid.+aft(\\w)( bui|\\))/i],[d,[f,_],[m,y]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[f,L],[m,y]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[f,U],[m,y]],[/(mitv-\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[f,[m,k]],[/(aeobc)\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[v,[p,"EdgeHTML"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[v,[p,"Blink"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[p,v],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[p,"Windows"],[v,J,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,"."]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[p,v],[/\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[v,[p,"Symbian"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[v,[p,N+" OS"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[v,[p,"watchOS"]],[/crkey\\/([\\d\\.]+)/i],[v,[p,j+"cast"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[p,v],[/(sunos) ?([\\w\\.\\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\d\\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION="1.0.35",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),p=function(e){return e.commerce_merchant="commerce_merchant",e.device="device",e.edp_fingerprint_id="edp_fingerprint_id",e.nft_user="nft_user",e.user="user",e.wallet_user="wallet_user",e.uuid="user_uuid",e}({}),m=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e}({}),f=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),v=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),g=function(e){return e.web="Web",e.ios="iOS",e.android="Android",e}({}),b=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),h=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),w=function(e){return e.pv="pv",e}({}),y=function(e){return e.xs="xs",e.s="s",e.m="m",e.l="l",e.xl="xl",e.xxl="xxl",e}({});const T="https://analytics-service-dev.cbhq.net",k=3e5,_=5e3,S="analytics-db",E="experiment-exposure-db",x="Analytics SDK:",O=Object.values(e),j="pageview",N="session_duration",I={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}},P="1",M="web";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\/\\/)/;function D(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const A=B({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn("You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return"android"===A.platform}function F(){return"ios"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia("(max-width: 560px)").matches:return v.mobile_web;case window.matchMedia("(max-width: 1024px, min-width: 561px)").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?("requestIdleCallback"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark("ua_parser_start");const t=new(Q())(null!=(e=W.userAgent)?e:"").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark("ua_parser_end"),performance.measure("ua_parser","ua_parser_start","ua_parser_end"))},re={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:""}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||""},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||""},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||""},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=["action","component_type","component_name","context","logging_id"],ke=["num_non_hardware_accounts","ujs"],_e="ujs_",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error("IdentityFlow property names must have snake case format"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>`${_e}${e}`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error("SDK platform not initialized")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error("IndexedDB:Get:InternalError")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error("IndexedDB:Set:InternalError"))}},st=()=>{"server"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct="rgb(5,177,105)",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`%c ${x}`,a=`color:${ct};font-size:11px;`,o=`Importance: ${r}`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`color:${ct};font-size:11px;`,a=`%c ${x}`,o=`Importance: ${r}`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:"Started new session:",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:"@cbhq/client-analytics",version:"10.6.0"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?"true":"false",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt="application/x-www-form-urlencoded; charset=UTF-8",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?"application/json":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader("Content-Type",kt),H.jwt&&e.setRequestHeader("authorization",`Bearer ${H.jwt}`),e.send(c)}if(!z()||r||!("sendBeacon"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{"Content-Type":o});H.jwt&&(e.Authorization=`Bearer ${H.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:c}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||"";return Et()("2"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error("userId not set in Logged-in"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(", "),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:"unknown"),{listEventType:r});n=a,A.onError(new Nt("Found DOM element reference"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:"2",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:"Batch Events",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return"number"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error("missing logData")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Metrics",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){"unknown"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t="hidden",n=!1)=>{cn||(addEventListener("pagehide",un),addEventListener("beforeunload",(()=>{})),cn=!0),addEventListener("visibilitychange",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:`Event: exposeExperiment ${e.testName} not sent`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:`Event: exposeExperiment ${e.testName} sent`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||""),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("keyval-store",1,{upgrade(e){e.createObjectStore("keyval")}});rt({idbKeyval:{get:async t=>(await e).get("keyval",t),set:async(t,n)=>(await e).put("keyval",n,t),delete:async t=>(await e).delete("keyval",t),keys:async()=>(await e).getAllKeys("keyval")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:"Initialized Analytics:",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:"Initialized Analytics IndexedDB:",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),"hidden"),ln((()=>{pn()}),"visible")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener("resize",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||"unsupported",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||"",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if("navigationTiming"===r)t&&"number"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if("TTFB"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:`perf_web_vitals_ttfb_${a}`,metricType:d.count,tags:b,value:1});else if("networkInformation"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if("storageEstimate"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:"perf_storage_estimate_caches",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:"perf_storage_estimate_indexed_db",metricType:d.histogram,tags:b,value:t.indexedDB});else if("CLS"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_cls_${a}`,metricType:d.count,tags:b,value:1});else if("FID"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||"");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_fidVitals_${a}`,metricType:d.count,tags:b,value:1})}else"userJourneyStep"===r?($t("perf_user_journey_step",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||""},g)),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}_vitals_${a}`,metricType:d.count,tags:b,value:1}),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:`perf_web_vitals_${Xt(r)}_${a}`,metricType:d.count,tags:b,value:1}),"LCP"===r&&Ht({metricName:`perf_web_vitals_${Xt(r)}`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:"Identify:",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on("routeChangeComplete",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Traces",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t,"x-datadog-sampling-priority":"1","x-datadog-trace-id":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&"performance"in window&&"mark"in performance&&"getEntriesByName"in performance}function Kn(e,t){return`perf_${e}${null!=t&&t.label?`_${t.label}`:""}`}function $n(e,t,n){return`${Kn(e,n)}__${t}`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),"end"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,"start",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]||(Wn(e,"start",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,"start",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]&&(Wn(e,"end",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&""!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{"X-CB-Device-ID":H.deviceId||"unknown","X-CB-Is-Logged-In":H.userId?"true":"false","X-CB-Pagekey":re.pageKey||"unknown","X-CB-UJS":(e=Se.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":A.platform||"unknown","X-CB-Project-Name":A.projectName||"unknown","X-CB-Session-UUID":oe.sessionUUID||"unknown","X-CB-Version-Name":A.version?String(A.version):"unknown"};var e}})(),r})()}));',Hee=()=>new Promise((t,e)=>{if(window.ClientAnalytics)return t();try{const n=document.createElement("script");n.textContent=qee,n.type="text/javascript",document.head.appendChild(n),zee(),document.head.removeChild(n),t()}catch{console.error("Failed to execute inlined telemetry script"),e()}}),zee=()=>{var t,e,n;if(typeof window<"u"){const r=(n=(t=xe.config.get().deviceId)!==null&&t!==void 0?t:(e=window.crypto)===null||e===void 0?void 0:e.randomUUID())!==null&&n!==void 0?n:"";if(window.ClientAnalytics){const{init:i,identify:s,PlatformName:o}=window.ClientAnalytics;i({isProd:!0,amplitudeApiKey:"c66737ad47ec354ced777935b0af822e",platform:o.web,projectName:"base_account_sdk",showDebugLogging:!1,version:"1.0.0",apiEndpoint:"https://cca-lite.coinbase.com"}),s({deviceId:r}),xe.config.set({deviceId:r})}}},Kee="0xba5ed110efdba3d005bfc882d75358acbbb85842",PB="0xf85210B21cC50302F477BA56686d2019dC9b67Ad",jo=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],TB=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}],kn={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},Q5={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},kB="Unspecified error message.",Vee="Unspecified server error.";function w6(t,e=kB){if(t&&Number.isInteger(t)){const n=t.toString();if(J5(Q5,n))return Q5[n].message;if(NB(t))return Vee}return e}function Wee(t){if(!Number.isInteger(t))return!1;const e=t.toString();return!!(Q5[e]||NB(t))}function Gee(t,{shouldIncludeStack:e=!1}={}){const n={};if(t&&typeof t=="object"&&!Array.isArray(t)&&J5(t,"code")&&Wee(t.code)){const r=t;n.code=r.code,r.message&&typeof r.message=="string"?(n.message=r.message,J5(r,"data")&&(n.data=r.data)):(n.message=w6(n.code),n.data={originalError:YI(t)})}else n.code=kn.rpc.internal,n.message=QI(t,"message")?t.message:kB,n.data={originalError:YI(t)};return e&&(n.stack=QI(t,"stack")?t.stack:void 0),n}function NB(t){return t>=-32099&&t<=-32e3}function YI(t){return t&&typeof t=="object"&&!Array.isArray(t)?Object.assign({},t):t}function J5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function QI(t,e){return typeof t=="object"&&t!==null&&e in t&&typeof t[e]=="string"}const Pe={rpc:{parse:t=>Us(kn.rpc.parse,t),invalidRequest:t=>Us(kn.rpc.invalidRequest,t),invalidParams:t=>Us(kn.rpc.invalidParams,t),methodNotFound:t=>Us(kn.rpc.methodNotFound,t),internal:t=>Us(kn.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Us(e,t)},invalidInput:t=>Us(kn.rpc.invalidInput,t),resourceNotFound:t=>Us(kn.rpc.resourceNotFound,t),resourceUnavailable:t=>Us(kn.rpc.resourceUnavailable,t),transactionRejected:t=>Us(kn.rpc.transactionRejected,t),methodNotSupported:t=>Us(kn.rpc.methodNotSupported,t),limitExceeded:t=>Us(kn.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>Gh(kn.provider.userRejectedRequest,t),unauthorized:t=>Gh(kn.provider.unauthorized,t),unsupportedMethod:t=>Gh(kn.provider.unsupportedMethod,t),disconnected:t=>Gh(kn.provider.disconnected,t),chainDisconnected:t=>Gh(kn.provider.chainDisconnected,t),unsupportedChain:t=>Gh(kn.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new RB(e,n,r)}}};function Us(t,e){const[n,r]=$B(e);return new y6(t,n||w6(t),r)}function Gh(t,e){const[n,r]=$B(e);return new RB(t,n||w6(t),r)}function $B(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}class y6 extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}}class RB extends y6{constructor(e,n,r){if(!Zee(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,n,r)}}function Zee(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function JI(t){return typeof t=="object"&&t!==null&&"code"in t&&"data"in t&&t.code===-32090&&typeof t.data=="object"&&t.data!==null&&"type"in t.data&&t.data.type==="INSUFFICIENT_FUNDS"}function MB(t){return typeof t=="object"&&t!==null&&"details"in t}function Yee(t){try{const e=JSON.parse(t.details);return new y6(e.code,e.message,e.data)}catch{return null}}function lo(t,e,n){if(t==null)throw e??Pe.rpc.invalidParams({message:"value must be present",data:t})}function Rl(t,e){if(!Array.isArray(t))throw Pe.rpc.invalidParams({message:e??"value must be an array",data:t})}const Qee=`Base Account SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Base Account app.

Please see https://docs.base.org/smart-wallet/quickstart#cross-origin-opener-policy for more information.`,Jee=()=>{let t;return{getCrossOriginOpenerPolicy:()=>t===void 0?"undefined":t,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){t="non-browser-env";return}try{const e=`${window.location.origin}${window.location.pathname}`,n=await fetch(e,{method:"HEAD"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=n.headers.get("Cross-Origin-Opener-Policy");t=r??"null",t==="same-origin"&&console.error(Qee)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),t="error"}}}},{checkCrossOriginOpenerPolicy:Xee,getCrossOriginOpenerPolicy:ete}=Jee();function tte(t){if(t){if(t.attribution&&t.attribution.auto!==void 0&&t.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties");if(t.telemetry&&typeof t.telemetry!="boolean")throw new Error("Telemetry must be a boolean")}}function XI(t){if(typeof t!="function")throw new Error("toAccount is not a function")}var ln;(function(t){t.unknown="unknown",t.banner="banner",t.button="button",t.card="card",t.chart="chart",t.content_script="content_script",t.dropdown="dropdown",t.link="link",t.page="page",t.modal="modal",t.table="table",t.search_bar="search_bar",t.service_worker="service_worker",t.text="text",t.text_input="text_input",t.tray="tray",t.checkbox="checkbox",t.icon="icon"})(ln||(ln={}));var un;(function(t){t.unknown="unknown",t.blur="blur",t.click="click",t.change="change",t.dismiss="dismiss",t.focus="focus",t.hover="hover",t.select="select",t.measurement="measurement",t.move="move",t.process="process",t.render="render",t.scroll="scroll",t.view="view",t.search="search",t.keyPress="keyPress",t.error="error"})(un||(un={}));var dn;(function(t){t.low="low",t.high="high"})(dn||(dn={}));function vn(t,e,n){var r,i,s;window.ClientAnalytics&&((r=window.ClientAnalytics)===null||r===void 0||r.logEvent(t,Object.assign(Object.assign({},e),{sdkVersion:Kg,sdkName:G2,appName:(s=(i=xe.config.get().metadata)===null||i===void 0?void 0:i.appName)!==null&&s!==void 0?s:"",appOrigin:window.location.origin}),n))}const nte=()=>{vn("communicator.popup_setup.started",{action:un.unknown,componentType:ln.unknown},dn.high)},rte=()=>{vn("communicator.popup_setup.completed",{action:un.unknown,componentType:ln.unknown},dn.high)},ite=()=>{vn("communicator.popup_unload.received",{action:un.unknown,componentType:ln.unknown},dn.high)},b6=({dialogContext:t})=>{vn(`dialog.${t}.shown`,{action:un.render,componentType:ln.modal,dialogContext:t},dn.high)},DB=({dialogContext:t})=>{vn(`dialog.${t}.dismissed`,{action:un.dismiss,componentType:ln.modal,dialogContext:t},dn.high)},qd=({dialogContext:t,dialogAction:e})=>{vn(`dialog.${t}.action_clicked`,{action:un.click,componentType:ln.button,dialogContext:t,dialogAction:e},dn.high)},ste=`
@font-face {
  font-family: "BaseSans-Regular";
  src: url("data:font/woff2;charset=utf-8;base64,d09GMgABAAAAAJigAA8AAAACCywAAJg8AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGoIuG4L7BhzCdAZgAJIGEQgKg+k0gv4NC4p0AAE2AiQDlWQEIAWGfgeublsIz5EGVeP2TiXfSAJ0G0LBr7Zlqf6pcAA3dwBbquuITJr6o7y2YrpNHoSyAwBKe/rZ//////+/IlmMMf8PuQcEUUitMtva1oSQhGamQkxJxpSLWVScqgQ1RW16VovNJTZ2uagkVSeuNje11QubnvZpYVB7yUGi4thNqJYBdoegR2V9jiA4dEhCOgf3Va7muEqhcRKz0dDNOVV47+hxPO9qkzFCUg5glpCZxKbOGFxehX5nYwGEBZOQwyRFIY5oljSrLwkSIj35dugPRJKk8G3GwUgw06hpknM0qqcUdO/UkzLvviWielabhCp59zPCaOnnqLtK3qXfP4Jz+vAum7Q0/NuZGXK9lUJKTpCEJ7ENfKrSzrLJy8uqLLgUD5sssqscpk8OS7HhGv36H+Ct59wJukpOmwpgFOqL6vCNd0ISNjq/nA5E/OXNVV0dR7EKTAKiB1ZvW+tSlyr7EWdJ3qxDtA8codE8WQY4xkT9EJF26FGP+iQKnwv66klyovCkLwlr8Lxu3nv/5/MNMUKMiAhhDtdkGsM0RAwRI8QYaRhCUNgOUAO4Bi0u3DhL0aZoKaLFsXHublwTFwWef9oP2rlv3sxftRCxRCOKSDVvItZINGlFPFkmbqay38SW9hmQLI2pME5qCPQ47vfu8GC3f2SvxM2MUAmZO8ThjH049p2ZcUbGnTPWOHudo8vMLNEQRUvt3y9qA6U5Uu9ZONvHHhBR/BdN1Kcsoz6KD7j59iAmJA4eESNxvpq3Y6fp1ru163hU2GRzm8rmg0BhMJKgMIaf9nO3qg2ztI6m8ncflWgaGnQInYUqlufvbIecf9zg3KdoiqIpiqLnHzctBAhpSGNI+CSBCoxSmdVel2WMzJgqpdvlRLu9sTnXnnhOLGfKTLCJOTM9UWa8ezmfeyz//739L9vet2xVfdv8v/dtfXvfXldd46q+pW+rqhpVVXVV1biGGqPGGGOMMSIiRkSEOCIiIiIiIiKOIyJEHBHHETH/+Nz8/5kozOTkkPZ9M9uZRYC0pVwIQS5XK0nOJvA8lOVX3YrZypBnvvvmw25iURRFUTRNURRFURRFURRFURRF0TRNUzRN0TRN0/zRttoUsFC40OU9euRGFjGNjc8DAIWhNhWIqEFFnL7nFu2CjlFaJxxJRqf6Ung+Jvp73GVuoRtcHv8zeSKBU33dLOlWLJ0kBS4NEvIIaJvcM3ZuaDO0PkAHB26nUXSKoiiKorCiM7PySCWqIBxaeL2g/EBoVNGFPYv0QhLD6BUFa7FVDM8hh4gg8ggWk0GkW3K9iQBYnQnPTdjg3A60rt4SpU4u7oiFDsrYvgxqdHDejpIzYZgbzk8QuuLh/8fU3Bf+KRCpqkoCWRYOgAZ6Z5rQmDGR2/bhWlmYKohLc8ntExu5JXwnk4LxI3Dc4OHi4/9eZ9m+b3l93mMfUbzJKYRFQ1QlXco0TebrSbL0JXsjyd5bw4HXPtI6YPvIcDe3DiFVQLb3iLxBgC4dNk2KLk2ZpkxREncp6io8fL/sm+2zzdT+IY9D0m6/Y4Tb+s6iqZrfMxvuf9tUfXJvk9JjSEMeYnYhCoOwOIYhfWJUUa2kkNlJpML5EP/eVKu0P5sQZjyxnCmOds/xprjWpqAZcY3TaO585D3x+jeeuj+aGBIYUWAPxDGOwjgjW4Pf//+GJyFLEJQZZ5xG63XOmMhaQ53VznlFa3y22daGl256F+cXhBeFxoYXXhZfePD8O32lcfRutrIm2gQ7oUjxl7L8lWnl5GWsjrVZocNaAAtYi4twUQmBxeWB71Q+jf0X4QkWtlmSCs9F9QVYKjgMPC1YEQfHiQ1IA75IGACGQSXDpvfmW2GhW4TDy9KXWhTKEVQViiAk0uAR7iVCIrxEwlP9Tf+zRMPFdQxv5oIEg///pmZK8yodlcqgE4BywtDq/vc9azWnlY7kGdlbOg4NZKEs8O+WPP07CTSbOoxcSiiOX6QEN+t/J+H/fye5TqG9dlWtqrVWRESMyIsRI0bEWhVH3///6xjuE3wV5isP2bQlhMJa/PCAB7e9XrJlnx4vRqoCxJEeHtsI0x9/s5owdGxp17TXIikE8RSCxh6y+31+b1Pbj1sa9nZsapXA6RS3w2leokH/w4wAP/6mRgHw09uiJICffvQeEZQY/BH8E+WJYYuQkGD11BMhJcNy5oJw5Yrlxg3hzh3LQxgiXDhWhAjEGGOw5BSISJFYUWIQsWKx4oxHJEjAmiARoaHBmqgMMc8ClDkxSGKjw2RK5iCZm1JsyrIcyYqswGZl9iDZmxNoTuYrkm/pRNNFvZHyqUC0gupnpCx1EFOHqhHBggLBgJnAPGAJFElsNCDYJGVStElG0cRmItSr1aA7AqYxnAnd7KY4NcTHPZpvggwLTE5jQFCdzRz7ZK4J0n+yOBxfPLubEYQhClMafQx9v+JB6UbImj03AQYbTS6OWrJUJhSP0p/2es1yt0Omr7Egj5366fr4ua6v3dbt9Ruc/3R947/ZvnkHjg3y7lUgoL2UBP/MNpUuiyQu8YoquufZv6iCKqyOV+sY2sKGZqwbj8bn9uvFkxPI5wJN4YqTdR3cr39S/T4cB2JUjhcpltUvgRzIldzOJ3mQJ8XXdymUZumXYxErv47qa0tRnWmroa07s59NsWk3Q2f+HEC/bJfPh/PLFdHXxHmv5nfeueJkzg3Zs+zvMTCTf967JdTaNjTKjk5xsRvd5QGPed4r3vZnH/nrwvoTeZY4lfsvixW3mtfjU+A83xeuevacM9d5qon6fOTg/79PrhPLMWMcwa3bv3J36RZlxnBgAJ2KMoyFYTREKn+ZKsvGlEcUkroTk15wKDTCoMoIwHgRFQNDXIa8HgfEacoFAzxuOQ7CC3jkglmPV3om8ky0iIPACWPlXBxA16FBIDBeeJaRPVKUYhqoHSvO1VEgVUajSwqlmlIalK25HF6e7le5QsHuVNO9EEUGvScieDTMCFZkT4wSprN3PWQynglxJhmiQBMhZVkvQGCuhy3sGznDAIAvIckysxSNLSamjH8rL/iQ6kCmCWULlOP5La5Cs7pTIL3W4dKITAHf4EO4q5DGYsYTJxAmKicRJgvAnGZ4X3BH3jdqsaKPhrAlcd9II/pGQ57oVzQUSmFQLm+lopVwjzel0YxGq1ZiNdKcpfuGqsZq1tfw2zUtj7I82jLYr2C4PWYaWZ7sU0shbvISKvr5PPYncRCxIBcTsIcjEmiZi+j6+xZjUG3QSJJkOZ0oBjriBHZXeDFRTOILE8ls/Z1QmBmC1XFrmI7FjqdMACayJ1Eg7HQJdDV0dWgN4VgRHHE5ABPlwkwJvi3SNGU/lasiDqPyamkvpWzzBjsBryYXJNXRm2tksf66FHEGdBmprXMO/1yFsdTx4ATRRPEkkcqIE5HnoBB2PKcIq8ZzlSN8HCKVJBHWJzP1NxSViSkoDNOJZpubo9BJtAXOIPRT0X9kVclq8tUZa+iMJY1nT2BPZE5i7yWMRBxEHkXREryFuA1pTeFkz16JKs2eU2cambRkOYZ51DBJkZdkdOBO1AQu0xoxEcLlwSSBqtBzWJOQp2j/YPUah4IrAyPcIIRHuRyjYm79IrehQq6t9gjOo6A5WAlDn6G/Slwapo9gn6z1M9KX/NyrefcT219m/6T9N1+VuBqwus3JnHV46zL3MhVy1okYqZS3Xcm8i7xvbUEzwFWV2XeQ5F6iBJcLUUfaS0gcx2wRFtPjKKVzUzgM0nCXr5JMDXgZL8jbNiPYm2wRUCU4+QQoQ91iwHod68TgjVRIY/cPoxKynq70EPJKDlY+WP8/iJENKyo2DdZO0RFCRWl8qYaUyVu2HuXo8nyFlO7UrXuhigi9UUMhCoNpZKOmo7sejsnhitMeFwkw4jbF6eKNCUQeE6I3hF/ZyCJFXdBcy2HclbkniyIr5XDCacLlCrDJrYNzhmcQdHmIRFtGVnnvci45/f5axEx9ZsTly7CRjYpavpZsBLBW4871xpXwuoQwsnGRf67JdGbERWSYIk+XT4QhBZrEundut/S4Oy7OUn2eBVcfMACKZwtZ7vfPkikU8liT8fgJ5pPMqQKnI5sNt3bV9WYXwYCRCmnsJx3RJ0l+6/QvNvRMxawtzC4Ve/pNF9wma6m7xmLp3uXhEaPZS1FUrC1TzWgWUWglgRYfAJF3xGHMqRcDDrmxOBMSnoPnyRB33z8pwsi4oobUmtOoPmfI6dsqlqf6FaTnHQrVMCiFey0ybwY8BcJphGVwiQEUb5+AImiIJCpVoEz+stnFThmZ5E4N86YgEtlZrpMAyaHS6KGQgEAbv7A3kKrhuJCjbuekZkO95mq0dxThTHgj4YjVXu1K1PWIIag9EYMgwH0ZijiLLKJU4NcXx1Mn0CaKJlGNAIcDCHic5Z4StDNOHDZbv7+bRDOSrhiJiqUFgdtxi51Q7pTJTgfRP3jnYS57EIs1CW8ysRQSOk7m7p9jnJzgFFd83PHxxGcIp4ThMwUXE6dU7Um6wBbQywdbvtjyw5Y/tgKwFYjFERNm1a5XNt/KwddMfBXgEfF6P19vBIZYb/EKsmGvtlsHs+XFXT+ugvmLV07hpJyoQKWFFlnspNPOvvt2rlm7l9m0J0S8iAXrI96AQ2JiYmJiYmLiEdmal3VYUVKSJGl/JWzgCM7bBzojlGUlYKF0vU265E+2EO5klB3PUFBWMSOTWolpoaFoor5MkPQ+o6HQ6Cn1jcK8p1zf/YRhp1TgHVfurATSOreWKNSiPbLa8byeBD23wXWgdW5KdhHedfE2EVhUMJNDKaHcdLor9Imh3DvtcFL4Y17E00B5ZStaY9uaXDZpgKZvEZQWWXJKPeq0IL6r24RivS9KJYVHJYSovb2ndPFvOUyxNC5yeXqLW8iJswKBh0zx3z52tby6PyMqltMpj0zteLz4NqK7DmHRrSN3WD3G46yxswltmY2NwFA2nSDKgZ0E5DEBoia2rObDAAy4OTgcRC0G2k3EcdVx6veK9H6BhqHA7y3odv5qPTAUKppb7vWymulmK8NNz9UZ5jiQJkwI7CAgGWfJEzgo9yDmmkgT4PNBHqF2vDigI4wa1Xv17/28Vbquyn7/PLcDQ2HYy7B08iq8MdA4eUgQlpf5zvZaqBf15lCE0M6cNvZpEiAZ2F45nOBqF+dUbKHUUI6ne4MAYbiTVO3lqVfKb1ayIi5FXpcDlGlyjhzkw/MZmPmoh5QQiZDYcpOgDpXi/1NnChbIDPU5wLQ8scKEcyYn50pPz42BgbtUaTxkyOAjWzZfOXL4yZXLX74iAWabrb8yZQYwMxtoo40GOeywwYlIhCGZk0WGZllWGJNV+Z4i1dkqNtuzgyY7s0tSbuYmbe7mgcmlLKUppSoVfU2oCabWxNIxlKGMMiujZsip3MpVVPmVr7gKa5aSKq1SpTW/Fiir8qowv6qqihnd6DqwsPbVo8IQKQ1qjbIrwYlZoLkRJG+6WZugMZshWKeMxCutGYpJve3Mw28xpYiLzi/bdEFwn1ZxmiUMnnpvH8aVtrQW0e6ZDVGIx3ato8cXg9yY3yVwTMWfoZlZasK15xoRJu19atJdVE3aaQooW7py90yx2b0cRnPzQLBQ9HYIGRn2cTuDUU7mqC7QMta7GWFHwDrFdMaTcOwsxz9wFp3hDa95kR4xMURdxCne5kuXVot3fK/AUBFTYyTNwCHho0m3WELrjocfdeK8R76XC8sKb0xtLZNbrPCKR+W4yRFYr8cdWSVxbPijn5fJ7dmOHZjFHoTyqEnGo/iRX/s9m7fejl9nco980fKEe9ZO25rQGIkA8mLmLDUilOb3hTSBN5ZhC0Ppw8fWDJvl6bLWs0om0vNerrzWNo7vz22ZHyX5BJRxLb61CbxsxLC/f5mvCpm9CxpgTGm0mMU2ZFnhZmZoe6P4i3wiNZ1xall2cbaXQ86Jfv1ui0W+Kk5xF7+1CfzDjUdlRyiYgjb1nopTbRc0MOZlydBSGxnHwAhJUwDznPM7XDt5mXHPiztGft91q4ufPGYV8ntnHuOxMKEus9qnCt4NAkC+2EOcjJKkrO8V9zTVQBEfQC4jeS/RQnV12bAEfNhtdUrQOHvFgfxCMpQbaavfRzKKxDFTDhQebuPIyrNyoFCxIqVGLXIygcMhw8uTcy82JZhpiA9XPjuXa+2v0tRpHrJVh8XK5SMI2G7k5DKT7ct2NPJACAlHBetq03f4yQjYWor/KH89NyFNy6aAZfcCPXd/KIF6JBZmc5T156XLzGXJ6MrrokXOWYTZ8OxwfvkjfV6609pkows0w3++aaoWq81hGOyO+h91VBj9Q4+GbwdWiL4yGuSCYyG/BJvVEvDPNPPUi95/VtmyVu0ZmtjUTqqtrR1eiucax2SM5Dze5puIrOflYNPzPKDLhEOv3R+QCE6s+kYtThtQN9QWNv4pwg7GeX2ZlZuQjUN0+tJo0EhUQYT74ymt1oWww35CO+AP+pL6ZgkTZ3Wao8595eNLZjMLXf7QO+Lga81u4TXJUfseAUH/HUsQlPWkQjsn53QV0IokfPU5gcVDN5ey+5t/vund2zM6bridM6h2XdYc2rWHOxatInPllyuGRjh9IZYZl58tA2aPqPK1Vr4jdOa288nZZpQ7JVr4H9lus4hh34OJSGzsgMM+54OzceTY8RNo+nDGutrGPteGPgeE/1zbksih71QDck2qru1lzrsO3fCRj3u9a7IvUWQeivblx00HrgguaQaOhFNG90eTaTPiE1hZsmZF3DoqkHkvm96X74dPYlNQzL1amVzbtptuuJlbeG4gNT2/YNDl+QW7XZ5fkHRZPkP5+kcReN5h0kWyvX/e6p5gc8+NRL07spHCH+2Qx+WzOq7LbDniVvfiXkpoeJQHO8Z8SBxht2BXAhj2Jzm3n1Im7V6xn69XYgk4QIRv5rxFPj8O0co68Vyf//bCf8Fdw3aZ8cS8HAX5tR4zee2G0yXLKziJFiw3a1ETRLImUkmXNb/o1KSR2LTx660Fb7pEx70N2SQQlMaVbODmgGOQwr/lRE1Naqc4ZRbi6VjvlJin37FoOqdevRtc19fpT1/qnqn9a7tHFY9UqzpDo4lLkicwxZgdbr9cQCcL1RYpOzfhViLum2j+Hnr7rNbUcezQpcv7btFZt8+vKrMfwG8XH9DENOGzsdKbtETTVWkl6BjpCUxSzIwsRFY+FBM7HQcNJx2XKLdBHj1eA2j9GG2sFk4fnkLQJKZdoRCW0eXQY6bw6Be3zWpH2S6bfVUHeKfKLuRdIdxWSx49aXgT8KHhi8rvIQzms9Wgl3JkmrVAPwXDALqp6NfGsA66abA76rEfTJLcIyD2OFRj6qpzORp7s0x9OhT37VXoWOfVutBNcpUfkaoEq8FVJ1bjYKkZTRvzQ4rFHwcVj707OBPwdhdXInSbuJNg2oJsG3U7kO2ibo9sh5H7jLb0UDpluIKgmT4x+uSJAOBQmWiNQQRgp2FnNM+socVkyhyrmnpmqXIthgZ8WW3FNxaLAtcGHLOJ0KEdPfjPSVqMTgKwC5BtUnQpWD2btmzZtGnRIsWirkXLJP2yfHL8AkYsiAL6FAAAACwAgAmAGgBkAAAQFAQAwAwgCOAAAJDmvbEQSgEE221AWyelstEKZQgqgS17Ej9CG6DoT/ltRouXPH2bsuOGbsfK9G09wEGh4y1CwT5bvHuo4CIDCMJTw/imZd1CkGbc0X+fJB8VfwstEHU8nbbw/prowT8+QDElmOTENPMhPIH9OQwAY8EO+eTC1Th7grqzUhB/I1P+/I3cdwFOBijV1cHNzpc6XwlnuwudrXY2QLDwulnjduhXzAMbOs1tlEOFU1xSlYtN8eoOA+w8CNgeIvGjEgKjpnY+hnqUGC5KXJEuF23bJdl3IFBvylAZLiNltIyViTJZpsq0zCt1ZKeNV9uDOlFOm+lumh2D4PCme846TPbB1MXXp3yFqIH4JP8RF11Bj434iCvhEOiRndy7bVvxImrlRTeGPuoGbPiNuBXvhXvfwIzyVM/q0ZzssNlH5Vcqb+SwNJ2pDLqSJ5+Hc/lXeG4XoQ7qsBXatFHt2dGdHRtzHAKuLkEVuXdjU/sV4SF9YE4eRKDEp+LMDkVJ4f1PoJ05MGcPtuP3oN9kGHGc2FGjN9Wg2Mhtt2HbxjUPPOE2DFtBYFdh27IrOa97qTg45+w4N67GmJ2NPCR+O0x/mXMr0ZNELM3b1MpG1Fl31zhRqA4lMITwfGI9ewFaNvwzZrtnHbH8exZX+Lvw9NW3LWYvzO2H9S5cCgamDlK9FTIzok2VzzHx/kQbCYZI0Mr3sN4rIdGlYuJTlb8ScvMb59MEnj7zfC6chza9q1d/Hvky/H30h3/umz/OpVwXd+FEPVKVRRliMamNSkN9LpaDbA2WRweqpS6Yy9p0D8ORZ/l/4NsJ40YQ8nSWzTI8aDIqSy659mEfsseNVcQrJJwGjBxsL0R3XUw1ejDUQYu83qwQRIIkDC4y0IGUaE8HhEIkhYM8EQRFTlPBbx+BWhn+tSyXCpUNlx+gquaWmKKCHh7suwwjoEiFYNYLUCDaN7J7C6vmUgFUnIqg4gvR349ExWJcCTbVyzSJJCiVWFoiU3CsDfPyxG/ho23WoejWZMFlH14J+MbuKdOgjMrPh+CrCtNwxfZkUXRnqkyp2wzVszCYMSfzZIud10vRzY1qXpiOvBgHn3NT64jZwVZ5kySmxqOgbzXvdVjvs+9D9aFHrHYun+nXgMm0OvpteB/2jJaVtkzUmKTw870LUPiqSwL0d1/xEAke1Q06jlw3zEYA61w2Ir3G7KQ4JYNugXpEpR2YwArLWQ/wYz8s5CkFI0leRyjairkhOrLH821NEizyjCVWLXXTMg2rPGqNh631pFTjSgMyiWUb0jqr1vurjf5sk4bNHrbHjn2ec8CaY5ac8miK4nxWFz3setysXvs7f/SrxQBdieVDKnqGnjwUOgNpC8+faj7452LYUnbKOQkPjtCu12aD/tW0ZkvOIz0TYz3ObsDK3HBpPoS7iNmi/ri4taWB5TyzXussUmqZYFm1Qqg7anpwGCzUZj0dZcruDQ4JVsGlAEy51TgJQcmj4Ofqr1kE3xzWDpkbLmGoIy7VNk0myZJqQmmhTFRBGL95ptCU7lRXEUePHfRUmJs4Q80q8dJEPGFZc3viyQyl2U7JUVJVoLS4YbPfiAMDeQiEnz1VkZEpI47g7AB5bFN4xoH3Q6JY7VTT5eIiCW0dUXXC1EAa6HOapEqqIaXVsgXLEW0lMNgEhg7WZSLepw1qXp+/G112mm4fEqbzM6q7qtPVtLfH5YrWMLdA8wJ1VJ/Gl8RJNaM0VbbIuCxTbilV1KKHEOizScXw5VxEECO1Ahq9DlxEjwwnI9hKFQQNMSa7l1xGKMryIZn1IsSRazKku35uq48KArOpuFsizFNpYXXzQpJ19VSjyiQUzYTwZk4j6VWW9YnPGhl9QjBXj12TgQ/C0i5j2iqz6Ni9YiLUoFvGVPHmZc8ygVeJvpRtBDhCQdSjgp0H5cMgPI2v5kSIhBUek11XqFDo4mFsOUigHZHDdfWsbj1mjHds0eTdhqHqvA90JAyFA2h4IdOtFuXCdGjBnBzrhytcHpxG7EPsDGq6ajZKOMgLPwvseVivwsGprWFci0EgWSNXm2D4KZPRGsxfO/qiYWLnUrWQj+1EeAb9l9Yh3vF7Jaoo60gWWsO8XVO1ZWWLqxyKmimiCkSUjt0qKmsk6MeTa+M6LvPikN21Tbur9GYGjxhqRfZ4dPHzoNRF22K37yMi2L5ybdg8LCFAgy9qGrCVgV/d+RouxrozXm+C/kTDSfpKEDRy8rpYeEC1Dnr1KgPZeDLVrjsQ+f3TtIJ0wszCrDYpJu2atbhuyr/+88fyAGJhnCK8tnBpMIkmAxw8tCQ6QWZBlEUhfygkuxi3Nj0NMv5uf8my9FrKiujULNoLEkkpuACFOsdLy0VHmPmwVjJKVMg0hWxXy60qzvgT93/zDASBgCVgtcBgG1jZnHjySL/3ZzfjYxEpJJKwKZn9XSrqMalXd3QKM0aady60NbvEV2VaqBXKCmUFs55Fe0yGh78QlMvhliIGqsuC7PVcFiqeN5opodCSHG31djSKAfni6uKLWywMFItABqchMUzVGFio2Ad6cAjHfTh5OFu4nGSv05+FeRAtSJKBLFOW0opy+kOt2rTr0Kmr6j79rh69+vTn0dO7jWE8JjCJipbnT3+3cBKLackdy7FKrLu7NmNrrataPMh4ZHZiF0/tox256Ts/+Om6v2XyN1yIm5lHWMXOVXkgyicgFJE1YkhIycjN5y0qqCqmEhyR59AWsBQrFavW5hmoA7BDyAHQmX8EzQTjmWFhZWPn4OTiHvYhpgXhhYRFRMXEJSSlpKuMfFk5eQVFJThCj97hJjQKHB1bFDunKhGNT/69RdwlJKiy7icdSERzFqFwoQizItXka1Jy8xoU1fCoRsQ0MqZRUY2OSilRvDqypmQ1bJnSkpGtdkf1i9+6QjcFS9xD0R/06q+o/i3+7w+pS3cvudth65kq91eN1shK0tQs2jPnQajzio9fYFhs3ikFDxTqI4XytRoCkEFMCCzwMwg13CKih/oycDtOgcMxcEzqwb7JaAND0R2sT1PQwgq6gtxl+/IrNLbI8cknFDopKXsILgtvOG+kcfl6LTk2Ja54rWjUqFGpRuUse0rggAr1ehnLRfDMVn0jzkfeD1Th1KJBU9fyyPD1QR8rt+xqJWtzNmh0+iOv4xqK+DDjI/nYJz6tG6f45iR2VWOPV4dxjjruZOTNDbd878dJk1Va2Q25vMYvWOUXKcLTZBWdXWnaWTMZq6t6bLhmsAS339Wo7Z2130MJPb/l3W2TtpN2bwrIHst6ab2cp0kYBRuLZbmBiIjKYDfEMONMyJPUpmBqKLVuhjALsagei2WJpZZZbkW1UmWV1dZYa70NNtpks6222W6HndU+xAGH4giOOeGUM84676LLrsZ13PSdH/w0IclskQdW+RAQqhLqUjJyVa+qfoOGjaZxHlSr1XWda8sYbnSg6FBYRYzWGooyIKVmtInOiCOGHwlngtXMLKxs7BycXNzLRflkKSPitEqURLUIzygCOj1XQragBIvj9frEeBDeD1rDdH4QxAJlV0ENCCP2lpf7BdQf3yys/2ZT8q6dcGL1B8J9l/kA8jK0xzG+YrPE61KZS74wXRyoAtQCGgBNgJZgA70hommwpiGahgKGaRqBGIkYY8tYW8ZpGm/LBE0TbZlkx2SKKXZEfaVVS8xNbfZN1fAQoJ1lhoNGPz/jyItzvCQve8WrXjvjdaBkAQAAgAZ0CNo3LDZLuqXe7RLE8hErrFqpaZXV1lj77lJFStNk6lG2UOtsWb+LDdhok822Vtvs2G6HndUu+/bM73VgnzfsTwccdGj4MOCIpqOOOe6Ek07FGWouibMW581Fl111PW5U3Ixb5jvf+8GPfrpdh8KMRVL3EEUb/uD6es39batbEeYRVrFzzbshyAObeZ2PX0BQKCLfy2P6JeyUslemwzHYL58LlIqmNOl4mLY79XsMmmGjxvOkVtMneU6jBeUle614rNr8GiXSRnViwzUzoxlXzQe+6hDyMPB4HUsdLX7koMeOgv8HQ1SZYHNmFlY2dg5OLu5hH8Jd0MZCwjmiu2hGDHEJSanhNGYZzWXl5BUUleAIPXqrPmD9BgwaMlw1HYxCn7Gly93bunW1PtWkTPOBSYdeyGO+4Js/Y8Vcgdc3g0zMAxp/aaFuK8bjtm8J2Yl8vBZKtUgmS/XXpuSHmc4Sh3Qy6tLThb8JIzBnwLC0yxn7xJ1qvy89S0echGytnerg/JiPTcSUpqGwbuNxRkzdcGygjsGu7nFMfL/DENmeLkHp1fynBiH0ynteEoxFXT9I+Vr+B5anb3EBJlGoBIZn0nV3zUtD9IatheS/H5dgdFZWEGyiMvAXCjawqQm1N73m4sVrqbPOevVinyb2eZsb09bZkZlzoutt361x6dOnz4rCezI8zIQNHxzY3u1t6nh48qaDvxdMIP8vJ6J3rUFd4aW3U6uSiOXsZFZ4Nhuac7DT6hMtx/L9LnxCcKmZgcSuLeU8q+JBSq0l8u8kfro7GwBYuk05Y6HhN7TPOsF5nAFRc2sLiWIfOTpRNJsQdqYmwRmnG4HUEUvkLmgnjF2NdbtsygZEX2AmglWeVUQBR+CSuS0PvJUeVIJa90Ku8pkJmHzUUMrG4M17auJ2czdRWGMLxcCLBJIICx5dcMChQ8N7rXTnRvwVj4dewe7Esnx+gWtUFdQfLuxjoT6r5keqifKmEJrFY0N16Aomg6XLMaD9PBy1IhGP8cmxxE6kFKMT8U90oFSHPoXPrMhaI2684f4UD6/jqfNWgiZS6lSfUdS2t0dnH7XBDTWVci2LmYQIIqiABtkywWquj6Hu0VlRv6Yu44ghDjR8Fu841TSWaBg5fmUC3iDEQoxUUoe49WfKcYxkChEYhz5xhw6zwoL7GTHSKVRV3zZtMOUq79yxmfNhOAszMrOsFo/7XR/rNa+thcgfPexJnnnquozk2OZKmdas5POZW/UdvA6oMoaNlrXMad0vW/LWcl2vkC9Sb8ZfCsYRd/mxLUp4qQICWjPJSqkk9Whi3pADZ5Rad3S7OWSTUZuLM39Tzg3dVOBBZDGHPkhuoVdQOZyi5vRKO+a1gFK7X0RQTFbxqiQ7onb0A86RzqgPVUhwrcvyk4wBISNOfIK2bKn4KC9475hNcCxRU4tRxSp+5fzwiBlEtjuxqDn8nN9hP+9MdHtV0zKBn2v7YbL5JvaafwUtKcnIitUrwtoFbrXZE2KnN9Itxs8W9/Uc07Z2/MDjfutJH5kve9dCZYXLXoyegoRZ5nZtVnIpZ7tZwhjjbnE3V2wwPQhyDhwIgTtmBEXlxRnTnDR0yB56ft1jdaYtg34ykR4qjo4FqCNMmjkUJbFiL1Q1dK+PZJSKFpSDx7p4WkhYjLq5S0uKU4ncgXZcEgLETSTAcVEzVXU3hjAolG6dNu0Ol0+65WKwinN7trbxHLdxNEnQeCDpK6eycMoLpT1QTb1patlVYlyRP+WKnbli9nOuuvYcRWIvulGSsZaT1BWPhGYYvgw+myFRcv1KfKSBAhmLk8llXmKeR4d9YIGo2jaIxkw18YrAD0GzvcbK5CHpSCYlqlhmUL7l2VySneUSBHI9PCuTospHSSLtKXer+hiKJOohWaacxc1TfwkksrENmoHAzS1mt+u4ICa+hwJW3XRVXp4h0zKcagHxR10Z38irUa6Br8uZhCdMvqZUGcu9vyEw7n30XQ3DWT73UJsRLMrClf06BSU6xDWYdFOhH8MA3d41bQziQ5Ep04pQtpehdhAd8Y6BTP85SNLDv6Y6/IwjJ15jK4XQ1ODsGRucRNsLmeXdUBQPVC3Hr2MpVXgNiobDPpOkitgn3lwaLkAx0zke6ofyp5INMlU8IGpKfOHtQmhkaruTMC7gcWfpQQwgdGOmSI2rSYAMkdmcDPzCojyQUkhxZH8QXuzxXk/FrUEvtC7PMqahRBKXZIAjPLGiC1K+srkjJY/9SwXdbiw8EccNzYR3ZM64ccyP9WVy6JTCVXycajLWzzMdODwSC3tk/LhBmzWqjZnnsQ1bQvyPvKfZ0ON5UqvDZpjJuW12mUSf61q5CnkspBdpWypdrJYEjKwK3X7ZanYjAaIo4L1UmEgqLv5P8k3GKDkjQ0Fe0jbGbDcvGqs1EEKTB9eTvkT/ZsnpiZ4Izp5YEfh8sjSXotXrE6d2GBF7tbp+e8Vp9wmXzJ4fIy9qk5Cc2NrNM3n7dIGLOrZYs1pnoK6rDLquD6NltTMrqR00iRjsVR6xZ0zyhB6wEYboNuNfXOhESlibm02RZQ+wyyY641qIpyaBMCwMBgIQyKoljZFogNeXyoAcOFIVtbu77mZyjK7kqltvHlx4FpBZ3ikDm60Cphpu6EMf26Ps+N/SYVfpy2DkmEwJx9vttsCQXqk0kk31RX+AC0vY9soc8Dsgp05VC9MzAQfa4SyCeyEeQIDOkCHyL2ZOYQCiQq0kP5iB6xDabQ9c/ZjAW+raaBa06pTAvKyPcU6iEZ+jR2ol+fmQatsfh7BmjO0xXCxYX6CD5F4yH9Dye8RFsEsCPWgvBS92iUd7Q84vm1sSGH1okwRxlPC4pUNJD2bZwEwzwd4dkbhMJaYYIbD9W2EyMxnp8BTZGMq1z7Pbi9bgYF2XaEJjvyYhFKWBxRHZuXSEmZxemyKm2f4sAyStAyKQr67qXutE11TfDvZJq+OzTk3UrQ8rWcLqWQCcIhU21QWXEtazl18N5p7IzkQZNQdSgL2BQELveSwRlOVBvxsHI0bmKPlioCYAiDDxA0jNiKxR43ZYLBEI51wqIiXK5JnevaxKOc5DtEaWbWeWkd7tRX3iSGzMinwUCUZX9+NvfnHgzotYrvykZQjMkbvFEKaiDorBLBhPa429dkDk8sqGTas9e+2IfCgJYe1gjko47PQXI6kmT13UNTv+9cFXiyEC6Y/k9fGZ8y++YYigsbSDkkVtyraImbyL2f0C9tdg71A/jOA/5K6/Z7XVw1bNlKIdcyLKaFZLtnsScr2jm6r8Epa4VgSOvK/tBsCUex7TFGXzDXazqFWbduPoHZM8xvMm/rjllPiRtMYzv1M4mbRyr1Vdk87EjrGkCmq571UZ50RWA+a3RZU0HrXaZSNLsQm5BDF3b9WKVerXfWKRXx7HswZfuIqYDWJ5qw0vLEkPrsthb5DxajQuXeOL2NPEmqQKpfyQSyTDgHcXUw4zvkW+3D6T4CCpPRJIZCOStZ3ze8lrfW+Hb5E8mRbD3FHEfPExn9GNHW1PXlj3/qSvpOk5iL/hgdMbpBYK1hE4VNzUm/qZ3wJw1xqMEVJxxGc4XtIhIfWOX8QQlfBWK7uKXyh7L7nPKxVbzpXsGn1DYW9neWF3Dk4d3aGeowbag+tWTOxtdK9qLY9dCZzjKbIgmNpUhJGRgZRv345AUnFQ03xBWkhD47i+Iu2LbmbhYeVFsTmvm8bi8EQSRoCvt/rxAt9qhrAYYVExcXlJBSlpf7areSI2HKJCUEFAY5P4EdoAA8tbTXHLodtEHDHgs7OA0AaExFMpbLQA9PQELkQS3mSeiji9GrOjRqC9L6BN6fhJ6/FABJu3RmC4DhmEAEK4RmGY3iTaYhabsUWcfjxnpWixSUcdx8rnL+AE9OAfH8yJFoJtNNNmtu7i+vBQipl3S0ZQj3SeYJI/eGyWYqatKtJVpaGCQy6r3MumX1COw1ktFr33B9TELSqLiigpmhIzZ07PnzdJtoIAfuhi1Q3XBqRJquJ0u7R8FOJJZOiIOsMoeksZGIc1cpNhMmpRRvTfnZzcPKq8xtHaAEAEuAAyQQkm7RQ21rLpYOlVc9I8Qb4MrINSAEGiDSCoU1orrVAHQSowYofxI7QBFE+KNhwtMt30BGrHFfqOqekJRsBBoeMRUod9Nnr3UMFRBhCEp4bxJKduUXHPWM1znxpeWnRLQzvqeDqNsPlrogf/+GBLSYFgkhOtWIfY2LWewyEL/EE1M9GicHnubCKIl6k5FcoyQNCZPjjcebPzsXDDRgLfc2VGwCABYoUboD/UkyLfch+z2e3mXjNZUx8l2T7Cal6k9vkVMtO6miH95X9GXFgZ/9oECBUZpHFmJCMbD56jQsqIPk5tpPZdtT8SZayFKCax0UL2SzKb+qUa2OqJUCLUCC1CjzAishC5iGJEKaIcsQSxClEN7gOPgKfAC4gGRBOSdw0kRVD/9qsAUfg94hBiCAsl7SW9N+mcToMKPiutrqb7xgsqqCH/OmYwHm1CZ5hDlO7sUOjr9YiOamWroe/T+jZ2VudCP6tLoV/WS3pVV3dNb4f+FPQXuqGbuqVPd2tfg/5N6N+H/lPov4b+x27vjkkFPDBmAMZswwHGQsNrBIyBY/gIgbHZjJmqqZnJ0wDjqGma+XMWjItgXAHjOhi3wLgLxgMwHoPxDIyXYLwB4715fJ6F8RUYX4XxbRg/hPFzGL+F8WcY/5ydi20E9+4DAAgIMBCgMMEMDDgIkKBAgwELDvyFi5AgQ4EKDRZYYbv9OhxwwoALbnjuve8E8RVwQinokIVH+EX/GBqjIyKiKKlp6RllyVWsVLlshcrVatahzwgqukVr7nscj+KfeBZvoj06hDMyjmyeL6vPiKlRyZrt0dgRo6NUY6A21ldi6LF+pIxd48A4NtLGWQk5Fa3ZPBgPx49OUhfNbuje/sDg0PDI6FduTgobn5icmp6ZnZtfWFxaXlld27IVbWhHHR3oRANdu/dMaz5/J+ffAuaMVqYXD504d+XmylErV69dv/Gsc3PxpZeffeHl1+btd+T6R6bmlhdfy9d+/LP8z+//ktvvEGD3TGxdP4lPsEl6UpiUJvVJdzKeLEIbU5dL7aeMmIpzWdVN2/XTnWlj2p6eTAfT4fRx+jr9nJrRH9rrB4KhcCTa1ByLJ5KpdCabyxeKpXKlWmtpbWuvd3Q2urp7evu6kozh3Ye/LGaIz1vOilb9atDvNLe10XY1xv4OdaTjnGyis13octe62a4We5CqmhVIc9XrnLnbMFatCzmxF3eI00YfVulA4nCWyxB/tyeWvbPabsuretVtnpu6Xxu8GZIKlFFQBf26zV0yMxMc3EHylA49G6K93h5o9vRwFhZIvYiyWYMDmDcM2zxcCUuT9kuqzk2Hw34HhwvOKf0K7Q1SNv0mh0u7eq9qEz5ZzRFh1SV66tkJxamGU489rswd2Jv49DfWCzDRAKyZRW8W6MBu27KbkH/7qaezYDMbBYK3AUttq/OwdWmYGoIaE3hgnIHoMAPGm+m1AFiRZqHweA8SHqFzjNdUlQhWSKmIwZ6ZB5YMr0c6dNspeEgQMdsNsFU1VHcDZTGHHJUx/5A+2TeAQXokjRHS0ezFzJnHAiZ69Q1f9o16MJvFz9h3Q2qi9bYivfmSA5oicO8C9w2oRHd2HpyNMsp2mzCh01OepYCrSul1am2HRpbnHhMF7oWXhafrBv1vXV1EXUgYdzyVz1C3NEBtt108GDTzgH5uqLA4Ka0l37TY2DrNNqPTz+mcvmFow+L32Dl6EYPJplvnqy7KT1XtOoy3CUtr2LJU33oH6eAZ2uRCVmClFwztmy/22GLQF+u39Zu9wcWJfFNp6KaCCDMojpVb291NCEOxTNt87m3P1P1p33gqgG0WD08jYnGChImoo7PrJBaDHDV5pPjWI/LvR6AfK66OZrCs8dQBqLzJfDXbx90Izo3GVMKgAJdgL1a1YqtqLEk36gAobM0X9wyrYmbbME1VaVV/Gt/bBGDmgTX60BP0BJKgBETtly34FrsFVW5x7HmGYKl/30YEGIA1yGBCQ40kMtpotkKEklBQkIoSo5c449hTGc/BBIkcTZTMmc4Unspt4K3GNiFq/ULuoCZqzY7ROuENvXc+WKE93bA61kRiZ6QJ91P0yXA/02PybzFUhKclpt7et82LAAAAAAAAAIIgCEB8NsTlJ51/HEK8INJLgIGGCyEXQ0UjmUE6k3yzzFNpmTXW2awWSVkD6YZwd1Mjva+Ne1GDU2aWfuvHSKPhjM94s+JtPxPoZYBo4yWa5Lqbvunwv05dDCAhlLjGPZ4JiyHTELQsdRAF04CZEJl+yHXoZzDT9eqJiDhw4ZWC/UirmNXZbs9N8hLZ8Hvqz4WIRBsnEfEH6qnnmVpi2oPalC2CJAUBUyBh2KmReMTsUf38xVCjRYiipKalZ5QlV7FS5ZZYpVqN7fao16BJi9NaETUNrV+cJtWvh12MdOH7/dbrvYmE3Qk03AcCTHjSDWysiTW4klQfVuVU3nqkJzDRzOBUSiGWmkM5YtIblVLiZ576vR6c8Tp0BqTINN8BnVmC/6Bst4YSaQ+IpLvmjkf+8cwb7TpCdxPkeFh8REhRoEabfgawEHGYUB4BgUmKZliOh4BDwSIgo2GC0ow+UZ9fIBSJJVInZ5lcoVSpNVqd3mA0mS1Wm4urm7vdw9Ph5e3j6+fl2wwwUzAiRtLsm6x5NL/Wvw1to5EhBen1IFkK0raCtDaQJgYk2SD1FWwVnuBJDI9HlkIwMezSti6IH49kPx71NTmkIP1O9npQAX6DURbPVoHlUmZMwZjWV8WjG6XUpJ9PynqVLnbV/i+yzG5QNzXSDIVZMRZQmqOdHCvlFuMtU0Vsk63s1NrLQZ1fuDiihY+TzglwywMDPfLYCC98NCpeGWBspifL+EqeCRxCSmvydL1gR3byuSPYWhqzzfPEL4Y/YE+VaC4t8MbFauyiFUp/2WYiYjIe/PRn8DuSd0yfgmf92688ROH3iENIaliQdLOJO510Qkfmwy+b9ytlefRL59XjYINDDW2jnbQHin8atR84BBwFTgCngXPAReAKcB24RaTwYuTCYRqvauAX2AfDAlL8nno8/dJzwc9RbUn0JD3UXSez6bVqF8jvjI9zQf598eMeP93BsuNeI8lfu9ZtAbsQ9/YOjQYZvlrL/UaO8gOlvr64cFCNDQ0KAG1YfBgO9Py/EegDQ/9Z2Bs8DA3zDQV7MO8L/A1cJHgbFllIgc/h/6wDHEUF4f3B76goAtt/AIGFBhIuNIiIQoOJZPwQYv+/GXALItNm9HmcdnCzxA8EUHHBCkxeRz2CoCSETzuBmWI50/t+F95POAQ4IsPZDvrbVZDdBNidnz342BPoQ9+hbLj8GYD896WANCAdA6TKUmyBZb5Xo1adQ/7zSrvOcERM7CKLV4IyNCFRRBlNdDHGlMKUpjKrsi5bsycH0piWnM2V3MkfeZZ3+VqUCqmkHDAgOYpjg0757IAIMAWoqdymisKBmlp7cB4KMnUNAjK1BQcy9UksyNRvcKCm+XzYCwdmP6w9/OJI6VG2+5JjrLj02Ivj2uPNJ2Q2+bbzY7XV2WtO3iuUbCBJdSzBgsxyFQ5k1nMWHpNv29nm4xj5lJ19GbnPzjFPcE1zrgPyXTvXNUPvIPyWv8p/7dxzlQvBg5p7qT5xm3iEkk/ZefbhMvnz1LwHgY133LK/t/A78x1HhumHEDb6EkSG+BbwEZ/ic3xJfv0X558BpB/3a/JTnDlZkMosyYqsSXVqsicNaUlr7uSfvElH8VRa9uVYLuVVfqLryeEVUhGV/JmHogId6h6Y0MAIDY2OuLiTEhmRHVoc5aH10RxZl44FNXQ2FkM34n7ceRIH8Sr0Y3wJ/RwdoSJDL4RCJYCFyqIQByqoxz8GfYwxxwoUaJxxBwOWQEIJJwYCyaSRQTb5FFNONfU000YXfYwwAQ0689xhjXts85g9DnjFWz7yhQ98pkOQlDp0SUhikhBM5yUrBSlKRerSlr6MZS4roYSWs9wPUWeChVf0lNKUoaWqjObV1CjKVPVo4H9HnhCt7xCYyCq0sSM5QgMXFRFULN+1PEdWK59mHE6ur6IXLocz61V2RzFc2Kyqe1fCFWrV083Dje1qZliEO7vVzrQMD/arm2UVntCrn20dXhzWMMemqI+aqCskISif0xm9FHKFh7GQJyJ2Fp11BnQHYiCJnuklHMIpfYYpZkdO1MbUWFhYgYlFsTLmxLwojB0xP7ZFWVlpAvlGURhiffCABRwQAStgDewLG1jhFrJwCdfoBgRACGyiB5BG77CLXtEn+oZjFpyFZKFZWHiHRziHV7iHZ/wSDXEwbCMzpkdq/BDFUVJYio4lsSyWR2UsiH3xY9TFT7EutkdNbI0thWpmjAl5jA1FREZUREdMxEZEDI8RMTJGxegIjpAIjbAIj/rYHwfi59RMLdRKbdROHdRJXdRNPUiP/CgIc1ab9uiAytm2Ylvp2fZsR9F+RelQ7GHtqY7dpM+i/+vTALtHg9TPHrD7dMvu0gVt04Io2Zt+y1cuVam6muo01Fqn/YRva7ce/e6g4TN1/xNx1px5C7alEGmcBBOoTaSVQm8qg2m+Y5QmXYZM2XLMkKvALLOVMduo1k677LbHXgcddsRRv2txyhnnPPV8oKIKSsoqmr284PNH48l0Nr9+/Ub5UNaycvMam5pbKK2LOEGqpmU7rucHYRQnaZYXXT+M07ys236cV8dD3AKIMKGMexEpSpIMHJ5AJJEpVBqXxxcIRWKJVCZXKFVqjbZsGRA1SG1SBnFJK/8ZIRLG9quuuq6sgCRi2VRkvVQs0i8bOZ1NGn4WHst23C4pef99+U9YWzt7B0cnZxc0BovDE4gkMoVKozOYLDaHy+MLhGKJVCZXKP1hCBQGRyBRaAwWhycQSWQKlUZn8NWR737645+hT1ZeUVKlRp3D5aFZXvQFQpFYIpXJFUqVqtxodbYrtcZtinZQs9Nb0jF50MasQB0EtEgTduekMlQs5fNDMh5B00WBIsYmOCEJTRiCpfFCCB4hziyZzTjGIAOoDsFy4IVCCJZ9/3eyItXfSOtsd88LDJ4NuzRjSLiHRSGH2ZhQ9rH1B4qQHRc++hsujEKcBEk5iiVxmHMUs2ybuaRUawLjEdKCCp80Cs+tM7epNCcSpCH04ymOOGKyTmcivzvaY5ZtM5eUsiM+9CMNR4zYC0S4RRuXsOKmua7CjSl5IzvEAYIzjztZPkOkoCxcK4NXpqFkNpY944MMtiYkT2DpvX7vNNZ8DDSagopWKlNjcAjhBjpMOilfGIQxUJYbpo0PjSvkRcx/DJdTSmKQpdA8hAvc+JSU4YJjY0GwYd14CDJchDgaepnyEaN5nbyxl5SFntxBGd9s39pQYWKo6aQ356ZxssVYwjHcZAy0Pisu/AwWIkqCZN4pwC33sRR1CDF5vNdyZEyx1gh79DzmIvZ+c+1xSMCxeGsIO5T+Yyuw85UbL2mWQ0HBGtH4hSFP6u6nY5ph38vKkwRVCxWXuChbMyoRxhE23sU+HRs7GQtRXS5/hdDfvZ6xIuWiUo1mZz1CsPkNkxXspcuDR1FJos+PkY+MnV7ZZ+PK0rA0O2Vvs2MszX1T3+xgXnOf1DXbm9/aO42oTXUy++2S+clsiqu0fQ76dQ74aVxgYHR+3lJn55CV/gvra9R/JU4pqhcpmK8X52Ro4QqpOSpjngXwPRjHZbI3v2EpxGipCewZ+TIMBce0HYZhZO/qXobssdyrflf3WONAULlU7v57h7Rz0kDBf24D1ZGxEmjK99wHHe+CryRr0WjG3X8E9dx0q89rJdece+7R1PdwxCYJo7X80qt77pFNNKIiW59rXntzV0c58ZiqxuO56Z0fd3XE3g194WErkbM2vralVHMt0690nqvBiWUxgG1NYfMtvNfffNQhbWUv3Llf4YyZs2bPsV+acAgfZiLDiK69R9GIZfP4CVs4Jlwz3P27yS1qz4Hyti3vr91h+w73VN3O+uy/gd/eBvXHR8Wu2+24sG1BKsoK0lzGp5VUa2sKsHuvjWXz9EN+KZJo1JbqGU2l6Km5ErHTNszylW7lV8ZNwx3Mcuv6lkMLtjuSgxduEWf1CrkOIc3FdyGG8pSlHBVRK2pNu1EBFUKp5c4l7VZ+akeTOiulYiph4yZwqeBRphyFpFIsJweAwwvw8eqikh+dOnuo8BP/2QkV9EC53qfzQMCMBkjqR35kkiAYVMJBI909PL2Y3j6+fnSGTu8G39ipSsNmzdt36sqT/wnL+6bxp11QV6IeQb3qaovGNdWPMROmzJi7xoIlQ+pa9CLqTdJHSF8GRbFHe8sqyO/TzhphQPBYQi6Gisr/hMZTi6M2iU6iGO7pIBRJIUmMBAoTqbinE288tSgqWonc8w0viYbWrMUY5UhcP2rCTCHBuYhH6qVsmdggAUY10sD+3QYKFmCtjqtUObgFwqkbDj+OZ7ebdrYP/k6mnC622X82fuAn2hc2PqFsJXiC9Us5cuNTfhixxpfvMqwsf/QiAT1ryAd1CQJM4rY4wVYgatLeTVFC1PuEI7eEeA7Jn9iPhDV54RKz32EvB4T0xD4qHFlnRWlqYiXVpNLW5EqulNLVFBQhJQOL90fpK67GlbLiS1XjK6EmlLoSUZRmAcRId3MfJqUPAON4YMMU1Nh+L6sIYKzaL0JWXe4EbRo0VjLUtBxDp8+s7Fb4w3Wo9k2wFLDx9S4uaIHJqZX/E8CUj5QRBOgEl4OFdAcDNLAc6FB/RIAp/otB9poZwptj6yR4yjyc//fe9Erjn5AkprT61rA6XGfq4YHpq5Kezb35tGGtJfzLpCBqEBKkHjIN+QbjhNnChGDiMAgMAZOGKcKUYZowY1g4LB6WBaPAemBU2DTsFlwUjoBLwy/BveBZ8Cp4F3wYPg6fgi/CjxGMCA7RAyFBiCMgCHmEOQKD8EMsnA88//78abhJalXqrkyyDFmmWJ7/gOkP7ew6/ecUAOXNwUAjwyViwJDEaH9xF+njM3dE2ENImrnaeh6iCklZHw3yFQZgfDBBmBhMAga7NCvBNGYUDUshqEcshHfCB+BjcCoRhNsSrI4JNUqt3FqMTIpMljzPAflDLv9nUsyp7rV5s+hmTv2nxm/hSdIJ7sTyxOLk2onxydUT5ROZf5dqZpdeu+9frL3o335hhRRcQP755ZNLztlnETQ+p38de3twePD6IF8HsMeFomocJzsGisj+vf2N/bX9+f25fdr+5H7vftE+YT92X+xp8t6/vXd71/bge5AncU88Abj1Dv6bpZOh1NYCEFPLDDCB/PxAqp9IbdunC999z9He6R+6hVxgnIeuLBsOg6zQG4A/Qja2u9jLBfccUHPNvMP61rSmjb3rXZv4jM/a1Dd9rzeHBlq3rSlMZSfTmM6uZjGrPSxqUXtZwlL2tro17bcfQeRAgE12fqSAoUqNjxQkWPXqBaOZFuKrb40DwAUAuHAKw4dfAkFCkogRd5MEiDQwCCTSpGVSpCiLEmXZNGjKZcxYvnDhCkSLVyhFlnIUFI169GhCRdVs2rSWvQVJKAC4ioIHrRAQ2kiT1u6SSzqgeOmUJcukQlWoOnWZN2DYojHjVlBNWbNo0cYeQ5K7AG6M4ME9zFhs4sVrCz8B28SJewgC4hF58h4zZ24HBsYTWH52dwGC3fI9WOyReQbfd9FFv7Db+5ew+Lew+Hd+5We/+M3+AZHfwZKv/O8A+T3e86nv+9znfu6L/cr8LXvM+iSQf8AP0w3kP/CfnCJ6WybA/++vAkz+3UcVyJ8OsyMYv1i4EgIEmr+vFtTj34WEeY6wLP4qFtNpZy6Ceo178DxExvMDKbmxziKH6LgxYj++AVkDd5JgqYNonl6SSbQmS5ZCZ8opA4Zj6A/+Usv9YIOtdqq1yx677fWjn9Spt9/P38HxhfGgXx3SqMlvjjridzcEPVLR+RdQCHKEWkSG01ZcoZ6UrbZH3bBrr6Di3bNti5fH4UsOYB+adH6Fexggwv3CuikzbERkVQkICsMNSZPuppSm+tBcqvlg2nZW4b3bRUGuMDvzU57FKq1QYaVlB+ls1SG6C3ccoP8yYJP3GZNoeRkbRSLNSUyiIgeZdEWBehsYp8BYGba6DDj2ewB7AZqwmt/mDAEGyacLoSEGja50GmAEKkC7SqiJ94eg5FgKOAKUsEIAHWIxYElnwgZpHrPw5mJkN59cddZcybgSRqRBCWbOEh8OWQsAE+iVymLsFldeV0L5WDC4AJmcB9S4J+UqoBduVfMuTlOc3GUmWd/jGFY0564i8uOG5hlftgDwCnNA8BZBsYhOswIQwhWF6dt8OALaYSwedKH7ODOW3cHE8IN+0E6nfF5xJfRNCE86capKMYhKsFEI3cRbBu1TKtGVrpDcceKfMJ4EBDz5VqvSlNEcgZU0Q/md2J4sBIi/OSuuRUiEeZqejHxEAabquj14d3ZCXWknVh0SBfQc/xJD0hMm2uUpMNfQBydaWoaaHrVoDJbLlPFWXvjkc7Wd1IPvAEfG1c6s2uRxV7mVjbzAxfU9vsjzwRrwV4A4Ot6873uQJcEILvfYBkDN+l7hnSLW07szHQYINAavQA2BE1DXZWI4ZMDEyGwTRAMEqQrbklKBrgoKYWB6uoCLINAYvGpq/iE+YwdBIFJdkjXpKXfNDBgEKQMZU1XrTI2YfBygIN8IzbjIvsebn2DGicziVGOSaoi8GrtJMe+yyMZ2o7DL+KUcvIXcM19CRxAT7YoNTQcEp9IrYLaD4pIR67lELxDHGlifUAER6tFtYs+phQwZ31TKbsO5SUUKVNEzySPu8Ch337aiQvNaYi1NJyDZUuPrgfjlZQjCJmOGA5ExiFi2XaniIpKhFn0eKA2ZKaOQRsVESFodpNZvmaIjP/01266JYZx/nxRjtcNKScAA8dhU8O5sdV1oa0JED/fhukPe+8t2nE5TYphEQy/WtFe19cAymvH7FXcWTt1nD4Z3Wkg3/QyoF8rSfWKmnXm6mtilee+apxT3tJYb5vn83NP23KeE6wEDbClbr6+rQuFl1AYWuPd6V8az0Mp4iEZVF0oTI9j3yijllD6kLBDKAqGMhDK2QpVBylR27vdVnLQ9KnCWe7y6msGEF3g02EWCoUYLa7RoIYFWK6ro0bZylTBCssCuwzRv6jurXd3gCvVe7NVR5nZ/Lyw0nKGxxH14F2exhmiFrkkHVRkWdh+ADs4Ca9yiUWBouV+pjZyFceDFlLRVkhcXqoXrtf9rfW998zlFsA1DST4M+snX29OUFjnYtcjD+7ZPz+31tioL3AUhPioWfFFUVXg558jr6/5aQbUejIEJO1A+d9wt5eWFVG4e+mE0QDA/P4gLzprIoA54jwWvFztN6hKJLtzs4jtsnFBLFzc05DUJ9Jf/y4xFyBBQaR/VXvanlgkl+FCUeekryLdbnJ0uIK1GOJO8EFDycBF9v1AFUJJ9xVku500rusFrT9AyZqyT6iyTbJFviRInXD2LxoOVeLDOtjj2/xFPHjKvv+AVh1IE6kHjulPayttxNgonYXwu6ra52QsOW367pzsodNYEOForJl1ozRglsFtLoDj7L+O2a+V2SW6d8z8tpbrkDVUcylydDrHHOWPa6liftrZ3glbgH4KEaWUWx89jCRG6JWyxCNbMn1jqLiphMZB2RZg0rISoOFQeuE3essXR3IKgEEl4sdzicHQ/A+vah1u6PFbooidTGW6QsoTy6qC9gyqKHJ1FQllTDPE1zN3KT3syUUa0AmD5UBI0LFbCmWJjIB1/tnyFqtAVXILLnW4FnBvhVbyCuZZW5xG967u1PyxX+LevfHthAe0/Na+0zUHAdL8epNilHrYtEHGSk72IkY2yc5y8Diut3tucMg5WY1xG5NR2mx1xQLNfzrlxr8YBmnLS0UzxMpycfF36/ZzGHJRrkIh45UpqeiAmv0eCBEL1GisPGiXB1TzU4QaMwe92I1EHZfmKrNiQJudkugYXzp+GFwU1rHOtBCIFfCqOjp0TQtGahAmIk5i0TplTUC1MX2o59XUkzhWensTqnvuWe9IKZx2KI55yDuQYhRDp6wyKeF/QByer1ebuEMoMw3iRLKV+dqKkctIejQctap+V1FC6Q4NheBhbZnapibToTUHwCCxSybqDu5za9CzoNlu7RnBnMXei4JwVZ0QTFKfWkYwnYzHiCQ9HzpiGQi9Yzs40RoWNHQWgtt4aQJkJ02oDVO5gmLBTmSPCLMjfUYUi6B6VMduod9gIywWtXAL6RIoyf3sgBvqTNj1eFtDC43sf/hoZc3KjhdNGtDQ6eVcwlSgfRyvgzcQGhSqBawnm6Mm5tKAxV8geHMvqNtuEXC3MAlbzKQMwkNVCuRiijnWqJNap45HQx5LUrq+HKQIGmWJZMLjOtQIZmtjI+wiDQrEKFqfcH9GANAl3TRNwb0vL70oz+w61y+M/mp+7qWlqieSrGTNIVdCCRI2zdTVw3OPyaJR7A3N8LUQZvtE0aPuk+0m+qaQ3EvmXCm7ogk1C1lljIKOsMMM0HmSjUdHdf3CsstIBtziejYltarbw8ajuS6Jik6xWxHj6XLYegYSkRn32bAuOtEV5SCvhzfDrNSrIMLQU52qGhABmgGGRwwp6+G34m68OvUhV9L2v/0HTb1Zu5BR9ZEoj3/O6708zMs0flqpMclIxEE7xB0f5ZUq1ZWyPmKCQMZhBxgpTLYeE/PinUCa/JnHXrqYYCHBelC0hCqPNtR5eYEAvj1XUGuHqXTPuGXpNuMBJ0EEes8ZJx5OZjtYx2chAuzwrSqH/Rs9LXElbfXf+2opglvwHzE1P/wJh6qd9fTYyuAbef20xw61zfs99S3u7Fb8U6pa56FXLLumMBZOqUBztxx0eq8cwJZDRuGwXk6pByv3EvctSeiNee/TA6W7aN+8gR4S6J84LAgo/kyaIxEs4+4ophRL+Pwwk7uPQp5wcPVcCh6Mr7MEAX5hi+yBg8otaHjsFBIgn9YnlBtjFqEj4LbV9dWtVK14vgbWp6cJvhWWRk6I81oWWxNxUJvkYsfVvhkiWnMJi0jgdcNLnu0DMQh9/Bpx56OCEDQaCgdCpWb//xFlsKuluyldPj1r9t3+r/NuRk4ym7Mi9f3jNu7ZbXPc+R41mW8+ctfQWJ6UUnUvMLQp/F1f0nRuqEG36cfnvWPMixWtYkeWVV/JR/f8fnNl4CYsWtzarHpSEGKldP443V0NjOM2JMAkanKIfczMQOGURiuDt1iPhX0j1fxx737DP8PIAD8hpwYEG8/fUlAvt7wMgsbU4Bg46jcskoIEZmKSZJZkIqdeT4Hnpn4/Dv6hBP0wHUZIG/SSvsE/RBthg7vZwoYkcDhdf4mw9LovKTCagCBOeqGH6E0iLkcTeo1bA4jN4VRMg7JqWFn/QupgY/AAW2TOmcw2A3wlhDANfkEGZCakZ0vSQzneKuNO8TlGCT+f0OGL7uleP8ia+10EUFQK1kHZcURuaBZfEu8FBDEEa9DE/1RD4pUksRnek0V/xHvZxcjKAkA55QDFICoSdkXjSg4j/9ybe4MMw2oTR+h29wF/f+jcNCzstcBouomHJOv6nkP6n8fTa9M9JRDp6wJ+Pfp8OrUV1Yi5+h9JRhf3e4vuR/ro9kyYCTC4SNaAEEkpiR3EgOoADIRpRiL1gEpMk6F1Ny+GV0tlNqtkwtcrgHVvZuYyQP121Bp7CKyU8fbY8lodukc+RSIl8BWBt7wL8rEC01uAsl2Qje96JRAWfDIsgp6PQoMKL204CU5ISXjVkuIAGlXJ2mwNfZvNESeLshKPE5NNTS/3ZIh9IcLwQ7sLaqgdUk+ERxiyPBNOUlnBklrJZC/63WcRcPBGFuc66xM0MQ2PrQUqW3xDB9cQuN7ivwdUY89bf9mMq1mcwPQDfKU6vCNN6xGpZIXM1+ZADMClVZfIT54NkbgerD3r1keGXYYVVy1Q/IqYR8dWdKWKf4UjNhJ3iYxJ0fyFCduRmBp4DbIlu3UkLcEAMALiU0wF/KlVPgXu/BDI8sMTeRRJiD9tY2gZr/RuyubYhYUIpl87wUhBkCk0HXiTP+HBHieZ5Yk4IP/BZxtj+RPMHRdGPLXXWaDYSUxJ4MD7Ej0ST+d6zyRS5WQBRA3ObPkYmGz041CS8OXEEvpGqgDohwIBKjgr7JsK0nsemHRQj6VOskHPEy8iLFuLLJomavW8JdHmKo0x5xGtZGWqJy7IlhDqRNBU+Xi+F4nyjagJXFoddRj16yNj9Oy/L7rGG+ecPjA0ZGETn+SKgshQ7V0246IgZetQ7PGb2zBLCgMQcdAElMSX5lbeGTnzJSQKbT3JNK+8Tpv/9wpCA+HICNr9KHEUfTiZt9CsAaEl4fBtJQzKlF+OGQjMTQqeD4MQ2ygYd2eCGAasoPpexzoKgXIpJpG4ClCAKNQI23hMLOPgmkaB3SivgF5AFKqJ6LRBEjTfhUJENX/2S+wFT0Y14VrNn9t3cxFJVmDMx33knNwIqM97hvhiC/nN5fHjLk6ZHBk9RuvU47LPloMGLP9ikja5/04UKEWXi3PkxVZM1R4/DHdMI8h4AAi5BPoRdBxvx4IcUcIk6CIjc4cVsRY62PkroGG5KuwNAxXTIJpCLqTPUEgdcORx1ew4W8vrQVo8fvAr5NN2/Y5FNuOsBB63WBotLqKShinMJbJGmp8jqJ6Rc+RLSoo7M3JCymzXFXux9gSm6FapRfcbY0wdeKMX5aYhMWYjnJVIezYlVVtMC8YZ3A4QsQ77Tz8QbUFADDQBArPXNvFJI9o0cS4xGd6BbV6UM1rr6bzw3Ptspzdh8sCSrxRwpfIeUSNntozq8ZxBmPdkRVZ6cI1KcTfC9pBz2pKGTj5vOiz827EhwfP4iPzeiZDX+2Cdmks5X7fM2JLd8nbgShuoujeX9Rv8l8Waodi4GM2+fTTMr7HREX+KkRCklv41dTpIWpyUHKtmSAdHDNEmKJadKknxpl8iZga1Oki770+LMVK3uM+6geBWZYMLn2PvfD+ZV8KR9xFqw7e342fQ4jy9992OonFNxh5djiymPhXCfOms9OISUtpCpPe1R7iFGQiNhitQwksIOgDmaZYrzAvNShO8Y31KEBE7PS1zzrCLxdEDRCeYdn5q8zx02yKQ9OiDD9U0oYT9GgXMHthQMQfnv7+JWGtUimMiz5eRiz8kdp6MFq3sKT88HTr3oyPLjLkciLxuehPm7nGlN9iDtXWNL46FkTPU9uuHtGIjqe4mUCWq9cngqdw1JfXhEQg2fljC9GmwleeiCbKq3bpVcBOdXMHzEfjIEH/NNTFhsqmfP99g6O83G/5RmI4U+0xe4gg1vMzQk/slp0AdpUz88PfYHZHU8HETHR2GKDV7SpMHRSZTwRS+Nu9cTO5LL1xrrt7Aa02OhTmifbM8FOI7CUzyP3qIOqWM+YKuRKZ6o4AguQmPjPe4N0sAHmagmQtXIdC4EKozQbfNCDMARQ+J+8sSzHQj8G5KWIPsd6zPu7Ci23OuGUNr3EnNtleF0AI6C/kACzEZTFgmyf5VcF73JQhJaYSdheeaLFGJqkSkhBCW0fo+jdi3z30UaFBMGStvMW4HTT5OQsWtHMBKjO9lNSvquTX6YJhIlKwsrbrPFXYlQPuOuPC699mSUljyqwrlQNLnAZzqOuFMce95rhSwoUYQKKCfl5i2cjHFXw2gIng56kgNCsT/8S/Qqei2cKPo8fkHY+lxGGn02PfOtVxyFlCkfLZl9q8gPpFRDNVRANxCcqUOiKm56mBtFhIJrbEwajuL4AlwfgPq+Og9TrRHvYbyIFzDXMvSk8r468F86rbl8dbiwWsLOfb18Wtwb3S+q3soLQTPKUcizoPjSVE+uF/NW9o79QWk8KN8u2VLz1KhciCZ7U48QYWjqY2Pl4PwYhagGk7z/rIX1Ao7t88el3Xrad3PfmdJaXo71n9HMqOjj3bBV560dHppOD6VuQk3SdmbiXYRESIR8mYYYT8RoGPJkTLkmiF5w4fRqvsC2vIjORQR8qdei27yoWOSqUmvF2Oo0KkqxWSdF5PykQLFv9Ro3R3lWb3Mc02WUZpdwgALXuD5k757oK9ZhSFGl7FnG+xJWmaaa0kSfVlpwka9cnOLR0+4K8goTOEqAENi55IAAv1gurQ9/YT99BpRpvkBPBBks58t8sHw4ON6cBVUHmoh1JhGjLpK0iX3ioZ6ySJt7d1nbae2SoOVtC3XYCYssL9ZDSJlcD1+NrHKnJxUnEDqJnWXUvPJ4KHFWwUD+lcI7ECApRbUnStANoSbvEZWmIzPOC4HgUcWzrCrX1tRPAPdmoQLQqmKwIWLQIvu8wJIjc3aeOGaeel5Lt5BbfDxF7J2cqgxgF5SSBpS+0KBSTfF7kwsrRGWOfEgVElWQZuEw2x/twehokNrhb4wxnmNiIuwZt6Jo60bbIsiSfGldKCu0K7iPyoWOtArE/pxz9CyOCkTiQjtTqC223x8lXNZHKUbIsorGibLFmfCmYXFyZcrDsz0qItomoK+yLXdo15hzhEauTMjybjuf20dvopwMJObw+pPTapzTxwsCiuusVXoZwSjs19WuCXhWNDdN72FTFw+eg8kR+O+Y08kHgd52cpY3li+W901elrebiiXCVbe8/ZiWt52flsivuiU97OcrUN07Vqasu2zFyvrwqZJlA/CucFk8tcpX8adOCbL+kSpk3f2lEBUy6tRSTle453C5l8dlOyJd0V8xUUaVdLmdI9Dl5jqZwhzBLq+VHCnnSlfSQNxp7Nf6J6EAvaKUf6+u9grsTMt0Wlw4agFipWqlVm1HF/JYWCsPy3B746Xgs1GCEG+8gu5S/PhNZmXdtZWK6yqdYAlwdPkvKAR7FZne3H9v7s9W+JV23bn1g/nxErr89MLnZeryBzsYHZnLLaPxuwC16INVBghGoUTMZAcza3OtgiIgcwDR+OgIPwhADvRwgh+/5/1jeygkVoPVldogNTUdwdbH5sYCQ0uE8uvtEAvZD42qxMUFmjY73HinqqI5q7FcIKMsbH2Gpn6QWy1nJlpnmTdRRpZ76NuJFZU+5E7J9yeU8NqhkhXediXcbHsD02DRQMVS7tSN7QQ1sqFsVm2hr/ra3RGe7sSxlPxMXT0oFmsaknOVL3zHIkLTa7YAX5OFy0u324kSc9O3dc3lyCXLk7BaWdyiLey5ggx7yL25o99XtqZR7XUeChfD1gFR1du1PucsU7Ep4I92Rj7+d1lH3iWUBjLBL5mE83gfqwoOfuEGHiL5SnRTj+hmH5yMhZO9eK6UniRSH7q0W51UdGMIm3spyBoO8Xqoh11UPiizgCKtTazeG1wtbfBTeJD7VORDsAevVQYoKypulqKogKQiHiZ4IahuBEGHrab+HM5gCScGuhtv0F+hGBg4T8MuMsr/QiE/GAhE1JqqDK/QrsOtprsxi+6XAMxnHS06XUGWCZgRP+INmgCW9xvaDBUHhvuOABapBjhRdFozTUw+kRkTY4tMw8yyg/kmRsG/fzK8//tJ08nfTrBFxXNbXxZzHszXdrk7J0B8NLoczTqayW0Hk5EKy3mEbaJoADQ96B/F4vEyj64VQxuqoMG/yQa60PuHQk3rwu4pQe68NzMineXqnj8c52smUfr5NxYkapevdDVKzqwY8GbJBhiaouXirnX+d7DAWSdsvGLvjQ2F1GO4snHCRov+nLOjHV2D/OIQoOWwfZpx7SKNoaNtEmysTTK2Vri4thcUuba5uLu1FRXKgj4my5tEjMpLRaiEC7XTGNic7dvE0Fr+EgQ2kKIXmHRaMpDOhhqZmmfalj9Y6B6Ym88KJzYWm0pKnJcJmlxl41b3QhD8Gdmdnaeb6T4EAjHoij/R1a8pK/heyMXAUGMLVzdLC2/Pa6q62DG719BiYhJ1ho4N3+2YqV5+/6n6Tgcd8PpRjCOZGHnYbkRq6VUtROWnqqpnzHXujZHPeG1ddUaNEoW8Zvi9TZI1h+1dnwlW4mfOg7cVOeQhctZ0FmmIlAPCRVJEElgoN08EBMzT7eggiYVykOiWZkHNcv8hAaUUqN0xLd6IEm94PGV3NBVnSIkzUmdQ3Sjxo0n/XR45sKZO8vg7nKOQrBXrJtM0wOwPgh9Qk/MJ0T3egWlJ2JDym1x5+4ILIv8tz/95e0sPFqXm7RXs62qhLfAa0nwbuEG2IPfObbwRi6wPioquTArBZ0fFpfeEhBOCvX1T4/ywxcFCfgcSVP5Hc3d+bvZu3bdB3BDN6SDfzJx65g6+a1EOpc6YSBEeDD7QGvtw2AKfTwG+kHWWbZfB52JO+Th8YjUl+WZJcyo+K0r0+kNWxioN09lSwRaYvFmLU/jcR46Nm+f4QBwkfNgyLtV2FLkWbS+X85t2SD/XtiNoEeXuWXKbnfGj+wXsAC6KuJ6E205bFxV6OBNT00ZIqm6Mja9pTCLUtYG7SJV0+NZs1yP4dgEIgHwRftafUkiJRyJ9YQmVEU0nT/fwozoxgfrZ1yMIlVgYMhZe2JbSL/zs8wypKTUA20wipjeSsIENKekxNwoSaYXJ0VH5ybT8RHD+NSl82CIuFdUvyO32+jbn4XTjNlYhJvhwOqbWXdPkrm6C2oybLJQjXz4WiHdjbMr5FzvT8EuldpEPE/y9X//B7P7pDCJfDC8Oa3unDi0OgbSKjeMz7h+ZL46O8GFCON3frtBRC9vzkiBqIu+bFhvgXxbO77d/dkLoYGnh98G46floY4fv3cZWKhrutjt8DSe/O6H+ZWvgYtjuauKlseE0jaePLyZ2VLPYTueTbhnsxcYYzOISsgyv2flacsrhcKMca9eejd9ThMCN0Vi8faLRBMyHEuZobhM/1pDh8LKx8zemNvc4qH8cC0rudF6Ub7i9W+djFE2NOyceQq4j3MioCQxJqYkl3KwBAhASSU9ylPQy0s/1ht8wZP9xixQYAswkzOqnid43e5ZwdjXp6K/lZc7p8PQbgVhSJL5x1C8Knx62SAzDRQElPuiS8RTV9n4dToA2yxJWdjrzrNK7Q7n8z73Nj7guP6uMPXqal9/wvvEy+a3GQTCP2tvCSOHwHxz3OqlcazEymtmRph/z9H3zHyfbZ8qS2vk8K5zdRe8aQ869fqwfzZ5kl8+Wx4IrX6BlLLgpeih/Q32oAG2WDV/5y41t2F9vLpEf19Y+5r38rDLuaD+vYO54h7NnfKI86fbohat14vaO413HXWfsLu4u7p0AiwDC8z+VZhQD92jeYTjvqkW4Sym4sSwZbr93VtVLCvMxNPuqF/nxIkx9SBFsH47aS30yIkQAY72vIRICn/fZKrn5wfCjPqk+oBQOrWQPm74dKlC3RUWZ0lYr2PHTdJxAfR3RE3p6HZCL4vsF8Uflh3zKPfzKh+XxRyqefqkLP3YJv17MdVgBI64NYemR2KD0uLBqoDbo7oz1cSFzndeUIurxAtN0dnx5GRv+Fh0vUA+1LWGXHmdlWd3jcOZ6T9VX5YTj/Tyx/byE4/IyCu4XKP0nd3P+Db336IUlPFTE5wZjGnfLffYKRizWPaDWFRgJkSLSov380yPDSSAZ8p/8c+jUU0QUNTQlrTnOE5PmXwBtl7bkS9IIddHOchwUfD/EfM9rclf37vuUkmgX53jPLGirrD5PpkyggZm9PMGCKvEJsMw9nx2a/TgHHkJYLw7i8dm1Hul50t3VuztsvevD4zcIvJQgkT6IqszKiJbOvpR4QAKBAsyklzzRszK8lFlrPuysFA96dk/AgeTFx9R1nhfbBbj+XToYZXHhh3vw/3zW++Mha5giMk4RfD9yTi/66dWLdOt9B7UvOgLWX5WiRpDctJOvA42GkMozjrjK9a6/gLn8bxdItNc956VFjgGXolRONKoJeH80/hCsMqu6s6rCYZuURQLi50m/TvnaT6HDkOrVjgJ73dhoU5KUM1s/FzWXmIAQ30RHAetlgbIPU9OL+7MjR5F1TGsSNFLOgmLx28gK7+RMamrDO36QSOFOuQ5WIP4dDgpOiIJNwEzalEQouPS7B22zKTz7JKTxm5rdt1xd1b+SRR5Y1ExWDtwg+5cUXj0G+1Psax79dyFuhb5BGUO3GlsG6eTgkkCI5yZigGsLcpAt1otPaxL/PsvPCmx3vugME1M8XRHsskO/iwpV0cuYnN2zrNK7DFwgnyQUjj7DL72qepV/46gGeZm5ZHCIvKpf+EC+kHHkfaYrd1F9YVxsZy54iaE2Uh85eHqieWr7pJVka382fseAb8QeNV0jLXmkgtegZ8gjdvg/hxKKO9gmJwUXZMl8dVRcbAzPyEXDtxWHb2Xm9s2WVYgFaofySLAhAm2qbL0aaMu9HfcCw3CZ4fjMIv9AUAs2AbfKrv0H+8Ce2Eaxsi7aXHfyxjgx7JKPS2KL0EEUjP989Ok//pOmacQMEgAv7st0hIJ1pZ03tsJB1kYqqHWzc2G9v3kThw8ihoVkZ2JiNwPxIVlhwRn5PmG0u2cAad6Qw4vKD0fv4evLKtsre0XLHl5U9Wbn9S+on2ngIho6wSqS9qxZ/hGsBRs0pDSGGkrgfcxcXtbX3vQZcEN+/9krUnZX2DrbyssjydpI30/HlydfsE6sMzs9/3nvSPdBFbRw+XLGoCveMsbxqi9vnpAlZ54cxkQJZ17+YRhksqKcXO2p9MZ5oSWhv42/E6T5ZAfagBFk/cO7TewmJiomPwIfnR+F2cTef/MWRAgbg6d8SDSc7wz6kTARAE+eeWxxItVIzm9qPWBIuso1XhUYcp6geNkAoZjTkNP//gHwzwGv/H8QWN92hSP/hQMDYkefZq8bzE2MIrrHh2RE2JQw7sjO7yA8oq+HAutH1zzgql3IB9e8oN49gGhi7uJuibQwc6Q7mplLWTm5WVxpmzA1XTHQcafD6DpuRstV/kQbGCQCVo77aCxEWin0xNxlPmDSxHTV4bYyd6M7piaTT5RaUQ8qWs24g1+yCnbNxgfNJ0IRlGjtm8i1u6F+NbPHRPaymQ3GXlCwTUyktXcChHowMn9/Yvgbfv+JEZ9smBc7DVFPffNiDaS6Vr7DO7DGu+LWERhbzmY77gLfs7ab0Kb3dzv46iKnstPGgsVHgs6mjwIsVRCXGRKkxHJ2wrMBygnED5WaOrvsdeP2ySOhuR3B4LRIbwW0xDV1BV99Q2FzEZOEAWMbfv2rBCd9eDkVPGkICMjN9E1G+SbnZgYEZufedGtozsAUFgUGlhS6JjY3uSaWFAUGFBYSvSgNN90gLkmdgyedg0mJHYMnHYPgo7wKSSVHJfNtXPOnK7YwDdunic3vMpVzlEnK8mDwgLJL4R7xt16VQIk4ftQr0bSk2LTuFe9qaepjnyQTLV3sKu2mrW0mhdXx9i5yFYcbSlkQ3UpezI72v2qXbKJfqplzD3exMvFGJ8rGSDc7S7traZpJBejO0w2gJbYTZe9mozauR7tY24Y7pV4g7cCvxzra2kc6pF1wYIcURbeZOZQFyl+gtYIR83MR/CpszM9ON7/2Lpo+Z1s7Z4emJ+BdJSkt0L50zJvW1kNMaq9kSzPUHW+ZLcjg16/NU0df95c+pkCzetSKu4Pzqj/n1QS36eZ3QEiPKEB3zTsV5zH2S5guAFU01NJWM7vSXcPpW5OYlFqaFKNjlcy2yVRUzWV5W27/ipWbh558OrcFW6Q8UDwIhPfBm1/JNsv2ZT/dAqBmK9DFPbXkB0Ln6bZ0IMuw1J3z1GkujrMQPn2Ka85Pqdl6UFd/f7sWPXz1dfcf8BesPTe20NWysxARMOKk4WcWBTIUyGv6DrEFiX84K/pBPAjwoGcoVhQAK9H5OzKafHNk+C/P92ay0jl9N1c9fVdXAz0XV300HxA7tDikL4YmDZFQNJTwKkQDppfCDtbHyZYoP00dMzMNbXtzlvBhPvJkFTm9vfqmG64o2rOKIFJaDMqOjW9AMfq6eJboSfG0PEO0qbaWtYGpy01zAzMdvLmRuoatXu2YYNp4YQa5lYzLTFcSMeOd6I9OnskDfERS+yn94xRsJNqrt3hgWFAmLoRU7Be4KSoHk9dqi7F3NGWLRiha1rq5xRup1QOxtZMn3J8PT3N9vP8csNhlAeZHlwHzIyQ/Y2Hk4EYcFG+zFQfc34RHRNoxtfcTq24AvRXZpYXyisVFucXFivJOhVovnIOTZ1i9Z5iTA7APkOuTa36JaEQMzD1lgl9/mkXbvcp+xatv+P6RN4kYkZeKgM51tcZyXQ/MJGXODZsJpov+CWXZ588Jc6OvbcMQX+aqREuLQPthvYHO+ifW57w+u1Vk4shpSqLgd/Jb+TyH/SFxPJlEnhs5tBbdKEBbK5wHnf440dRZ5/UA466wP0fY4TrPfAjKPQg7CcZw7H4jf5wKKX+NMRvZ7pEPdxgeFVdFVbFuPW3+kQrpyBgUDVEyuySPCspiNZSOCrS6fslMUsnikhwqkMxqKBUVYCXx8qVQP9TRMVtmMBGHMRfpAwMTfj4UG9YVGzEUE9F1DKy+SEn/b8Xg5cm+bWD8di/y8muSxeyjbDwdP/ZmjhbxcSFcVjarWiqaSHZMW2MeKUMSOTZlXlVJqbbR8kJ7KI9N0kkVVUVX1c86u/gpMWZIcrZJxnc29xJoNKKjnGtje0I+jjtIM2v6GTLkEPNvZPAZ10xvdma8HzbYorZW6cVy4DYHjpICnf06AbpAT0yxgjCW+fI77rhO88/f/3XK33bK5/LeuHbmfqMahtp7U+S36J7QkZWR0OQ2kexvc87Nf5ulW9Hg67K1RdmmpKDuevpUcoo1XR9Q+gJ9PZbsEfRp4UXnxrlo7AbY8GUfRpLdgj4vbptWJetA9vdaZYt5BwUJx2WDrgVygkzxTtbioy7ZckjGRKfK3P08wnFidA0J+1/4dcrffkpyRR0vjLkUqpHKkJlWKYo0p7/FWXqnT9Vct/Rkzo5UR0w6JFN2+OPnmyfBP+a6pJSKzPibGSkxhc0BiTF4TwwhJpSc093YvDKRZEEnRnVoYJc+3q3DReW5SiDj4eTxXH+L+nTfXqXAZMo9U07Zd/Vcgpi4ymc1LnM+5dONsYgRqhGkNNvZtcs+p5P2pZAjv/aSBQR+7fKFPb52Id+cu0iz5C+YtrXLZZ+q6KmwsrOHYsK6YsKHYsO7vlt87f+6nHO31T4Ta5C2e+2FRhcCTIwDL+PPGrMECTtHBwRjEj4dlb+jTiV3OUqjkKrWI87hJU/y8Uc1SB7mHzoH0qk6hQ9kCv6OduRsxV4MQCoFrsdoG2Zxx1QURUQ15QomdBtb4Z0c0xracY5vJRJb8iOJdg67EZX42OXDUnblQFI8TlaidwXQFD0doQxUAyM2792VMy0mkmbBLmjzwKFWaaTXLmcpacjGq5240aS2xh8150rTuzE+DDBEh+q/OhoAqf2en/GjMj/h215Rhi1ZFQt3JlamCbpJx93SddKylN5RuX6pi9lBOpqm21y2dOP2qZTum4lc6nJ13eRKXv70am319HLSvUpiKkmbfAebwEyVxHyfM1ttPy2CCo3L8K1tt6ugA7nsX+/qsQrbWuXf2u/5HO5tfpy/aSIRQ4tDbb3RKJSmBsom2tpGQ8u6/c0dg6zOYXzR/AcF5cORDJ9r11f1a+EKFz5c1EbXbXo9rTVn+E5NiJz1wqGV6mNf9xpafGWhHpQzdCfmTwow2VIpUlLwyD5KoWoEk82TopjFJmRfFDIDB7Dt4miLPm6CleOSE1LBZdA9KOey7ychjftHKcdACl2F5fRmTrQ+rU9eXlwIbnmFpguztstbLFvgWKlA1F8jd9X4jp5SLCnIqCqT5hlafweB9FW6t5IhuS3BxtzEzM7MncKQjFQJ7a4+R3mupLpSyOed36gFvC8kMzwwJcUz3I139npz86O2YZf2r8j8yOlWjlr/16dmy3RUnC+pykPAWvpIBJ+y5Cwt5X7H/kL364TdfxfaT6nvp+Y5KZnfiv52Ue3RHgj50VK1K5P59fmszpvT5s+fPv9hzTH668dYW/ZWvIfYza+Mq3z0mGGLnmjEV5LF1FiPNXv0Uch8Hbh8ButAnM8gznNEZL808HCt5ErYTKguqE4g7jVL678ifT8r9Y3Hk9x+SrGiuNj3i14EMsKkr9J9DYygdFslcrWM6Fx83W65omuIp6QyLmyz4nDhAuaeP3veovH0RTfa7AvNDPI2QGGrkHBicDc23b0i+42QAJ70hmYFeevouS1CX4NzsntBaxf1/vU8EndOKUTLYS6jfbUV6bd88bHki/HEN+THxHZmCybF1ZVmYSt/PVYpwfnbNSuvc8SSC7ldNWyxwfqudKjh8l3vx3MRgzqM5fwVq7X4noz6/FvjrDsX8ekXKGcrvscgxfDyVaVchPnluMrboGn/g90Dv+lwv7gZz1x+7DcTFTzjty+P7WeoFr5od0mxvKxoiXNjfJU73eLKGcpZ2lm6u7S7lDeUx0Xma8flu0/vglr/ysLKgs0CnkKedy/Ik5nFGCNMKdOGgwAD4rmMpUmXLAd6HcqyC54OPB8ZcJ3gUcS+G7dYtfhJiL0S+d6oeG8oORRLzMYA5qTcD0Q6/7ht2MUDRSm1nG7wpzc0C+ebWeb+cxOMda1wT45jP4QWOSW4Y1oNCA4vkw+Z5dfaLsFnqdFmcOa7P6/qruVV8BTi3k7Etg5WbU3DVPNJ57BQJZ4cY6UCzV+kmssEsWZOB9AIvCucsEdlelJrjGOGkrwkt+PQD13jOkHg0dqJ0igR43iyr4ADcSGD+Ggz/4fMH3R0ocl+a7y3rB0xWOnWgz96OQc+Xmx32hom3TvX7uyUruSvJfmkhR6yExaXTU1yFvsdOLXcI5LHOLHwxMdq3jaGK/v+2mH9YN5l2MurjMPZYG61VUiL//7dff8W8IdI/an2XDlQntgjFd68zohvNCnaOmDZ324YPgB4E7uK5VTkv91YuBnkeX3DxcvTWaCWYkrkugwqM6EUOwV2TfwmXB+6TWXQShO3pb+82xr7nqV5vr/ffortXX12tUrWrqxlfN+0n1o9aiiw4G+MBeNpqt3m/Sk7k6mlwkOshRuyueO9+n/bkNaeH/1SFzU6DucBeamg/HD84eR16v1gHS+Ehtfd4JSX3FdeIi8zFw8OZ6zrFz6QKzwzMkDeClXxQGh4boXcTMiXscJVN57ipoKY+E5wiMvBCQfpVdhjLRGh1NplEKrAUSJVzV5Zu1ck41uAs0rThxR/E3YYdFNcUZYL929ulexJwRHOzmRIUo2UqcxwJbcxq4a/mr9MhsQlX/mJyHKarFcUk35D4q224lVZlSHDBHNrVAupDGIRxOQEqTMlYBWJg0QXxKzhUeUpVgZ/nezzJgfSQgYJnMN63Pao/1hqoQ/17rfdsaAOdz6BucY5tttbF/CN/Gn8xfZp648taVBFipufZo2BK0ME4xNEMiKaFWQSEjdLRZlCPPS92aWI9kOjeSVyyV26I//USYrIMs684oBIkUxzPIT6safgBNFSZF1WdALuWxE+FBPedSyX3WOUX2g/xTY2LpftPhVKgSn7V8/Azb6QzGCMuj76O+Irp3QAY5CLPLwl2as0YI0f/bndIHMu98Wgbuj4HTYocOc1PejFGjMfJF/otgue+alB56qZ/Md0auCeGtYbZpmot2qo+hyLbFlBADfAXBmmKJAB8F256qmzl5RR7XC8dIaScHT/IsBlIqNjL6tPhZIgsHrLO5+6j3cYvMdH+ppN4vFDv8vbkezpu3fgP32cJf923IhsJv5snCxzGnA4HZDyw/wbAKJlpBThBFZqZU8I2LHp1dkvzlQAgTz3wgiu0RW0NtAE91GxuvLb7o3GU+UzCOJ6+YuHtf0XEKM4pTmgGyga8/tlZ1vjeIQqGhYCMFFHhY+pOjkTfCOdDg6kJJUh73jxRTTI+6piitsUNIOdhwVrFdriv7+xOX4LsLx2sHUAVuYFqB0jUTw/nIuMN5IbAQv2e0FsAfDb3oKJbwGNAzY7J1f7ClOdTR3K3OW5Fncpfhnr5pk0Ow1HegZt57ri9Mm+eoYndg8ptSOGBgThV2IgSTZ1qakRS7Ifzv3UUJIl9d5XQwPCi4J/peMcAeO2FuiHX01WmmFKASEqIv9GqnBXXCiSww4dtjPhFYzz9Pxgbwm/6lZ7JdbLqNon+FpzGrZHOUB4WOEiOENNmEhlv0I+A6IBPgHemjc7TXL8p5+iwJKTHJXVR5eymF8xWT7ozsTqxMX5wcAEECExhjGsUYFLIZqjRX41X15wDv5Ns/a5AI8eiAa1zeDPDY08xnUE+QdSPjQf0g7Jl+YrBbYPSD4zPi8uaCQ0mKkBGBV7paXNpKV6eaakzqSkAVI51gkRVSPA36ZFSWO0Giucl6cyrLdSwU0tfBJwRTMD5rmSOM6Lqzl/GMOxdpdVnCAgADxYAmQLgq2wvVcjQOcxMHqmQAesc4zewiKXVlfSOot2ABHkmNvXFsepR9YwbCaQLvInoOI4qz9fILpn315X19zR3czc3uOaro3BXgubeA+ZqkbOT/bTfsoGyWXd6Tmj/aD12DXLzC5ZtsFrd+lP282qNH5cx4qh0lV0VCkjWXQpRNs4vaErhTQ5+KA4083D2NzFzdjUzd3MGLApC53WhGklwSXXn4OK44aR/AiUU5CFiMh3C2/T4I7ckoLuvCBzK+8jEUtRxyCbiOH82mwL5+s6Wi7W1yzcbDR13a1YK9NszENRFvoGqGtqqiD5OKUqVQDf1YWGO0aVgEyoTxCpQ7lx7JV0obFc+ZyZq7uZsYuHqZFkG5s7uoFOs5xSqkmpUsWYrg08U6KJtHvBCi/vulIH6+MUSxssPJIP6pmL1tzU045ycr6uC/XbusxM6thgmF+DpqRv0Ew+OFCa7WqL47oeRCaRZ4dNBYgVM8WsA53XYhW3kSkNfmzIbTTTG0PJ1el1z3kGmXcbelCimxG33dOU+N6FaKXBpdcPgmaaKMGQPC3/MEuMvpAoasjRNTu11szC0wi5vVYgucP5b7QsqiCOHBIkfO4qWfBi1msyVdjBKDV19o6ec1jqTWsLmueTfeWy1MlnRQUOWtmnGS069AgvqfVuKWNAREFcZ4i0rPMGJ/n/b6OAyqtd+bwPvU3NXwdVKkIVic46YqI6MkqkRyplX4eaG9/UXyI9VXuCZYOyxYZl3sjKvx4udB0RnpEPrex3c/PCyY+2/3CwFy4zFPp+He3lwlDAyUl1V3lB+UD5zS8LP3enaT/3F+BZoV2hJ59FIlIi/ILT4sJEwBBg9me6aF7PZFmv2M2VbBgghYRVBiOQN8VyWtJKbs3XiD8gr+euk9Zh0+HpEf7exOAwFAWNDCOGeGNIwXgkUIEI3/vmVkPd5oMzH/cvDBys9E3dzS2DB9jw4n+U/ojjweKHqv/jxAVjxd9XJYgLEc4uJZ8VEFeS2E+yTtqXABE0CclsVD5X1zLNyHK0Er+ynzFa7ixgz0VLQmkJd4fPH0Dn9s5d6BO/sDe/LzF6fhNchUEr+aJm5yP5Kqsi+ebmeCMV+SLn5yL5qoREmjucHN54ptf9jXMINdXyIcAzZez582ucnT/6koiHHk4OerR5A3RX6odTrVK4UBMnkbqI3hDPa4sKFhFx1ZyEpOJlTXqFjASZtURsrkqhkHvxVf80dow+78U0MzDXVVU7aCIxDQi63+sPE1nECoXV0DE3V4cMI5pXEYI2sDU3rq/UgyVF/WE1jcpfba9IHIgND7kuHH+jSLslTLimnM3qD3Jyz0d7sm3dmpCz99HA9bHPNNYqR9rYyHgnVWuyHQIHhEilvSI5pZvA0ZiX6u8gRXrm6/CenU7y1Z9WNhRIzqBdYFp4zrWoV5pyY9LFxTukQhfqekrd6SEDwTtMDD4MOF/qoOwwc6AgWi13P4FDeYeoSKF5D4iRsEcmrhIJTyoKMf9tAy1JO+lpsNKsGgKn1mVbuBBX4trgpqGILbHJdalCMjQ+fbgjiwbL1WxWrn3KSY6OKF8eELcO3W+34Y/TmtB0aUjp9QOGwm2nX2DZvwqRFBpg/dOOYckNgdbDYY3kcLXXoRUTrueAIyK5N2LMw/n+8vrCKGYm5WlGQrYVg4cGQ6pktzmPpFHMw/L0Jjy4MZUZl8eZoRLm61v6Yfh4sFXMdah5pkoUU4GvYnr8DzChc7oHqjqTVc4N5HNKavi2QJ3LuCnmibXLuKeM4g3t6IKRsArL00dJWz9XwgDYTU5DTVdqUz05xNPUDO7YFuXTaBDHlqHKyepe8PanZiRNd0bU/tnV+9thII/EPyuYmoKyPWtVT1Z68Q/yqai7v7s3OW58GHqZUFXxsaqSsLA4t83HdeccH/t2IGR8EBinSCYmjg9CLm/zsJ87y8t1/cTiHKG68mN1BeEydHw4Ma63F+QgJ6Djg8mJAamEOA8o6Q3ArrwhQScGEwm9fbg/MRHp0CmgPiqwfqJK/ggnx3XTPPuTE8aHJCaAiIkAYhIyMbSU/HITNVi0oG6WtBASKijJD6D9o4Tk3hwjMTnWBt15wMZ57So71w31OsCtordZua5eDxl3Jc+FPLW7bz82eWhU4kFyOSUhvpQCCHhY6GoDg6r00boL2c6EuiCDsJ20DQGh1WVewcsvajKRZxANrn497xgkW6bP0vtUrw4AFX3oLUenh5kucYt27j1DD9Z1iAHhWk1+eZdb8MIKn9BGGm4n0IBQl+1cd2GUPqiqNgCYZdeUFhclJjbUiLPc5iS3VD47yLx11edY6MamKsynqAz40yQGhwmE/t7uXittWJKm/EVypsfp/aPitHWapHtWERKBGWSbW+xuRsjjzdSchOEgWQxSiMlzjDxwg1Cpd5K6/CgicSyhqTsnt6knIa6uJzenrhuowKCHw4m5DcTwwpbueYl1qoXJxOKbi5WTIgua2hfO3ixL48mFxdxnWfGfS/pdsmu+xdtacza4ZdYcx9pXH90z2YT/gAXkKgkFuUHSC7/9VESI7zyQIwIW0+V5B30wvwJYTJ8A4Xk4QDjx02HVYdknPpoU8r+W/9qRUjTgixhaGgL/iN+Om7tQrz7IQE0dV5BqHODen4qVfUMuWzEfPaWPtIubpJWvrSluXrlfqYuutzXM2gBb6OjUjrNNVHVRdUKl4a1DkkcS/+dvhjVut6xqThou1xOBPbGxUUZIFjCHObp7oJm2LDgpcJsBqAvU2karKS9L5Lwd5/raR6s5UFzrkZX/2OM8wZ2g/B+vhyzjNuaH5fO/j4zhN8PXKbw4dPEoDxjd+67tfUEM0leOdhBHD+dQeREkHq8fP0Qc76xoRyRbkdAimYfT/1o2KG11FCraGqWuTecKdDFQxbEkiZgnf1VlJN/8fJtAP7ytXXp4BGXhrf3E994dHT6fycOrbESb38K0WOvKL6jYiwg0xy2s4jp+5mbqa9/2KuJVpgaNo6He+rp41k5QLxi9gS04mvqmyGNmpNaZNpLGRSHjMlPQYMqbFGC/V0XYvLcwz1eWjO1VQS24dzCzL18ouu+enY6emaOHqdnoKmFjONUqIFjh+3rOj3akEib2spxqO5jPak2pShPEDfo3XLWpsHiAHzAe8O9VITYhFqYfYLMXEbD6Bzt0h+25iOgLW/gINIgVCXugLS1dW1yt2DW70boadXXl4Bypa1FNS3/KNJcWE2f3HIWYdhy05jk9Q+3U0+M/72AX946CQrc2Vzf3tsKC+ZhgCqLIFzVPtGl+jq+JN3Kuge/UzM5b1t96J4METW191UZVLX3NAk2tn5r2yQGO18Jr8wZKqChbK6s4Ktue/N7B76rZqtuMPdVXUCXDMrI8st1l/LhTqZIKlbcB1yE2pYK14glDrEiFwNgM1LMbFaLL2BxiKSreV1ZzPdtQS1VOWIPaGzZ/FayxptQ3cRXyY5NX34zfL8wLkgtUaP9wXGJ3b39vYmLvMOS7J0AvuX+TPJidmDygZ3fHJce9oFRg+cpddD8yAv0aZObETwKJDi/nHZb85g7UdHQyxj6SrmXr/jEbMHNmGjyC2bsrtegU4OwmD4DvjHTposMBop8+wwHlAeiCY5lULAACEmCUCrJptHTbAHLvP/FrMb4uKu/Lzqrsf1/aLV7abap4WLnWnW+vFRdmnibtwBYg0zAOtPVwDjaV/C5Q8f/04vJ7+tiSgd/yj92VztsSi+hxBZUBygfiwZzTjA113U0twm/PngwLV/y1ide3sQ7QU1NxveTBO52/6VxnIbHs3QB16GUdtPC7TFD5dU8txcsW8s7c0/mtuYoVfMyV8eaN/41HfIJe+PG/t/ybd9xX317kYptdU4zvUg1n8V7DPmFRwuObH+0TUBbJ71c0Y6IPsqYFztAoyK5ZYiRFCqflc+24WyvOUvwlBrO6X8uRrMEmhmGsSku8lYuTJfFbEFT5bFoKDVgyfarLbt+4aL2i8s2rRNr7c0o2gda+NhG4c9pV1/SueHTPDH+Q9vp3Q33BrS04iX8313D4voMr+OcrzUvhUjj6d3KZWz5I4vyzBlm3PaTZg3rwPljxvhml7jleSgX6zgIaj9WKWUVMzGc/KxH3sWJWrOSlbJOqot+bJDE7J1eHRgcnV7vwYVl+aTZpW9n2Svsv2j+UkxsadY9JBjJ5Vvrehf6WEJPXIRc6smwF+ALsvigHR1c7SgzuFLXJJG0rE2+1aRUvyy/NdM/hoe2d3G0u2Di7268GkZVfTfZS0VuQ9BVXgQrIuVdLt2Epcsd4om6x3Gk1PYWSSuB4bsSuYnkV+QIfWWQOlXTx9nQuHDd75KyT53nS2lhL2tNuCeEryPJc/YMBe+cgNad5UfeYpG1ljWUZXpS3eTXpR8xFKbel+4Q2fDm86v70la9yGHtMb72j5VyT1sSmK2UlHhEhYDv1t52WyGH0/TV9mkHnS8u4iIY2vlnIF662yo8dfC+H7ilKywWzbL1bI5XDHQhIpAUp8IygA7Gj/iD2SRlEb3IyK5gIjBc9dSpvbb/0TVqBTUw8ZhVzE6MtpHPhB0FnoZ/KXScncCko0JFiUNjUM5CFAfmQ9k/j0YaPd6INPo52tEuPf8Z2rvEu/jlTXnzuZ7P22wyyX0XJuR8/MRd8prmOb+f5KMbT010mNDBG0hvLiHBnf8ML+95WkIasUHB4QiDtTd2XmOJ72MSn1XbjSBMk4dHgI63RD29aEF9azRTWUFhiFSl+fdnRolYaPNCsiXdrS9BRm2/MbywIEvQbU+OrsFBS0E6INJFGEh0seJLKlIlnpfuqYkWswSKCySzx6IpHRgbNeOTs3FCrFLvWOYtl3G2ImAvnhGKfdRRGROaCBD0tUGJi7qV5xjlg4bVdksTeauW3ReZ+mgOoXkSIVGjjErFfslRkzkcqPbU+EBGXoKNEYGnIPKNKZnlsDuK8Mo5E5njEuUsuYrL15YgisBUSvAsblMUeq6Eo+JsClQMYgp85pEdl3NUXFDykTmUya0fa9zetKpOeQDbqkHKVb1pTUum/6Vg9nWNi9Juqld80MaRx9dSNdctvileOZO2cV/5N/xV2gjby9nW3iljvbtdwrX0mPVUuiBBxyHm+PxuvVVexIIQAUXcI5qfrbTUKdhKIknKtVsEaJUFAnYrcGVDwTwuw/IOwEhmkHypVihiVeqbpwYEBlI1pdIiVAij8T/cfkkPBe2U0XnT45T8B+Lok93LB367IUcu3+zhY1FhBCKPxar9uP8OAhXK4fuCVmjaTqjF7JJitNAtqbr9jO/lnwzxL2aWRNeDeVKT3bbvbIMZvcnXy6y35wcAkaBk0iTpDNtGfcmcLf7UCFpMsJYiDO7I+4DUzx9uOZmbNE6YmDL6JKzHZB4i0qXkKISzMp5g/5qQJbN2aGRwELO/2ZCZl4+DSan9yiXLXTczd3C0Bc7Wls8u50jVmbg6YWdKisS4gckwxd72+HitnNwulrnEz02y8hHPQVQVmXVgju35Xc1WJCNHcFZ+fg/fCW17Jtsj2Zv+cO7ARl+uVa3mJaEL0zz0cNwgQdz0FUP8Ssa/7sJ1Lie3rf+q02ggbJ/5thFylhdRUh2/pJj0ThX5Pa7xJPakm1Xm1YHAWsHLehyQ4kbVbv5KAXAAbV9U20ADMoMULRRVNB6oz2hrVbfn5IWl2wgZwhEmutXN0b4zzPGHqFXOHbaLRBNKnSSM/XlP3msVzZeUQZeUiFWU7PtCgOAtCsusIMZnVQXvJf9MBD8ih5Mf7ZZOrZNGW63bmZOey/r5qcmljCyli2dHIxFrP0dTc0lhByv6hULdDXr1sSN8KG1tCj4SsYFqm1fUDl661lOaikkksIaXUWyCcCC6t/eXIjIzF5eMibwR/2GFUg/dT+1LQd6WpRV65onOlZ8rWDVI+3zjw/9fmqa9f95c9pkCyelSK+zaMTaGjLc4ZPd+n4JMsRAj+AMoAfa5r8MRAV9uJezH3Ta7F3FFnRW6Kns3Erz03ttTVsrMUETDe0NURBD7OwHggoP933QbKebjVF4MK/4sJ+6Iq8ekKAzCHwnfab5SNnfe15LmK2EulSJlr9NQTbvhK++kTSOW19Q4CPhduk6cZsqbIkwxBjDNMRpLDKVpeU5+2BGd3+AJjwtyVHSDmBtIxDCqGxAJy3pmsLDKZxxLpBoX/pgI31YEpphXiTUeSwlsdT/q6KTtOeuZQ6UAhYyn2Yn5Rlak8tj5BwOfMfjAHnd3YZJLTCQo2LkQUAVy2XIaTjTwB+6HYs6h7jggSpIq5wwGebZpsFBXNay8udCFQWlwIxYcnoAjt72t/LYXr25TvXIYhH5Q7Q0z3M7i5I7rvyeIcem3UVvk5oX6Nqk+KxF1YM3SpzqtZC/XNqb2cGgfNVAFcJqh6qwUU1pe2Mg0hyzyyT381sti+2elEQxiEQdhGhHU6l/Xfwq+9uF9mT1wXziV60omCgv2sF3hBXpmknKOc+Sau+bOiLVx9Q+q692NBApWHVnvSyTQPlTyhUB35WLezOxFEu6lndtuHgoaUDBQwcL+d3sHHv3q9SoihO0MeDn9/dnz6ZJaBG4wpLD4xqi4qSYQNhMX9hLgKts//hhESouqjCCkET1F7bELY9WKbGhO0SY3NWcs9Y7TxnqV5xF+b7ljfbhux0Tr3CnT+7AIMUw6hKcU/Et13PPouqt8rCX3U8v8xWj3E5pBA8V/b6J1wKE13t1NiK38VEbNBktvY571aNpvRERsB9uXHeSHofjG8NKwdkUpGP9VEAivHwspGC76/HbaGJSjY5/i/S5loiqnUTvUCXKn178zu7WfQq5MUM/3y/YwqdeWQFsbDuX1kCXRJfoOdsp3TR0xNSbfKYVPXtmd5/NADmnCBLq6pRT+gdmVrea37r0q4Au0I9QcRPTCvdl5COrWqOm0yITF9srpqrpSQi126g/W+s8TpHctRSR9PTEgbV7kr3sucX12eXwbctRU6+y8PeSpBleV6rXJxtpdHu7ig0uPXkQta3t7FGaWZcsVf/qlCwBWeS0UKT+ViL50XvOGl5768v6mokTrkqAjUh3alBGQioOODiYm9/b29iTqS2lP1SJbaKvBfU1PHVNuFTgwmE7p7u/uToZLJCBkG6ddLoYZ2drPd1ZmkF4s4jQJfVSm4TARkYigxgZxr4l1YARevCji4O6EEZOKfQo8Mn4zwIkAvCUnzyXYpxg0B1FvdQTlOLwh/6XsK4mEYOthDQQmoyWfskuWTFloCXNubxCzAL5SeTwcsWC6LCx0MrbR017h8b/r53i69DTZq8pPHu3oyROSRF+/oj2zWPP4fRuWdYP797K3HmnoRXnbIsaL8++62AjDXNR/uL4tjgphWWW/3/yx61zNC+d7jV742tH14KZk3jGqz4O2G0LlTUlqU1Hq6Wq9v2wvt5Qx5bebwkJ5v5g4dp/7GWP8KbDN1H6DsfyV0vZw+zdhi9OsrDH2aoYALS4iytjB2nby2MLeM58YjaQaSzCSWJaGd11imEJY+yrJ8aGcbSwWz1GuS/sTSi1m2QSzzIcsaRzvdFtDdK32bvNv0nXttn1J9N4uo6UXUj+6LPktZJ1nwCkRCO7qWO4RmPLans1jHBO7rpZSVduq1VHWUb38b6dvUFI8NSnTVtQ9Q3NsI3Ev0SUoX98R9OGRqxv9Cq41rV1jaYjitfCPakbQpJKONsl5TVGgcqRHTS0naO7KIqt5E06elTqm83sHb/JpoLV0P0LZKJY1+kjuSok9KH4GyO566W/077CV1g6IhxIjhZsi4HZ69raYtBuR/Zd2c5KJwHUlUHUm95hu1WozadKLaxoiU79Yjua3ewzxwQgVu85kKnni29Oz3mGI6xOUgqn7rObKXXlQexgD4bQaztEVNypPq4BaIIgdjapZLXU3eWzdssPd/dyuligP0uvOSbx7aCrA8VzROQkUX4iZ0J2X0vDOHKvY7wE5UXeVaDZWhUweVV3ptR7ft3FwUD7EVPB4V31VNr97z+CDvQ+B6lrImhbeF2FAWj4vt2lMa0NMe5WJzvW7Jqobm3eetEqqOPGekLapzNeve5JA0RpeDB/UHt/uUG5R3VZSUHvTvpChLKw1Xv02JfgNYlRLkZSqKkqasAGBQ2pRXdImGJUXw16NuVa0jp8b7M93qceR+qlQU7Bb+BE9BpgLckXr1M/BpP7jlLyC3gh9t/d8Rthv+ImQ/yOWmwZyWI9TYbjIit0peGmti2NVl/GxQRxclvqkBUwHlrqdJrSJ7wJhvQf+BAHsA8DM+VtZbZG5ey5D79DmvKB8VjBlyhmHUjzn6J95elryqYFgs5h4eIDQPJY8xNrC2Udwydc7uJvEUY5hhw1HcGEBRBziPfuSmyfeRYxQO2j02j2A/p11baPpPqf239P7G0un0a4RBa7WZa6O89daoddeIgz5GrEYjth/ErdOZv5NyWy9ia/iC+6vYdohZD1n9ynaOVb42ql+KuWUR8y3djCef76XOCRTbJ8lzMf0ErlfDAdNHdsOeFSmhYWa/pg9sWOx1y04BK2xfBgUpvbx1tK7kG5fZ7Fkv5iti6D/PIiulzu0rV7KcMZZ6DjGfdyJNirT9mFsHXFxb5LRfsJ6zrMfq+yP9luw+gFsgb9pLniKok8SlR833vp6Wxn1qwn1BY2X9A9/eUQRM/SVDOGuPwmq6RU3vBdbaufc0m5vq3gGBKlCgRz1vTN/ucWj4wnc9hMc+rOYMxeOoYgWvbGWWaZfVDlk8y08KjYQFdnG9L5RGm2Yew6xRNuwgZgwirD7po8xaZ8vIS4yFtV72yOVq7zPnYjEf/v8IM0xeNyraQhXJrn3qLYVcAOkS8dbQaravN3jZu8dQ0KqqjRS2Sk5FUcuHWi3d5qif9bR9XBSl9h2Hzc2Uiz5J7+eSp6MTqFZksYXymFVYKdXsKxeUxd2u/zrGtoP2UBttv9hmHzTNulen0Wb1zZ6tvKYa1BVJJ5d4f2rs13Sl6K3px/rWBlq3gC/LdYS79U9g3oN/gUC9bR0eUCAI2AgAc8ULAbCYmDcfVAFfiDl8E+ge39GI+aF7AodPwSYpawjMUNF80Lt68gVxbpBWt7t6B595GKR3A+KSgSdYOTxFFfMMrVKexYbnBRxiO5zjklFrIMB85c8TBOVvnsIxhwhTt7h2FjYxSWTyojIpZxjnIXIhhW3oCbt9B1LefcM/DAU5BWWDLj4dFS/KXAwWGoThHdLC6GQxUN7mCZHxRWRAWk46KBErrVTOIStnGcHjUx+lADnYnOeJFbOfJTkqIZBnmbmgKq0iLZsGzmypFOaONJQyOV+daXLDHlpZs02FeGuhmq6khWsrlL54JGIFz4wZ8qLgrwB47wtfyeS4EYIp6w0zNVEfLuvMTA4GbCdHGhTmKzHDd6AiW1Tcmw3samYlXGNbmYmOymaQww8mXWXO3G4YTXk8T8l5ObKcjehz4ZZBgJWlZ9mZKcsdFeR9aEi5pLd7sveY9uTWDEIXk8EkTVaNLP8Fs0ronlOBX1iDH7zMVKD8fNMmYRZK1tufwr9DhxIGDJbcz75hsYNu7kMeUe2JSiv+/rzJXrURYIl7zKrCESssD49FTniUbthsn48+aLfdT845o57BNKukuuA7Z513WauLLnnK6LorrtovzRur3XLDTemee2mxTBmmy5bFZKscM82QK0+BfIWKPFNslhKzzTVHo23KlJpnvhdeafoIDWMd1+tfnYKdg7MfQ+XmQfhoDBaHJxBJfPwCHX1xKSQsIiomLiEpJS0jK9fVbaigqKSsoqpGVtfQ1CrK/lhEj6JPP2GgvQ0bET56xozHlnaZNGXajFlz5u/T98dfr7zOgSMnWvKOG8G1z3xeMLz58IXlx1+AQEGCmypEKBx8h94UJlyESFGie+y5XXueOrBjvxtixIoTjyBBIimizE0pUqkRrZ+IJANZZjVlyZazGZevgAzfN4lyFSpVqVajVp16DYSPDYJHZOxz77wRoxakmUXWbbE27c24hVaHTl269ejVp9+AQUOGjRg1ZtyESVRTaKbNlNstdLfNmjNvgRbd9w0rVq1Zt+Guezbdt2XbAw898phucl+VwvfMd1Wr8p9WxWq1K1CqrPc++OgTHeVkk5uPQbfH6zM5AFGSFVXTjfCmmJb99R8YhPRu3sXNw4vGYCnohQTiEX38AoISCX/JRsXEJSSlpGn5CQneLcONCp6QNpyQcNx6PABEmGRT1GYeFTugbZeKJS+WEaoDSnZurSFod3O9wWgyW+jupdKkv0qT6DiDcWkWK1GqjJozJcYXJc2Ha900DlHE+3Njxk2YRDWFZtqMW+g+f7qfc/yci0+Wxt4RBFjS2yQYvVHba6TtmT0MT2CGWmu3B7h0NxsJz34tgTeuVhfa2bGiBWe1qnCerixYGhQz8mJLLC9hSVheaf1fDjm+gYbx2iDhhmoVXko7ufdBBCEHX1lJ/+vVtUB5J7dudxqtPkEi61uevxXMuU8WbhBVwVXehdvSCy0Cb5PYreziuXWQS7yf5m4/cp5fvasw5/sGE5t15IuAI7+gAZi/EfAAIjUE4TLExzTWuhvfYhNW8JQtHyfRxZqRN0y8Vn1QMPDn4uuJS3keO3mSxJ5Fj/IlkGcjz+vPbnrv/v0ijUJMTV16Knhr1CgH34hRFbyHlPp/vfp+BJbUycg65iY/8HOWR4tdwz/qrUcSyDFBPJZWAnM8bgZXRrvm8b+rIpB80XGyg5cqHr+b89HXp06+lcsrq905U9So/fZaojghbITFohKSPezfZ5ZnpNAzJGS0KVdYmI3oNc42pt3+IhDFwnAKQUpnke7xghOjpMHPSoxUEgQlViMkGb5xPJBAtEADR978daOC3UPz+0iZ3Y/lb/Zo5uXsl3c7X6Sqw5PNxfESfnOX/w9FRMGlYliAEIygGE6hEpIWocKGAcQmqMHQIzkAQTE8NICnAgAhGEExnPJ0vQo9hQWlT/tAygC9GYcR/YxsqppEj6QAEIIRFMMp1HsxlTEpNHHPrSkN0TsLump727KmLMWwCkWClG+VOoVcyR3XhyU7HKVJZb2h0vqYQg2IflGwiBjLaSorzh+reFQqdTMsCZsAQjCGE5KxSzoadcLA4pEms9omODzkxLDR2MCJGFggBCMohkvpGeJ4HMsMOB5t5D5wQwMbXTrxd83uiEZ/M+J45t4iSDp6M/QmyGgRWjHyjyAcDr+24qsVHF8uAS/f2sLld2UOfYA7DNjChs1d32q+6yvoGzwbPYBQL05R3KXh23B5Bv2+p6bHFC43+P84NW4xncptt3AzzpuvXgxmSltF/7O4mo+wKtKeRhWj6TUUZ+z10CDBLZrIfpmZ5dV85JSjJ8XtrbLKjfAsXYA2P6dpVSlbwGbajXkuWjhyuFo4TrNKxVsiv7q0LbsIV/68zaUw71X59WXD5jnGZ9/PIGNaHjWNLEsDQC4XjFFIFgwCJB3T3t527K03IHYWlrvsV6U3c3HwLqfxS3JoOBFCM1GUp0bjZnGUIfGARIkqkS8OkzYRZrInSqUjcSzadAtfvW5T8KozAYu2LVH+0IXgc/FDcZc8IAgdAkHeUIKLGlBOpeSbmRiW+qc9coGyIpCZZVkSOyCCstC0wWqVbY0pFfUYVD3f7wTQHgAHpsBBAEBZBODgEQhlQ9M02rp3srA5pxUvYzSOoIlKTVvxlCFQdXmtrIU6M23TVHXnxpybFR2q0n0oGtxUtrZLDQrx9VX8xWL2MQ1TqQ/dLnEbObO+tMox40BUNWblCpOi7bKmbV0AFHbZirNFCzOtBwGZTd32dTB53RcxFFjyCLV2PEsIu915+ZmaNkSyxlHXLzOkKfTNxHHI38JVhtawdFurteI9E7eSVO9nK4gSUgx3msEz1qCOpAhB0ZjbF6w5z7RVvThX0nYhtKQon2eZu1hmrcOB8RrPzrLotXhZc9RU2dTMaVVWSycJnKNhUUqOPNeC2PX6ployg2P53yvWtdRW18JNkgT08wtzVXM2OBXqyg9VnhwPGOw07JshDKrapPfl/JZ9U1UQv8muyogzfjq3zcXfBk5dUaandemo1Lpu+gfxRS0quGhm0MTixgxyGUTXdZZIb8fSeJ5iIbyL6xxlDU1z1Ondoq5WK/TiBmGFViZDOT9TXHjq9J/1n/df9F/2X2XX2eLqMYT6Bda7m7tPU7tesjePu86yzG/3v77fxWK6k+sviyhq2vJhA9bGk3/X5eN/AAAA")
    format("woff2");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}
`,eO="BaseSans-Regular";function ote(){if(document.head.querySelector(`style[base-sdk-font="${eO}"]`))return;const e=document.createElement("style");e.setAttribute("base-sdk-font",eO),e.textContent=ste,document.head.appendChild(e)}var Z2,en,BB,dd,tO,LB,X5,v6,eS,tS,Um={},UB=[],ate=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,E6=Array.isArray;function su(t,e){for(var n in e)t[n]=e[n];return t}function jB(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function FB(t,e,n){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Z2.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return pb(t,o,r,i,null)}function pb(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++BB,__i:-1,__u:0};return i==null&&en.vnode!=null&&en.vnode(s),s}function Y2(t){return t.children}function gb(t,e){this.props=t,this.context=e}function Zp(t,e){if(e==null)return t.__?Zp(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Zp(t):null}function qB(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return qB(t)}}function nO(t){(!t.__d&&(t.__d=!0)&&dd.push(t)&&!gv.__r++||tO!==en.debounceRendering)&&((tO=en.debounceRendering)||LB)(gv)}function gv(){var t,e,n,r,i,s,o,a;for(dd.sort(X5);t=dd.shift();)t.__d&&(e=dd.length,r=void 0,s=(i=(n=t).__v).__e,o=[],a=[],n.__P&&((r=su({},i)).__v=i.__v+1,en.vnode&&en.vnode(r),C6(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[s]:null,o,s??Zp(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,KB(o,r,a),r.__e!=s&&qB(r)),dd.length>e&&dd.sort(X5));gv.__r=0}function HB(t,e,n,r,i,s,o,a,c,l,u){var d,h,f,p,g,m=r&&r.__k||UB,w=e.length;for(n.__d=c,cte(n,e,m),c=n.__d,d=0;d<w;d++)(f=n.__k[d])!=null&&(h=f.__i===-1?Um:m[f.__i]||Um,f.__i=d,C6(t,f,h,i,s,o,a,c,l,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&_6(h.ref,null,f),u.push(f.ref,f.__c||p,f)),g==null&&p!=null&&(g=p),65536&f.__u||h.__k===f.__k?c=zB(f,c,t):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:p&&(c=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=g}function cte(t,e,n){var r,i,s,o,a,c=e.length,l=n.length,u=l,d=0;for(t.__k=[],r=0;r<c;r++)(i=e[r])!=null&&typeof i!="boolean"&&typeof i!="function"?(o=r+d,(i=t.__k[r]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?pb(null,i,null,null,null):E6(i)?pb(Y2,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?pb(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,s=null,(a=i.__i=lte(i,n,o,u))!==-1&&(u--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a==o-1?d--:a==o+1?d++:(a>o?d--:d++,i.__u|=65536))):i=t.__k[r]=null;if(u)for(r=0;r<l;r++)(s=n[r])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=Zp(s)),VB(s,s))}function zB(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=zB(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Zp(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function lte(t,e,n,r){var i=t.key,s=t.type,o=n-1,a=n+1,c=e[n];if(c===null||c&&i==c.key&&s===c.type&&!(131072&c.__u))return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((c=e[o])&&!(131072&c.__u)&&i==c.key&&s===c.type)return o;o--}if(a<e.length){if((c=e[a])&&!(131072&c.__u)&&i==c.key&&s===c.type)return a;a++}}return-1}function rO(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||ate.test(e)?n:n+"px"}function qy(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||rO(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||rO(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=v6,t.addEventListener(e,s?tS:eS,s)):t.removeEventListener(e,s?tS:eS,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function iO(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=v6++;else if(e.t<n.u)return;return n(en.event?en.event(e):e)}}}function C6(t,e,n,r,i,s,o,a,c,l){var u,d,h,f,p,g,m,w,b,y,_,A,T,$,D,O,j=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=e.__e=n.__e]),(u=en.__b)&&u(e);e:if(typeof j=="function")try{if(w=e.props,b="prototype"in j&&j.prototype.render,y=(u=j.contextType)&&r[u.__c],_=u?y?y.props.value:u.__:r,n.__c?m=(d=e.__c=n.__c).__=d.__E:(b?e.__c=d=new j(w,_):(e.__c=d=new gb(w,_),d.constructor=j,d.render=dte),y&&y.sub(d),d.props=w,d.state||(d.state={}),d.context=_,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),b&&d.__s==null&&(d.__s=d.state),b&&j.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=su({},d.__s)),su(d.__s,j.getDerivedStateFromProps(w,d.__s))),f=d.props,p=d.state,d.__v=e,h)b&&j.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),b&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(b&&j.getDerivedStateFromProps==null&&w!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(w,_),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(w,d.__s,_)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=w,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(F){F&&(F.__=e)}),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(w,d.__s,_),b&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,g)})}if(d.context=_,d.props=w,d.__P=t,d.__e=!1,T=en.__r,$=0,b){for(d.state=d.__s,d.__d=!1,T&&T(e),u=d.render(d.props,d.state,d.context),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[]}else do d.__d=!1,T&&T(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++$<25);d.state=d.__s,d.getChildContext!=null&&(r=su(su({},r),d.getChildContext())),b&&!h&&d.getSnapshotBeforeUpdate!=null&&(g=d.getSnapshotBeforeUpdate(f,p)),HB(t,E6(O=u!=null&&u.type===Y2&&u.key==null?u.props.children:u)?O:[O],e,n,r,i,s,o,a,c,l),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),m&&(d.__E=d.__=null)}catch(F){if(e.__v=null,c||s!=null){for(e.__u|=c?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;en.__e(F,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=ute(n.__e,e,n,r,i,s,o,c,l);(u=en.diffed)&&u(e)}function KB(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)_6(n[r],n[++r],n[++r]);en.__c&&en.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){en.__e(s,i.__v)}})}function ute(t,e,n,r,i,s,o,a,c){var l,u,d,h,f,p,g,m=n.props,w=e.props,b=e.type;if(b==="svg"?i="http://www.w3.org/2000/svg":b==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((f=s[l])&&"setAttribute"in f==!!b&&(b?f.localName===b:f.nodeType===3)){t=f,s[l]=null;break}}if(t==null){if(b===null)return document.createTextNode(w);t=document.createElementNS(i,b,w.is&&w),a&&(en.__m&&en.__m(e,s),a=!1),s=null}if(b===null)m===w||a&&t.data===w||(t.data=w);else{if(s=s&&Z2.call(t.childNodes),m=n.props||Um,!a&&s!=null)for(m={},l=0;l<t.attributes.length;l++)m[(f=t.attributes[l]).name]=f.value;for(l in m)if(f=m[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=f;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;qy(t,l,null,f,i)}}for(l in w)f=w[l],l=="children"?h=f:l=="dangerouslySetInnerHTML"?u=f:l=="value"?p=f:l=="checked"?g=f:a&&typeof f!="function"||m[l]===f||qy(t,l,f,m[l],i);if(u)a||d&&(u.__html===d.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(d&&(t.innerHTML=""),HB(t,E6(h)?h:[h],e,n,r,b==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:n.__k&&Zp(n,0),a,c),s!=null)for(l=s.length;l--;)jB(s[l]);a||(l="value",b==="progress"&&p==null?t.removeAttribute("value"):p!==void 0&&(p!==t[l]||b==="progress"&&!p||b==="option"&&p!==m[l])&&qy(t,l,p,m[l],i),l="checked",g!==void 0&&g!==t[l]&&qy(t,l,g,m[l],i))}return t}function _6(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){en.__e(i,n)}}function VB(t,e,n){var r,i;if(en.unmount&&en.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||_6(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){en.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&VB(r[i],e,n||typeof t.type!="function");n||jB(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function dte(t,e,n){return this.constructor(t,n)}function sO(t,e,n){var r,i,s,o;en.__&&en.__(t,e),i=(r=!1)?null:e.__k,s=[],o=[],C6(e,t=e.__k=FB(Y2,null,[t]),i||Um,Um,e.namespaceURI,i?null:e.firstChild?Z2.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,o),KB(s,t,o)}Z2=UB.slice,en={__e:function(t,e,n,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},BB=0,gb.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=su({},this.state),typeof t=="function"&&(t=t(su({},n),this.props)),t&&su(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),nO(this))},gb.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),nO(this))},gb.prototype.render=Y2,dd=[],LB=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,X5=function(t,e){return t.__v.__b-e.__v.__b},gv.__r=0,v6=0,eS=iO(!1),tS=iO(!0);var hte=0;function An(t,e,n,r,i,s){e||(e={});var o,a,c=e;"ref"in e&&(o=e.ref,delete e.ref);var l={type:t,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--hte,__i:-1,__u:0,__source:i,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return en.vnode&&en.vnode(l),l}function WB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=WB(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function nS(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=WB(t))&&(r&&(r+=" "),r+=e);return r}async function fte(t){return pte(t)}function pte(t,e=4){return`${t.slice(0,2+e)}...${t.slice(-e)}`}const gte="#FFF",mte="#0000FF",wte=({fill:t})=>An("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:An("path",{d:"M0 2.014C0 1.58105 0 1.36457 0.0815779 1.19805C0.159686 1.03861 0.288611 0.909686 0.448049 0.831578C0.61457 0.75 0.831047 0.75 1.264 0.75H14.736C15.169 0.75 15.3854 0.75 15.552 0.831578C15.7114 0.909686 15.8403 1.03861 15.9184 1.19805C16 1.36457 16 1.58105 16 2.014V15.486C16 15.919 16 16.1354 15.9184 16.302C15.8403 16.4614 15.7114 16.5903 15.552 16.6684C15.3854 16.75 15.169 16.75 14.736 16.75H1.264C0.831047 16.75 0.61457 16.75 0.448049 16.6684C0.288611 16.5903 0.159686 16.4614 0.0815779 16.302C0 16.1354 0 15.919 0 15.486V2.014Z",fill:t==="blue"?mte:gte})});var jm,$n,A3,oO,rS=0,GB=[],Gn=en,aO=Gn.__b,cO=Gn.__r,lO=Gn.diffed,uO=Gn.__c,dO=Gn.unmount,hO=Gn.__;function S6(t,e){Gn.__h&&Gn.__h($n,t,rS||e),rS=0;var n=$n.__H||($n.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Hd(t){return rS=1,yte(YB,t)}function yte(t,e,n){var r=S6(jm++,2);if(r.t=t,!r.__c&&(r.__=[YB(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,a);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=$n,!$n.u)){var i=function(a,c,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!s||s.call(this,a,c,l);var d=!1;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(d=!0)}}),!(!d&&r.__c.props===a)&&(!s||s.call(this,a,c,l))};$n.u=!0;var s=$n.shouldComponentUpdate,o=$n.componentWillUpdate;$n.componentWillUpdate=function(a,c,l){if(this.__e){var u=s;s=void 0,i(a,c,l),s=u}o&&o.call(this,a,c,l)},$n.shouldComponentUpdate=i}return r.__N||r.__}function iS(t,e){var n=S6(jm++,3);!Gn.__s&&ZB(n.__H,e)&&(n.__=t,n.i=e,$n.__H.__h.push(n))}function bte(t,e){var n=S6(jm++,7);return ZB(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function vte(){for(var t;t=GB.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(mb),t.__H.__h.forEach(sS),t.__H.__h=[]}catch(e){t.__H.__h=[],Gn.__e(e,t.__v)}}Gn.__b=function(t){$n=null,aO&&aO(t)},Gn.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),hO&&hO(t,e)},Gn.__r=function(t){cO&&cO(t),jm=0;var e=($n=t.__c).__H;e&&(A3===$n?(e.__h=[],$n.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(mb),e.__h.forEach(sS),e.__h=[],jm=0)),A3=$n},Gn.diffed=function(t){lO&&lO(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(GB.push(e)!==1&&oO===Gn.requestAnimationFrame||((oO=Gn.requestAnimationFrame)||Ete)(vte)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),A3=$n=null},Gn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(mb),n.__h=n.__h.filter(function(r){return!r.__||sS(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Gn.__e(r,n.__v)}}),uO&&uO(t,e)},Gn.unmount=function(t){dO&&dO(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{mb(r)}catch(i){e=i}}),n.__H=void 0,e&&Gn.__e(e,n.__v))};var fO=typeof requestAnimationFrame=="function";function Ete(t){var e,n=function(){clearTimeout(r),fO&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);fO&&(e=requestAnimationFrame(n))}function mb(t){var e=$n,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),$n=e}function sS(t){var e=$n;t.__c=t.__(),$n=e}function ZB(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function YB(t,e){return typeof e=="function"?e(t):e}const Cte='.-base-acc-sdk-css-reset{-webkit-font-smoothing:antialiased;pointer-events:auto !important}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483647}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-container *{user-select:none;box-sizing:border-box}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-backdrop{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;padding:20px}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-backdrop{align-items:flex-end;justify-content:stretch;padding:0}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog{position:relative;z-index:2147483648}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog{width:100%}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance{background:#fff;border-radius:12px;box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);width:380px;max-height:90vh;overflow:hidden;transform:scale(0.95);opacity:0;transition:all .2s ease-in-out}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance{touch-action:pan-y;user-select:none}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-hidden{transform:scale(0.9);opacity:0}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-hidden{transform:translateY(100%)}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance:not(.-base-acc-sdk-dialog-instance-hidden){transform:scale(1);opacity:1}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance:not(.-base-acc-sdk-dialog-instance-hidden){transform:translateY(0)}}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance{width:100%;max-width:100%;border-radius:20px 20px 0 0;box-shadow:0 -10px 25px rgba(0,0,0,.15);max-height:80vh;transform:translateY(0)}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-hidden{transform:translateY(100%);opacity:1}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance:not(.-base-acc-sdk-dialog-instance-hidden){transform:translateY(0);opacity:1}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 0 20px}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header{padding:16px 20px 12px 20px}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-icon-and-title{display:flex;align-items:center;gap:8px}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-icon-and-title-title{font-family:"BaseSans-Regular",sans-serif;font-size:14px;font-weight:400;color:#5b616e}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-cblogo{width:32px;height:32px}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-close{display:flex;align-items:center;justify-content:center;width:32px;height:32px;cursor:pointer;border-radius:6px;transition:background-color .2s}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-close:hover{background-color:#f5f7f8}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-close-icon{width:14px;height:14px}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-header-close-icon{display:none}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-content{padding:20px 20px 16px 20px;font-family:"BaseSans-Regular",sans-serif}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-content{padding:8px 20px 12px 20px}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-content-title{font-size:20px;font-weight:600;line-height:28px;color:#0a0b0d;margin-bottom:10px}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-content-message{font-size:16px;font-weight:400;line-height:24px;color:#5b616e;margin-bottom:0}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-actions{display:flex;padding:16px 20px 20px 20px;flex-direction:column}@media(max-width: 600px)and (orientation: portrait){.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-actions{padding:16px 20px calc(20px + env(safe-area-inset-bottom)) 20px;gap:6px}}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button{font-family:"BaseSans-Regular",sans-serif;font-size:16px;font-weight:500;line-height:24px;border:none;border-radius:12px;padding:16px 24px;cursor:pointer;transition:all .2s ease-in-out;width:100%;margin:4px 0}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button:disabled{opacity:.5;cursor:not-allowed}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-primary{background-color:#0a0b0d;color:#fff}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-primary:hover:not(:disabled){background-color:#1c1e20}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-primary:active:not(:disabled){background-color:#2a2d31}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-secondary{background-color:#eef0f3;color:#0a0b0d}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-secondary:hover:not(:disabled){background-color:#e1e4e8}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-instance-button-secondary:active:not(:disabled){background-color:#d4d8dd}.-base-acc-sdk-css-reset .-base-acc-sdk-dialog-handle-bar{position:absolute;top:-16px;left:50%;transform:translateX(-50%);width:64px;height:4px;background-color:#d1d5db;border-radius:2px;opacity:0;animation:handleBarFadeIn .2s ease-in-out .2s forwards}@keyframes handleBarFadeIn{from{opacity:0}to{opacity:1}}',_te="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEzIDFMMSAxM20wLTEyTDEzIDEzIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+";function QB(){return window.innerWidth<=600&&window.innerHeight>window.innerWidth}const Ste=()=>{const[t,e]=Hd(!1);return iS(()=>{const n=()=>{e(QB())};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),t?An("div",{class:"-base-acc-sdk-dialog-handle-bar"}):null};class Ate{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null}attach(e){this.root=document.createElement("div"),this.root.className="-base-acc-sdk-dialog-root",e.appendChild(this.root),this.render()}presentItem(e){const n=this.nextItemKey++;this.items.set(n,e),this.render()}clear(){this.items.clear(),this.root&&sO(null,this.root)}render(){this.root&&sO(An("div",{children:An(xte,{children:Array.from(this.items.entries()).map(([e,n])=>FB(Ite,Object.assign({},n,{key:e,handleClose:()=>{var r;this.clear(),(r=n.onClose)===null||r===void 0||r.call(n)}})))})}),this.root)}}const xte=t=>{const[e,n]=Hd(0),[r,i]=Hd(!1),[s,o]=Hd(0),a=u=>{if(!QB())return;const d=u.touches[0];o(d.clientY),i(!0)},c=u=>{if(!r)return;const h=u.touches[0].clientY-s;h>0&&(n(h),u.preventDefault())},l=()=>{if(r)if(i(!1),e>100){const u=document.querySelector(".-base-acc-sdk-dialog-instance-header-close");u&&u.click()}else n(0)};return An("div",{class:nS("-base-acc-sdk-dialog-container"),children:[An("style",{children:Cte}),An("div",{class:"-base-acc-sdk-dialog-backdrop",onTouchStart:a,onTouchMove:c,onTouchEnd:l,children:An("div",{class:"-base-acc-sdk-dialog",style:{transform:`translateY(${e}px)`,transition:r?"none":"transform 0.2s ease-out"},children:[An(Ste,{}),t.children]})})]})},Ite=({title:t,message:e,actionItems:n,handleClose:r})=>{const[i,s]=Hd(!0),[o,a]=Hd(!0),[c,l]=Hd(null);iS(()=>{const h=window.setTimeout(()=>{s(!1)},1);return()=>{window.clearTimeout(h)}},[]),iS(()=>{(async()=>{var f;const p=(f=xe.account.get().accounts)===null||f===void 0?void 0:f[0];if(p){const g=await fte(p);l(g)}a(!1)})()},[]);const u=bte(()=>c?`Signed in as ${c}`:"Base Account",[c]),d=!o;return An("div",{class:nS("-base-acc-sdk-dialog-instance",i&&"-base-acc-sdk-dialog-instance-hidden"),children:[An("div",{class:"-base-acc-sdk-dialog-instance-header",children:[An("div",{class:"-base-acc-sdk-dialog-instance-header-icon-and-title",children:[An(wte,{fill:"blue"}),d&&An("div",{class:"-base-acc-sdk-dialog-instance-header-icon-and-title-title",children:u})]}),An("div",{class:"-base-acc-sdk-dialog-instance-header-close",onClick:r,children:An("img",{src:_te,class:"-base-acc-sdk-dialog-instance-header-close-icon"})})]}),An("div",{class:"-base-acc-sdk-dialog-instance-content",children:[An("div",{class:"-base-acc-sdk-dialog-instance-content-title",children:t}),An("div",{class:"-base-acc-sdk-dialog-instance-content-message",children:e})]}),n&&n.length>0&&An("div",{class:"-base-acc-sdk-dialog-instance-actions",children:n.map((h,f)=>An("button",{class:nS("-base-acc-sdk-dialog-instance-button",h.variant==="primary"&&"-base-acc-sdk-dialog-instance-button-primary",h.variant==="secondary"&&"-base-acc-sdk-dialog-instance-button-secondary"),onClick:h.onClick,children:h.text},f))})]})};let Hy=null;function A6(){if(!Hy){const t=document.createElement("div");t.className="-base-acc-sdk-css-reset",document.body.appendChild(t),Hy=new Ate,Hy.attach(t)}return ote(),Hy}const pO=420,gO=700,Ote="{app} wants to continue in Base Account",Pte="This action requires your permission to open a new window.";function Tte(t){const e=(window.innerWidth-pO)/2+window.screenX,n=(window.innerHeight-gO)/2+window.screenY;Nte(t);function r(){const s=`wallet_${crypto.randomUUID()}`,o=window.open(t,s,`width=${pO}, height=${gO}, left=${e}, top=${n}`);return o?.focus(),o||null}const i=r();return i?Promise.resolve(i):$te(r)}function kte(t){t&&!t.closed&&t.close()}function Nte(t){const e={sdkName:G2,sdkVersion:Kg,origin:window.location.origin,coop:ete()};for(const[n,r]of Object.entries(e))t.searchParams.has(n)||t.searchParams.append(n,r.toString())}function $te(t){var e,n;const r=(n=(e=xe.config.get().metadata)===null||e===void 0?void 0:e.appName)!==null&&n!==void 0?n:"App",i=A6();return new Promise((s,o)=>{b6({dialogContext:"popup_blocked"}),i.presentItem({title:Ote.replace("{app}",r),message:Pte,onClose:()=>{qd({dialogContext:"popup_blocked",dialogAction:"cancel"}),o(Pe.rpc.internal("Popup window was blocked"))},actionItems:[{text:"Try again",variant:"primary",onClick:()=>{qd({dialogContext:"popup_blocked",dialogAction:"confirm"});const a=t();a?s(a):o(Pe.rpc.internal("Popup window was blocked")),i.clear()}},{text:"Cancel",variant:"secondary",onClick:()=>{qd({dialogContext:"popup_blocked",dialogAction:"cancel"}),o(Pe.rpc.internal("Popup window was blocked")),i.clear()}}]})})}class Rte{constructor({url:e=Iee,metadata:n,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async i=>{(await this.waitForPopupLoaded()).postMessage(i,this.url.origin)},this.postRequestAndWaitForResponse=async i=>{const s=this.onMessage(({requestId:o})=>o===i.id);return this.postMessage(i),await s},this.onMessage=async i=>new Promise((s,o)=>{const a=c=>{if(c.origin!==this.url.origin)return;const l=c.data;i(l)&&(s(l),window.removeEventListener("message",a),this.listeners.delete(a))};window.addEventListener("message",a),this.listeners.set(a,{reject:o})}),this.disconnect=()=>{kte(this.popup),this.popup=null,this.listeners.forEach(({reject:i},s)=>{i(Pe.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",s)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(nte(),this.popup=await Tte(this.url),this.onMessage(({event:i})=>i==="PopupUnload").then(()=>{this.disconnect(),ite()}).catch(()=>{}),this.onMessage(({event:i})=>i==="PopupLoaded").then(i=>{this.postMessage({requestId:i.id,data:{version:Kg,sdkName:G2,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw Pe.rpc.internal();return rte(),this.popup})),this.url=new URL(e),this.metadata=n,this.preference=r}}function Mte(t){const e=Gee(Bte(t),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",Kg),n.searchParams.set("code",e.code.toString()),n.searchParams.set("message",e.message),Object.assign(Object.assign({},e),{docUrl:n.href})}function Dte(t){return t.errorMessage!==void 0}function Bte(t){var e;if(typeof t=="string")return{message:t,code:kn.rpc.internal};if(Dte(t)){const n=t.errorMessage,r=(e=t.errorCode)!==null&&e!==void 0?e:n.match(/(denied|rejected)/i)?kn.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},t),{message:n,code:r,data:{method:t.method}})}return t}class Lte extends TD{}const Ute=({method:t,correlationId:e})=>{vn("provider.request.started",{action:un.unknown,componentType:ln.unknown,method:t,signerType:"base-account",correlationId:e},dn.high)},jte=({method:t,correlationId:e,errorMessage:n})=>{vn("provider.request.error",{action:un.error,componentType:ln.unknown,method:t,signerType:"base-account",correlationId:e,errorMessage:n},dn.high)},Fte=({method:t,correlationId:e})=>{vn("provider.request.responded",{action:un.unknown,componentType:ln.unknown,method:t,signerType:"base-account",correlationId:e},dn.high)};function qte(){return t=>t}const mv=qte();function x3(t){return Math.floor(t)}const Hte=/^[0-9]*$/,JB=/^[a-f0-9]*$/;function zte(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}function Kte(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function XB(t){return mv(`0x${BigInt(t).toString(16)}`)}function Vte(t){return t.startsWith("0x")||t.startsWith("0X")}function eL(t){return Vte(t)?t.slice(2):t}function Wte(t){if(typeof t!="string")return!1;const e=eL(t).toLowerCase();return JB.test(e)}function oS(t,e=!1){if(typeof t=="string"){const n=eL(t).toLowerCase();if(JB.test(n))return mv(e?`0x${n}`:n)}throw Pe.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}function Gte(t,e=!1){let n=oS(t,!1);return n.length%2===1&&(n=mv(`0${n}`)),e?mv(`0x${n}`):n}function Zte(t){if(typeof t=="number"&&Number.isInteger(t))return x3(t);if(typeof t=="string"){if(Hte.test(t))return x3(Number(t));if(Wte(t))return x3(Number(BigInt(Gte(t,!0))))}throw Pe.rpc.invalidParams(`Not an integer: ${String(t)}`)}const Yte=({method:t,correlationId:e})=>{var n;vn("scw_signer.handshake.started",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},Qte=({method:t,correlationId:e,errorMessage:n})=>{var r;vn("scw_signer.handshake.error",{action:un.error,componentType:ln.unknown,method:t,correlationId:e,errorMessage:n,enableAutoSubAccounts:(r=xe.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},dn.high)},Jte=({method:t,correlationId:e})=>{var n;vn("scw_signer.handshake.completed",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},Xte=({method:t,correlationId:e})=>{var n;vn("scw_signer.request.started",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},ene=({method:t,correlationId:e,errorMessage:n})=>{var r;vn("scw_signer.request.error",{action:un.error,componentType:ln.unknown,method:t,correlationId:e,errorMessage:n,enableAutoSubAccounts:(r=xe.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},dn.high)},tne=({method:t,correlationId:e})=>{var n;vn("scw_signer.request.completed",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},nne=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.request.started",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},rne=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.request.completed",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},ine=({method:t,correlationId:e,errorMessage:n})=>{var r;vn("scw_sub_account.request.error",{action:un.error,componentType:ln.unknown,method:t,correlationId:e,errorMessage:n,enableAutoSubAccounts:(r=xe.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},dn.high)},sne=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.add_owner.started",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},one=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.add_owner.completed",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},ane=({method:t,correlationId:e,errorMessage:n})=>{var r;vn("scw_sub_account.add_owner.error",{action:un.error,componentType:ln.unknown,method:t,correlationId:e,errorMessage:n,enableAutoSubAccounts:(r=xe.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},dn.high)},cne=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.insufficient_balance.error_handling.started",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},lne=({method:t,correlationId:e})=>{var n;vn("scw_sub_account.insufficient_balance.error_handling.completed",{action:un.unknown,componentType:ln.unknown,method:t,correlationId:e,enableAutoSubAccounts:(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},dn.high)},une=({method:t,correlationId:e,errorMessage:n})=>{var r;vn("scw_sub_account.insufficient_balance.error_handling.error",{action:un.error,componentType:ln.unknown,method:t,correlationId:e,errorMessage:n,enableAutoSubAccounts:(r=xe.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},dn.high)},p0=t=>"message"in t&&typeof t.message=="string"?t.message:"",tL=p6(()=>({}));function mO(t){t.forEach(e=>{var n,r,i,s,o,a,c,l;if(!e.rpcUrl)return;const u=hG({id:e.id,rpcUrls:{default:{http:[e.rpcUrl]}},name:(r=(n=e.nativeCurrency)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",nativeCurrency:{name:(s=(i=e.nativeCurrency)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",symbol:(a=(o=e.nativeCurrency)===null||o===void 0?void 0:o.symbol)!==null&&a!==void 0?a:"",decimals:(l=(c=e.nativeCurrency)===null||c===void 0?void 0:c.decimal)!==null&&l!==void 0?l:18}}),d=fG({chain:u,transport:Xf(e.rpcUrl)}),h=pG({client:d,transport:Xf(e.rpcUrl)});tL.setState({[e.id]:{client:d,bundlerClient:h}})})}function nL(t){var e;return(e=tL.getState()[t])===null||e===void 0?void 0:e.client}const zy=p6(()=>({correlationIds:new Map})),gc={get:t=>zy.getState().correlationIds.get(t),set:(t,e)=>{zy.setState(n=>{const r=new Map(n.correlationIds);return r.set(t,e),{correlationIds:r}})},delete:t=>{zy.setState(e=>{const n=new Map(e.correlationIds);return n.delete(t),{correlationIds:n}})},clear:()=>{zy.setState({correlationIds:new Map})}};function Ky(t){if(typeof t!="object"||t===null)throw Pe.rpc.internal("sub account info is not an object");if(!("address"in t))throw Pe.rpc.internal("sub account is invalid");if("address"in t&&typeof t.address=="string"&&!rv(t.address))throw Pe.rpc.internal("sub account address is invalid");if("factory"in t&&typeof t.factory=="string"&&!rv(t.factory))throw Pe.rpc.internal("sub account factory address is invalid");if("factoryData"in t&&typeof t.factoryData=="string"&&!qf(t.factoryData))throw Pe.rpc.internal("sub account factory data is invalid")}async function dne(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function hne(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function fne(t,e){const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,new TextEncoder().encode(e));return{iv:n,cipherText:r}}async function pne(t,{iv:e,cipherText:n}){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,n);return new TextDecoder().decode(r)}function rL(t){switch(t){case"public":return"spki";case"private":return"pkcs8"}}async function iL(t,e){const n=rL(t),r=await crypto.subtle.exportKey(n,e);return zte(new Uint8Array(r))}async function sL(t,e){const n=rL(t),r=Kte(e).buffer;return await crypto.subtle.importKey(n,new Uint8Array(r),{name:"ECDH",namedCurve:"P-256"},!0,t==="private"?["deriveKey"]:[])}async function gne(t,e){const n=JSON.stringify(t,(r,i)=>{if(!(i instanceof Error))return i;const s=i;return Object.assign(Object.assign({},s.code?{code:s.code}:{}),{message:s.message})});return fne(e,n)}async function mne(t,e){return JSON.parse(await pne(e,t))}async function wb(t,e){const n=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),r=await window.fetch(e,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Kg,"X-Cbw-Sdk-Platform":G2}}),{result:i,error:s}=await r.json();if(s)throw s;return i}function wne(t){if(!t||typeof t!="object"||Array.isArray(t))throw Pe.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:t});const{method:e,params:n}=t;if(typeof e!="string"||e.length===0)throw Pe.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw Pe.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:t});switch(e){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw Pe.provider.unsupportedMethod()}}const yne="0.1.1";function bne(){return yne}class bn extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof bn){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof bn&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${bne()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return oL(this,e)}}function oL(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?oL(t.cause,e):e?null:t}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vne(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function x6(t,...e){if(!vne(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wO(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ene(t,e){x6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function aS(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function I3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ea(t,e){return t<<32-e|t>>>e}function Cne(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function aL(t){return typeof t=="string"&&(t=Cne(t)),x6(t),t}let _ne=class{};function Sne(t){const e=r=>t().update(aL(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ane(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function xne(t,e,n){return t&e^~t&n}function Ine(t,e,n){return t&e^t&n^e&n}let One=class extends _ne{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=I3(this.buffer)}update(e){wO(this),e=aL(e),x6(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=I3(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wO(this),Ene(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,aS(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;Ane(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=I3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const il=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pne=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sl=new Uint32Array(64);let Tne=class extends One{constructor(e=32){super(64,e,8,!1),this.A=il[0]|0,this.B=il[1]|0,this.C=il[2]|0,this.D=il[3]|0,this.E=il[4]|0,this.F=il[5]|0,this.G=il[6]|0,this.H=il[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)sl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=sl[d-15],f=sl[d-2],p=ea(h,7)^ea(h,18)^h>>>3,g=ea(f,17)^ea(f,19)^f>>>10;sl[d]=g+sl[d-7]+p+sl[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ea(a,6)^ea(a,11)^ea(a,25),f=u+h+xne(a,c,l)+Pne[d]+sl[d]|0,g=(ea(r,2)^ea(r,13)^ea(r,22))+Ine(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){aS(sl)}destroy(){this.set(0,0,0,0,0,0,0,0),aS(this.buffer)}};const kne=Sne(()=>new Tne),Nne=kne,Zh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function cS(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ph(t,...e){if(!Q2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cL(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");cS(t.outputLen),cS(t.blockLen)}function wv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $ne(t,e){Ph(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Yp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function O3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ta(t,e){return t<<32-e|t>>>e}const lL=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Rne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ep(t){if(Ph(t),lL)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Rne[t[n]];return e}const Za={_0:48,_9:57,A:65,F:70,a:97,f:102};function yO(t){if(t>=Za._0&&t<=Za._9)return t-Za._0;if(t>=Za.A&&t<=Za.F)return t-(Za.A-10);if(t>=Za.a&&t<=Za.f)return t-(Za.a-10)}function yv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(lL)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=yO(t.charCodeAt(s)),a=yO(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Mne(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function I6(t){return typeof t=="string"&&(t=Mne(t)),Ph(t),t}function Hl(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ph(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let uL=class{};function O6(t){const e=r=>t().update(I6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function dL(t=32){if(Zh&&typeof Zh.getRandomValues=="function")return Zh.getRandomValues(new Uint8Array(t));if(Zh&&typeof Zh.randomBytes=="function")return Uint8Array.from(Zh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const P6=BigInt(0),lS=BigInt(1);function bv(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function _d(t,e,n=""){const r=Q2(t),i=t?.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",c=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Vy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?P6:BigInt("0x"+t)}function J2(t){return hL(Ep(t))}function fL(t){return Ph(t),hL(Ep(Uint8Array.from(t).reverse()))}function T6(t,e){return yv(t.toString(16).padStart(e*2,"0"))}function pL(t,e){return T6(t,e).reverse()}function Ki(t,e,n){let r;if(typeof e=="string")try{r=yv(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Q2(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");return r.length,r}const P3=t=>typeof t=="bigint"&&P6<=t;function Dne(t,e,n){return P3(t)&&P3(e)&&P3(n)&&e<=t&&t<n}function Bne(t,e,n,r){if(!Dne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gL(t){let e;for(e=0;t>P6;t>>=lS,e+=1);return e}const Uw=t=>(lS<<BigInt(t))-lS;function Lne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),i=f=>Uint8Array.of(f);let s=r(t),o=r(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...f)=>n(o,s,...f),u=(f=r(0))=>{o=l(i(0),f),s=l(),f.length!==0&&(o=l(i(1),f),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=l();const g=s.slice();p.push(g),f+=s.length}return Hl(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function k6(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function bO(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Une="#__bigint";function X2(t,e,n){return JSON.stringify(t,(r,i)=>typeof i=="bigint"?i.toString()+Une:i,n)}function jne(t,e){if(Jp(t)>e)throw new nre({givenSize:Jp(t),maxSize:e})}function Fne(t,e){if(typeof e=="number"&&e>0&&e>Jp(t)-1)throw new SL({offset:e,position:"start",size:Jp(t)})}function qne(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Jp(t)!==n-e)throw new SL({offset:n,position:"end",size:Jp(t)})}const Ya={zero:48,nine:57,A:65,F:70,a:97,f:102};function vO(t){if(t>=Ya.zero&&t<=Ya.nine)return t-Ya.zero;if(t>=Ya.A&&t<=Ya.F)return t-(Ya.A-10);if(t>=Ya.a&&t<=Ya.f)return t-(Ya.a-10)}function N6(t,e){if(Nu(t)>e)throw new Jne({givenSize:Nu(t),maxSize:e})}function Hne(t,e){if(typeof e=="number"&&e>0&&e>Nu(t)-1)throw new vL({offset:e,position:"start",size:Nu(t)})}function zne(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Nu(t)!==n-e)throw new vL({offset:n,position:"end",size:Nu(t)})}function mL(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const i=t.replace("0x","");if(i.length>r*2)throw new Xne({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Kne=new TextEncoder,Vne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Wne(t,e={}){const{strict:n=!1}=e;if(!t)throw new EO(t);if(typeof t!="string")throw new EO(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new CO(t);if(!t.startsWith("0x"))throw new CO(t)}function eE(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function wL(t){return t instanceof Uint8Array?Qp(t):Array.isArray(t)?Qp(new Uint8Array(t)):t}function Qp(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Vne[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(N6(r,e.size),bL(r,e.size)):r}function wu(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new Qne({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Gne(c,r):c}function yL(t,e={}){return Qp(Kne.encode(t),e)}function Gne(t,e){return mL(t,{dir:"left",size:e})}function bL(t,e){return mL(t,{dir:"right",size:e})}function ao(t,e,n,r={}){const{strict:i}=r;Hne(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return i&&zne(s,e,n),s}function Nu(t){return Math.ceil((t.length-2)/2)}function Zne(t,e={}){const{signed:n}=e;e.size&&N6(t,e.size);const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n)-1n,o=s>>1n;return r<=o?r:r-s-1n}function Yne(t,e={}){const{strict:n=!1}=e;try{return Wne(t,{strict:n}),!0}catch{return!1}}class Qne extends bn{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class EO extends bn{constructor(e){super(`Value \`${typeof e=="object"?X2(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class CO extends bn{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Jne=class extends bn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},vL=class extends bn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class Xne extends bn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function ere(t){if(!(t instanceof Uint8Array)){if(!t)throw new Wy(t);if(typeof t!="object")throw new Wy(t);if(!("BYTES_PER_ELEMENT"in t))throw new Wy(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Wy(t)}}function EL(t){return t instanceof Uint8Array?t:typeof t=="string"?_L(t):CL(t)}function CL(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function _L(t,e={}){const{size:n}=e;let r=t;n&&(N6(t,n),r=bL(t,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=vO(i.charCodeAt(c++)),u=vO(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new bn(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function Jp(t){return t.length}function _O(t,e,n,r={}){const{strict:i}=r;Fne(t,e);const s=t.slice(e,n);return i&&qne(s,e,n),s}function SO(t,e={}){const{size:n}=e;typeof n<"u"&&jne(t,n);const r=Qp(t,e);return Zne(r,e)}function tre(t){try{return ere(t),!0}catch{return!1}}class Wy extends bn{constructor(e){super(`Value \`${typeof e=="object"?X2(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class nre extends bn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class SL extends bn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function AL(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Nne(EL(t));return n==="Bytes"?r:Qp(r)}function xL(t,e={}){const{compressed:n}=e,{prefix:r,x:i,y:s}=t;if(n===!1||typeof i=="bigint"&&typeof s=="bigint"){if(r!==4)throw new AO({prefix:r,cause:new are});return}if(n===!0||typeof i=="bigint"&&typeof s>"u"){if(r!==3&&r!==2)throw new AO({prefix:r,cause:new ore});return}throw new sre({publicKey:t})}function rre(t){const e=(()=>{if(Yne(t))return IL(t);if(tre(t))return ire(t);const{prefix:n,x:r,y:i}=t;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return xL(e),e}function ire(t){return IL(Qp(t))}function IL(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new cre({publicKey:t});if(t.length===130){const r=BigInt(ao(t,0,32)),i=BigInt(ao(t,32,64));return{prefix:4,x:r,y:i}}if(t.length===132){const r=Number(ao(t,0,1)),i=BigInt(ao(t,1,33)),s=BigInt(ao(t,33,65));return{prefix:r,x:i,y:s}}const e=Number(ao(t,0,1)),n=BigInt(ao(t,1,33));return{prefix:e,x:n}}function $6(t,e={}){xL(t);const{prefix:n,x:r,y:i}=t,{includePrefix:s=!0}=e;return eE(s?wu(n,{size:1}):"0x",wu(r,{size:32}),typeof i=="bigint"?wu(i,{size:32}):"0x")}class sre extends bn{constructor({publicKey:e}){super(`Value \`${X2(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class AO extends bn{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class ore extends bn{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class are extends bn{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let cre=class extends bn{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Nu(wL(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const xO=2n**256n-1n;function lre(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ure(t,e,n){return t&e^~t&n}function dre(t,e,n){return t&e^t&n^e&n}let OL=class extends uL{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=O3(this.buffer)}update(e){wv(this),e=I6(e),Ph(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=O3(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wv(this),$ne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Yp(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;lre(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=O3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const ol=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Jr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Gy=BigInt(2**32-1),IO=BigInt(32);function hre(t,e=!1){return e?{h:Number(t&Gy),l:Number(t>>IO&Gy)}:{h:Number(t>>IO&Gy)|0,l:Number(t&Gy)|0}}function fre(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=hre(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const OO=(t,e,n)=>t>>>n,PO=(t,e,n)=>t<<32-n|e>>>n,Yh=(t,e,n)=>t>>>n|e<<32-n,Qh=(t,e,n)=>t<<32-n|e>>>n,Zy=(t,e,n)=>t<<64-n|e>>>n-32,Yy=(t,e,n)=>t>>>n-32|e<<64-n;function Qa(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const pre=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gre=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mre=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),wre=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,yre=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),bre=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,vre=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),al=new Uint32Array(64);let Ere=class extends OL{constructor(e=32){super(64,e,8,!1),this.A=ol[0]|0,this.B=ol[1]|0,this.C=ol[2]|0,this.D=ol[3]|0,this.E=ol[4]|0,this.F=ol[5]|0,this.G=ol[6]|0,this.H=ol[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)al[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=al[d-15],f=al[d-2],p=ta(h,7)^ta(h,18)^h>>>3,g=ta(f,17)^ta(f,19)^f>>>10;al[d]=g+al[d-7]+p+al[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ta(a,6)^ta(a,11)^ta(a,25),f=u+h+ure(a,c,l)+vre[d]+al[d]|0,g=(ta(r,2)^ta(r,13)^ta(r,22))+dre(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Yp(al)}destroy(){this.set(0,0,0,0,0,0,0,0),Yp(this.buffer)}};const PL=fre(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cre=PL[0],_re=PL[1],cl=new Uint32Array(80),ll=new Uint32Array(80);class TL extends OL{constructor(e=64){super(128,e,16,!1),this.Ah=Jr[0]|0,this.Al=Jr[1]|0,this.Bh=Jr[2]|0,this.Bl=Jr[3]|0,this.Ch=Jr[4]|0,this.Cl=Jr[5]|0,this.Dh=Jr[6]|0,this.Dl=Jr[7]|0,this.Eh=Jr[8]|0,this.El=Jr[9]|0,this.Fh=Jr[10]|0,this.Fl=Jr[11]|0,this.Gh=Jr[12]|0,this.Gl=Jr[13]|0,this.Hh=Jr[14]|0,this.Hl=Jr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let y=0;y<16;y++,n+=4)cl[y]=e.getUint32(n),ll[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const _=cl[y-15]|0,A=ll[y-15]|0,T=Yh(_,A,1)^Yh(_,A,8)^OO(_,A,7),$=Qh(_,A,1)^Qh(_,A,8)^PO(_,A,7),D=cl[y-2]|0,O=ll[y-2]|0,j=Yh(D,O,19)^Zy(D,O,61)^OO(D,O,6),F=Qh(D,O,19)^Yy(D,O,61)^PO(D,O,6),L=mre($,F,ll[y-7],ll[y-16]),B=wre(L,T,j,cl[y-7],cl[y-16]);cl[y]=B|0,ll[y]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:b}=this;for(let y=0;y<80;y++){const _=Yh(d,h,14)^Yh(d,h,18)^Zy(d,h,41),A=Qh(d,h,14)^Qh(d,h,18)^Yy(d,h,41),T=d&f^~d&g,$=h&p^~h&m,D=yre(b,A,$,_re[y],ll[y]),O=bre(D,w,_,T,Cre[y],cl[y]),j=D|0,F=Yh(r,i,28)^Zy(r,i,34)^Zy(r,i,39),L=Qh(r,i,28)^Yy(r,i,34)^Yy(r,i,39),B=r&s^r&a^s&a,x=i&o^i&c^o&c;w=g|0,b=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Qa(l|0,u|0,O|0,j|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const v=pre(j,L,x);r=gre(v,O,F,B),i=v|0}({h:r,l:i}=Qa(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Qa(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Qa(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Qa(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Qa(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Qa(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Qa(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:b}=Qa(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,i,s,o,a,c,l,u,d,h,f,p,g,m,w,b)}roundClean(){Yp(cl,ll)}destroy(){Yp(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Sre extends TL{constructor(){super(48),this.Ah=Qr[0]|0,this.Al=Qr[1]|0,this.Bh=Qr[2]|0,this.Bl=Qr[3]|0,this.Ch=Qr[4]|0,this.Cl=Qr[5]|0,this.Dh=Qr[6]|0,this.Dl=Qr[7]|0,this.Eh=Qr[8]|0,this.El=Qr[9]|0,this.Fh=Qr[10]|0,this.Fl=Qr[11]|0,this.Gh=Qr[12]|0,this.Gl=Qr[13]|0,this.Hh=Qr[14]|0,this.Hl=Qr[15]|0}}const Are=O6(()=>new Ere),xre=O6(()=>new TL),Ire=O6(()=>new Sre);let kL=class extends uL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,cL(e);const r=I6(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Yp(s)}update(e){return wv(this),this.iHash.update(e),this}digestInto(e){wv(this),Ph(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const NL=(t,e,n)=>new kL(t,e).update(n).digest();NL.create=(t,e)=>new kL(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cs=BigInt(0),_i=BigInt(1),Sd=BigInt(2),$L=BigInt(3),RL=BigInt(4),ML=BigInt(5),Ore=BigInt(7),DL=BigInt(8),Pre=BigInt(9),BL=BigInt(16);function ko(t,e){const n=t%e;return n>=Cs?n:e+n}function TO(t,e){if(t===Cs)throw new Error("invert: expected non-zero number");if(e<=Cs)throw new Error("invert: expected positive modulus, got "+e);let n=ko(t,e),r=e,i=Cs,s=_i;for(;n!==Cs;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==_i)throw new Error("invert: does not exist");return ko(i,e)}function R6(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function LL(t,e){const n=(t.ORDER+_i)/RL,r=t.pow(e,n);return R6(t,r,e),r}function Tre(t,e){const n=(t.ORDER-ML)/DL,r=t.mul(e,Sd),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Sd),i),a=t.mul(s,t.sub(o,t.ONE));return R6(t,a,e),a}function kre(t){const e=Th(t),n=UL(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+Ore)/BL;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,r);const d=a.mul(l,i),h=a.mul(l,s),f=a.eql(a.sqr(u),c),p=a.eql(a.sqr(d),c);l=a.cmov(l,u,f),u=a.cmov(h,d,p);const g=a.eql(a.sqr(u),c),m=a.cmov(l,u,g);return R6(a,m,c),m}}function UL(t){if(t<$L)throw new Error("sqrt is not defined for small field");let e=t-_i,n=0;for(;e%Sd===Cs;)e/=Sd,n++;let r=Sd;const i=Th(t);for(;kO(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return LL;let s=i.pow(r,e);const o=(e+_i)/Sd;return function(c,l){if(c.is0(l))return l;if(kO(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,s),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const m=_i<<BigInt(u-p-1),w=c.pow(d,m);u=p,d=c.sqr(w),h=c.mul(h,d),f=c.mul(f,w)}return f}}function Nre(t){return t%RL===$L?LL:t%DL===ML?Tre:t%BL===Pre?kre(t):UL(t)}const $re=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rre(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=$re.reduce((r,i)=>(r[i]="function",r),e);return k6(t,n),t}function Mre(t,e,n){if(n<Cs)throw new Error("invalid exponent, negatives unsupported");if(n===Cs)return t.ONE;if(n===_i)return e;let r=t.ONE,i=e;for(;n>Cs;)n&_i&&(r=t.mul(r,i)),i=t.sqr(i),n>>=_i;return r}function jL(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),s),r}function kO(t,e){const n=(t.ORDER-_i)/Sd,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function FL(t,e){e!==void 0&&cS(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Th(t,e,n=!1,r={}){if(t<=Cs)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(i=h.BITS),h.sqrt&&(s=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modFromBytes=="boolean"&&(o=h.modFromBytes),a=h.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:c,nByteLength:l}=FL(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Uw(c),ZERO:Cs,ONE:_i,allowedLengths:a,create:h=>ko(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Cs<=h&&h<t},is0:h=>h===Cs,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&_i)===_i,neg:h=>ko(-h,t),eql:(h,f)=>h===f,sqr:h=>ko(h*h,t),add:(h,f)=>ko(h+f,t),sub:(h,f)=>ko(h-f,t),mul:(h,f)=>ko(h*f,t),pow:(h,f)=>Mre(d,h,f),div:(h,f)=>ko(h*TO(f,t),t),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>TO(h,t),sqrt:s||(h=>(u||(u=Nre(t)),u(d,h))),toBytes:h=>n?pL(h,l):T6(h,l),fromBytes:(h,f=!0)=>{if(a){if(!a.includes(h.length)||h.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const g=new Uint8Array(l);g.set(h,n?0:g.length-h.length),h=g}if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);let p=n?fL(h):J2(h);if(o&&(p=ko(p,t)),!f&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:h=>jL(d,h),cmov:(h,f,p)=>p?f:h});return Object.freeze(d)}function qL(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function HL(t){const e=qL(t);return e+Math.ceil(e/2)}function Dre(t,e,n=!1){const r=t.length,i=qL(e),s=HL(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?fL(t):J2(t),a=ko(o,e-_i)+_i;return n?pL(a,i):T6(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xp=BigInt(0),Ad=BigInt(1);function vv(t,e){const n=e.negate();return t?n:e}function T3(t,e){const n=jL(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function zL(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function k3(t,e){zL(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=Uw(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function NO(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),c=t>>o;a>r&&(a-=s,c+=Ad);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Bre(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Lre(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const N3=new WeakMap,KL=new WeakMap;function $3(t){return KL.get(t)||1}function $O(t){if(t!==Xp)throw new Error("invalid wNAF")}let Ure=class{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>Xp;)n&Ad&&(r=r.add(i)),i=i.double(),n>>=Ad;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=k3(n,this.bits),s=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=k3(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}=NO(r,a,o);r=c,u?s=s.add(vv(h,n[f])):i=i.add(vv(d,n[l]))}return $O(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=k3(e,this.bits);for(let o=0;o<s.windows&&r!==Xp;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=NO(r,o,s);if(r=a,!l){const d=n[c];i=i.add(u?d.negate():d)}}return $O(r),i}getPrecomputes(e,n,r){let i=N3.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),N3.set(n,i))),i}cached(e,n,r){const i=$3(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=$3(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){zL(n,this.bits),KL.set(e,n),N3.delete(e)}hasCache(e){return $3(e)!==1}};function jre(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Xp||r>Xp;)n&Ad&&(s=s.add(i)),r&Ad&&(o=o.add(i)),i=i.double(),n>>=Ad,r>>=Ad;return{p1:s,p2:o}}function Fre(t,e,n,r){Bre(n,t),Lre(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=gL(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Uw(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<s;g++){const m=r[g],w=Number(m>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function RO(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Rre(e),e}else return Th(t,{isLE:n})}function qre(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>Xp))throw new Error(`CURVE.${c} must be positive bigint`)}const i=RO(e.p,n.Fp,r),s=RO(e.n,n.Fn,r),a=["Gx","Gy","a","b"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const MO=(t,e)=>(t+(t>=0?e:-e)/VL)/e;function Hre(t,e,n){const[[r,i],[s,o]]=e,a=MO(o*t,n),c=MO(-i*t,n);let l=t-a*r-c*s,u=-a*i-c*o;const d=l<$c,h=u<$c;d&&(l=-l),h&&(u=-u);const f=Uw(Math.ceil(gL(n)/2))+Cp;if(l<$c||l>=f||u<$c||u>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}function uS(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function R3(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return bv(n.lowS,"lowS"),bv(n.prehash,"prehash"),n.format!==void 0&&uS(n.format),n}let zre=class extends Error{constructor(e=""){super(e)}};const mc={Err:zre,_tlv:{encode:(t,e)=>{const{Err:n}=mc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Vy(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Vy(i.length/2|128):"";return Vy(t)+s+i+e},decode(t,e){const{Err:n}=mc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=mc;if(t<$c)throw new e("integer: negative integers are not allowed");let n=Vy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=mc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return J2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=mc,i=Ki("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=mc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},$c=BigInt(0),Cp=BigInt(1),VL=BigInt(2),Qy=BigInt(3),Kre=BigInt(4);function rp(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=Ki("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Vre(t,e={}){const n=qre("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;k6(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=GL(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(L,B,x){const{x:v,y:S}=B.toAffine(),N=r.toBytes(v);if(bv(x,"isCompressed"),x){u();const E=!r.isOdd(S);return Hl(WL(E),N)}else return Hl(Uint8Array.of(4),N,r.toBytes(S))}function h(L){_d(L,void 0,"Point");const{publicKey:B,publicKeyUncompressed:x}=l,v=L.length,S=L[0],N=L.subarray(1);if(v===B&&(S===2||S===3)){const E=r.fromBytes(N);if(!r.isValid(E))throw new Error("bad point: is not on curve, wrong x");const C=g(E);let P;try{P=r.sqrt(C)}catch(k){const R=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+R)}u();const M=r.isOdd(P);return(S&1)===1!==M&&(P=r.neg(P)),{x:E,y:P}}else if(v===x&&S===4){const E=r.BYTES,C=r.fromBytes(N.subarray(0,E)),P=r.fromBytes(N.subarray(E,E*2));if(!m(C,P))throw new Error("bad point: is not on curve");return{x:C,y:P}}else throw new Error(`bad point: got length ${v}, expected compressed=${B} or uncompressed=${x}`)}const f=e.toBytes||d,p=e.fromBytes||h;function g(L){const B=r.sqr(L),x=r.mul(B,L);return r.add(r.add(x,r.mul(L,s.a)),s.b)}function m(L,B){const x=r.sqr(B),v=g(L);return r.eql(x,v)}if(!m(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(s.a,Qy),Kre),b=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(w,b)))throw new Error("bad curve params: a or b");function y(L,B,x=!1){if(!r.isValid(B)||x&&r.is0(B))throw new Error(`bad point coordinate ${L}`);return B}function _(L){if(!(L instanceof O))throw new Error("ProjectivePoint expected")}function A(L){if(!c||!c.basises)throw new Error("no endo");return Hre(L,c.basises,i.ORDER)}const T=bO((L,B)=>{const{X:x,Y:v,Z:S}=L;if(r.eql(S,r.ONE))return{x,y:v};const N=L.is0();B==null&&(B=N?r.ONE:r.inv(S));const E=r.mul(x,B),C=r.mul(v,B),P=r.mul(S,B);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(P,r.ONE))throw new Error("invZ was invalid");return{x:E,y:C}}),$=bO(L=>{if(L.is0()){if(e.allowInfinityPoint&&!r.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:B,y:x}=L.toAffine();if(!r.isValid(B)||!r.isValid(x))throw new Error("bad point: x or y not field elements");if(!m(B,x))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function D(L,B,x,v,S){return x=new O(r.mul(x.X,L),x.Y,x.Z),B=vv(v,B),x=vv(S,x),B.add(x)}class O{constructor(B,x,v){this.X=y("x",B),this.Y=y("y",x,!0),this.Z=y("z",v),Object.freeze(this)}static CURVE(){return s}static fromAffine(B){const{x,y:v}=B||{};if(!B||!r.isValid(x)||!r.isValid(v))throw new Error("invalid affine point");if(B instanceof O)throw new Error("projective point not allowed");return r.is0(x)&&r.is0(v)?O.ZERO:new O(x,v,r.ONE)}static fromBytes(B){const x=O.fromAffine(p(_d(B,void 0,"point")));return x.assertValidity(),x}static fromHex(B){return O.fromBytes(Ki("pointHex",B))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(B=8,x=!0){return F.createCache(this,B),x||this.multiply(Qy),this}assertValidity(){$(this)}hasEvenY(){const{y:B}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(B)}equals(B){_(B);const{X:x,Y:v,Z:S}=this,{X:N,Y:E,Z:C}=B,P=r.eql(r.mul(x,C),r.mul(N,S)),M=r.eql(r.mul(v,C),r.mul(E,S));return P&&M}negate(){return new O(this.X,r.neg(this.Y),this.Z)}double(){const{a:B,b:x}=s,v=r.mul(x,Qy),{X:S,Y:N,Z:E}=this;let C=r.ZERO,P=r.ZERO,M=r.ZERO,I=r.mul(S,S),k=r.mul(N,N),R=r.mul(E,E),U=r.mul(S,N);return U=r.add(U,U),M=r.mul(S,E),M=r.add(M,M),C=r.mul(B,M),P=r.mul(v,R),P=r.add(C,P),C=r.sub(k,P),P=r.add(k,P),P=r.mul(C,P),C=r.mul(U,C),M=r.mul(v,M),R=r.mul(B,R),U=r.sub(I,R),U=r.mul(B,U),U=r.add(U,M),M=r.add(I,I),I=r.add(M,I),I=r.add(I,R),I=r.mul(I,U),P=r.add(P,I),R=r.mul(N,E),R=r.add(R,R),I=r.mul(R,U),C=r.sub(C,I),M=r.mul(R,k),M=r.add(M,M),M=r.add(M,M),new O(C,P,M)}add(B){_(B);const{X:x,Y:v,Z:S}=this,{X:N,Y:E,Z:C}=B;let P=r.ZERO,M=r.ZERO,I=r.ZERO;const k=s.a,R=r.mul(s.b,Qy);let U=r.mul(x,N),q=r.mul(v,E),H=r.mul(S,C),z=r.add(x,v),K=r.add(N,E);z=r.mul(z,K),K=r.add(U,q),z=r.sub(z,K),K=r.add(x,S);let G=r.add(N,C);return K=r.mul(K,G),G=r.add(U,H),K=r.sub(K,G),G=r.add(v,S),P=r.add(E,C),G=r.mul(G,P),P=r.add(q,H),G=r.sub(G,P),I=r.mul(k,K),P=r.mul(R,H),I=r.add(P,I),P=r.sub(q,I),I=r.add(q,I),M=r.mul(P,I),q=r.add(U,U),q=r.add(q,U),H=r.mul(k,H),K=r.mul(R,K),q=r.add(q,H),H=r.sub(U,H),H=r.mul(k,H),K=r.add(K,H),U=r.mul(q,K),M=r.add(M,U),U=r.mul(G,K),P=r.mul(z,P),P=r.sub(P,U),U=r.mul(z,q),I=r.mul(G,I),I=r.add(I,U),new O(P,M,I)}subtract(B){return this.add(B.negate())}is0(){return this.equals(O.ZERO)}multiply(B){const{endo:x}=e;if(!i.isValidNot0(B))throw new Error("invalid scalar: out of range");let v,S;const N=E=>F.cached(this,E,C=>T3(O,C));if(x){const{k1neg:E,k1:C,k2neg:P,k2:M}=A(B),{p:I,f:k}=N(C),{p:R,f:U}=N(M);S=k.add(U),v=D(x.beta,I,R,E,P)}else{const{p:E,f:C}=N(B);v=E,S=C}return T3(O,[v,S])[0]}multiplyUnsafe(B){const{endo:x}=e,v=this;if(!i.isValid(B))throw new Error("invalid scalar: out of range");if(B===$c||v.is0())return O.ZERO;if(B===Cp)return v;if(F.hasCache(this))return this.multiply(B);if(x){const{k1neg:S,k1:N,k2neg:E,k2:C}=A(B),{p1:P,p2:M}=jre(O,v,N,C);return D(x.beta,P,M,S,E)}else return F.unsafe(v,B)}multiplyAndAddUnsafe(B,x,v){const S=this.multiplyUnsafe(x).add(B.multiplyUnsafe(v));return S.is0()?void 0:S}toAffine(B){return T(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return o===Cp?!0:B?B(O,this):F.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:B}=e;return o===Cp?this:B?B(O,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(B=!0){return bv(B,"isCompressed"),this.assertValidity(),f(O,this,B)}toHex(B=!0){return Ep(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(B=!0){return this.toBytes(B)}_setWindowSize(B){this.precompute(B)}static normalizeZ(B){return T3(O,B)}static msm(B,x){return Fre(O,i,B,x)}static fromPrivateKey(B){return O.BASE.multiply(rp(i,B))}}O.BASE=new O(s.Gx,s.Gy,r.ONE),O.ZERO=new O(r.ZERO,r.ONE,r.ZERO),O.Fp=r,O.Fn=i;const j=i.BITS,F=new Ure(O,e.endo?Math.ceil(j/2):j);return O.BASE.precompute(8),O}function WL(t){return Uint8Array.of(t?2:3)}function GL(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Wre(t,e={}){const{Fn:n}=t,r=e.randomBytes||dL,i=Object.assign(GL(t.Fp,n),{seed:HL(n.ORDER)});function s(f){try{return!!rp(n,f)}catch{return!1}}function o(f,p){const{publicKey:g,publicKeyUncompressed:m}=i;try{const w=f.length;return p===!0&&w!==g||p===!1&&w!==m?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(i.seed)){return Dre(_d(f,i.seed,"seed"),n.ORDER)}function c(f,p=!0){return t.BASE.multiply(rp(n,f)).toBytes(p)}function l(f){const p=a(f);return{secretKey:p,publicKey:c(p)}}function u(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:m}=i;if(n.allowedLengths||p===g)return;const w=Ki("key",f).length;return w===g||w===m}function d(f,p,g=!0){if(u(f)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");const m=rp(n,f);return t.fromHex(p).multiply(m).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:f=>rp(n,f),precompute(f=8,p=t.BASE){return p.precompute(f,!1)}},lengths:i})}function Gre(t,e,n={}){cL(e),k6(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||dL,i=n.hmac||((x,...v)=>NL(e,x,Hl(...v))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=Wre(t,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function m(x){const v=a>>Cp;return x>v}function w(x,v){if(!o.isValidNot0(v))throw new Error(`invalid signature ${x}: out of range 1..Point.Fn.ORDER`);return v}function b(x,v){uS(v);const S=f.signature,N=v==="compact"?S:v==="recovered"?S+1:void 0;return _d(x,N,`${v} signature`)}class y{constructor(v,S,N){this.r=w("r",v),this.s=w("s",S),N!=null&&(this.recovery=N),Object.freeze(this)}static fromBytes(v,S=g){b(v,S);let N;if(S==="der"){const{r:M,s:I}=mc.toSig(_d(v));return new y(M,I)}S==="recovered"&&(N=v[0],S="compact",v=v.subarray(1));const E=o.BYTES,C=v.subarray(0,E),P=v.subarray(E,E*2);return new y(o.fromBytes(C),o.fromBytes(P),N)}static fromHex(v,S){return this.fromBytes(yv(v),S)}addRecoveryBit(v){return new y(this.r,this.s,v)}recoverPublicKey(v){const S=s.ORDER,{r:N,s:E,recovery:C}=this;if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");if(a*VL<S&&C>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=C===2||C===3?N+a:N;if(!s.isValid(M))throw new Error("recovery id 2 or 3 invalid");const I=s.toBytes(M),k=t.fromBytes(Hl(WL((C&1)===0),I)),R=o.inv(M),U=A(Ki("msgHash",v)),q=o.create(-U*R),H=o.create(E*R),z=t.BASE.multiplyUnsafe(q).add(k.multiplyUnsafe(H));if(z.is0())throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return m(this.s)}toBytes(v=g){if(uS(v),v==="der")return yv(mc.hexFromSig(this));const S=o.toBytes(this.r),N=o.toBytes(this.s);if(v==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Hl(Uint8Array.of(this.recovery),S,N)}return Hl(S,N)}toHex(v){return Ep(this.toBytes(v))}assertValidity(){}static fromCompact(v){return y.fromBytes(Ki("sig",v),"compact")}static fromDER(v){return y.fromBytes(Ki("sig",v),"der")}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ep(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ep(this.toBytes("compact"))}}const _=n.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const S=J2(v),N=v.length*8-c;return N>0?S>>BigInt(N):S},A=n.bits2int_modN||function(v){return o.create(_(v))},T=Uw(c);function $(x){return Bne("num < 2^"+c,x,$c,T),o.toBytes(x)}function D(x,v){return _d(x,void 0,"message"),v?_d(e(x),void 0,"prehashed message"):x}function O(x,v,S){if(["recovered","canonical"].some(q=>q in S))throw new Error("sign() legacy options not supported");const{lowS:N,prehash:E,extraEntropy:C}=R3(S,p);x=D(x,E);const P=A(x),M=rp(o,v),I=[$(M),$(P)];if(C!=null&&C!==!1){const q=C===!0?r(f.secretKey):C;I.push(Ki("extraEntropy",q))}const k=Hl(...I),R=P;function U(q){const H=_(q);if(!o.isValidNot0(H))return;const z=o.inv(H),K=t.BASE.multiply(H).toAffine(),G=o.create(K.x);if(G===$c)return;const Y=o.create(z*o.create(R+G*M));if(Y===$c)return;let X=(K.x===G?0:2)|Number(K.y&Cp),ie=Y;return N&&m(Y)&&(ie=o.neg(Y),X^=1),new y(G,ie,X)}return{seed:k,k2sig:U}}function j(x,v,S={}){x=Ki("message",x);const{seed:N,k2sig:E}=O(x,v,S);return Lne(e.outputLen,o.BYTES,i)(N,E)}function F(x){let v;const S=typeof x=="string"||Q2(x),N=!S&&x!==null&&typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!S&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(N)v=new y(x.r,x.s);else if(S){try{v=y.fromBytes(Ki("sig",x),"der")}catch(E){if(!(E instanceof mc.Err))throw E}if(!v)try{v=y.fromBytes(Ki("sig",x),"compact")}catch{return!1}}return v||!1}function L(x,v,S,N={}){const{lowS:E,prehash:C,format:P}=R3(N,p);if(S=Ki("publicKey",S),v=D(Ki("message",v),C),"strict"in N)throw new Error("options.strict was renamed to lowS");const M=P===void 0?F(x):y.fromBytes(Ki("sig",x),P);if(M===!1)return!1;try{const I=t.fromBytes(S);if(E&&M.hasHighS())return!1;const{r:k,s:R}=M,U=A(v),q=o.inv(R),H=o.create(U*q),z=o.create(k*q),K=t.BASE.multiplyUnsafe(H).add(I.multiplyUnsafe(z));return K.is0()?!1:o.create(K.x)===k}catch{return!1}}function B(x,v,S={}){const{prehash:N}=R3(S,p);return v=D(v,N),y.fromBytes(x,"recovered").recoverPublicKey(v).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:t,sign:j,verify:L,recoverPublicKey:B,Signature:y,hash:e})}function Zre(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Th(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Yre(t){const{CURVE:e,curveOpts:n}=Zre(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Qre(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,FL(n.Fn.ORDER,n.Fn.BITS))})}function Jre(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Yre(t),s=Vre(e,n),o=Gre(s,r,i);return Qre(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function M6(t,e){const n=r=>Jre({...t,hash:r});return{...n(e),create:n}}function Xre(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new M3({signature:t});if(typeof t.s>"u")throw new M3({signature:t});if(n&&typeof t.yParity>"u")throw new M3({signature:t});if(t.r<0n||t.r>xO)throw new iie({value:t.r});if(t.s<0n||t.s>xO)throw new sie({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new D6({value:t.yParity})}function ZL(t){if(t.length!==130&&t.length!==132)throw new rie({signature:t});const e=BigInt(ao(t,0,32)),n=BigInt(ao(t,32,64)),r=(()=>{const i=+`0x${t.slice(130)}`;if(!Number.isNaN(i))try{return tie(i)}catch{throw new D6({value:i})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function eie(t){Xre(t);const e=t.r,n=t.s;return eE(wu(e,{size:32}),wu(n,{size:32}),typeof t.yParity=="number"?wu(nie(t.yParity),{size:1}):"0x")}function tie(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new oie({value:t})}function nie(t){if(t===0)return 27;if(t===1)return 28;throw new D6({value:t})}class rie extends bn{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Nu(wL(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class M3 extends bn{constructor({signature:e}){super(`Signature \`${X2(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class iie extends bn{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class sie extends bn{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class D6 extends bn{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class oie extends bn{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const aie=new TextDecoder,Jy=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[e,t.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[t.charCodeAt(0),e]))});function cie(t,e={}){const{pad:n=!0,url:r=!1}=e,i=new Uint8Array(Math.ceil(t.length/3)*4);for(let c=0,l=0;l<t.length;c+=4,l+=3){const u=(t[l]<<16)+(t[l+1]<<8)+(t[l+2]|0);i[c]=Jy[u>>18],i[c+1]=Jy[u>>12&63],i[c+2]=Jy[u>>6&63],i[c+3]=Jy[u&63]}const s=t.length%3,o=Math.floor(t.length/3)*4+(s&&s+1);let a=aie.decode(new Uint8Array(i.buffer,0,o));return n&&s===1&&(a+="=="),n&&s===2&&(a+="="),r&&(a=a.replaceAll("+","-").replaceAll("/","_")),a}function lie(t,e={}){return cie(_L(t),e)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YL={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},QL={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},JL={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},uie=Th(YL.p),die=Th(QL.p),hie=Th(JL.p),fie=M6({...YL,Fp:uie,lowS:!1},Are);M6({...QL,Fp:die,lowS:!1},Ire);M6({...JL,Fp:hie,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},xre);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DO=fie;Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function pie(t={}){const{flag:e=5,rpId:n=window.location.hostname,signCount:r=0}=t,i=AL(yL(n)),s=wu(e,{size:1}),o=wu(r,{size:4});return eE(i,s,o)}function gie(t){const{challenge:e,crossOrigin:n=!1,extraClientData:r,origin:i=window.location.origin}=t;return JSON.stringify({type:"webauthn.get",challenge:lie(e,{url:!0,pad:!1}),origin:i,crossOrigin:n,...r})}function mie(t){const{challenge:e,crossOrigin:n,extraClientData:r,flag:i,origin:s,rpId:o,signCount:a,userVerification:c="required"}=t,l=pie({flag:i,rpId:o,signCount:a}),u=gie({challenge:e,crossOrigin:n,extraClientData:r,origin:s}),d=AL(yL(u)),h=u.indexOf('"challenge"'),f=u.indexOf('"type"'),p={authenticatorData:l,clientDataJSON:u,challengeIndex:h,typeIndex:f,userVerificationRequired:c==="required"},g=eE(l,d);return{metadata:p,payload:g}}async function wie(t={}){const{extractable:e=!1}=t,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},e,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),i=rre(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:i}}async function yie(t){const{payload:e,privateKey:n}=t,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,EL(e)),i=CL(new Uint8Array(r)),s=SO(_O(i,0,32));let o=SO(_O(i,32,64));return o>DO.CURVE.n/2n&&(o=DO.CURVE.n-o),{r:s,s:o}}function bie(t,e){const n=typeof indexedDB<"u"?W2(t,e):void 0;return{getItem:async r=>{const i=await Lm(r,n);return i||null},removeItem:async r=>m6(r,n),setItem:async(r,i)=>g6(r,i,n)}}const vie="base-acc-sdk",Eie="keys",B6="activeId",eg=bie(vie,Eie);async function Cie(){const t=await wie({extractable:!1}),e=ao($6(t.publicKey),1);return await eg.setItem(e,t),await eg.setItem(B6,e),t}async function _ie(){const t=await eg.getItem(B6);if(!t)return null;const e=await eg.getItem(t);return e||null}async function Sie(){const t=await _ie();if(!t){const e=await Cie(),n=ao($6(e.publicKey),1);return await eg.setItem(n,e),await eg.setItem(B6,n),e}return t}async function Aie(){const t=await Sie(),e=ao($6(t.publicKey),1),n=async r=>{const{payload:i,metadata:s}=mie({challenge:r,origin:"https://keys.coinbase.com",userVerification:"preferred"}),o=await yie({payload:i,privateKey:t.privateKey});return{signature:eie(o),raw:{},webauthn:s}};return{id:e,publicKey:e,async sign({hash:r}){return n(r)},async signMessage({message:r}){return n(G4(r))},async signTypedData(r){return n(U2(r))},type:"webAuthn"}}async function Ev(){return{account:await Aie()}}const BO={storageKey:"ownPrivateKey",keyType:"private"},LO={storageKey:"ownPublicKey",keyType:"public"},UO={storageKey:"peerPublicKey",keyType:"public"};class xie{constructor(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(UO,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,xe.keys.clear()}async generateKeyPair(){const e=await dne();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(BO,e.privateKey),await this.storeKey(LO,e.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(BO)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(LO)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(UO)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await hne(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const n=xe.keys.get(e.storageKey);return n?sL(e.keyType,n):null}async storeKey(e,n){const r=await iL(e.keyType,n);xe.keys.set(e.storageKey,r)}}function K0(t,e){if(!(typeof t!="object"||t===null))return e.split(/[.[\]]+/).filter(Boolean).reduce((n,r)=>{if(typeof n=="object"&&n!==null)return n[r]},t)}function jO(t){var e;if(!Array.isArray(t.params))return null;switch(t.method){case"personal_sign":return t.params[1];case"eth_signTypedData_v4":return t.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return(e=t.params[0])===null||e===void 0?void 0:e.from;default:return null}}function Iie(t,e){if(!Array.isArray(t.params))throw Pe.rpc.invalidParams();const n=[...t.params];switch(t.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":n[0].from=e;break;case"eth_signTypedData_v4":n[0]=e;break;case"personal_sign":n[1]=e;break}return Object.assign(Object.assign({},t),{params:n})}function FO(t){var e;if(!t||!Array.isArray(t)||!(!((e=t[0])===null||e===void 0)&&e.chainId)||typeof t[0].chainId!="string"&&typeof t[0].chainId!="number")throw Pe.rpc.invalidParams()}function Oie(t){if(!t||!Array.isArray(t)||t.length!==1&&t.length!==2||typeof t[0]!="string"||!rv(t[0]))throw Pe.rpc.invalidParams();if(t.length===2){if(!Array.isArray(t[1]))throw Pe.rpc.invalidParams();for(const e of t[1])if(typeof e!="string"||!e.startsWith("0x"))throw Pe.rpc.invalidParams()}}function Cv(t,e){const n=Object.assign({},t);if(e&&t.method.startsWith("wallet_")){let r=K0(n,"params.0.capabilities");if(typeof r>"u"&&(r={}),typeof r!="object")throw Pe.rpc.invalidParams();r=Object.assign(Object.assign({},e),r),n.params&&Array.isArray(n.params)&&(n.params[0]=Object.assign(Object.assign({},n.params[0]),{capabilities:r}))}return n}async function dS(){var t;const e=(t=xe.subAccountsConfig.get())!==null&&t!==void 0?t:{},n={};if(e.enableAutoSubAccounts){const{account:r}=e.toOwnerAccount?await e.toOwnerAccount():await Ev();if(!r)throw Pe.provider.unauthorized("No owner account found");n.addSubAccount={account:{type:"create",keys:[{type:r.address?"address":"webauthn-p256",publicKey:r.address||r.publicKey}]}}}xe.subAccountsConfig.set({capabilities:n})}function Pie(t){if(!(t.method==="coinbase_fetchPermissions"&&t.params===void 0)){if(t.method==="coinbase_fetchPermissions"&&Array.isArray(t.params)&&t.params.length===1&&typeof t.params[0]=="object"){if(typeof t.params[0].account!="string"||!t.params[0].chainId.startsWith("0x"))throw Pe.rpc.invalidParams("FetchPermissions - Invalid params: params[0].account must be a hex string");if(typeof t.params[0].chainId!="string"||!t.params[0].chainId.startsWith("0x"))throw Pe.rpc.invalidParams("FetchPermissions - Invalid params: params[0].chainId must be a hex string");if(typeof t.params[0].spender!="string"||!t.params[0].spender.startsWith("0x"))throw Pe.rpc.invalidParams("FetchPermissions - Invalid params: params[0].spender must be a hex string");return}throw Pe.rpc.invalidParams()}}function Tie(t){var e,n,r;if(t.params!==void 0)return t;const i=(e=xe.getState().account.accounts)===null||e===void 0?void 0:e[0],s=(n=xe.getState().account.chain)===null||n===void 0?void 0:n.id,o=(r=xe.getState().subAccount)===null||r===void 0?void 0:r.address;if(!i||!o||!s)throw Pe.rpc.invalidParams("FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first");return{method:"coinbase_fetchPermissions",params:[{account:i,chainId:Pn(s),spender:o}]}}function kie({spendPermission:t,chainId:e}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:e,verifyingContract:PB},types:{SpendPermission:[{name:"account",type:"address"},{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermission",message:{account:t.account,spender:t.spender,token:t.token,allowance:t.allowance,period:t.period,start:t.start,end:t.end,salt:t.salt,extraData:t.extraData}}}function Nie({spendPermissionBatch:t,chainId:e}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:e,verifyingContract:PB},types:{SpendPermissionBatch:[{name:"account",type:"address"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"permissions",type:"PermissionDetails[]"}],PermissionDetails:[{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermissionBatch",message:{account:t.account,period:t.period,start:t.start,end:t.end,permissions:t.permissions.map(n=>({spender:n.spender,token:n.token,allowance:n.allowance,salt:n.salt,extraData:n.extraData}))}}}async function XL({client:t,id:e}){var n;const r=await TM(t,{id:e});if(r.status==="success")return(n=r.receipts)===null||n===void 0?void 0:n[0].transactionHash;throw Pe.rpc.internal("failed to send transaction")}function eU({calls:t,from:e,chainId:n,capabilities:r}){const i=OB.get().paymasterUrls;let s={method:"wallet_sendCalls",params:[{version:"1.0",calls:t,chainId:Pn(n),from:e,atomicRequired:!0,capabilities:r}]};return i?.[n]&&(s=Cv(s,{paymasterService:{url:i?.[n]}})),s}async function $ie(){const t=A6();return await new Promise(n=>{b6({dialogContext:"sub_account_insufficient_balance"}),t.presentItem({title:"Insufficient spend permission",message:"Your spend permission's remaining balance cannot cover this transaction. Please choose how to proceed:",onClose:()=>{DB({dialogContext:"sub_account_insufficient_balance"}),t.clear()},actionItems:[{text:"Edit spend permission",variant:"primary",onClick:()=>{qd({dialogContext:"sub_account_insufficient_balance",dialogAction:"create_permission"}),t.clear(),n("update_permission")}},{text:"Use primary account",variant:"secondary",onClick:()=>{qd({dialogContext:"sub_account_insufficient_balance",dialogAction:"continue_in_popup"}),t.clear(),n("continue_popup")}}]})})}function Rie({errorData:t,sourceAddress:e}){var n;const r=[];for(const[i,{amount:s,sources:o}]of Object.entries((n=t?.required)!==null&&n!==void 0?n:{})){if(o.filter(c=>lb(c.balance)>=lb(s)&&c.address.toLowerCase()===e?.toLowerCase()).length===0)throw new Error("Source address has insufficient balance for a token");r.push({token:i,requiredAmount:lb(s)})}return r}function Mie(t){return typeof t=="object"&&t!==null&&"calls"in t}function Die(t){return Array.isArray(t)&&t.length===1&&typeof t[0]=="object"&&t[0]!==null&&"to"in t[0]}function Bie(t){return gG(mG(gu(t)),0,16)}function Lie({attribution:t,dappOrigin:e}){if(t){if("auto"in t&&t.auto&&e)return Bie(e);if("dataSuffix"in t)return t.dataSuffix}}function Uie(t,e){var n;if(!Array.isArray(t?.params))return!1;const r=(n=t.params[0])===null||n===void 0?void 0:n.capabilities;return!r||typeof r!="object"?!1:e in r}function Xy(t,e){const n=t.filter(r=>r!==e);return[e,...n]}function e1(t,e){return[...t.filter(r=>r!==e),e]}async function jie(){const t=xe.spendPermissions.get(),e=xe.subAccounts.get(),n=xe.account.get().accounts;return n?{accounts:n?.map(i=>({address:i,capabilities:{subAccounts:e?[e]:void 0,spendPermissions:t.length>0?{permissions:t}:void 0}}))}:null}function Fie(t){return t.replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}function t1(t){const e=btoa(String.fromCharCode(...new Uint8Array(t)));return Fie(e)}function qie({webauthn:t,signature:e,id:n}){const r=ZL(e);return{id:n,rawId:t1(Jx(n)),response:{authenticatorData:t1(g5(t.authenticatorData)),clientDataJSON:t1(Jx(t.clientDataJSON)),signature:t1(Hie(r.r,r.s))},type:JSON.parse(t.clientDataJSON).type}}function Hie(t,e){const n=g5(f5(Pn(t))),r=g5(f5(Pn(e))),i=n.length,s=r.length,o=i+s+4,a=new Uint8Array(o+2);return a[0]=48,a[1]=o,a[2]=2,a[3]=i,a.set(n,4),a[i+4]=2,a[i+5]=s,a.set(r,i+6),a}var zie=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};async function Kie(t){const{owner:e,ownerIndex:n,address:r,client:i,factoryData:s}=t,o={abi:bG,address:yG,version:"0.6"},a={abi:TB,address:Kee};return wG({client:i,entryPoint:o,extend:{abi:jo,factory:a},async decodeCalls(c){const l=kM({abi:jo,data:c});if(l.functionName==="execute")return[{to:l.args[0],value:l.args[1],data:l.args[2]}];if(l.functionName==="executeBatch")return l.args[0].map(u=>({to:u.target,value:u.value,data:u.data}));throw new NM(`unable to decode calls for "${l.functionName}"`)},async encodeCalls(c){var l,u;return c.length===1?Ba({abi:jo,functionName:"execute",args:[c[0].to,(l=c[0].value)!==null&&l!==void 0?l:BigInt(0),(u=c[0].data)!==null&&u!==void 0?u:"0x"]}):Ba({abi:jo,functionName:"executeBatch",args:[c.map(d=>{var h,f;return{data:(h=d.data)!==null&&h!==void 0?h:"0x",target:d.to,value:(f=d.value)!==null&&f!==void 0?f:BigInt(0)}})]})},async getAddress(){return r},async getFactoryArgs(){return s?{factory:a.address,factoryData:s}:{factory:a.address,factoryData:s}},async getStubSignature(){return e.type==="webAuthn"?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":g0({ownerIndex:n,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"})},async sign(c){const l=await this.getAddress(),u=D3({address:l,chainId:i.chain.id,hash:c.hash}),d=await n1({hash:u,owner:e});return g0({ownerIndex:n,signature:d})},async signMessage(c){const{message:l}=c,u=await this.getAddress(),d=D3({address:u,chainId:i.chain.id,hash:G4(l)}),h=await n1({hash:d,owner:e});return g0({ownerIndex:n,signature:h})},async signTypedData(c){const{domain:l,types:u,primaryType:d,message:h}=c,f=await this.getAddress(),p=D3({address:f,chainId:i.chain.id,hash:U2({domain:l,message:h,primaryType:d,types:u})}),g=await n1({hash:p,owner:e});return g0({ownerIndex:n,signature:g})},async signUserOperation(c){const{chainId:l=i.chain.id}=c,u=zie(c,["chainId"]),d=await this.getAddress(),h=vG({chainId:l,entryPointAddress:o.address,entryPointVersion:o.version,userOperation:Object.assign(Object.assign({},u),{sender:d})}),f=await n1({hash:h,owner:e});return g0({ownerIndex:n,signature:f})},userOperation:{async estimateGas(c){var l;if(e.type==="webAuthn")return{verificationGasLimit:BigInt(Math.max(Number((l=c.verificationGasLimit)!==null&&l!==void 0?l:BigInt(0)),8e5))}}}})}async function n1({hash:t,owner:e}){if(e.type==="webAuthn"){const{signature:n,webauthn:r}=await e.sign({hash:t});return Vie({signature:n,webauthn:r})}if(e.sign)return e.sign({hash:t});throw new NM("`owner` does not support raw sign.")}function D3({address:t,chainId:e,hash:n}){return U2({domain:{chainId:e,name:"Coinbase Smart Wallet",verifyingContract:t,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:n}})}function Vie({webauthn:t,signature:e}){const{r:n,s:r}=ZL(e);return $M([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:t.authenticatorData,clientDataJSON:EG(t.clientDataJSON),challengeIndex:BigInt(t.challengeIndex),typeIndex:BigInt(t.typeIndex),r:n,s:r}])}function g0(t){const{ownerIndex:e=0}=t,n=(()=>{if(CG(t.signature)!==65)return t.signature;const r=_G(t.signature);return SG(["bytes32","bytes32","uint8"],[r.r,r.s,r.yParity===0?27:28])})();return $M([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:e,signatureData:n}])}async function Wie({address:t,client:e,factory:n,factoryData:r,owner:i,ownerIndex:s,parentAddress:o,attribution:a}){var c;const l={address:t,factory:n,factoryData:r},u=(c=e.chain)===null||c===void 0?void 0:c.id;if(!u)throw Pe.rpc.internal("chainId not found");const d=await Kie({owner:i,ownerIndex:s??1,address:t,client:e,factoryData:r}),h=async f=>{var p,g,m,w,b,y;try{switch(f.method){case"wallet_addSubAccount":return l;case"eth_accounts":return[l.address];case"eth_coinbase":return l.address;case"net_version":return u.toString();case"eth_chainId":return Pn(u);case"eth_sendTransaction":{Rl(f.params);const _=f.params[0];lo(_.to,Pe.rpc.invalidParams("to is required"));const A={to:_.to,data:oS((p=_.data)!==null&&p!==void 0?p:"0x",!0),value:oS((g=_.value)!==null&&g!==void 0?g:"0x",!0),from:(m=_.from)!==null&&m!==void 0?m:l.address},T=eU({calls:[A],chainId:u,from:A.from}),$=await h(T);return XL({client:e,id:$})}case"wallet_sendCalls":{Rl(f.params);const _=K0(f.params[0],"chainId");if(!_)throw Pe.rpc.invalidParams("chainId is required");if(!qf(_))throw Pe.rpc.invalidParams("chainId must be a hex encoded integer");if(!f.params[0])throw Pe.rpc.invalidParams("params are required");if(!("calls"in f.params[0]))throw Pe.rpc.invalidParams("calls are required");let A={method:"wallet_prepareCalls",params:[{version:"1.0",calls:f.params[0].calls,chainId:_,from:l.address,capabilities:"capabilities"in f.params[0]?f.params[0].capabilities:{}}]};o&&(A=Cv(A,{funding:[{type:"spendPermission",data:{autoApply:!0,sources:[o],preference:"PREFER_DIRECT_BALANCE"}}]}));let T=await h(A);const $=await((b=(w=i).sign)===null||b===void 0?void 0:b.call(w,{hash:nv(T.signatureRequest.hash)}));let D;if(!$)throw Pe.rpc.internal("signature not found");return qf($)?D={type:"secp256k1",data:{address:i.address,signature:$}}:D={type:"webauthn",data:{signature:JSON.stringify(qie(Object.assign({id:(y=i.id)!==null&&y!==void 0?y:"1"},$))),publicKey:i.publicKey}},(await h({method:"wallet_sendPreparedCalls",params:[{version:"1.0",type:T.type,data:T.userOp,chainId:T.chainId,signature:D}]}))[0]}case"wallet_sendPreparedCalls":{Rl(f.params);const _=K0(f.params[0],"chainId");if(!_)throw Pe.rpc.invalidParams("chainId is required");if(!qf(_))throw Pe.rpc.invalidParams("chainId must be a hex encoded integer");return await e.request({method:"wallet_sendPreparedCalls",params:f.params})}case"wallet_prepareCalls":{Rl(f.params);const _=K0(f.params[0],"chainId");if(!_)throw Pe.rpc.invalidParams("chainId is required");if(!qf(_))throw Pe.rpc.invalidParams("chainId must be a hex encoded integer");if(!f.params[0])throw Pe.rpc.invalidParams("params are required");if(!K0(f.params[0],"calls"))throw Pe.rpc.invalidParams("calls are required");const A=f.params[0];return a&&A.capabilities&&!("attribution"in A.capabilities)&&(A.capabilities.attribution=a),await e.request({method:"wallet_prepareCalls",params:[Object.assign(Object.assign({},f.params[0]),{chainId:_})]})}case"personal_sign":{if(Rl(f.params),!qf(f.params[0]))throw Pe.rpc.invalidParams("message must be a hex encoded string");const _=nv(f.params[0]);return d.signMessage({message:_})}case"eth_signTypedData_v4":{Rl(f.params);const _=typeof f.params[1]=="string"?JSON.parse(f.params[1]):f.params[1];return d.signTypedData(_)}case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"wallet_addEthereumChain":case"wallet_switchEthereumChain":default:throw Pe.rpc.methodNotSupported()}}catch(_){if(MB(_)){const A=Yee(_);if(A)throw A}throw _}};return{request:h}}async function tU({address:t,client:e,publicKey:n,factory:r,factoryData:i}){if(!await AG(e,{address:t})&&r&&i){const a=kM({abi:TB,data:i});if(a.functionName!=="createAccount")throw Pe.rpc.internal("unknown factory function");const[c]=a.args;return c.findIndex(l=>l.toLowerCase()===qO(n).toLowerCase())}const o=await h5(e,{address:t,abi:jo,functionName:"ownerCount"});for(let a=Number(o)-1;a>=0;a--){const c=await h5(e,{address:t,abi:jo,functionName:"ownerAtIndex",args:[BigInt(a)]}),l=qO(n);if(c.toLowerCase()===l.toLowerCase())return a}return-1}function qO(t){return rv(t)?xG(t):t}async function Gie(){var t,e;const n=(e=(t=xe.config.get().metadata)===null||t===void 0?void 0:t.appName)!==null&&e!==void 0?e:"App",r=A6();return new Promise(i=>{b6({dialogContext:"sub_account_add_owner"}),r.presentItem({title:`Re-authorize ${n}`,message:`${n} has lost access to your account. Please sign at the next step to re-authorize ${n}`,onClose:()=>{DB({dialogContext:"sub_account_add_owner"}),i("cancel")},actionItems:[{text:"Continue",variant:"primary",onClick:()=>{qd({dialogContext:"sub_account_add_owner",dialogAction:"confirm"}),r.clear(),i("authenticate")}},{text:"Not now",variant:"secondary",onClick:()=>{qd({dialogContext:"sub_account_add_owner",dialogAction:"cancel"}),r.clear(),i("cancel")}}]})})}async function Zie({ownerAccount:t,globalAccountRequest:e}){var n,r;const i=xe.account.get(),s=xe.subAccounts.get(),o=(n=i.accounts)===null||n===void 0?void 0:n.find(p=>p.toLowerCase()!==s?.address.toLowerCase());lo(o,Pe.provider.unauthorized("no global account")),lo((r=i.chain)===null||r===void 0?void 0:r.id,Pe.provider.unauthorized("no chain id")),lo(s?.address,Pe.provider.unauthorized("no sub account"));const a=[];if(t.type==="local"&&t.address&&a.push({to:s.address,data:Ba({abi:jo,functionName:"addOwnerAddress",args:[t.address]}),value:gu(0)}),t.publicKey){const[p,g]=RM([{type:"bytes32"},{type:"bytes32"}],t.publicKey);a.push({to:s.address,data:Ba({abi:jo,functionName:"addOwnerPublicKey",args:[p,g]}),value:gu(0)})}const c={method:"wallet_sendCalls",params:[{version:"1",calls:a,chainId:Pn(84532),from:o}]};if(await Gie()==="cancel")throw Pe.provider.unauthorized("user cancelled");const u=await e(c),d=nL(i.chain.id);if(lo(d,Pe.rpc.internal(`client not found for chainId ${i.chain.id}`)),(await TM(d,{id:u})).status!=="success")throw Pe.rpc.internal("add owner call failed");const f=await tU({address:s.address,publicKey:t.type==="local"&&t.address?t.address:t.publicKey,client:d});if(f===-1)throw Pe.rpc.internal("failed to find owner index");return f}async function Yie({errorData:t,globalAccountAddress:e,subAccountAddress:n,client:r,request:i,subAccountRequest:s,globalAccountRequest:o}){var a;const c=(a=r.chain)===null||a===void 0?void 0:a.id;lo(c,Pe.rpc.internal("invalid chainId"));const l=Rie({errorData:t,sourceAddress:e}),u=await $ie();if(u==="cancel")throw new Error("User cancelled funding");let d;const h=60*60*24,f=3;if(u==="update_permission"){if(l.length===1){const y=l[0],_=kie({spendPermission:{token:y.token,allowance:Pn(y.requiredAmount*BigInt(f)),period:h,account:e,spender:n,start:0,end:0xffffffffffff,salt:Pn(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),extraData:"0x"},chainId:c});d={method:"eth_signTypedData_v4",params:[e,_]}}else{const y=Nie({spendPermissionBatch:{account:e,period:h,start:0,end:0xffffffffffff,permissions:l.map(_=>({token:_.token,allowance:Pn(_.requiredAmount*BigInt(f)),period:h,account:e,spender:n,salt:"0x0",extraData:"0x"}))},chainId:c});d={method:"eth_signTypedData_v4",params:[e,y]}}try{await o(d)}catch(y){throw console.error(y),new Error("User denied spend permission request")}return s(i)}const p=l.map(y=>y.token.toLowerCase()==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE".toLowerCase()?{to:n,value:Pn(y.requiredAmount),data:"0x"}:{to:y.token,value:"0x0",data:Ba({abi:IG,functionName:"transfer",args:[n,y.requiredAmount]})});let g;if(i.method==="wallet_sendCalls"&&Mie(i.params))g=i.params[0];else if(i.method==="eth_sendTransaction"&&Die(i.params))g=eU({calls:[i.params[0]],chainId:c,from:i.params[0].from}).params[0];else throw new Error("Could not get original call");const m=Ba({abi:jo,functionName:"executeBatch",args:[g.calls.map(y=>{var _,A;return{target:y.to,value:lb((_=y.value)!==null&&_!==void 0?_:"0x0"),data:(A=y.data)!==null&&A!==void 0?A:"0x"}})]}),w=[...p,{data:m,to:n,value:"0x0"}],b=await o({method:"wallet_sendCalls",params:[Object.assign(Object.assign({},g),{calls:w,from:e})]});return i.method==="eth_sendTransaction"?XL({client:r,id:b}):b}class Qie{constructor(e){var n,r,i,s;this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new xie;const{account:o,chains:a}=xe.getState();this.accounts=(n=o.accounts)!==null&&n!==void 0?n:[],this.chain=(r=o.chain)!==null&&r!==void 0?r:{id:(s=(i=e.metadata.appChainIds)===null||i===void 0?void 0:i[0])!==null&&s!==void 0?s:1},a&&mO(a)}get isConnected(){return this.accounts.length>0}async handshake(e){var n,r,i;const s=gc.get(e);Yte({method:e.method,correlationId:s});try{await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const o=await this.createRequestMessage({handshake:{method:e.method,params:(i=e.params)!==null&&i!==void 0?i:[]}},s),a=await this.communicator.postRequestAndWaitForResponse(o);if("failure"in a.content)throw a.content.failure;const c=await sL("public",a.sender);await this.keyManager.setPeerPublicKey(c);const l=await this.decryptResponseMessage(a);this.handleResponse(e,l),Jte({method:e.method,correlationId:s})}catch(o){throw Qte({method:e.method,correlationId:s,errorMessage:p0(o)}),o}}async request(e){const n=gc.get(e);Xte({method:e.method,correlationId:n});try{const r=await this._request(e);return tne({method:e.method,correlationId:n}),r}catch(r){throw ene({method:e.method,correlationId:n,errorMessage:p0(r)}),r}}async _request(e){var n,r,i,s,o,a,c,l,u,d;if(this.accounts.length===0)switch(e.method){case"wallet_switchEthereumChain":{FO(e.params),this.chain.id=Number(e.params[0].chainId);return}case"wallet_connect":{await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n)),await dS();let h={};Uie(e,"addSubAccount")&&(h=(s=(i=xe.subAccountsConfig.get())===null||i===void 0?void 0:i.capabilities)!==null&&s!==void 0?s:{});const f=Cv(e,h);return this.sendRequestToPopup(f)}case"wallet_sendCalls":case"wallet_sign":return this.sendRequestToPopup(e);default:throw Pe.provider.unauthorized()}if(this.shouldRequestUseSubAccountSigner(e)){const h=gc.get(e);nne({method:e.method,correlationId:h});try{const f=await this.sendRequestToSubAccountSigner(e);return rne({method:e.method,correlationId:h}),f}catch(f){throw ine({method:e.method,correlationId:h,errorMessage:p0(f)}),f}}switch(e.method){case"eth_requestAccounts":case"eth_accounts":{const h=xe.subAccounts.get(),f=xe.subAccountsConfig.get();return h?.address&&(this.accounts=f?.enableAutoSubAccounts?Xy(this.accounts,h.address):e1(this.accounts,h.address)),(o=this.callback)===null||o===void 0||o.call(this,"connect",{chainId:Pn(this.chain.id)}),this.accounts}case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return Pn(this.chain.id);case"wallet_getCapabilities":return this.handleGetCapabilitiesRequest(e);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);case"wallet_connect":{const h=await jie();if(h)return h;await((c=(a=this.communicator).waitForPopupLoaded)===null||c===void 0?void 0:c.call(a)),await dS();const f=xe.subAccountsConfig.get(),p=Cv(e,(l=f?.capabilities)!==null&&l!==void 0?l:{}),g=await this.sendRequestToPopup(p);return(u=this.callback)===null||u===void 0||u.call(this,"connect",{chainId:Pn(this.chain.id)}),g}case"wallet_getSubAccounts":{const h=xe.subAccounts.get();if(h?.address)return{subAccounts:[h]};if(!this.chain.rpcUrl)throw Pe.rpc.internal("No RPC URL set for chain");const f=await wb(e,this.chain.rpcUrl);if(Rl(f.subAccounts,"subAccounts"),f.subAccounts.length>0){Ky(f.subAccounts[0]);const p=f.subAccounts[0];xe.subAccounts.set({address:p.address,factory:p.factory,factoryData:p.factoryData})}return f}case"wallet_addSubAccount":return this.addSubAccount(e);case"coinbase_fetchPermissions":{Pie(e);const h=Tie(e),f=await wb(h,IB),p=cb((d=h.params)===null||d===void 0?void 0:d[0].chainId);return xe.spendPermissions.set(f.permissions.map(g=>Object.assign(Object.assign({},g),{chainId:p}))),f}default:if(!this.chain.rpcUrl)throw Pe.rpc.internal("No RPC URL set for chain");return wb(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var n,r;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const i=await this.sendEncryptedRequest(e),s=await this.decryptResponseMessage(i);return this.handleResponse(e,s)}async handleResponse(e,n){var r,i,s,o,a;const c=n.result;if("error"in c)throw c.error;switch(e.method){case"eth_requestAccounts":{const l=c.value;this.accounts=l,xe.account.set({accounts:l,chain:this.chain}),(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",l);break}case"wallet_connect":{const l=c.value,u=l.accounts.map(w=>w.address);this.accounts=u,xe.account.set({accounts:u});const d=l.accounts.at(0),h=d?.capabilities;if(h?.subAccounts){const w=h?.subAccounts;Rl(w,"subAccounts"),Ky(w[0]),xe.subAccounts.set({address:w[0].address,factory:w[0].factory,factoryData:w[0].factoryData})}let f=[this.accounts[0]];const p=xe.subAccounts.get(),g=xe.subAccountsConfig.get();p?.address&&(this.accounts=g?.enableAutoSubAccounts?Xy(this.accounts,p.address):e1(this.accounts,p.address));const m=(s=(i=l?.accounts)===null||i===void 0?void 0:i[0].capabilities)===null||s===void 0?void 0:s.spendPermissions;m&&"permissions"in m&&xe.spendPermissions.set(m?.permissions),(o=this.callback)===null||o===void 0||o.call(this,"accountsChanged",f);break}case"wallet_addSubAccount":{Ky(c.value);const l=c.value;xe.subAccounts.set(l);const u=xe.subAccountsConfig.get();this.accounts=u?.enableAutoSubAccounts?Xy(this.accounts,l.address):e1(this.accounts,l.address),(a=this.callback)===null||a===void 0||a.call(this,"accountsChanged",this.accounts);break}}return c.value}async cleanup(){var e,n;const r=xe.config.get().metadata;await this.keyManager.clear(),xe.account.clear(),xe.subAccounts.clear(),xe.spendPermissions.clear(),xe.chains.clear(),this.accounts=[],this.chain={id:(n=(e=r?.appChainIds)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:1}}async handleSwitchChainRequest(e){FO(e.params);const n=Zte(e.params[0].chainId);if(this.updateChain(n))return null;const i=await this.sendRequestToPopup(e);return i===null&&this.updateChain(n),i}async handleGetCapabilitiesRequest(e){Oie(e.params);const n=e.params[0],r=e.params[1];if(!this.accounts.some(a=>OG(a,n)))throw Pe.provider.unauthorized("no active account found when getting capabilities");const i=xe.getState().account.capabilities;if(!i)return{};if(!r||r.length===0)return i;const s=new Set(r.map(a=>cb(a)));return Object.fromEntries(Object.entries(i).filter(([a])=>{try{const c=cb(a);return s.has(c)}catch{return!1}}))}async sendEncryptedRequest(e){const n=await this.keyManager.getSharedSecret();if(!n)throw Pe.provider.unauthorized("No shared secret found when encrypting request");const r=await gne({action:e,chainId:this.chain.id},n),i=gc.get(e),s=await this.createRequestMessage({encrypted:r},i);return this.communicator.postRequestAndWaitForResponse(s)}async createRequestMessage(e,n){const r=await iL("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),correlationId:n,sender:r,content:e,timestamp:new Date}}async decryptResponseMessage(e){var n,r,i;const s=e.content;if("failure"in s)throw s.failure;const o=await this.keyManager.getSharedSecret();if(!o)throw Pe.provider.unauthorized("Invalid session: no shared secret found when decrypting response");const a=await mne(s.encrypted,o),c=(n=a.data)===null||n===void 0?void 0:n.chains;if(c){const u=(r=a.data)===null||r===void 0?void 0:r.nativeCurrencies,d=Object.entries(c).map(([h,f])=>{const p=u?.[Number(h)];return Object.assign({id:Number(h),rpcUrl:f},p?{nativeCurrency:p}:{})});xe.chains.set(d),this.updateChain(this.chain.id,d),mO(d)}const l=(i=a.data)===null||i===void 0?void 0:i.capabilities;return l&&xe.account.set({capabilities:l}),a}updateChain(e,n){var r;const i=xe.getState(),s=n??i.chains,o=s?.find(a=>a.id===e);return o?(o!==this.chain&&(this.chain=o,xe.account.set({chain:o}),(r=this.callback)===null||r===void 0||r.call(this,"chainChanged",XB(o.id))),!0):!1}async addSubAccount(e){var n,r,i,s;const a=xe.getState().subAccount,c=xe.subAccountsConfig.get();if(a?.address)return this.accounts=c?.enableAutoSubAccounts?Xy(this.accounts,a.address):e1(this.accounts,a.address),(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",this.accounts),a;if(await((i=(r=this.communicator).waitForPopupLoaded)===null||i===void 0?void 0:i.call(r)),Array.isArray(e.params)&&e.params.length>0&&e.params[0].account&&e.params[0].account.type==="create"){let u;if(e.params[0].account.keys&&e.params[0].account.keys.length>0)u=e.params[0].account.keys;else{const d=(s=xe.subAccountsConfig.get())!==null&&s!==void 0?s:{},{account:h}=d.toOwnerAccount?await d.toOwnerAccount():await Ev();if(!h)throw Pe.provider.unauthorized("could not get subaccount owner account when adding sub account");u=[{type:h.address?"address":"webauthn-p256",publicKey:h.address||h.publicKey}]}e.params[0].account.keys=u}const l=await this.sendRequestToPopup(e);return Ky(l),l}shouldRequestUseSubAccountSigner(e){const n=jO(e),r=xe.subAccounts.get();return n?n.toLowerCase()===r?.address.toLowerCase():!1}async sendRequestToSubAccountSigner(e){var n;const r=xe.subAccounts.get(),i=xe.subAccountsConfig.get(),s=xe.config.get();lo(r?.address,Pe.provider.unauthorized("no active sub account when sending request to sub account signer"));const o=i?.toOwnerAccount?await i.toOwnerAccount():await Ev();lo(o?.account,Pe.provider.unauthorized("no active sub account owner when sending request to sub account signer")),jO(e)===void 0&&(e=Iie(e,r.address));const c=nL(this.chain.id);lo(c,Pe.rpc.internal(`client not found for chainId ${this.chain.id} when sending request to sub account signer`));const l=this.accounts.find(p=>p.toLowerCase()!==r.address.toLowerCase());lo(l,Pe.provider.unauthorized("no global account found when sending request to sub account signer"));const u=Lie({attribution:(n=s.preference)===null||n===void 0?void 0:n.attribution,dappOrigin:window.location.origin}),d=o.account.type==="local"?o.account.address:o.account.publicKey;let h=await tU({address:r.address,factory:r.factory,factoryData:r.factoryData,publicKey:d,client:c});if(h===-1){const p=gc.get(e);sne({method:e.method,correlationId:p});try{h=await Zie({ownerAccount:o.account,globalAccountRequest:this.sendRequestToPopup.bind(this)}),one({method:e.method,correlationId:p})}catch(g){return ane({method:e.method,correlationId:p,errorMessage:p0(g)}),Pe.provider.unauthorized("failed to add sub account owner when sending request to sub account signer")}}const{request:f}=await Wie({address:r.address,owner:o.account,client:c,factory:r.factory,factoryData:r.factoryData,parentAddress:l,attribution:u?{suffix:u}:void 0,ownerIndex:h});try{return await f(e)}catch(p){let g;if(MB(p))g=JSON.parse(p.details);else if(JI(p))g=p;else throw p;if(!(JI(g)&&g.data)||!g.data)throw p;const m=gc.get(e);cne({method:e.method,correlationId:m});try{const w=await Yie({errorData:g.data,globalAccountAddress:l,subAccountAddress:r.address,client:c,request:e,subAccountRequest:f,globalAccountRequest:this.request.bind(this)});return lne({method:e.method,correlationId:m}),w}catch(w){throw console.error(w),une({method:e.method,correlationId:m,errorMessage:p0(w)}),p}}}}var Jie=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Xie extends Lte{constructor(e){var{metadata:n}=e,r=e.preference,{walletUrl:i}=r,s=Jie(r,["walletUrl"]);super(),this.isBaseAccount=!0,this.communicator=new Rte({url:i,metadata:n,preference:s}),this.signer=new Qie({metadata:n,communicator:this.communicator,callback:this.emit.bind(this)})}async request(e){const n=crypto.randomUUID();gc.set(e,n),Ute({method:e.method,correlationId:n});try{const r=await this._request(e);return Fte({method:e.method,correlationId:n}),r}catch(r){throw jte({method:e.method,correlationId:n,errorMessage:r instanceof Error?r.message:""}),r}finally{gc.delete(e)}}async _request(e){var n,r;try{if(wne(e),!this.signer.isConnected)switch(e.method){case"eth_requestAccounts":{await this.signer.handshake({method:"handshake"}),await dS(),await this.signer.request({method:"wallet_connect",params:[{version:"1",capabilities:Object.assign({},(r=(n=xe.subAccountsConfig.get())===null||n===void 0?void 0:n.capabilities)!==null&&r!==void 0?r:{})}]});break}case"wallet_connect":return await this.signer.handshake({method:"handshake"}),await this.signer.request(e);case"wallet_sendCalls":case"wallet_sign":try{return await this.signer.handshake({method:"handshake"}),await this.signer.request(e)}finally{await this.signer.cleanup()}case"wallet_getCallsStatus":return await wb(e,IB);case"eth_accounts":return[];case"net_version":return 1;case"eth_chainId":return XB(1);default:throw Pe.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(e)}catch(i){const{code:s}=i;return s===kn.provider.unauthorized&&await this.disconnect(),Promise.reject(Mte(i))}}async disconnect(){await this.signer.cleanup(),gc.clear(),this.emit("disconnect",Pe.provider.disconnected("User initiated disconnection"))}}const ese="isCoinbaseBrowser";function tse(){var t,e;const n=(t=window.ethereum)!==null&&t!==void 0?t:(e=window.top)===null||e===void 0?void 0:e.ethereum;return n?.[ese]?n:null}function nse(t){var e,n,r,i;const s={metadata:{appName:t.appName||"App",appLogoUrl:t.appLogoUrl||"",appChainIds:t.appChainIds||[]},preference:(e=t.preference)!==null&&e!==void 0?e:{},paymasterUrls:t.paymasterUrls};!((n=t.subAccounts)===null||n===void 0)&&n.toOwnerAccount&&XI(t.subAccounts.toOwnerAccount),xe.subAccountsConfig.set({toOwnerAccount:(r=t.subAccounts)===null||r===void 0?void 0:r.toOwnerAccount,enableAutoSubAccounts:(i=t.subAccounts)===null||i===void 0?void 0:i.enableAutoSubAccounts}),xe.config.set(s),xe.persist.rehydrate(),Xee(),tte(s.preference),s.preference.telemetry!==!1&&Hee();let o=null;const a={getProvider:()=>{var c;return o||(o=(c=tse())!==null&&c!==void 0?c:new Xie(s)),o},subAccount:{async create(c){var l;return await((l=a.getProvider())===null||l===void 0?void 0:l.request({method:"wallet_addSubAccount",params:[{version:"1",account:c}]}))},async get(){var c,l;const u=xe.subAccounts.get();if(u?.address)return u;const h=(l=(await((c=a.getProvider())===null||c===void 0?void 0:c.request({method:"wallet_connect",params:[{version:"1",capabilities:{}}]}))).accounts[0].capabilities)===null||l===void 0?void 0:l.subAccounts;return Array.isArray(h)?h[0]:null},addOwner:async({address:c,publicKey:l,chainId:u})=>{var d,h;const f=xe.subAccounts.get(),p=xe.account.get();lo(p,new Error("account does not exist")),lo(f?.address,new Error("subaccount does not exist"));const g=[];if(l){const[m,w]=RM([{type:"bytes32"},{type:"bytes32"}],l);g.push({to:f.address,data:Ba({abi:jo,functionName:"addOwnerPublicKey",args:[m,w]}),value:gu(0)})}return c&&g.push({to:f.address,data:Ba({abi:jo,functionName:"addOwnerAddress",args:[c]}),value:gu(0)}),await((d=a.getProvider())===null||d===void 0?void 0:d.request({method:"wallet_sendCalls",params:[{calls:g,chainId:gu(u),from:(h=p.accounts)===null||h===void 0?void 0:h[0],version:"1"}]}))},setToOwnerAccount(c){XI(c),xe.subAccountsConfig.set({toOwnerAccount:c})}}};return a}const rse=Object.freeze(Object.defineProperty({__proto__:null,createBaseAccountSDK:nse,getCryptoKeyAccount:Ev},Symbol.toStringTag,{value:"Module"}));var L6={exports:{}},_p=typeof Reflect=="object"?Reflect:null,HO=_p&&typeof _p.apply=="function"?_p.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},yb;_p&&typeof _p.ownKeys=="function"?yb=_p.ownKeys:Object.getOwnPropertySymbols?yb=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:yb=function(e){return Object.getOwnPropertyNames(e)};function ise(t){console&&console.warn&&console.warn(t)}var nU=Number.isNaN||function(e){return e!==e};function Zt(){Zt.init.call(this)}L6.exports=Zt;L6.exports.once=cse;Zt.EventEmitter=Zt;Zt.prototype._events=void 0;Zt.prototype._eventsCount=0;Zt.prototype._maxListeners=void 0;var zO=10;function tE(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Zt,"defaultMaxListeners",{enumerable:!0,get:function(){return zO},set:function(t){if(typeof t!="number"||t<0||nU(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");zO=t}});Zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||nU(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rU(t){return t._maxListeners===void 0?Zt.defaultMaxListeners:t._maxListeners}Zt.prototype.getMaxListeners=function(){return rU(this)};Zt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")HO(c,this,n);else for(var l=c.length,u=cU(c,l),r=0;r<l;++r)HO(u[r],this,n);return!0};function iU(t,e,n,r){var i,s,o;if(tE(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=rU(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ise(a)}return t}Zt.prototype.addListener=function(e,n){return iU(this,e,n,!1)};Zt.prototype.on=Zt.prototype.addListener;Zt.prototype.prependListener=function(e,n){return iU(this,e,n,!0)};function sse(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sU(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=sse.bind(r);return i.listener=n,r.wrapFn=i,i}Zt.prototype.once=function(e,n){return tE(n),this.on(e,sU(this,e,n)),this};Zt.prototype.prependOnceListener=function(e,n){return tE(n),this.prependListener(e,sU(this,e,n)),this};Zt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(tE(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():ose(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Zt.prototype.off=Zt.prototype.removeListener;Zt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function oU(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?ase(i):cU(i,i.length)}Zt.prototype.listeners=function(e){return oU(this,e,!0)};Zt.prototype.rawListeners=function(e){return oU(this,e,!1)};Zt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):aU.call(t,e)};Zt.prototype.listenerCount=aU;function aU(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Zt.prototype.eventNames=function(){return this._eventsCount>0?yb(this._events):[]};function cU(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ose(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ase(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function cse(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}lU(t,e,s,{once:!0}),e!=="error"&&lse(t,i,{once:!0})})}function lse(t,e,n){typeof t.on=="function"&&lU(t,"error",e,n)}function lU(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Kn=L6.exports;const Vg=Lu(Kn);var hS={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Mn<"u"&&Mn,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Mn<"u"&&Mn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&u.indexOf(Object.prototype.toString.call(v))>-1};function h(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function f(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var S={next:function(){var N=v.shift();return{done:N===void 0,value:N}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(v){this.map={},v instanceof g?v.forEach(function(S,N){this.append(N,S)},this):Array.isArray(v)?v.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(S){this.append(S,v[S])},this)}g.prototype.append=function(v,S){v=h(v),S=f(S);var N=this.map[v];this.map[v]=N?N+", "+S:S},g.prototype.delete=function(v){delete this.map[h(v)]},g.prototype.get=function(v){return v=h(v),this.has(v)?this.map[v]:null},g.prototype.has=function(v){return this.map.hasOwnProperty(h(v))},g.prototype.set=function(v,S){this.map[h(v)]=f(S)},g.prototype.forEach=function(v,S){for(var N in this.map)this.map.hasOwnProperty(N)&&v.call(S,this.map[N],N,this)},g.prototype.keys=function(){var v=[];return this.forEach(function(S,N){v.push(N)}),p(v)},g.prototype.values=function(){var v=[];return this.forEach(function(S){v.push(S)}),p(v)},g.prototype.entries=function(){var v=[];return this.forEach(function(S,N){v.push([N,S])}),p(v)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function w(v){return new Promise(function(S,N){v.onload=function(){S(v.result)},v.onerror=function(){N(v.error)}})}function b(v){var S=new FileReader,N=w(S);return S.readAsArrayBuffer(v),N}function y(v){var S=new FileReader,N=w(S),E=/charset=([A-Za-z0-9_-]+)/.exec(v.type),C=E?E[1]:"utf-8";return S.readAsText(v,C),N}function _(v){for(var S=new Uint8Array(v),N=new Array(S.length),E=0;E<S.length;E++)N[E]=String.fromCharCode(S[E]);return N.join("")}function A(v){if(v.slice)return v.slice(0);var S=new Uint8Array(v.byteLength);return S.set(new Uint8Array(v)),S.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&l(v)?(this._bodyArrayBuffer=A(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=A(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=m(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D(v){var S=v.toUpperCase();return $.indexOf(S)>-1?S:v}function O(v,S){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var N=S.body;if(v instanceof O){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,S.headers||(this.headers=new g(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!N&&v._bodyInit!=null&&(N=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=D(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var E=/([?&])_=[^&]*/;if(E.test(this.url))this.url=this.url.replace(E,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function j(v){var S=new FormData;return v.trim().split("&").forEach(function(N){if(N){var E=N.split("="),C=E.shift().replace(/\+/g," "),P=E.join("=").replace(/\+/g," ");S.append(decodeURIComponent(C),decodeURIComponent(P))}}),S}function F(v){var S=new g,N=v.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(E){return E.indexOf(`
`)===0?E.substr(1,E.length):E}).forEach(function(E){var C=E.split(":"),P=C.shift().trim();if(P){var M=C.join(":").trim();try{S.append(P,M)}catch(I){console.warn("Response "+I.message)}}}),S}T.call(O.prototype);function L(v,S){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(v)}T.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var v=new L(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var B=[301,302,303,307,308];L.redirect=function(v,S){if(B.indexOf(S)===-1)throw new RangeError("Invalid status code");return new L(null,{status:S,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,N){this.message=S,this.name=N;var E=Error(S);this.stack=E.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function x(v,S){return new Promise(function(N,E){var C=new O(v,S);if(C.signal&&C.signal.aborted)return E(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function M(){P.abort()}P.onload=function(){var R={statusText:P.statusText,headers:F(P.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(P.status<200||P.status>599)?R.status=200:R.status=P.status,R.url="responseURL"in P?P.responseURL:R.headers.get("X-Request-URL");var U="response"in P?P.response:P.responseText;setTimeout(function(){N(new L(U,R))},0)},P.onerror=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){E(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){E(new o.DOMException("Aborted","AbortError"))},0)};function I(R){try{return R===""&&a.location.href?a.location.href:R}catch{return R}}if(P.open(C.method,I(C.url),!0),C.credentials==="include"?P.withCredentials=!0:C.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var k=[];Object.getOwnPropertyNames(S.headers).forEach(function(R){k.push(h(R)),P.setRequestHeader(R,f(S.headers[R]))}),C.headers.forEach(function(R,U){k.indexOf(U)===-1&&P.setRequestHeader(U,R)})}else C.headers.forEach(function(R,U){P.setRequestHeader(U,R)});C.signal&&(C.signal.addEventListener("abort",M),P.onreadystatechange=function(){P.readyState===4&&C.signal.removeEventListener("abort",M)}),P.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return x.polyfill=!0,a.fetch||(a.fetch=x,a.Headers=g,a.Request=O,a.Response=L),o.Headers=g,o.Request=O,o.Response=L,o.fetch=x,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(hS,hS.exports);var use=hS.exports;const uU=Lu(use);var fS={exports:{}},B3,KO;function dse(){if(KO)return B3;KO=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;B3=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return o(u);if(h==="number"&&isFinite(u))return d.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=e?l(u,d,e,"minute"):d>=t?l(u,d,t,"second"):u+" ms"}function l(u,d,h,f){var p=d>=h*1.5;return Math.round(u/h)+" "+f+(p?"s":"")}return B3}function hse(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=o,n.humanize=dse(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,h=null,f,p;function g(...m){if(!g.enabled)return;const w=g,b=Number(new Date),y=b-(d||b);w.diff=y,w.prev=d,w.curr=b,d=b,m[0]=n.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let _=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(T,$)=>{if(T==="%%")return"%";_++;const D=n.formatters[$];if(typeof D=="function"){const O=m[_];T=D.call(w,O),m.splice(_,1),_--}return T}),n.formatArgs.call(w,m),(w.log||n.log).apply(w,m)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==n.namespaces&&(f=n.namespaces,p=n.enabled(u)),p),set:m=>{h=m}}),typeof n.init=="function"&&n.init(g),g}function r(u,d){const h=n(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=n.skips.length;d<h;d++)if(n.skips[d].test(u))return!1;for(d=0,h=n.names.length;d<h;d++)if(n.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var fse=hse;(function(t,e){var n={};e.formatArgs=i,e.save=s,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(d++,f==="%c"&&(h=d))}),l.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=fse(e);const{formatters:c}=t.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(fS,fS.exports);var pse=fS.exports;const vi=Lu(pse);var U6=Object.defineProperty,gse=Object.getOwnPropertyDescriptor,mse=Object.getOwnPropertyNames,wse=Object.prototype.hasOwnProperty,yse=(t,e)=>{for(var n in e)U6(t,n,{get:e[n],enumerable:!0})},bse=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mse(e))!wse.call(t,i)&&i!==n&&U6(t,i,{get:()=>e[i],enumerable:!(r=gse(e,i))||r.enumerable});return t},vse=t=>bse(U6({},"__esModule",{value:!0}),t),dU={};yse(dU,{createFinalURL:()=>wU,createPathBasedClient:()=>xse,createQuerySerializer:()=>pS,default:()=>fU,defaultBodySerializer:()=>mU,defaultPathSerializer:()=>gU,mergeHeaders:()=>gS,randomID:()=>hU,removeTrailingSlash:()=>mS,serializeArrayParam:()=>F6,serializeObjectParam:()=>j6,serializePrimitiveParam:()=>jw,wrapAsPathBasedClient:()=>pU});var Ese=vse(dU),Cse=/\{[^{}]+\}/g,_se=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function hU(){return Math.random().toString(36).slice(2,11)}function fU(t){let{baseUrl:e="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:s,headers:o,requestInitExt:a=void 0,...c}={...t};a=_se()?a:void 0,e=mS(e);const l=[];async function u(d,h){const{baseUrl:f,fetch:p=r,Request:g=n,headers:m,params:w={},parseAs:b="json",querySerializer:y,bodySerializer:_=s??mU,body:A,...T}=h||{};let $=e;f&&($=mS(f)??e);let D=typeof i=="function"?i:pS(i);y&&(D=typeof y=="function"?y:pS({...typeof i=="object"?i:{},...y}));const O=A===void 0?void 0:_(A,gS(o,m,w.header)),j=gS(O===void 0||O instanceof FormData?{}:{"Content-Type":"application/json"},o,m,w.header),F={redirect:"follow",...c,...T,body:O,headers:j};let L,B,x=new n(wU(d,{baseUrl:$,params:w,querySerializer:D}),F),v;for(const N in T)N in x||(x[N]=T[N]);if(l.length){L=hU(),B=Object.freeze({baseUrl:$,fetch:p,parseAs:b,querySerializer:D,bodySerializer:_});for(const N of l)if(N&&typeof N=="object"&&typeof N.onRequest=="function"){const E=await N.onRequest({request:x,schemaPath:d,params:w,options:B,id:L});if(E)if(E instanceof n)x=E;else if(E instanceof Response){v=E;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!v){try{v=await p(x,a)}catch(N){let E=N;if(l.length)for(let C=l.length-1;C>=0;C--){const P=l[C];if(P&&typeof P=="object"&&typeof P.onError=="function"){const M=await P.onError({request:x,error:E,schemaPath:d,params:w,options:B,id:L});if(M){if(M instanceof Response){E=void 0,v=M;break}if(M instanceof Error){E=M;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(E)throw E}if(l.length)for(let N=l.length-1;N>=0;N--){const E=l[N];if(E&&typeof E=="object"&&typeof E.onResponse=="function"){const C=await E.onResponse({request:x,response:v,schemaPath:d,params:w,options:B,id:L});if(C){if(!(C instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");v=C}}}}if(v.status===204||x.method==="HEAD"||v.headers.get("Content-Length")==="0")return v.ok?{data:void 0,response:v}:{error:void 0,response:v};if(v.ok)return b==="stream"?{data:v.body,response:v}:{data:await v[b](),response:v};let S=await v.text();try{S=JSON.parse(S)}catch{}return{error:S,response:v}}return{request(d,h,f){return u(h,{...f,method:d.toUpperCase()})},GET(d,h){return u(d,{...h,method:"GET"})},PUT(d,h){return u(d,{...h,method:"PUT"})},POST(d,h){return u(d,{...h,method:"POST"})},DELETE(d,h){return u(d,{...h,method:"DELETE"})},OPTIONS(d,h){return u(d,{...h,method:"OPTIONS"})},HEAD(d,h){return u(d,{...h,method:"HEAD"})},PATCH(d,h){return u(d,{...h,method:"PATCH"})},TRACE(d,h){return u(d,{...h,method:"TRACE"})},use(...d){for(const h of d)if(h){if(typeof h!="object"||!("onRequest"in h||"onResponse"in h||"onError"in h))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");l.push(h)}},eject(...d){for(const h of d){const f=l.indexOf(h);f!==-1&&l.splice(f,1)}}}}var Sse=class{constructor(t,e){Ls(this,"GET",t=>this.client.GET(this.url,t));Ls(this,"PUT",t=>this.client.PUT(this.url,t));Ls(this,"POST",t=>this.client.POST(this.url,t));Ls(this,"DELETE",t=>this.client.DELETE(this.url,t));Ls(this,"OPTIONS",t=>this.client.OPTIONS(this.url,t));Ls(this,"HEAD",t=>this.client.HEAD(this.url,t));Ls(this,"PATCH",t=>this.client.PATCH(this.url,t));Ls(this,"TRACE",t=>this.client.TRACE(this.url,t));this.client=t,this.url=e}},Ase=class{constructor(){this.client=null}get(t,e){const n=new Sse(t,e);return this.client[e]=n,n}};function pU(t){const e=new Ase,n=new Proxy(t,e);function r(){}r.prototype=n;const i=new r;return e.client=i,i}function xse(t){return pU(fU(t))}function jw(t,e,n){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${n?.allowReserved===!0?e:encodeURIComponent(e)}`}function j6(t,e,n){if(!e||typeof e!="object")return"";const r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const a in e)r.push(a,n.allowReserved===!0?e[a]:encodeURIComponent(e[a]));const o=r.join(",");switch(n.style){case"form":return`${t}=${o}`;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return o}}for(const o in e){const a=n.style==="deepObject"?`${t}[${o}]`:o;r.push(jw(a,e[o],n))}const s=r.join(i);return n.style==="label"||n.style==="matrix"?`${i}${s}`:s}function F6(t,e,n){if(!Array.isArray(e))return"";if(n.explode===!1){const s={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?e:e.map(a=>encodeURIComponent(a))).join(s);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return`${t}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(const s of e)n.style==="simple"||n.style==="label"?i.push(n.allowReserved===!0?s:encodeURIComponent(s)):i.push(jw(t,s,n));return n.style==="label"||n.style==="matrix"?`${r}${i.join(r)}`:i.join(r)}function pS(t){return function(n){const r=[];if(n&&typeof n=="object")for(const i in n){const s=n[i];if(s!=null){if(Array.isArray(s)){if(s.length===0)continue;r.push(F6(i,s,{style:"form",explode:!0,...t?.array,allowReserved:t?.allowReserved||!1}));continue}if(typeof s=="object"){r.push(j6(i,s,{style:"deepObject",explode:!0,...t?.object,allowReserved:t?.allowReserved||!1}));continue}r.push(jw(i,s,t))}}return r.join("&")}}function gU(t,e){let n=t;for(const r of t.match(Cse)??[]){let i=r.substring(1,r.length-1),s=!1,o="simple";if(i.endsWith("*")&&(s=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(o="label",i=i.substring(1)):i.startsWith(";")&&(o="matrix",i=i.substring(1)),!e||e[i]===void 0||e[i]===null)continue;const a=e[i];if(Array.isArray(a)){n=n.replace(r,F6(i,a,{style:o,explode:s}));continue}if(typeof a=="object"){n=n.replace(r,j6(i,a,{style:o,explode:s}));continue}if(o==="matrix"){n=n.replace(r,`;${jw(i,a)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return n}function mU(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function wU(t,e){let n=`${e.baseUrl}${t}`;e.params?.path&&(n=gU(n,e.params.path));let r=e.querySerializer(e.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function gS(...t){const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[i,s]of r)if(s===null)e.delete(i);else if(Array.isArray(s))for(const o of s)e.append(i,o);else s!==void 0&&e.set(i,s)}return e}function mS(t){return t.endsWith("/")?t.substring(0,t.length-1):t}var L3={},Ise=Object.create,nE=Object.defineProperty,Ose=Object.getOwnPropertyDescriptor,Pse=Object.getOwnPropertyNames,Tse=Object.getPrototypeOf,kse=Object.prototype.hasOwnProperty,Nse=(t,e)=>{for(var n in e)nE(t,n,{get:e[n],enumerable:!0})},yU=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Pse(e))!kse.call(t,i)&&i!==n&&nE(t,i,{get:()=>e[i],enumerable:!(r=Ose(e,i))||r.enumerable});return t},$se=(t,e,n)=>(n=t!=null?Ise(Tse(t)):{},yU(!t||!t.__esModule?nE(n,"default",{value:t,enumerable:!0}):n,t)),Rse=t=>yU(nE({},"__esModule",{value:!0}),t),bU={};Nse(bU,{analytics:()=>qse});var Rn=Rse(bU),Mse=$se(Ese),Dse=class{constructor(t){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn}enqueue(t){this.batch.push(t),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const t=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(t),this.currentTimeoutMs=this.baseTimeoutMs}catch(e){console.error("Sender: Failed to send batch",e),this.batch=[...t,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},Bse=Dse,Lse=class{constructor(t){this.enabled=!1,this.properties={};const e=(0,Mse.default)({baseUrl:t}),n=async r=>{const i=await e.POST("/v1/events",{body:r});if(i.response.status!==200)throw new Error(i.error)};this.sender=new Bse({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(t,e){this.properties[t]=e}track(t,e){if(!this.enabled)return;const n={name:t,...this.properties,...e};this.sender.enqueue(n)}},Use=Lse,wS,VO;typeof process<"u"&&L3&&(wS=(VO=L3.METAMASK_ANALYTICS_ENDPOINT)!=null?VO:L3.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var jse=wS??"https://mm-sdk-analytics.api.cx.metamask.io/",Fse=new Use(jse),qse=Fse,vU={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(C){return Object.prototype.toString.call(C)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,d=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(E){var C=Object.getOwnPropertyNames(E);return C.push.apply(C,Object.getOwnPropertySymbols(E)),C}:Object.keys;function h(){this._events={},this._conf&&f.call(this,this._conf)}function f(E){E&&(this._conf=E,E.delimiter&&(this.delimiter=E.delimiter),E.maxListeners!==n&&(this._maxListeners=E.maxListeners),E.wildcard&&(this.wildcard=E.wildcard),E.newListener&&(this._newListener=E.newListener),E.removeListener&&(this._removeListener=E.removeListener),E.verboseMemoryLeak&&(this.verboseMemoryLeak=E.verboseMemoryLeak),E.ignoreErrors&&(this.ignoreErrors=E.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(E,C){var P="(node) warning: possible EventEmitter memory leak detected. "+E+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(P+=" Event name: "+C+"."),typeof process<"u"&&process.emitWarning){var M=new Error(P);M.name="MaxListenersExceededWarning",M.emitter=this,M.count=E,process.emitWarning(M)}else console.error(P),console.trace&&console.trace()}var g=function(E,C,P){var M=arguments.length;switch(M){case 0:return[];case 1:return[E];case 2:return[E,C];case 3:return[E,C,P];default:for(var I=new Array(M);M--;)I[M]=arguments[M];return I}};function m(E,C){for(var P={},M,I=E.length,k=0,R=0;R<I;R++)M=E[R],P[M]=R<k?C[R]:n;return P}function w(E,C,P){this._emitter=E,this._target=C,this._listeners={},this._listenersCount=0;var M,I;if((P.on||P.off)&&(M=P.on,I=P.off),C.addEventListener?(M=C.addEventListener,I=C.removeEventListener):C.addListener?(M=C.addListener,I=C.removeListener):C.on&&(M=C.on,I=C.off),!M&&!I)throw Error("target does not implement any known event API");if(typeof M!="function")throw TypeError("on method must be a function");if(typeof I!="function")throw TypeError("off method must be a function");this._on=M,this._off=I;var k=E._observers;k?k.push(this):E._observers=[this]}Object.assign(w.prototype,{subscribe:function(E,C,P){var M=this,I=this._target,k=this._emitter,R=this._listeners,U=function(){var q=g.apply(null,arguments),H={data:q,name:C,original:E};if(P){var z=P.call(I,H);z!==!1&&k.emit.apply(k,[H.name].concat(q));return}k.emit.apply(k,[C].concat(q))};if(R[E])throw Error("Event '"+E+"' is already listening");this._listenersCount++,k._newListener&&k._removeListener&&!M._onNewListener?(this._onNewListener=function(q){q===C&&R[E]===null&&(R[E]=U,M._on.call(I,E,U))},k.on("newListener",this._onNewListener),this._onRemoveListener=function(q){q===C&&!k.hasListeners(q)&&R[E]&&(R[E]=null,M._off.call(I,E,U))},R[E]=null,k.on("removeListener",this._onRemoveListener)):(R[E]=U,M._on.call(I,E,U))},unsubscribe:function(E){var C=this,P=this._listeners,M=this._emitter,I,k,R=this._off,U=this._target,q;if(E&&typeof E!="string")throw TypeError("event must be a string");function H(){C._onNewListener&&(M.off("newListener",C._onNewListener),M.off("removeListener",C._onRemoveListener),C._onNewListener=null,C._onRemoveListener=null);var z=D.call(M,C);M._observers.splice(z,1)}if(E){if(I=P[E],!I)return;R.call(U,E,I),delete P[E],--this._listenersCount||H()}else{for(k=d(P),q=k.length;q-- >0;)E=k[q],R.call(U,E,P[E]);this._listeners={},this._listenersCount=0,H()}}});function b(E,C,P,M){var I=Object.assign({},C);if(!E)return I;if(typeof E!="object")throw TypeError("options must be an object");var k=Object.keys(E),R=k.length,U,q,H;function z(G){throw Error('Invalid "'+U+'" option value'+(G?". Reason: "+G:""))}for(var K=0;K<R;K++){if(U=k[K],!r.call(C,U))throw Error('Unknown "'+U+'" option');q=E[U],q!==n&&(H=P[U],I[U]=H?H(q,z):q)}return I}function y(E,C){return(typeof E!="function"||!E.hasOwnProperty("prototype"))&&C("value must be a constructor"),E}function _(E){var C="value must be type of "+E.join("|"),P=E.length,M=E[0],I=E[1];return P===1?function(k,R){if(typeof k===M)return k;R(C)}:P===2?function(k,R){var U=typeof k;if(U===M||U===I)return k;R(C)}:function(k,R){for(var U=typeof k,q=P;q-- >0;)if(U===E[q])return k;R(C)}}var A=_(["function"]),T=_(["object","function"]);function $(E,C,P){var M,I,k=0,R,U=new E(function(q,H,z){P=b(P,{timeout:0,overload:!1},{timeout:function(X,ie){return X*=1,(typeof X!="number"||X<0||!Number.isFinite(X))&&ie("timeout must be a positive number"),X}}),M=!P.overload&&typeof E.prototype.cancel=="function"&&typeof z=="function";function K(){I&&(I=null),k&&(clearTimeout(k),k=0)}var G=function(X){K(),q(X)},Y=function(X){K(),H(X)};M?C(G,Y,z):(I=[function(X){Y(X||Error("canceled"))}],C(G,Y,function(X){if(R)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof X!="function")throw TypeError("onCancel callback must be a function");I.push(X)}),R=!0),P.timeout>0&&(k=setTimeout(function(){var X=Error("timeout");X.code="ETIMEDOUT",k=0,U.cancel(X),H(X)},P.timeout))});return M||(U.cancel=function(q){if(I){for(var H=I.length,z=1;z<H;z++)I[z](q);I[0](q),I=null}}),U}function D(E){var C=this._observers;if(!C)return-1;for(var P=C.length,M=0;M<P;M++)if(C[M]._target===E)return M;return-1}function O(E,C,P,M,I){if(!P)return null;if(M===0){var k=typeof C;if(k==="string"){var R,U,q=0,H=0,z=this.delimiter,K=z.length;if((U=C.indexOf(z))!==-1){R=new Array(5);do R[q++]=C.slice(H,U),H=U+K;while((U=C.indexOf(z,H))!==-1);R[q++]=C.slice(H),C=R,I=q}else C=[C],I=1}else k==="object"?I=C.length:(C=[C],I=1)}var G=null,Y,X,ie,de,Se,Ee=C[M],Ae=C[M+1],Re,Me;if(M===I)P._listeners&&(typeof P._listeners=="function"?(E&&E.push(P._listeners),G=[P]):(E&&E.push.apply(E,P._listeners),G=[P]));else if(Ee==="*"){for(Re=d(P),U=Re.length;U-- >0;)Y=Re[U],Y!=="_listeners"&&(Me=O(E,C,P[Y],M+1,I),Me&&(G?G.push.apply(G,Me):G=Me));return G}else if(Ee==="**"){for(Se=M+1===I||M+2===I&&Ae==="*",Se&&P._listeners&&(G=O(E,C,P,I,I)),Re=d(P),U=Re.length;U-- >0;)Y=Re[U],Y!=="_listeners"&&(Y==="*"||Y==="**"?(P[Y]._listeners&&!Se&&(Me=O(E,C,P[Y],I,I),Me&&(G?G.push.apply(G,Me):G=Me)),Me=O(E,C,P[Y],M,I)):Y===Ae?Me=O(E,C,P[Y],M+2,I):Me=O(E,C,P[Y],M,I),Me&&(G?G.push.apply(G,Me):G=Me));return G}else P[Ee]&&(G=O(E,C,P[Ee],M+1,I));if(X=P["*"],X&&O(E,C,X,M+1,I),ie=P["**"],ie)if(M<I)for(ie._listeners&&O(E,C,ie,I,I),Re=d(ie),U=Re.length;U-- >0;)Y=Re[U],Y!=="_listeners"&&(Y===Ae?O(E,C,ie[Y],M+2,I):Y===Ee?O(E,C,ie[Y],M+1,I):(de={},de[Y]=ie[Y],O(E,C,{"**":de},M+1,I)));else ie._listeners?O(E,C,ie,I,I):ie["*"]&&ie["*"]._listeners&&O(E,C,ie["*"],I,I);return G}function j(E,C,P){var M=0,I=0,k,R=this.delimiter,U=R.length,q;if(typeof E=="string")if((k=E.indexOf(R))!==-1){q=new Array(5);do q[M++]=E.slice(I,k),I=k+U;while((k=E.indexOf(R,I))!==-1);q[M++]=E.slice(I)}else q=[E],M=1;else q=E,M=E.length;if(M>1){for(k=0;k+1<M;k++)if(q[k]==="**"&&q[k+1]==="**")return}var H=this.listenerTree,z;for(k=0;k<M;k++)if(z=q[k],H=H[z]||(H[z]={}),k===M-1)return H._listeners?(typeof H._listeners=="function"&&(H._listeners=[H._listeners]),P?H._listeners.unshift(C):H._listeners.push(C),!H._listeners.warned&&this._maxListeners>0&&H._listeners.length>this._maxListeners&&(H._listeners.warned=!0,p.call(this,H._listeners.length,z))):H._listeners=C,!0;return!0}function F(E,C,P,M){for(var I=d(E),k=I.length,R,U,q,H=E._listeners,z;k-- >0;)U=I[k],R=E[U],U==="_listeners"?q=P:q=P?P.concat(U):[U],z=M||typeof U=="symbol",H&&C.push(z?q:q.join(this.delimiter)),typeof R=="object"&&F.call(this,R,C,q,z);return C}function L(E){for(var C=d(E),P=C.length,M,I,k;P-- >0;)I=C[P],M=E[I],M&&(k=!0,I!=="_listeners"&&!L(M)&&delete E[I]);return k}function B(E,C,P){this.emitter=E,this.event=C,this.listener=P}B.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function x(E,C,P){if(P===!0)I=!0;else if(P===!1)M=!0;else{if(!P||typeof P!="object")throw TypeError("options should be an object or true");var M=P.async,I=P.promisify,k=P.nextTick,R=P.objectify}if(M||k||I){var U=C,q=C._origin||C;if(k&&!o)throw Error("process.nextTick is not supported");I===n&&(I=C.constructor.name==="AsyncFunction"),C=function(){var H=arguments,z=this,K=this.event;return I?k?Promise.resolve():new Promise(function(G){u(G)}).then(function(){return z.event=K,U.apply(z,H)}):(k?process.nextTick:u)(function(){z.event=K,U.apply(z,H)})},C._async=!0,C._origin=q}return[C,R?new B(this,E,C):this]}function v(E){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,E)}v.EventEmitter2=v,v.prototype.listenTo=function(E,C,P){if(typeof E!="object")throw TypeError("target musts be an object");var M=this;P=b(P,{on:n,off:n,reducers:n},{on:A,off:A,reducers:T});function I(k){if(typeof k!="object")throw TypeError("events must be an object");var R=P.reducers,U=D.call(M,E),q;U===-1?q=new w(M,E,P):q=M._observers[U];for(var H=d(k),z=H.length,K,G=typeof R=="function",Y=0;Y<z;Y++)K=H[Y],q.subscribe(K,k[K]||K,G?R:R&&R[K])}return i(C)?I(m(C)):I(typeof C=="string"?m(C.split(/\s+/)):C),this},v.prototype.stopListeningTo=function(E,C){var P=this._observers;if(!P)return!1;var M=P.length,I,k=!1;if(E&&typeof E!="object")throw TypeError("target should be an object");for(;M-- >0;)I=P[M],(!E||I._target===E)&&(I.unsubscribe(C),k=!0);return k},v.prototype.delimiter=".",v.prototype.setMaxListeners=function(E){E!==n&&(this._maxListeners=E,this._conf||(this._conf={}),this._conf.maxListeners=E)},v.prototype.getMaxListeners=function(){return this._maxListeners},v.prototype.event="",v.prototype.once=function(E,C,P){return this._once(E,C,!1,P)},v.prototype.prependOnceListener=function(E,C,P){return this._once(E,C,!0,P)},v.prototype._once=function(E,C,P,M){return this._many(E,1,C,P,M)},v.prototype.many=function(E,C,P,M){return this._many(E,C,P,!1,M)},v.prototype.prependMany=function(E,C,P,M){return this._many(E,C,P,!0,M)},v.prototype._many=function(E,C,P,M,I){var k=this;if(typeof P!="function")throw new Error("many only accepts instances of Function");function R(){return--C===0&&k.off(E,R),P.apply(this,arguments)}return R._origin=P,this._on(E,R,M,I)},v.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var E=arguments[0],C,P=this.wildcard,M,I,k,R,U;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(P&&(C=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(I=E.length,a){for(k=0;k<I;k++)if(typeof E[k]=="symbol"){U=!0;break}}U||(E=E.join(this.delimiter))}var q=arguments.length,H;if(this._all&&this._all.length)for(H=this._all.slice(),k=0,I=H.length;k<I;k++)switch(this.event=E,q){case 1:H[k].call(this,E);break;case 2:H[k].call(this,E,arguments[1]);break;case 3:H[k].call(this,E,arguments[1],arguments[2]);break;default:H[k].apply(this,arguments)}if(P)H=[],O.call(this,H,C,this.listenerTree,0,I);else if(H=this._events[E],typeof H=="function"){switch(this.event=E,q){case 1:H.call(this);break;case 2:H.call(this,arguments[1]);break;case 3:H.call(this,arguments[1],arguments[2]);break;default:for(M=new Array(q-1),R=1;R<q;R++)M[R-1]=arguments[R];H.apply(this,M)}return!0}else H&&(H=H.slice());if(H&&H.length){if(q>3)for(M=new Array(q-1),R=1;R<q;R++)M[R-1]=arguments[R];for(k=0,I=H.length;k<I;k++)switch(this.event=E,q){case 1:H[k].call(this);break;case 2:H[k].call(this,arguments[1]);break;case 3:H[k].call(this,arguments[1],arguments[2]);break;default:H[k].apply(this,M)}return!0}else if(!this.ignoreErrors&&!this._all&&E==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},v.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var E=arguments[0],C=this.wildcard,P,M,I,k,R,U;if(E==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(C&&(P=E,E!=="newListener"&&E!=="removeListener"&&typeof E=="object")){if(k=E.length,a){for(R=0;R<k;R++)if(typeof E[R]=="symbol"){M=!0;break}}M||(E=E.join(this.delimiter))}var q=[],H=arguments.length,z;if(this._all)for(R=0,k=this._all.length;R<k;R++)switch(this.event=E,H){case 1:q.push(this._all[R].call(this,E));break;case 2:q.push(this._all[R].call(this,E,arguments[1]));break;case 3:q.push(this._all[R].call(this,E,arguments[1],arguments[2]));break;default:q.push(this._all[R].apply(this,arguments))}if(C?(z=[],O.call(this,z,P,this.listenerTree,0)):z=this._events[E],typeof z=="function")switch(this.event=E,H){case 1:q.push(z.call(this));break;case 2:q.push(z.call(this,arguments[1]));break;case 3:q.push(z.call(this,arguments[1],arguments[2]));break;default:for(I=new Array(H-1),U=1;U<H;U++)I[U-1]=arguments[U];q.push(z.apply(this,I))}else if(z&&z.length){if(z=z.slice(),H>3)for(I=new Array(H-1),U=1;U<H;U++)I[U-1]=arguments[U];for(R=0,k=z.length;R<k;R++)switch(this.event=E,H){case 1:q.push(z[R].call(this));break;case 2:q.push(z[R].call(this,arguments[1]));break;case 3:q.push(z[R].call(this,arguments[1],arguments[2]));break;default:q.push(z[R].apply(this,I))}}else if(!this.ignoreErrors&&!this._all&&E==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(q)},v.prototype.on=function(E,C,P){return this._on(E,C,!1,P)},v.prototype.prependListener=function(E,C,P){return this._on(E,C,!0,P)},v.prototype.onAny=function(E){return this._onAny(E,!1)},v.prototype.prependAny=function(E){return this._onAny(E,!0)},v.prototype.addListener=v.prototype.on,v.prototype._onAny=function(E,C){if(typeof E!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),C?this._all.unshift(E):this._all.push(E),this},v.prototype._on=function(E,C,P,M){if(typeof E=="function")return this._onAny(E,C),this;if(typeof C!="function")throw new Error("on only accepts instances of Function");this._events||h.call(this);var I=this,k;return M!==n&&(k=x.call(this,E,C,M),C=k[0],I=k[1]),this._newListener&&this.emit("newListener",E,C),this.wildcard?(j.call(this,E,C,P),I):(this._events[E]?(typeof this._events[E]=="function"&&(this._events[E]=[this._events[E]]),P?this._events[E].unshift(C):this._events[E].push(C),!this._events[E].warned&&this._maxListeners>0&&this._events[E].length>this._maxListeners&&(this._events[E].warned=!0,p.call(this,this._events[E].length,E))):this._events[E]=C,I)},v.prototype.off=function(E,C){if(typeof C!="function")throw new Error("removeListener only takes instances of Function");var P,M=[];if(this.wildcard){var I=typeof E=="string"?E.split(this.delimiter):E.slice();if(M=O.call(this,null,I,this.listenerTree,0),!M)return this}else{if(!this._events[E])return this;P=this._events[E],M.push({_listeners:P})}for(var k=0;k<M.length;k++){var R=M[k];if(P=R._listeners,i(P)){for(var U=-1,q=0,H=P.length;q<H;q++)if(P[q]===C||P[q].listener&&P[q].listener===C||P[q]._origin&&P[q]._origin===C){U=q;break}if(U<0)continue;return this.wildcard?R._listeners.splice(U,1):this._events[E].splice(U,1),P.length===0&&(this.wildcard?delete R._listeners:delete this._events[E]),this._removeListener&&this.emit("removeListener",E,C),this}else(P===C||P.listener&&P.listener===C||P._origin&&P._origin===C)&&(this.wildcard?delete R._listeners:delete this._events[E],this._removeListener&&this.emit("removeListener",E,C))}return this.listenerTree&&L(this.listenerTree),this},v.prototype.offAny=function(E){var C=0,P=0,M;if(E&&this._all&&this._all.length>0){for(M=this._all,C=0,P=M.length;C<P;C++)if(E===M[C])return M.splice(C,1),this._removeListener&&this.emit("removeListenerAny",E),this}else{if(M=this._all,this._removeListener)for(C=0,P=M.length;C<P;C++)this.emit("removeListenerAny",M[C]);this._all=[]}return this},v.prototype.removeListener=v.prototype.off,v.prototype.removeAllListeners=function(E){if(E===n)return!this._events||h.call(this),this;if(this.wildcard){var C=O.call(this,null,E,this.listenerTree,0),P,M;if(!C)return this;for(M=0;M<C.length;M++)P=C[M],P._listeners=null;this.listenerTree&&L(this.listenerTree)}else this._events&&(this._events[E]=null);return this},v.prototype.listeners=function(E){var C=this._events,P,M,I,k,R;if(E===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!C)return[];for(P=d(C),k=P.length,I=[];k-- >0;)M=C[P[k]],typeof M=="function"?I.push(M):I.push.apply(I,M);return I}else{if(this.wildcard){if(R=this.listenerTree,!R)return[];var U=[],q=typeof E=="string"?E.split(this.delimiter):E.slice();return O.call(this,U,q,R,0),U}return C?(M=C[E],M?typeof M=="function"?[M]:M:[]):[]}},v.prototype.eventNames=function(E){var C=this._events;return this.wildcard?F.call(this,this.listenerTree,[],null,E):C?d(C):[]},v.prototype.listenerCount=function(E){return this.listeners(E).length},v.prototype.hasListeners=function(E){if(this.wildcard){var C=[],P=typeof E=="string"?E.split(this.delimiter):E.slice();return O.call(this,C,P,this.listenerTree,0),C.length>0}var M=this._events,I=this._all;return!!(I&&I.length||M&&(E===n?d(M).length:M[E]))},v.prototype.listenersAny=function(){return this._all?this._all:[]},v.prototype.waitFor=function(E,C){var P=this,M=typeof C;return M==="number"?C={timeout:C}:M==="function"&&(C={filter:C}),C=b(C,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:A,Promise:y}),$(C.Promise,function(I,k,R){function U(){var q=C.filter;if(!(q&&!q.apply(P,arguments)))if(P.off(E,U),C.handleError){var H=arguments[0];H?k(H):I(g.apply(null,arguments).slice(1))}else I(g.apply(null,arguments))}R(function(){P.off(E,U)}),P._on(E,U,!1)},{timeout:C.timeout,overload:C.overload})};function S(E,C,P){P=b(P,{Promise,timeout:0,overload:!1},{Promise:y});var M=P.Promise;return $(M,function(I,k,R){var U;if(typeof E.addEventListener=="function"){U=function(){I(g.apply(null,arguments))},R(function(){E.removeEventListener(C,U)}),E.addEventListener(C,U,{once:!0});return}var q=function(){H&&E.removeListener("error",H),I(g.apply(null,arguments))},H;C!=="error"&&(H=function(z){E.removeListener(C,q),k(z)},E.once("error",H)),R(function(){H&&E.removeListener("error",H),E.removeListener(C,q)}),E.once(C,q)},{timeout:P.timeout,overload:P.overload})}var N=v.prototype;Object.defineProperties(v,{defaultMaxListeners:{get:function(){return N._maxListeners},set:function(E){if(typeof E!="number"||E<0||Number.isNaN(E))throw TypeError("n must be a non-negative number");N._maxListeners=E},enumerable:!0},once:{value:S,writable:!0,configurable:!0}}),Object.defineProperties(N,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=v})()})(vU);var rE=vU.exports;const Hse=Lu(rE);var r1,zse=new Uint8Array(16);function Kse(){if(!r1&&(r1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!r1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r1(zse)}const Vse=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yS(t){return typeof t=="string"&&Vse.test(t)}var Lr=[];for(var U3=0;U3<256;++U3)Lr.push((U3+256).toString(16).substr(1));function Wse(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Lr[t[e+0]]+Lr[t[e+1]]+Lr[t[e+2]]+Lr[t[e+3]]+"-"+Lr[t[e+4]]+Lr[t[e+5]]+"-"+Lr[t[e+6]]+Lr[t[e+7]]+"-"+Lr[t[e+8]]+Lr[t[e+9]]+"-"+Lr[t[e+10]]+Lr[t[e+11]]+Lr[t[e+12]]+Lr[t[e+13]]+Lr[t[e+14]]+Lr[t[e+15]]).toLowerCase();if(!yS(n))throw TypeError("Stringified UUID is invalid");return n}function zl(t,e,n){t=t||{};var r=t.random||(t.rng||Kse)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wse(r)}const La=Object.create(null);La.open="0";La.close="1";La.ping="2";La.pong="3";La.message="4";La.upgrade="5";La.noop="6";const bb=Object.create(null);Object.keys(La).forEach(t=>{bb[La[t]]=t});const bS={type:"error",data:"parser error"},EU=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",CU=typeof ArrayBuffer=="function",_U=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,q6=({type:t,data:e},n,r)=>EU&&e instanceof Blob?n?r(e):WO(e,r):CU&&(e instanceof ArrayBuffer||_U(e))?n?r(e):WO(new Blob([e]),r):r(La[t]+(e||"")),WO=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function GO(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let j3;function Gse(t,e){if(EU&&t.data instanceof Blob)return t.data.arrayBuffer().then(GO).then(e);if(CU&&(t.data instanceof ArrayBuffer||_U(t.data)))return e(GO(t.data));q6(t,!1,n=>{j3||(j3=new TextEncoder),e(j3.encode(n))})}const ZO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ZO.length;t++)V0[ZO.charCodeAt(t)]=t;const Zse=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=V0[t.charCodeAt(r)],o=V0[t.charCodeAt(r+1)],a=V0[t.charCodeAt(r+2)],c=V0[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},Yse=typeof ArrayBuffer=="function",H6=(t,e)=>{if(typeof t!="string")return{type:"message",data:SU(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Qse(t.substring(1),e)}:bb[n]?t.length>1?{type:bb[n],data:t.substring(1)}:{type:bb[n]}:bS},Qse=(t,e)=>{if(Yse){const n=Zse(t);return SU(n,e)}else return{base64:!0,data:t}},SU=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},AU="",Jse=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{q6(s,!1,a=>{r[o]=a,++i===n&&e(r.join(AU))})})},Xse=(t,e)=>{const n=t.split(AU),r=[];for(let i=0;i<n.length;i++){const s=H6(n[i],e);if(r.push(s),s.type==="error")break}return r};function eoe(){return new TransformStream({transform(t,e){Gse(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let F3;function i1(t){return t.reduce((e,n)=>e+n.length,0)}function s1(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function toe(t,e){F3||(F3=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(i1(n)<1)break;const c=s1(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(i1(n)<2)break;const c=s1(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(i1(n)<8)break;const c=s1(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(bS);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(i1(n)<i)break;const c=s1(n,i);a.enqueue(H6(s?c:F3.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(bS);break}}}})}const xU=4;function Qn(t){if(t)return noe(t)}function noe(t){for(var e in Qn.prototype)t[e]=Qn.prototype[e];return t}Qn.prototype.on=Qn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Qn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Qn.prototype.off=Qn.prototype.removeListener=Qn.prototype.removeAllListeners=Qn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Qn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Qn.prototype.emitReserved=Qn.prototype.emit;Qn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Qn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const iE=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),co=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),roe="arraybuffer";function IU(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const ioe=co.setTimeout,soe=co.clearTimeout;function sE(t,e){e.useNativeTimers?(t.setTimeoutFn=ioe.bind(co),t.clearTimeoutFn=soe.bind(co)):(t.setTimeoutFn=co.setTimeout.bind(co),t.clearTimeoutFn=co.clearTimeout.bind(co))}const ooe=1.33;function aoe(t){return typeof t=="string"?coe(t):Math.ceil((t.byteLength||t.size)*ooe)}function coe(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function OU(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function loe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function uoe(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class doe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class z6 extends Qn{constructor(e){super(),this.writable=!1,sE(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new doe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=H6(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=loe(e);return n.length?"?"+n:""}}class hoe extends z6{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Xse(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Jse(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=OU()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let PU=!1;try{PU=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const foe=PU;function poe(){}class goe extends hoe{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Sp=class vb extends Qn{constructor(e,n,r){super(),this.createRequest=e,sE(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=IU(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=vb.requestsCount++,vb.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=poe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete vb.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Sp.requestsCount=0;Sp.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",YO);else if(typeof addEventListener=="function"){const t="onpagehide"in co?"pagehide":"unload";addEventListener(t,YO,!1)}}function YO(){for(let t in Sp.requests)Sp.requests.hasOwnProperty(t)&&Sp.requests[t].abort()}const moe=function(){const t=TU({xdomain:!1});return t&&t.responseType!==null}();class woe extends goe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=moe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Sp(TU,this.uri(),e)}}function TU(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||foe))return new XMLHttpRequest}catch{}if(!e)try{return new co[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const kU=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yoe extends z6{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=kU?{}:IU(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;q6(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&iE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=OU()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const q3=co.WebSocket||co.MozWebSocket;class boe extends yoe{createSocket(e,n,r){return kU?new q3(e,n,r):n?new q3(e,n):new q3(e)}doWrite(e,n){this.ws.send(n)}}class voe extends z6{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=toe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=eoe();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&iE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Eoe={websocket:boe,webtransport:voe,polling:woe},Coe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_oe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vS(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Coe.exec(t||""),s={},o=14;for(;o--;)s[_oe[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Soe(s,s.path),s.queryKey=Aoe(s,s.query),s}function Soe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Aoe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ES=typeof addEventListener=="function"&&typeof removeEventListener=="function",Eb=[];ES&&addEventListener("offline",()=>{Eb.forEach(t=>t())},!1);class yu extends Qn{constructor(e,n){if(super(),this.binaryType=roe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=vS(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=vS(n.host).host);sE(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uoe(this.opts.query)),ES&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Eb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=xU,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&yu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",yu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=aoe(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,iE(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(yu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ES&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Eb.indexOf(this._offlineEventListener);r!==-1&&Eb.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}yu.protocol=xU;class xoe extends yu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;yu.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;yu.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Ioe=class extends xoe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Eoe[i]).filter(i=>!!i)),super(e,r)}};function Ooe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=vS(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Poe=typeof ArrayBuffer=="function",Toe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,NU=Object.prototype.toString,koe=typeof Blob=="function"||typeof Blob<"u"&&NU.call(Blob)==="[object BlobConstructor]",Noe=typeof File=="function"||typeof File<"u"&&NU.call(File)==="[object FileConstructor]";function K6(t){return Poe&&(t instanceof ArrayBuffer||Toe(t))||koe&&t instanceof Blob||Noe&&t instanceof File}function Cb(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Cb(t[n]))return!0;return!1}if(K6(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Cb(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Cb(t[n]))return!0;return!1}function $oe(t){const e=[],n=t.data,r=t;return r.data=CS(n,e),r.attachments=e.length,{packet:r,buffers:e}}function CS(t,e){if(!t)return t;if(K6(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=CS(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=CS(t[r],e));return n}return t}function Roe(t,e){return t.data=_S(t.data,e),delete t.attachments,t}function _S(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=_S(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=_S(t[n],e));return t}const Moe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Doe=5;var mt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));let Boe=class{constructor(e){this.replacer=e}encode(e){return(e.type===mt.EVENT||e.type===mt.ACK)&&Cb(e)?this.encodeAsBinary({type:e.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===mt.BINARY_EVENT||e.type===mt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=$oe(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}};function QO(t){return Object.prototype.toString.call(t)==="[object Object]"}let Loe=class $U extends Qn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===mt.BINARY_EVENT;r||n.type===mt.BINARY_ACK?(n.type=r?mt.EVENT:mt.ACK,this.reconstructor=new Uoe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(K6(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(mt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===mt.BINARY_EVENT||r.type===mt.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if($U.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case mt.CONNECT:return QO(n);case mt.DISCONNECT:return n===void 0;case mt.CONNECT_ERROR:return typeof n=="string"||QO(n);case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Moe.indexOf(n[0])===-1);case mt.ACK:case mt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class Uoe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Roe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const joe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Loe,Encoder:Boe,get PacketType(){return mt},protocol:Doe},Symbol.toStringTag,{value:"Module"}));function Do(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Foe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class RU extends Qn{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Do(e,"open",this.onopen.bind(this)),Do(e,"packet",this.onpacket.bind(this)),Do(e,"error",this.onerror.bind(this)),Do(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Foe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:mt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case mt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(e);break;case mt.ACK:case mt.BINARY_ACK:this.onack(e);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:mt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Wg(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Wg.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Wg.prototype.reset=function(){this.attempts=0};Wg.prototype.setMin=function(t){this.ms=t};Wg.prototype.setMax=function(t){this.max=t};Wg.prototype.setJitter=function(t){this.jitter=t};class SS extends Qn{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,sE(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Wg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||joe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ioe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Do(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Do(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Do(e,"ping",this.onping.bind(this)),Do(e,"data",this.ondata.bind(this)),Do(e,"error",this.onerror.bind(this)),Do(e,"close",this.onclose.bind(this)),Do(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){iE(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new RU(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const m0={};function _b(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Ooe(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=m0[i]&&s in m0[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new SS(r,e):(m0[i]||(m0[i]=new SS(r,e)),c=m0[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(_b,{Manager:SS,Socket:RU,io:_b,connect:_b});function se(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}c((r=r.apply(t,e||[])).next())})}var Si=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ca=[],no=[],qoe=typeof Uint8Array<"u"?Uint8Array:Array,V6=!1;function MU(){V6=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Ca[e]=t[e],no[t.charCodeAt(e)]=e;no[45]=62,no[95]=63}function Hoe(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Ca[(i=r)>>18&63]+Ca[i>>12&63]+Ca[i>>6&63]+Ca[63&i]);return s.join("")}function JO(t){var e;V6||MU();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,c=n-r;a<c;a+=o)s.push(Hoe(t,a,a+o>c?c:a+o));return r===1?(e=t[n-1],i+=Ca[e>>2],i+=Ca[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Ca[e>>10],i+=Ca[e>>4&63],i+=Ca[e<<2&63],i+="="),s.push(i),s.join("")}function o1(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=l}return(f?-1:1)*o*Math.pow(2,s-r)}function DU(t,e,n,r,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+f]=255&o,f+=p,o/=256,l-=8);t[n+f-p]|=128*g}var zoe={}.toString,BU=Array.isArray||function(t){return zoe.call(t)=="[object Array]"};oe.TYPED_ARRAY_SUPPORT=Si.TYPED_ARRAY_SUPPORT===void 0||Si.TYPED_ARRAY_SUPPORT;var Koe=_v();function _v(){return oe.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Rc(t,e){if(_v()<e)throw new RangeError("Invalid typed array length");return oe.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=oe.prototype:(t===null&&(t=new oe(e)),t.length=e),t}function oe(t,e,n){if(!(oe.TYPED_ARRAY_SUPPORT||this instanceof oe))return new oe(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return AS(this,t)}return LU(this,t,e,n)}function LU(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),oe.TYPED_ARRAY_SUPPORT?(i=s).__proto__=oe.prototype:i=H3(i,s),i}(t,e,n,r):typeof e=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!oe.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|jU(s,o);i=Rc(i,a);var c=i.write(s,o);return c!==a&&(i=i.slice(0,c)),i}(t,e,n):function(i,s){if(_a(s)){var o=0|W6(s.length);return(i=Rc(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?Rc(i,0):H3(i,s);if(s.type==="Buffer"&&BU(s.data))return H3(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function UU(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function AS(t,e){if(UU(e),t=Rc(t,e<0?0:0|W6(e)),!oe.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function H3(t,e){var n=e.length<0?0:0|W6(e.length);t=Rc(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function W6(t){if(t>=_v())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_v().toString(16)+" bytes");return 0|t}function _a(t){return!(t==null||!t._isBuffer)}function jU(t,e){if(_a(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Sv(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return zU(t).length;default:if(r)return Sv(t).length;e=(""+e).toLowerCase(),r=!0}}function Voe(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return tae(this,e,n);case"utf8":case"utf-8":return qU(this,e,n);case"ascii":return Xoe(this,e,n);case"latin1":case"binary":return eae(this,e,n);case"base64":return Joe(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nae(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Gu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function XO(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=oe.from(e,r)),_a(e))return e.length===0?-1:eP(t,e,n,r,i);if(typeof e=="number")return e&=255,oe.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):eP(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function eP(t,e,n,r,i){var s,o=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(f,p){return o===1?f[p]:f.readUInt16BE(p*o)}if(i){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===c)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var d=!0,h=0;h<c;h++)if(l(t,s+h)!==l(e,h)){d=!1;break}if(d)return s}return-1}function Woe(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function Goe(t,e,n,r){return oE(Sv(e,t.length-n),t,n,r)}function FU(t,e,n,r){return oE(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(e),t,n,r)}function Zoe(t,e,n,r){return FU(t,e,n,r)}function Yoe(t,e,n,r){return oE(zU(e),t,n,r)}function Qoe(t,e,n,r){return oE(function(i,s){for(var o,a,c,l=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,c=o%256,l.push(c),l.push(a);return l}(e,t.length-n),t,n,r)}function Joe(t,e,n){return e===0&&n===t.length?JO(t):JO(t.slice(e,n))}function qU(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,c,l=t[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:(192&(s=t[i+1]))==128&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(h){var f=h.length;if(f<=tP)return String.fromCharCode.apply(String,h);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,h.slice(g,g+=tP));return p}(r)}oe.poolSize=8192,oe._augment=function(t){return t.__proto__=oe.prototype,t},oe.from=function(t,e,n){return LU(null,t,e,n)},oe.TYPED_ARRAY_SUPPORT&&(oe.prototype.__proto__=Uint8Array.prototype,oe.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&oe[Symbol.species]),oe.alloc=function(t,e,n){return function(r,i,s,o){return UU(i),i<=0?Rc(r,i):s!==void 0?typeof o=="string"?Rc(r,i).fill(s,o):Rc(r,i).fill(s):Rc(r,i)}(null,t,e,n)},oe.allocUnsafe=function(t){return AS(null,t)},oe.allocUnsafeSlow=function(t){return AS(null,t)},oe.isBuffer=KU,oe.compare=function(t,e){if(!_a(t)||!_a(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},oe.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},oe.concat=function(t,e){if(!BU(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return oe.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=oe.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!_a(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},oe.byteLength=jU,oe.prototype._isBuffer=!0,oe.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Gu(this,e,e+1);return this},oe.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Gu(this,e,e+3),Gu(this,e+1,e+2);return this},oe.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Gu(this,e,e+7),Gu(this,e+1,e+6),Gu(this,e+2,e+5),Gu(this,e+3,e+4);return this},oe.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?qU(this,0,t):Voe.apply(this,arguments)},oe.prototype.equals=function(t){if(!_a(t))throw new TypeError("Argument must be a Buffer");return this===t||oe.compare(this,t)===0},oe.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},oe.prototype.compare=function(t,e,n,r,i){if(!_a(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},oe.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},oe.prototype.indexOf=function(t,e,n){return XO(this,t,e,n,!0)},oe.prototype.lastIndexOf=function(t,e,n){return XO(this,t,e,n,!1)},oe.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return Woe(this,t,e,n);case"utf8":case"utf-8":return Goe(this,t,e,n);case"ascii":return FU(this,t,e,n);case"latin1":case"binary":return Zoe(this,t,e,n);case"base64":return Yoe(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qoe(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tP=4096;function Xoe(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function eae(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function tae(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=iae(t[s]);return i}function nae(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function sr(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Pi(t,e,n,r,i,s){if(!_a(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function a1(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function c1(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function HU(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function nP(t,e,n,r,i){return i||HU(t,0,n,4),DU(t,e,n,r,23,4),n+4}function rP(t,e,n,r,i){return i||HU(t,0,n,8),DU(t,e,n,r,52,8),n+8}oe.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),oe.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=oe.prototype;else{var i=e-t;n=new oe(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},oe.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||sr(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},oe.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||sr(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},oe.prototype.readUInt8=function(t,e){return e||sr(t,1,this.length),this[t]},oe.prototype.readUInt16LE=function(t,e){return e||sr(t,2,this.length),this[t]|this[t+1]<<8},oe.prototype.readUInt16BE=function(t,e){return e||sr(t,2,this.length),this[t]<<8|this[t+1]},oe.prototype.readUInt32LE=function(t,e){return e||sr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},oe.prototype.readUInt32BE=function(t,e){return e||sr(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},oe.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||sr(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},oe.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||sr(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},oe.prototype.readInt8=function(t,e){return e||sr(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},oe.prototype.readInt16LE=function(t,e){e||sr(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},oe.prototype.readInt16BE=function(t,e){e||sr(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},oe.prototype.readInt32LE=function(t,e){return e||sr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},oe.prototype.readInt32BE=function(t,e){return e||sr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},oe.prototype.readFloatLE=function(t,e){return e||sr(t,4,this.length),o1(this,t,!0,23,4)},oe.prototype.readFloatBE=function(t,e){return e||sr(t,4,this.length),o1(this,t,!1,23,4)},oe.prototype.readDoubleLE=function(t,e){return e||sr(t,8,this.length),o1(this,t,!0,52,8)},oe.prototype.readDoubleBE=function(t,e){return e||sr(t,8,this.length),o1(this,t,!1,52,8)},oe.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Pi(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},oe.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Pi(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},oe.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,1,255,0),oe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},oe.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,2,65535,0),oe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):a1(this,t,e,!0),e+2},oe.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,2,65535,0),oe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):a1(this,t,e,!1),e+2},oe.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,4,4294967295,0),oe.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):c1(this,t,e,!0),e+4},oe.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,4,4294967295,0),oe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):c1(this,t,e,!1),e+4},oe.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Pi(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},oe.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);Pi(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},oe.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,1,127,-128),oe.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},oe.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,2,32767,-32768),oe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):a1(this,t,e,!0),e+2},oe.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,2,32767,-32768),oe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):a1(this,t,e,!1),e+2},oe.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,4,2147483647,-2147483648),oe.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):c1(this,t,e,!0),e+4},oe.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Pi(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),oe.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):c1(this,t,e,!1),e+4},oe.prototype.writeFloatLE=function(t,e,n){return nP(this,t,e,!0,n)},oe.prototype.writeFloatBE=function(t,e,n){return nP(this,t,e,!1,n)},oe.prototype.writeDoubleLE=function(t,e,n){return rP(this,t,e,!0,n)},oe.prototype.writeDoubleBE=function(t,e,n){return rP(this,t,e,!1,n)},oe.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!oe.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},oe.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!oe.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=_a(t)?t:Sv(new oe(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var rae=/[^+\/0-9A-Za-z-_]/g;function iae(t){return t<16?"0"+t.toString(16):t.toString(16)}function Sv(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function zU(t){return function(e){var n,r,i,s,o,a;V6||MU();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new qoe(3*c/4-o),i=o>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)s=no[e.charCodeAt(n)]<<18|no[e.charCodeAt(n+1)]<<12|no[e.charCodeAt(n+2)]<<6|no[e.charCodeAt(n+3)],a[l++]=s>>16&255,a[l++]=s>>8&255,a[l++]=255&s;return o===2?(s=no[e.charCodeAt(n)]<<2|no[e.charCodeAt(n+1)]>>4,a[l++]=255&s):o===1&&(s=no[e.charCodeAt(n)]<<10|no[e.charCodeAt(n+1)]<<4|no[e.charCodeAt(n+2)]>>2,a[l++]=s>>8&255,a[l++]=255&s),a}(function(e){if((e=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(e).replace(rae,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function oE(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function KU(t){return t!=null&&(!!t._isBuffer||iP(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&iP(e.slice(0,0))}(t))}function iP(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var sae=Object.freeze({__proto__:null,Buffer:oe,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),oe.alloc(+t)},isBuffer:KU,kMaxLength:Koe}),uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Kf={},ks={},si={};function Av(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function VU(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function WU(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function G6(t,...e){if(!WU(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function GU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");Av(t.outputLen),Av(t.blockLen)}function ZU(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function YU(t,e){G6(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(si,"__esModule",{value:!0}),si.isBytes=WU,si.number=Av,si.bool=VU,si.bytes=G6,si.hash=GU,si.exists=ZU,si.output=YU;const oae={number:Av,bool:VU,bytes:G6,hash:GU,exists:ZU,output:YU};si.default=oae,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(d){return a(r(d))},t.numberToBytesBE=function(d,h){return o(d.toString(16).padStart(2*h,"0"))},t.asyncLoop=async function(d,h,f){let p=Date.now();for(let g=0;g<d;g++){f(g);const m=Date.now()-p;m>=0&&m<h||(await(0,t.nextTick)(),p+=m)}},t.utf8ToBytes=c,t.bytesToUtf8=function(d){return new TextDecoder().decode(d)},t.toBytes=function(d){if(typeof d=="string")d=c(d);else{if(!(0,e.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},t.concatBytes=function(...d){let h=0;for(let p=0;p<d.length;p++){const g=d[p];(0,e.bytes)(g),h+=g.length}const f=new Uint8Array(h);for(let p=0,g=0;p<d.length;p++){const m=d[p];f.set(m,g),g+=m.length}return f},t.checkOpts=function(d,h){if(h==null||typeof h!="object")throw new Error("options must be defined");return Object.assign(d,h)},t.equalBytes=function(d,h){if(d.length!==h.length)return!1;let f=0;for(let p=0;p<d.length;p++)f|=d[p]^h[p];return f===0},t.setBigUint64=l,t.u64Lengths=function(d,h){const f=new Uint8Array(16),p=(0,t.createView)(f);return l(p,0,BigInt(h?h.length:0),!0),l(p,8,BigInt(d.length),!0),f},t.isAligned32=function(d){return d.byteOffset%4==0},t.copyBytes=u,t.clean=function(...d){for(let h=0;h<d.length;h++)d[h].fill(0)};const e=si;if(t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},(d,h)=>h.toString(16).padStart(2,"0"));function r(d){(0,e.bytes)(d);let h="";for(let f=0;f<d.length;f++)h+=n[d[f]];return h}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(d){return d>=i._0&&d<=i._9?d-i._0:d>=i._A&&d<=i._F?d-(i._A-10):d>=i._a&&d<=i._f?d-(i._a-10):void 0}function o(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const h=d.length,f=h/2;if(h%2)throw new Error("padded hex string expected, got unpadded hex of length "+h);const p=new Uint8Array(f);for(let g=0,m=0;g<f;g++,m+=2){const w=s(d.charCodeAt(m)),b=s(d.charCodeAt(m+1));if(w===void 0||b===void 0){const y=d[m]+d[m+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+m)}p[g]=16*w+b}return p}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function c(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}t.nextTick=async()=>{},t.Hash=class{};function l(d,h,f,p){if(typeof d.setBigUint64=="function")return d.setBigUint64(h,f,p);const g=BigInt(32),m=BigInt(4294967295),w=Number(f>>g&m),b=Number(f&m),y=p?4:0,_=p?0:4;d.setUint32(h+y,w,p),d.setUint32(h+_,b,p)}function u(d){return Uint8Array.from(d)}t.wrapCipher=(d,h)=>(Object.assign(h,d),h)}(ks);var Fm={},hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.AEAD_TAG_LENGTH=hr.XCHACHA20_NONCE_LENGTH=hr.CURVE25519_PUBLIC_KEY_SIZE=hr.ETH_PUBLIC_KEY_SIZE=hr.UNCOMPRESSED_PUBLIC_KEY_SIZE=hr.COMPRESSED_PUBLIC_KEY_SIZE=hr.SECRET_KEY_LENGTH=void 0,hr.SECRET_KEY_LENGTH=32,hr.COMPRESSED_PUBLIC_KEY_SIZE=33,hr.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,hr.ETH_PUBLIC_KEY_SIZE=64,hr.CURVE25519_PUBLIC_KEY_SIZE=32,hr.XCHACHA20_NONCE_LENGTH=24,hr.AEAD_TAG_LENGTH=16,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=hr,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(Fm);var z3={},xv={},cE={},QU={},Z6={},l1={};Object.defineProperty(l1,"__esModule",{value:!0}),l1.crypto=void 0,l1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(d,...h){const{nonceLength:f}=c,p=i(f),g=c(l,p,...u).encrypt(d,...h),m=(0,r.concatBytes)(p,g);return g.fill(0),m},decrypt(d,...h){const{nonceLength:f}=c,p=d.subarray(0,f),g=d.subarray(f);return c(l,p,...u).decrypt(g,...h)}})};const e=l1,n=si,r=ks;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,d){const h=s(),f=await h.importKey("raw",c,l,!0,["encrypt"]),p=await h.encrypt(u,f,d);return new Uint8Array(p)},async decrypt(c,l,u,d){const h=s(),f=await h.importKey("raw",c,l,!0,["decrypt"]),p=await h.decrypt(u,f,d);return new Uint8Array(p)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,d)=>{(0,n.bytes)(l),(0,n.bytes)(u);const h={name:c,length:8*l.length},f=function(p,g,m){if(p===o.CBC)return{name:o.CBC,iv:g};if(p===o.CTR)return{name:o.CTR,counter:g,length:64};if(p===o.GCM)return m?{name:o.GCM,iv:g,additionalData:m}:{name:o.GCM,iv:g};throw new Error("unknown aes block mode")}(c,u,d);return{encrypt:p=>((0,n.bytes)(p),t.utils.encrypt(l,h,f,p)),decrypt:p=>((0,n.bytes)(p),t.utils.decrypt(l,h,f,p))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)}(Z6);var JU={},yr={},Mc={},fs={};function Iv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function XU(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ej(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Y6(t,...e){if(!ej(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function tj(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Iv(t.outputLen),Iv(t.blockLen)}function nj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rj(t,e){Y6(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(fs,"__esModule",{value:!0}),fs.isBytes=ej,fs.number=Iv,fs.bool=XU,fs.bytes=Y6,fs.hash=tj,fs.exists=nj,fs.output=rj;const aae={number:Iv,bool:XU,bytes:Y6,hash:tj,exists:nj,output:rj};fs.default=aae;var Xc={},u1={};Object.defineProperty(u1,"__esModule",{value:!0}),u1.crypto=void 0,u1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let d=0;d<l.length;d++)u+=r[l[d]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const h=new Uint8Array(d);for(let f=0,p=0;f<d;f++,p+=2){const g=s(l.charCodeAt(p)),m=s(l.charCodeAt(p+1));if(g===void 0||m===void 0){const w=l[p]+l[p+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+p)}h[f]=16*g+m}return h},t.asyncLoop=async function(l,u,d){let h=Date.now();for(let f=0;f<l;f++){d(f);const p=Date.now()-h;p>=0&&p<u||(await(0,t.nextTick)(),h+=p)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let h=0;h<l.length;h++){const f=l[h];(0,n.bytes)(f),u+=f.length}const d=new Uint8Array(u);for(let h=0,f=0;h<l.length;h++){const p=l[h];d.set(p,f),f+=p.length}return d},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=h=>l().update(a(h)).digest(),d=l();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(h,f)=>l(f).update(a(h)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=h=>l(h),u},t.wrapXOFConstructorWithOpts=function(l){const u=(h,f)=>l(f).update(a(h)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=h=>l(h),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=u1,n=fs;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},(l,u)=>u.toString(16).padStart(2,"0")),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function o(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=o(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString}(Xc),Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.HashMD=Mc.Maj=Mc.Chi=void 0;const K3=fs,w0=Xc;Mc.Chi=(t,e,n)=>t&e^~t&n;Mc.Maj=(t,e,n)=>t&e^t&n^e&n;Mc.HashMD=class extends w0.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,w0.createView)(this.buffer)}update(t){(0,K3.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,w0.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,w0.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,K3.exists)(this),(0,K3.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,d,h,f){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,h,f);const p=BigInt(32),g=BigInt(4294967295),m=Number(h>>p&g),w=Number(h&g),b=f?4:0,y=f?0:4;u.setUint32(d+b,m,f),u.setUint32(d+y,w,f)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,w0.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.add5L=nt.add5H=nt.add4H=nt.add4L=nt.add3H=nt.add3L=nt.rotlBL=nt.rotlBH=nt.rotlSL=nt.rotlSH=nt.rotr32L=nt.rotr32H=nt.rotrBL=nt.rotrBH=nt.rotrSL=nt.rotrSH=nt.shrSL=nt.shrSH=nt.toBig=void 0,nt.fromBig=Q6,nt.split=ij,nt.add=yj;const d1=BigInt(2**32-1),xS=BigInt(32);function Q6(t,e=!1){return e?{h:Number(t&d1),l:Number(t>>xS&d1)}:{h:0|Number(t>>xS&d1),l:0|Number(t&d1)}}function ij(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Q6(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const sj=(t,e)=>BigInt(t>>>0)<<xS|BigInt(e>>>0);nt.toBig=sj;const oj=(t,e,n)=>t>>>n;nt.shrSH=oj;const aj=(t,e,n)=>t<<32-n|e>>>n;nt.shrSL=aj;const cj=(t,e,n)=>t>>>n|e<<32-n;nt.rotrSH=cj;const lj=(t,e,n)=>t<<32-n|e>>>n;nt.rotrSL=lj;const uj=(t,e,n)=>t<<64-n|e>>>n-32;nt.rotrBH=uj;const dj=(t,e,n)=>t>>>n-32|e<<64-n;nt.rotrBL=dj;const hj=(t,e)=>e;nt.rotr32H=hj;const fj=(t,e)=>t;nt.rotr32L=fj;const pj=(t,e,n)=>t<<n|e>>>32-n;nt.rotlSH=pj;const gj=(t,e,n)=>e<<n|t>>>32-n;nt.rotlSL=gj;const mj=(t,e,n)=>e<<n-32|t>>>64-n;nt.rotlBH=mj;const wj=(t,e,n)=>t<<n-32|e>>>64-n;function yj(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}nt.rotlBL=wj;const bj=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);nt.add3L=bj;const vj=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;nt.add3H=vj;const Ej=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);nt.add4L=Ej;const Cj=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;nt.add4H=Cj;const _j=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);nt.add5L=_j;const Sj=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;nt.add5H=Sj;const cae={fromBig:Q6,split:ij,toBig:sj,shrSH:oj,shrSL:aj,rotrSH:cj,rotrSL:lj,rotrBH:uj,rotrBL:dj,rotr32H:hj,rotr32L:fj,rotlSH:pj,rotlSL:gj,rotlBH:mj,rotlBL:wj,add:yj,add3L:bj,add3H:vj,add4L:Ej,add4H:Cj,add5H:Sj,add5L:_j};nt.default=cae,Object.defineProperty(yr,"__esModule",{value:!0}),yr.sha384=yr.sha512_256=yr.sha512_224=yr.sha512=yr.SHA384=yr.SHA512_256=yr.SHA512_224=yr.SHA512=void 0;const lae=Mc,at=nt,h1=Xc,[uae,dae]=at.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ul=new Uint32Array(80),dl=new Uint32Array(80);let qw=class extends lae.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|d,this.Fl=0|h,this.Gh=0|f,this.Gl=0|p,this.Hh=0|g,this.Hl=0|m}process(e,n){for(let y=0;y<16;y++,n+=4)ul[y]=e.getUint32(n),dl[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const _=0|ul[y-15],A=0|dl[y-15],T=at.default.rotrSH(_,A,1)^at.default.rotrSH(_,A,8)^at.default.shrSH(_,A,7),$=at.default.rotrSL(_,A,1)^at.default.rotrSL(_,A,8)^at.default.shrSL(_,A,7),D=0|ul[y-2],O=0|dl[y-2],j=at.default.rotrSH(D,O,19)^at.default.rotrBH(D,O,61)^at.default.shrSH(D,O,6),F=at.default.rotrSL(D,O,19)^at.default.rotrBL(D,O,61)^at.default.shrSL(D,O,6),L=at.default.add4L($,F,dl[y-7],dl[y-16]),B=at.default.add4H(L,T,j,ul[y-7],ul[y-16]);ul[y]=0|B,dl[y]=0|L}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:b}=this;for(let y=0;y<80;y++){const _=at.default.rotrSH(d,h,14)^at.default.rotrSH(d,h,18)^at.default.rotrBH(d,h,41),A=at.default.rotrSL(d,h,14)^at.default.rotrSL(d,h,18)^at.default.rotrBL(d,h,41),T=d&f^~d&g,$=h&p^~h&m,D=at.default.add5L(b,A,$,dae[y],dl[y]),O=at.default.add5H(D,w,_,T,uae[y],ul[y]),j=0|D,F=at.default.rotrSH(r,i,28)^at.default.rotrBH(r,i,34)^at.default.rotrBH(r,i,39),L=at.default.rotrSL(r,i,28)^at.default.rotrBL(r,i,34)^at.default.rotrBL(r,i,39),B=r&s^r&a^s&a,x=i&o^i&c^o&c;w=0|g,b=0|m,g=0|f,m=0|p,f=0|d,p=0|h,{h:d,l:h}=at.default.add(0|l,0|u,0|O,0|j),l=0|a,u=0|c,a=0|s,c=0|o,s=0|r,o=0|i;const v=at.default.add3L(j,L,x);r=at.default.add3H(v,O,F,B),i=0|v}({h:r,l:i}=at.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=at.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l:c}=at.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=at.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:d,l:h}=at.default.add(0|this.Eh,0|this.El,0|d,0|h),{h:f,l:p}=at.default.add(0|this.Fh,0|this.Fl,0|f,0|p),{h:g,l:m}=at.default.add(0|this.Gh,0|this.Gl,0|g,0|m),{h:w,l:b}=at.default.add(0|this.Hh,0|this.Hl,0|w,0|b),this.set(r,i,s,o,a,c,l,u,d,h,f,p,g,m,w,b)}roundClean(){ul.fill(0),dl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};yr.SHA512=qw;let Aj=class extends qw{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};yr.SHA512_224=Aj;let xj=class extends qw{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};yr.SHA512_256=xj;let sP=class extends qw{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};yr.SHA384=sP,yr.sha512=(0,h1.wrapConstructor)(()=>new qw),yr.sha512_224=(0,h1.wrapConstructor)(()=>new Aj),yr.sha512_256=(0,h1.wrapConstructor)(()=>new xj),yr.sha384=(0,h1.wrapConstructor)(()=>new sP);var IS={},ip={},Bt={},lt={};Object.defineProperty(lt,"__esModule",{value:!0}),lt.notImplemented=lt.bitMask=void 0,lt.isBytes=Ov,lt.abytes=Pv,lt.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},lt.bytesToHex=V3,lt.numberToHexUnpadded=oP,lt.hexToNumber=W3,lt.hexToBytes=Ab,lt.bytesToNumberBE=function(t){return W3(V3(t))},lt.bytesToNumberLE=function(t){return Pv(t),W3(V3(Uint8Array.from(t).reverse()))},lt.numberToBytesBE=cP,lt.numberToBytesLE=function(t,e){return cP(t,e).reverse()},lt.numberToVarBytesBE=function(t){return Ab(oP(t))},lt.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=Ab(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!Ov(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},lt.concatBytes=lP,lt.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},lt.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},lt.inRange=uP,lt.aInRange=function(t,e,n,r){if(!uP(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},lt.bitLen=function(t){let e;for(e=0;t>OS;t>>=Sb,e+=1);return e},lt.bitGet=function(t,e){return t>>BigInt(e)&Sb},lt.bitSet=function(t,e,n){return t|(n?Sb:OS)<<BigInt(e)},lt.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Z3(t),i=Z3(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=Z3())=>{i=a(dP([0]),u),r=a(),u.length!==0&&(i=a(dP([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return lP(...d)};return(u,d)=>{let h;for(o(),c(u);!(h=d(l()));)c();return o(),h}},lt.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=pae[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},lt.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const OS=BigInt(0),Sb=BigInt(1),hae=BigInt(2);function Ov(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Pv(t){if(!Ov(t))throw new Error("Uint8Array expected")}const fae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function V3(t){Pv(t);let e="";for(let n=0;n<t.length;n++)e+=fae[t[n]];return e}function oP(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function W3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ja={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function aP(t){return t>=Ja._0&&t<=Ja._9?t-Ja._0:t>=Ja._A&&t<=Ja._F?t-(Ja._A-10):t>=Ja._a&&t<=Ja._f?t-(Ja._a-10):void 0}function Ab(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=aP(t.charCodeAt(s)),a=aP(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=16*o+a}return r}function cP(t,e){return Ab(t.toString(16).padStart(2*e,"0"))}function lP(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Pv(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const G3=t=>typeof t=="bigint"&&OS<=t;function uP(t,e,n){return G3(t)&&G3(e)&&G3(n)&&e<=t&&t<n}lt.bitMask=t=>(hae<<BigInt(t-1))-Sb;const Z3=t=>new Uint8Array(t),dP=t=>Uint8Array.from(t),pae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ov(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};lt.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.isNegativeLE=void 0,Bt.mod=us,Bt.pow=Ij,Bt.pow2=function(t,e,n){let r=t;for(;e-- >Sr;)r*=r,r%=n;return r},Bt.invert=f1,Bt.tonelliShanks=Oj,Bt.FpSqrt=pP,Bt.validateField=function(t){const e=mae.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,ns.validateObject)(t,e)},Bt.FpPow=gP,Bt.FpInvertBatch=mP,Bt.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?f1(n,t.ORDER):t.inv(n))},Bt.FpLegendre=wP,Bt.FpIsSquare=function(t){const e=wP(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},Bt.nLength=Y3,Bt.Field=function(t,e,n=!1,r={}){if(t<=Sr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Y3(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=pP(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,ns.bitMask)(i),ZERO:Sr,ONE:cn,create:c=>us(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Sr<=c&&c<t},is0:c=>c===Sr,isOdd:c=>(c&cn)===cn,neg:c=>us(-c,t),eql:(c,l)=>c===l,sqr:c=>us(c*c,t),add:(c,l)=>us(c+l,t),sub:(c,l)=>us(c-l,t),mul:(c,l)=>us(c*l,t),pow:(c,l)=>gP(a,c,l),div:(c,l)=>us(c*f1(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>f1(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>mP(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,ns.numberToBytesLE)(c,s):(0,ns.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,ns.bytesToNumberLE)(c):(0,ns.bytesToNumberBE)(c)}});return Object.freeze(a)},Bt.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},Bt.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},Bt.hashToPrivateScalar=function(t,e,n=!1){t=(0,ns.ensureBytes)("privateHash",t);const r=t.length,i=Y3(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,ns.bytesToNumberLE)(t):(0,ns.bytesToNumberBE)(t);return us(s,e-cn)+cn},Bt.getFieldBytesLength=TS,Bt.getMinHashLength=yP,Bt.mapHashToField=function(t,e,n=!1){const r=t.length,i=TS(e),s=yP(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=us(n?(0,ns.bytesToNumberBE)(t):(0,ns.bytesToNumberLE)(t),e-cn)+cn;return n?(0,ns.numberToBytesLE)(o,i):(0,ns.numberToBytesBE)(o,i)};const ns=lt,Sr=BigInt(0),cn=BigInt(1),Kl=BigInt(2),gae=BigInt(3),PS=BigInt(4),hP=BigInt(5),fP=BigInt(8);function us(t,e){const n=t%e;return n>=Sr?n:e+n}function Ij(t,e,n){if(n<=Sr||e<Sr)throw new Error("Expected power/modulo > 0");if(n===cn)return Sr;let r=cn;for(;e>Sr;)e&cn&&(r=r*t%n),t=t*t%n,e>>=cn;return r}function f1(t,e){if(t===Sr||e<=Sr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=us(t,e),r=e,i=Sr,s=cn;for(;n!==Sr;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==cn)throw new Error("invert: does not exist");return us(i,e)}function Oj(t){const e=(t-cn)/Kl;let n,r,i;for(n=t-cn,r=0;n%Kl===Sr;n/=Kl,r++);for(i=Kl;i<t&&Ij(i,e,t)!==t-cn;i++);if(r===1){const o=(t+cn)/PS;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+cn)/Kl;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,cn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function pP(t){if(t%PS===gae){const e=(t+cn)/PS;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%fP===hP){const e=(t-hP)/fP;return function(n,r){const i=n.mul(r,Kl),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Kl),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Oj(t)}BigInt(9),BigInt(16);Bt.isNegativeLE=(t,e)=>(us(t,e)&cn)===cn;const mae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gP(t,e,n){if(n<Sr)throw new Error("Expected power > 0");if(n===Sr)return t.ONE;if(n===cn)return e;let r=t.ONE,i=e;for(;n>Sr;)n&cn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=cn;return r}function mP(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function wP(t){const e=(t-cn)/Kl;return(n,r)=>n.pow(r,e)}function Y3(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function TS(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function yP(t){const e=TS(t);return e+Math.ceil(e/2)}Object.defineProperty(ip,"__esModule",{value:!0}),ip.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,c=s;for(;o>wae;)o&Q3&&(a=a.add(c)),c=c.double(),o>>=Q3;return a},precomputeWindow(s,o){const{windows:a,windowSize:c}=i(o),l=[];let u=s,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let f=1;f<c;f++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,o,a){const{windows:c,windowSize:l}=i(s);let u=t.ZERO,d=t.BASE;const h=BigInt(2**s-1),f=2**s,p=BigInt(s);for(let g=0;g<c;g++){const m=g*l;let w=Number(a&h);a>>=p,w>l&&(w-=f,a+=Q3);const b=m,y=m+Math.abs(w)-1,_=g%2!=0,A=w<0;w===0?d=d.add(n(_,o[b])):u=u.add(n(A,o[y]))}return{p:u,f:d}},wNAFCached(s,o,a){const c=EP.get(s)||1;let l=J3.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&J3.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),EP.set(s,o),J3.delete(s)}}},ip.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((u,d)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${d}`)}),n.forEach((u,d)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${d}`)});const i=(0,vP.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let u=c;u>=0;u-=s){a.fill(t.ZERO);for(let h=0;h<r.length;h++){const f=r[h],p=Number(f>>BigInt(u)&BigInt(o));a[p]=a[p].add(n[h])}let d=t.ZERO;for(let h=a.length-1,f=t.ZERO;h>0;h--)f=f.add(a[h]),d=d.add(f);if(l=l.add(d),u!==0)for(let h=0;h<s;h++)l=l.double()}return l},ip.validateBasic=function(t){return(0,bP.validateField)(t.Fp),(0,vP.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,bP.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const bP=Bt,vP=lt,wae=BigInt(0),Q3=BigInt(1),J3=new WeakMap,EP=new WeakMap;Object.defineProperty(IS,"__esModule",{value:!0}),IS.twistedEdwards=function(t){const e=function(B){const x=(0,X3.validateBasic)(B);return Ti.validateObject(B,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...x})}(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=p1<<BigInt(8*a)-ki,u=n.create,d=(0,CP.Field)(e.n,e.nBitLength),h=e.uvRatio||((B,x)=>{try{return{isValid:!0,value:n.sqrt(B*n.inv(x))}}catch{return{isValid:!1,value:bo}}}),f=e.adjustScalarBytes||(B=>B),p=e.domain||((B,x,v)=>{if((0,rs.abool)("phflag",v),x.length||v)throw new Error("Contexts/pre-hash are not supported");return B});function g(B,x){Ti.aInRange("coordinate "+B,x,bo,l)}function m(B){if(!(B instanceof y))throw new Error("ExtendedPoint expected")}const w=(0,rs.memoized)((B,x)=>{const{ex:v,ey:S,ez:N}=B,E=B.is0();x==null&&(x=E?yae:n.inv(N));const C=u(v*x),P=u(S*x),M=u(N*x);if(E)return{x:bo,y:ki};if(M!==ki)throw new Error("invZ was invalid");return{x:C,y:P}}),b=(0,rs.memoized)(B=>{const{a:x,d:v}=e;if(B.is0())throw new Error("bad point: ZERO");const{ex:S,ey:N,ez:E,et:C}=B,P=u(S*S),M=u(N*N),I=u(E*E),k=u(I*I),R=u(P*x);if(u(I*u(R+M))!==u(k+u(v*u(P*M))))throw new Error("bad point: equation left != right (1)");if(u(S*N)!==u(E*C))throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(x,v,S,N){this.ex=x,this.ey=v,this.ez=S,this.et=N,g("x",x),g("y",v),g("z",S),g("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof y)throw new Error("extended point not allowed");const{x:v,y:S}=x||{};return g("x",v),g("y",S),new y(v,S,ki,u(v*S))}static normalizeZ(x){const v=n.invertBatch(x.map(S=>S.ez));return x.map((S,N)=>S.toAffine(v[N])).map(y.fromAffine)}static msm(x,v){return(0,X3.pippenger)(y,d,x,v)}_setWindowSize(x){T.setWindowSize(this,x)}assertValidity(){b(this)}equals(x){m(x);const{ex:v,ey:S,ez:N}=this,{ex:E,ey:C,ez:P}=x,M=u(v*P),I=u(E*N),k=u(S*P),R=u(C*N);return M===I&&k===R}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:x}=e,{ex:v,ey:S,ez:N}=this,E=u(v*v),C=u(S*S),P=u(p1*u(N*N)),M=u(x*E),I=v+S,k=u(u(I*I)-E-C),R=M+C,U=R-P,q=M-C,H=u(k*U),z=u(R*q),K=u(k*q),G=u(U*R);return new y(H,z,G,K)}add(x){m(x);const{a:v,d:S}=e,{ex:N,ey:E,ez:C,et:P}=this,{ex:M,ey:I,ez:k,et:R}=x;if(v===BigInt(-1)){const Ae=u((E-N)*(I+M)),Re=u((E+N)*(I-M)),Me=u(Re-Ae);if(Me===bo)return this.double();const Qe=u(C*p1*R),et=u(P*p1*k),ze=et+Qe,Ye=Re+Ae,Je=et-Qe,ne=u(ze*Me),le=u(Ye*Je),ke=u(ze*Je),qe=u(Me*Ye);return new y(ne,le,qe,ke)}const U=u(N*M),q=u(E*I),H=u(P*S*R),z=u(C*k),K=u((N+E)*(M+I)-U-q),G=z-H,Y=z+H,X=u(q-v*U),ie=u(K*G),de=u(Y*X),Se=u(K*X),Ee=u(G*Y);return new y(ie,de,Ee,Se)}subtract(x){return this.add(x.negate())}wNAF(x){return T.wNAFCached(this,x,y.normalizeZ)}multiply(x){const v=x;Ti.aInRange("scalar",v,ki,r);const{p:S,f:N}=this.wNAF(v);return y.normalizeZ([S,N])[0]}multiplyUnsafe(x){const v=x;return Ti.aInRange("scalar",v,bo,r),v===bo?A:this.equals(A)||v===ki?this:this.equals(_)?this.wNAF(v).p:T.unsafeLadder(this,v)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(x){return w(this,x)}clearCofactor(){const{h:x}=e;return x===ki?this:this.multiplyUnsafe(x)}static fromHex(x,v=!1){const{d:S,a:N}=e,E=n.BYTES;x=(0,rs.ensureBytes)("pointHex",x,E),(0,rs.abool)("zip215",v);const C=x.slice(),P=x[E-1];C[E-1]=-129&P;const M=Ti.bytesToNumberLE(C),I=v?l:n.ORDER;Ti.aInRange("pointHex.y",M,bo,I);const k=u(M*M),R=u(k-ki),U=u(S*k-N);let{isValid:q,value:H}=h(R,U);if(!q)throw new Error("Point.fromHex: invalid y coordinate");const z=(H&ki)===ki,K=(128&P)!=0;if(!v&&H===bo&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==z&&(H=u(-H)),y.fromAffine({x:H,y:M})}static fromPrivateKey(x){return O(x).point}toRawBytes(){const{x,y:v}=this.toAffine(),S=Ti.numberToBytesLE(v,n.BYTES);return S[S.length-1]|=x&ki?128:0,S}toHex(){return Ti.bytesToHex(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,ki,u(e.Gx*e.Gy)),y.ZERO=new y(bo,ki,ki,bo);const{BASE:_,ZERO:A}=y,T=(0,X3.wNAF)(y,8*a);function $(B){return(0,CP.mod)(B,r)}function D(B){return $(Ti.bytesToNumberLE(B))}function O(B){const x=a;B=(0,rs.ensureBytes)("private key",B,x);const v=(0,rs.ensureBytes)("hashed private key",s(B),2*x),S=f(v.slice(0,x)),N=v.slice(x,2*x),E=D(S),C=_.multiply(E),P=C.toRawBytes();return{head:S,prefix:N,scalar:E,point:C,pointBytes:P}}function j(B=new Uint8Array,...x){const v=Ti.concatBytes(...x);return D(s(p(v,(0,rs.ensureBytes)("context",B),!!i)))}const F=bae;return _._setWindowSize(8),{CURVE:e,getPublicKey:function(B){return O(B).pointBytes},sign:function(B,x,v={}){B=(0,rs.ensureBytes)("message",B),i&&(B=i(B));const{prefix:S,scalar:N,pointBytes:E}=O(x),C=j(v.context,S,B),P=_.multiply(C).toRawBytes(),M=$(C+j(v.context,P,E,B)*N);Ti.aInRange("signature.s",M,bo,r);const I=Ti.concatBytes(P,Ti.numberToBytesLE(M,n.BYTES));return(0,rs.ensureBytes)("result",I,2*a)},verify:function(B,x,v,S=F){const{context:N,zip215:E}=S,C=n.BYTES;B=(0,rs.ensureBytes)("signature",B,2*C),x=(0,rs.ensureBytes)("message",x),E!==void 0&&(0,rs.abool)("zip215",E),i&&(x=i(x));const P=Ti.bytesToNumberLE(B.slice(C,2*C));let M,I,k;try{M=y.fromHex(v,E),I=y.fromHex(B.slice(0,C),E),k=_.multiplyUnsafe(P)}catch{return!1}if(!E&&M.isSmallOrder())return!1;const R=j(N,I.toRawBytes(),M.toRawBytes(),x);return I.add(M.multiplyUnsafe(R)).subtract(k).clearCofactor().equals(y.ZERO)},ExtendedPoint:y,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(n.BYTES),precompute:(B=8,x=y.BASE)=>(x._setWindowSize(B),x.multiply(BigInt(3)),x)}}};const X3=ip,CP=Bt,Ti=lt,rs=lt,bo=BigInt(0),ki=BigInt(1),p1=BigInt(2),yae=BigInt(8),bae={zip215:!0};var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.expand_message_xmd=Pj,Ml.expand_message_xof=Tj,Ml.hash_to_field=eC,Ml.isogenyMap=function(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(l=>l.reduce((u,d)=>t.add(t.mul(u,r),d)));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},Ml.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=eC(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=eC(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const vae=Bt,ii=lt,Eae=ii.bytesToNumberBE;function Dl(t,e){if(qm(t),qm(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function Cae(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function qm(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Pj(t,e,n,r){(0,ii.abytes)(t),(0,ii.abytes)(e),qm(n),e.length>255&&(e=r((0,ii.concatBytes)((0,ii.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,ii.concatBytes)(e,Dl(e.length,1)),c=Dl(0,s),l=Dl(n,2),u=new Array(o),d=r((0,ii.concatBytes)(c,t,l,Dl(0,1),a));u[0]=r((0,ii.concatBytes)(d,Dl(1,1),a));for(let h=1;h<=o;h++){const f=[Cae(d,u[h-1]),Dl(h+1,1),a];u[h]=r((0,ii.concatBytes)(...f))}return(0,ii.concatBytes)(...u).slice(0,n)}function Tj(t,e,n,r,i){if((0,ii.abytes)(t),(0,ii.abytes)(e),qm(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,ii.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(Dl(n,2)).update(e).update(Dl(e.length,1)).digest()}function eC(t,e,n){(0,ii.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,ii.abytes)(t),qm(e);const l=typeof c=="string"?(0,ii.utf8ToBytes)(c):c,u=r.toString(2).length,d=Math.ceil((u+i)/8),h=e*s*d;let f;if(a==="xmd")f=Pj(t,l,h,o);else if(a==="xof")f=Tj(t,l,h,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');f=t}const p=new Array(e);for(let g=0;g<e;g++){const m=new Array(s);for(let w=0;w<s;w++){const b=d*(w+g*s),y=f.subarray(b,b+d);m[w]=(0,vae.mod)(Eae(y),r)}p[g]=m}return p}var kS={};Object.defineProperty(kS,"__esModule",{value:!0}),kS.montgomery=function(t){const e=function(g){return(0,hl.validateObject)(g,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...g})}(t),{P:n}=e,r=g=>(0,_P.mod)(g,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(g=>g),c=e.powPminus2||(g=>(0,_P.pow)(g,n-BigInt(2),n));function l(g,m,w){const b=r(g*(m-w));return[m=r(m-b),w=r(w+b)]}const u=(e.a-BigInt(2))/BigInt(4);function d(g){return(0,hl.numberToBytesLE)(r(g),s)}function h(g,m){const w=function(_){const A=(0,hl.ensureBytes)("u coordinate",_,s);return o===32&&(A[31]&=127),(0,hl.bytesToNumberLE)(A)}(m),b=function(_){const A=(0,hl.ensureBytes)("scalar",_),T=A.length;if(T!==s&&T!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${T}`);return(0,hl.bytesToNumberLE)(a(A))}(g),y=function(_,A){(0,hl.aInRange)("u",_,Jh,n),(0,hl.aInRange)("scalar",A,Jh,n);const T=A,$=_;let D,O=tC,j=Jh,F=_,L=tC,B=Jh;for(let v=BigInt(i-1);v>=Jh;v--){const S=T>>v&tC;B^=S,D=l(B,O,F),O=D[0],F=D[1],D=l(B,j,L),j=D[0],L=D[1],B=S;const N=O+j,E=r(N*N),C=O-j,P=r(C*C),M=E-P,I=F+L,k=r((F-L)*N),R=r(I*C),U=k+R,q=k-R;F=r(U*U),L=r($*r(q*q)),O=r(E*P),j=r(M*(E+r(u*M)))}D=l(B,O,F),O=D[0],F=D[1],D=l(B,j,L),j=D[0],L=D[1];const x=c(j);return r(O*x)}(w,b);if(y===Jh)throw new Error("Invalid private or public key received");return d(y)}const f=d(e.Gu);function p(g){return h(g,f)}return{scalarMult:h,scalarMultBase:p,getSharedSecret:(g,m)=>h(g,m),getPublicKey:g=>p(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:f}};const _P=Bt,hl=lt,Jh=BigInt(0),tC=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=T,t.edwardsToMontgomeryPriv=function(R){const U=_.hash(R.subarray(0,32));return _.adjustScalarBytes(U).subarray(0,32)};const e=yr,n=Xc,r=IS,i=Ml,s=Bt,o=kS,a=lt,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(5),g=BigInt(8);function m(R){const U=BigInt(10),q=BigInt(20),H=BigInt(40),z=BigInt(80),K=c,G=R*R%K*R%K,Y=(0,s.pow2)(G,h,K)*G%K,X=(0,s.pow2)(Y,d,K)*R%K,ie=(0,s.pow2)(X,p,K)*X%K,de=(0,s.pow2)(ie,U,K)*ie%K,Se=(0,s.pow2)(de,q,K)*de%K,Ee=(0,s.pow2)(Se,H,K)*Se%K,Ae=(0,s.pow2)(Ee,z,K)*Ee%K,Re=(0,s.pow2)(Ae,z,K)*Ee%K,Me=(0,s.pow2)(Re,U,K)*ie%K;return{pow_p_5_8:(0,s.pow2)(Me,h,K)*R%K,b2:G}}function w(R){return R[0]&=248,R[31]&=127,R[31]|=64,R}function b(R,U){const q=c,H=(0,s.mod)(U*U*U,q),z=m(R*(0,s.mod)(H*H*U,q)).pow_p_5_8;let K=(0,s.mod)(R*H*z,q);const G=(0,s.mod)(U*K*K,q),Y=K,X=(0,s.mod)(K*l,q),ie=G===R,de=G===(0,s.mod)(-R,q),Se=G===(0,s.mod)(-R*l,q);return ie&&(K=Y),(de||Se)&&(K=X),(0,s.isNegativeLE)(K,q)&&(K=(0,s.mod)(-K,q)),{isValid:ie||de,value:K}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const y=(0,s.Field)(c,void 0,!0),_={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:y,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:w,uvRatio:b};function A(R,U,q){if(U.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([q?1:0,U.length]),U,R)}function T(R){const{y:U}=t.ed25519.ExtendedPoint.fromHex(R),q=BigInt(1);return y.toBytes(y.create((q+U)*y.inv(q-U)))}t.ed25519=(0,r.twistedEdwards)(_),t.ed25519ctx=(0,r.twistedEdwards)({..._,domain:A}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},_,{domain:A,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:R=>{const U=c,{pow_p_5_8:q,b2:H}=m(R);return(0,s.mod)((0,s.pow2)(q,f,U)*H,U)},adjustScalarBytes:w,randomBytes:n.randomBytes}),t.edwardsToMontgomery=T;const $=(y.ORDER+f)/g,D=y.pow(h,$),O=y.sqrt(y.neg(y.ONE)),j=(0,s.FpSqrtEven)(y,y.neg(BigInt(486664)));function F(R){const{xMn:U,xMd:q,yMn:H,yMd:z}=function(Ee){const Ae=(y.ORDER-p)/g,Re=BigInt(486662);let Me=y.sqr(Ee);Me=y.mul(Me,h);let Qe=y.add(Me,y.ONE),et=y.neg(Re),ze=y.sqr(Qe),Ye=y.mul(ze,Qe),Je=y.mul(Me,Re);Je=y.mul(Je,et),Je=y.add(Je,ze),Je=y.mul(Je,et);let ne=y.sqr(Ye);ze=y.sqr(ne),ne=y.mul(ne,Ye),ne=y.mul(ne,Je),ze=y.mul(ze,ne);let le=y.pow(ze,Ae);le=y.mul(le,ne);let ke=y.mul(le,O);ze=y.sqr(le),ze=y.mul(ze,Ye);let qe=y.eql(ze,Je),mn=y.cmov(ke,le,qe),Ds=y.mul(et,Me),st=y.mul(le,Ee);st=y.mul(st,D);let bt=y.mul(st,O),tt=y.mul(Je,Me);ze=y.sqr(st),ze=y.mul(ze,Ye);let Kt=y.eql(ze,tt),yo=y.cmov(bt,st,Kt);ze=y.sqr(mn),ze=y.mul(ze,Ye);let Oi=y.eql(ze,Je),_t=y.cmov(Ds,et,Oi),Ve=y.cmov(yo,mn,Oi),Bs=y.isOdd(Ve);return Ve=y.cmov(Ve,y.neg(Ve),Oi!==Bs),{xMn:_t,xMd:Qe,yMn:Ve,yMd:d}}(R);let K=y.mul(U,z);K=y.mul(K,j);let G=y.mul(q,H),Y=y.sub(U,q),X=y.add(U,q),ie=y.mul(G,X),de=y.eql(ie,y.ZERO);K=y.cmov(K,y.ZERO,de),G=y.cmov(G,y.ONE,de),Y=y.cmov(Y,y.ONE,de),X=y.cmov(X,y.ONE,de);const Se=y.invertBatch([G,X]);return{x:y.mul(K,Se[0]),y:y.mul(Y,Se[1])}}const L=(0,i.createHasher)(t.ed25519.ExtendedPoint,R=>F(R[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function B(R){if(!(R instanceof k))throw new Error("RistrettoPoint expected")}t.hashToCurve=L.hashToCurve,t.encodeToCurve=L.encodeToCurve;const x=l,v=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),S=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),N=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),E=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),C=R=>b(d,R),P=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),M=R=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(R)&P);function I(R){const{d:U}=t.ed25519.CURVE,q=t.ed25519.CURVE.Fp.ORDER,H=t.ed25519.CURVE.Fp.create,z=H(x*R*R),K=H((z+d)*N);let G=BigInt(-1);const Y=H((G-U*z)*H(z+U));let{isValid:X,value:ie}=b(K,Y),de=H(ie*R);(0,s.isNegativeLE)(de,q)||(de=H(-de)),X||(ie=de),X||(G=z);const Se=H(G*(z-d)*E-Y),Ee=ie*ie,Ae=H((ie+ie)*Y),Re=H(Se*v),Me=H(d-Ee),Qe=H(d+Ee);return new t.ed25519.ExtendedPoint(H(Ae*Qe),H(Me*Re),H(Re*Qe),H(Ae*Me))}class k{constructor(U){this.ep=U}static fromAffine(U){return new k(t.ed25519.ExtendedPoint.fromAffine(U))}static hashToCurve(U){U=(0,a.ensureBytes)("ristrettoHash",U,64);const q=I(M(U.slice(0,32))),H=I(M(U.slice(32,64)));return new k(q.add(H))}static fromHex(U){U=(0,a.ensureBytes)("ristrettoHex",U,32);const{a:q,d:H}=t.ed25519.CURVE,z=t.ed25519.CURVE.Fp.ORDER,K=t.ed25519.CURVE.Fp.create,G="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",Y=M(U);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(Y,32),U)||(0,s.isNegativeLE)(Y,z))throw new Error(G);const X=K(Y*Y),ie=K(d+q*X),de=K(d-q*X),Se=K(ie*ie),Ee=K(de*de),Ae=K(q*H*Se-Ee),{isValid:Re,value:Me}=C(K(Ae*Ee)),Qe=K(Me*de),et=K(Me*Qe*Ae);let ze=K((Y+Y)*Qe);(0,s.isNegativeLE)(ze,z)&&(ze=K(-ze));const Ye=K(ie*et),Je=K(ze*Ye);if(!Re||(0,s.isNegativeLE)(Je,z)||Ye===u)throw new Error(G);return new k(new t.ed25519.ExtendedPoint(ze,Ye,d,Je))}toRawBytes(){let{ex:U,ey:q,ez:H,et:z}=this.ep;const K=t.ed25519.CURVE.Fp.ORDER,G=t.ed25519.CURVE.Fp.create,Y=G(G(H+q)*G(H-q)),X=G(U*q),ie=G(X*X),{value:de}=C(G(Y*ie)),Se=G(de*Y),Ee=G(de*X),Ae=G(Se*Ee*z);let Re;if((0,s.isNegativeLE)(z*Ae,K)){let Qe=G(q*x),et=G(U*x);U=Qe,q=et,Re=G(Se*S)}else Re=Ee;(0,s.isNegativeLE)(U*Ae,K)&&(q=G(-q));let Me=G((H-q)*Re);return(0,s.isNegativeLE)(Me,K)&&(Me=G(-Me)),(0,a.numberToBytesLE)(Me,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(U){B(U);const{ex:q,ey:H}=this.ep,{ex:z,ey:K}=U.ep,G=t.ed25519.CURVE.Fp.create,Y=G(q*K)===G(H*z),X=G(H*K)===G(q*z);return Y||X}add(U){return B(U),new k(this.ep.add(U.ep))}subtract(U){return B(U),new k(this.ep.subtract(U.ep))}multiply(U){return new k(this.ep.multiply(U))}multiplyUnsafe(U){return new k(this.ep.multiplyUnsafe(U))}double(){return new k(this.ep.double())}negate(){return new k(this.ep.negate())}}t.RistrettoPoint=(k.BASE||(k.BASE=new k(t.ed25519.ExtendedPoint.BASE)),k.ZERO||(k.ZERO=new k(t.ed25519.ExtendedPoint.ZERO)),k),t.hashToRistretto255=(R,U)=>{const q=U.DST,H=typeof q=="string"?(0,n.utf8ToBytes)(q):q,z=(0,i.expand_message_xmd)(R,H,64,e.sha512);return k.hashToCurve(z)},t.hash_to_ristretto255=t.hashToRistretto255})(JU);var kj={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.sha224=Dc.sha256=Dc.SHA256=void 0;const nC=Mc,Js=Xc,_ae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pl=new Uint32Array(64);let J6=class extends nC.HashMD{constructor(){super(64,32,8,!1),this.A=0|fl[0],this.B=0|fl[1],this.C=0|fl[2],this.D=0|fl[3],this.E=0|fl[4],this.F=0|fl[5],this.G=0|fl[6],this.H=0|fl[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|c}process(e,n){for(let d=0;d<16;d++,n+=4)pl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=pl[d-15],f=pl[d-2],p=(0,Js.rotr)(h,7)^(0,Js.rotr)(h,18)^h>>>3,g=(0,Js.rotr)(f,17)^(0,Js.rotr)(f,19)^f>>>10;pl[d]=g+pl[d-7]+p+pl[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=u+((0,Js.rotr)(a,6)^(0,Js.rotr)(a,11)^(0,Js.rotr)(a,25))+(0,nC.Chi)(a,c,l)+_ae[d]+pl[d]|0,f=((0,Js.rotr)(r,2)^(0,Js.rotr)(r,13)^(0,Js.rotr)(r,22))+(0,nC.Maj)(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){pl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Dc.SHA256=J6;let Sae=class extends J6{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Dc.sha256=(0,Js.wrapConstructor)(()=>new J6),Dc.sha224=(0,Js.wrapConstructor)(()=>new Sae);var xb={},X6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=fs,n=Xc;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?s.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=s.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:d}=this;return s.finished=c,s.destroyed=l,s.blockLen=u,s.outputLen=d,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(X6);var e8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=f,t.weierstrass=function(g){const m=function(R){const U=(0,e.validateBasic)(R);return r.validateObject(U,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...U})}(g),{Fp:w,n:b}=m,y=w.BYTES+1,_=2*w.BYTES+1;function A(R){return n.mod(R,b)}function T(R){return n.invert(R,b)}const{ProjectivePoint:$,normPrivateKeyToScalar:D,weierstrassEquation:O,isWithinCurveOrder:j}=f({...m,toBytes(R,U,q){const H=U.toAffine(),z=w.toBytes(H.x),K=r.concatBytes;return(0,i.abool)("isCompressed",q),q?K(Uint8Array.from([U.hasEvenY()?2:3]),z):K(Uint8Array.from([4]),z,w.toBytes(H.y))},fromBytes(R){const U=R.length,q=R[0],H=R.subarray(1);if(U!==y||q!==2&&q!==3){if(U===_&&q===4)return{x:w.fromBytes(H.subarray(0,w.BYTES)),y:w.fromBytes(H.subarray(w.BYTES,2*w.BYTES))};throw new Error(`Point of length ${U} was invalid. Expected ${y} compressed bytes or ${_} uncompressed bytes`)}{const z=r.bytesToNumberBE(H);if(!r.inRange(z,l,w.ORDER))throw new Error("Point is not on curve");const K=O(z);let G;try{G=w.sqrt(K)}catch(Y){const X=Y instanceof Error?": "+Y.message:"";throw new Error("Point is not on curve"+X)}return(1&q)==1!=((G&l)===l)&&(G=w.neg(G)),{x:z,y:G}}}}),F=R=>r.bytesToHex(r.numberToBytesBE(R,m.nByteLength));function L(R){return R>b>>l}const B=(R,U,q)=>r.bytesToNumberBE(R.slice(U,q));class x{constructor(U,q,H){this.r=U,this.s=q,this.recovery=H,this.assertValidity()}static fromCompact(U){const q=m.nByteLength;return U=(0,i.ensureBytes)("compactSignature",U,2*q),new x(B(U,0,q),B(U,q,2*q))}static fromDER(U){const{r:q,s:H}=t.DER.toSig((0,i.ensureBytes)("DER",U));return new x(q,H)}assertValidity(){r.aInRange("r",this.r,l,b),r.aInRange("s",this.s,l,b)}addRecoveryBit(U){return new x(this.r,this.s,U)}recoverPublicKey(U){const{r:q,s:H,recovery:z}=this,K=E((0,i.ensureBytes)("msgHash",U));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const G=z===2||z===3?q+m.n:q;if(G>=w.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=1&z?"03":"02",X=$.fromHex(Y+F(G)),ie=T(G),de=A(-K*ie),Se=A(H*ie),Ee=$.BASE.multiplyAndAddUnsafe(X,de,Se);if(!Ee)throw new Error("point at infinify");return Ee.assertValidity(),Ee}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,A(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return F(this.r)+F(this.s)}}const v={isValidPrivateKey(R){try{return D(R),!0}catch{return!1}},normPrivateKeyToScalar:D,randomPrivateKey:()=>{const R=n.getMinHashLength(m.n);return n.mapHashToField(m.randomBytes(R),m.n)},precompute:(R=8,U=$.BASE)=>(U._setWindowSize(R),U.multiply(BigInt(3)),U)};function S(R){const U=r.isBytes(R),q=typeof R=="string",H=(U||q)&&R.length;return U?H===y||H===_:q?H===2*y||H===2*_:R instanceof $}const N=m.bits2int||function(R){const U=r.bytesToNumberBE(R),q=8*R.length-m.nBitLength;return q>0?U>>BigInt(q):U},E=m.bits2int_modN||function(R){return A(N(R))},C=r.bitMask(m.nBitLength);function P(R){return r.aInRange(`num < 2^${m.nBitLength}`,R,c,C),r.numberToBytesBE(R,m.nByteLength)}function M(R,U,q=I){if(["recovered","canonical"].some(Ae=>Ae in q))throw new Error("sign() legacy options not supported");const{hash:H,randomBytes:z}=m;let{lowS:K,prehash:G,extraEntropy:Y}=q;K==null&&(K=!0),R=(0,i.ensureBytes)("msgHash",R),s(q),G&&(R=(0,i.ensureBytes)("prehashed msgHash",H(R)));const X=E(R),ie=D(U),de=[P(ie),P(X)];if(Y!=null&&Y!==!1){const Ae=Y===!0?z(w.BYTES):Y;de.push((0,i.ensureBytes)("extraEntropy",Ae))}const Se=r.concatBytes(...de),Ee=X;return{seed:Se,k2sig:function(Ae){const Re=N(Ae);if(!j(Re))return;const Me=T(Re),Qe=$.BASE.multiply(Re).toAffine(),et=A(Qe.x);if(et===c)return;const ze=A(Me*A(Ee+et*ie));if(ze===c)return;let Ye=(Qe.x===et?0:2)|Number(Qe.y&l),Je=ze;return K&&L(ze)&&(Je=function(ne){return L(ne)?A(-ne):ne}(ze),Ye^=1),new x(et,Je,Ye)}}}const I={lowS:m.lowS,prehash:!1},k={lowS:m.lowS,prehash:!1};return $.BASE._setWindowSize(8),{CURVE:m,getPublicKey:function(R,U=!0){return $.fromPrivateKey(R).toRawBytes(U)},getSharedSecret:function(R,U,q=!0){if(S(R))throw new Error("first arg must be private key");if(!S(U))throw new Error("second arg must be public key");return $.fromHex(U).multiply(D(R)).toRawBytes(q)},sign:function(R,U,q=I){const{seed:H,k2sig:z}=M(R,U,q),K=m;return r.createHmacDrbg(K.hash.outputLen,K.nByteLength,K.hmac)(H,z)},verify:function(R,U,q,H=k){const z=R;if(U=(0,i.ensureBytes)("msgHash",U),q=(0,i.ensureBytes)("publicKey",q),"strict"in H)throw new Error("options.strict was renamed to lowS");s(H);const{lowS:K,prehash:G}=H;let Y,X;try{if(typeof z=="string"||r.isBytes(z))try{Y=x.fromDER(z)}catch(et){if(!(et instanceof t.DER.Err))throw et;Y=x.fromCompact(z)}else{if(typeof z!="object"||typeof z.r!="bigint"||typeof z.s!="bigint")throw new Error("PARSE");{const{r:et,s:ze}=z;Y=new x(et,ze)}}X=$.fromHex(q)}catch(et){if(et.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&Y.hasHighS())return!1;G&&(U=m.hash(U));const{r:ie,s:de}=Y,Se=E(U),Ee=T(de),Ae=A(Se*Ee),Re=A(ie*Ee),Me=$.BASE.multiplyAndAddUnsafe(X,Ae,Re)?.toAffine();return Me?A(Me.x)===ie:!1},ProjectivePoint:$,Signature:x,utils:v}},t.SWUFpSqrtRatio=p,t.mapToCurveSimpleSWU=function(g,m){if(n.validateField(g),!g.isValid(m.A)||!g.isValid(m.B)||!g.isValid(m.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const w=p(g,m.Z);if(!g.isOdd)throw new Error("Fp.isOdd is not implemented!");return b=>{let y,_,A,T,$,D,O,j;y=g.sqr(b),y=g.mul(y,m.Z),_=g.sqr(y),_=g.add(_,y),A=g.add(_,g.ONE),A=g.mul(A,m.B),T=g.cmov(m.Z,g.neg(_),!g.eql(_,g.ZERO)),T=g.mul(T,m.A),_=g.sqr(A),D=g.sqr(T),$=g.mul(D,m.A),_=g.add(_,$),_=g.mul(_,A),D=g.mul(D,T),$=g.mul(D,m.B),_=g.add(_,$),O=g.mul(y,A);const{isValid:F,value:L}=w(_,D);j=g.mul(y,b),j=g.mul(j,L),O=g.cmov(O,A,F),j=g.cmov(j,L,F);const B=g.isOdd(b)===g.isOdd(j);return j=g.cmov(g.neg(j),j,B),O=g.div(O,T),{x:O,y:j}}};const e=ip,n=Bt,r=lt,i=lt;function s(g){g.lowS!==void 0&&(0,i.abool)("lowS",g.lowS),g.prehash!==void 0&&(0,i.abool)("prehash",g.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(g=""){super(g)}},_tlv:{encode:(g,m)=>{const{Err:w}=t.DER;if(g<0||g>256)throw new w("tlv.encode: wrong tag");if(1&m.length)throw new w("tlv.encode: unpadded data");const b=m.length/2,y=r.numberToHexUnpadded(b);if(y.length/2&128)throw new w("tlv.encode: long form length too big");const _=b>127?r.numberToHexUnpadded(y.length/2|128):"";return`${r.numberToHexUnpadded(g)}${_}${y}${m}`},decode(g,m){const{Err:w}=t.DER;let b=0;if(g<0||g>256)throw new w("tlv.encode: wrong tag");if(m.length<2||m[b++]!==g)throw new w("tlv.decode: wrong tlv");const y=m[b++];let _=0;if(128&y){const T=127&y;if(!T)throw new w("tlv.decode(long): indefinite length not supported");if(T>4)throw new w("tlv.decode(long): byte length is too big");const $=m.subarray(b,b+T);if($.length!==T)throw new w("tlv.decode: length bytes not complete");if($[0]===0)throw new w("tlv.decode(long): zero leftmost byte");for(const D of $)_=_<<8|D;if(b+=T,_<128)throw new w("tlv.decode(long): not minimal encoding")}else _=y;const A=m.subarray(b,b+_);if(A.length!==_)throw new w("tlv.decode: wrong value length");return{v:A,l:m.subarray(b+_)}}},_int:{encode(g){const{Err:m}=t.DER;if(g<c)throw new m("integer: negative integers are not allowed");let w=r.numberToHexUnpadded(g);if(8&Number.parseInt(w[0],16)&&(w="00"+w),1&w.length)throw new m("unexpected assertion");return w},decode(g){const{Err:m}=t.DER;if(128&g[0])throw new m("Invalid signature integer: negative");if(g[0]===0&&!(128&g[1]))throw new m("Invalid signature integer: unnecessary leading zero");return o(g)}},toSig(g){const{Err:m,_int:w,_tlv:b}=t.DER,y=typeof g=="string"?a(g):g;r.abytes(y);const{v:_,l:A}=b.decode(48,y);if(A.length)throw new m("Invalid signature: left bytes after parsing");const{v:T,l:$}=b.decode(2,_),{v:D,l:O}=b.decode(2,$);if(O.length)throw new m("Invalid signature: left bytes after parsing");return{r:w.decode(T),s:w.decode(D)}},hexFromSig(g){const{_tlv:m,_int:w}=t.DER,b=`${m.encode(2,w.encode(g.r))}${m.encode(2,w.encode(g.s))}`;return m.encode(48,b)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(3),h=BigInt(4);function f(g){const m=function(B){const x=(0,e.validateBasic)(B);r.validateObject(x,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:v,Fp:S,a:N}=x;if(v){if(!S.eql(N,S.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof v!="object"||typeof v.beta!="bigint"||typeof v.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...x})}(g),{Fp:w}=m,b=n.Field(m.n,m.nBitLength),y=m.toBytes||((B,x,v)=>{const S=x.toAffine();return r.concatBytes(Uint8Array.from([4]),w.toBytes(S.x),w.toBytes(S.y))}),_=m.fromBytes||(B=>{const x=B.subarray(1);return{x:w.fromBytes(x.subarray(0,w.BYTES)),y:w.fromBytes(x.subarray(w.BYTES,2*w.BYTES))}});function A(B){const{a:x,b:v}=m,S=w.sqr(B),N=w.mul(S,B);return w.add(w.add(N,w.mul(B,x)),v)}if(!w.eql(w.sqr(m.Gy),A(m.Gx)))throw new Error("bad generator point: equation left != right");function T(B){const{allowedPrivateKeyLengths:x,nByteLength:v,wrapPrivateKey:S,n:N}=m;if(x&&typeof B!="bigint"){if(r.isBytes(B)&&(B=r.bytesToHex(B)),typeof B!="string"||!x.includes(B.length))throw new Error("Invalid key");B=B.padStart(2*v,"0")}let E;try{E=typeof B=="bigint"?B:r.bytesToNumberBE((0,i.ensureBytes)("private key",B,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof B}`)}return S&&(E=n.mod(E,N)),r.aInRange("private key",E,l,N),E}function $(B){if(!(B instanceof j))throw new Error("ProjectivePoint expected")}const D=(0,i.memoized)((B,x)=>{const{px:v,py:S,pz:N}=B;if(w.eql(N,w.ONE))return{x:v,y:S};const E=B.is0();x==null&&(x=E?w.ONE:w.inv(N));const C=w.mul(v,x),P=w.mul(S,x),M=w.mul(N,x);if(E)return{x:w.ZERO,y:w.ZERO};if(!w.eql(M,w.ONE))throw new Error("invZ was invalid");return{x:C,y:P}}),O=(0,i.memoized)(B=>{if(B.is0()){if(m.allowInfinityPoint&&!w.is0(B.py))return;throw new Error("bad point: ZERO")}const{x,y:v}=B.toAffine();if(!w.isValid(x)||!w.isValid(v))throw new Error("bad point: x or y not FE");const S=w.sqr(v),N=A(x);if(!w.eql(S,N))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class j{constructor(x,v,S){if(this.px=x,this.py=v,this.pz=S,x==null||!w.isValid(x))throw new Error("x required");if(v==null||!w.isValid(v))throw new Error("y required");if(S==null||!w.isValid(S))throw new Error("z required");Object.freeze(this)}static fromAffine(x){const{x:v,y:S}=x||{};if(!x||!w.isValid(v)||!w.isValid(S))throw new Error("invalid affine point");if(x instanceof j)throw new Error("projective point not allowed");const N=E=>w.eql(E,w.ZERO);return N(v)&&N(S)?j.ZERO:new j(v,S,w.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const v=w.invertBatch(x.map(S=>S.pz));return x.map((S,N)=>S.toAffine(v[N])).map(j.fromAffine)}static fromHex(x){const v=j.fromAffine(_((0,i.ensureBytes)("pointHex",x)));return v.assertValidity(),v}static fromPrivateKey(x){return j.BASE.multiply(T(x))}static msm(x,v){return(0,e.pippenger)(j,b,x,v)}_setWindowSize(x){L.setWindowSize(this,x)}assertValidity(){O(this)}hasEvenY(){const{y:x}=this.toAffine();if(w.isOdd)return!w.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){$(x);const{px:v,py:S,pz:N}=this,{px:E,py:C,pz:P}=x,M=w.eql(w.mul(v,P),w.mul(E,N)),I=w.eql(w.mul(S,P),w.mul(C,N));return M&&I}negate(){return new j(this.px,w.neg(this.py),this.pz)}double(){const{a:x,b:v}=m,S=w.mul(v,d),{px:N,py:E,pz:C}=this;let P=w.ZERO,M=w.ZERO,I=w.ZERO,k=w.mul(N,N),R=w.mul(E,E),U=w.mul(C,C),q=w.mul(N,E);return q=w.add(q,q),I=w.mul(N,C),I=w.add(I,I),P=w.mul(x,I),M=w.mul(S,U),M=w.add(P,M),P=w.sub(R,M),M=w.add(R,M),M=w.mul(P,M),P=w.mul(q,P),I=w.mul(S,I),U=w.mul(x,U),q=w.sub(k,U),q=w.mul(x,q),q=w.add(q,I),I=w.add(k,k),k=w.add(I,k),k=w.add(k,U),k=w.mul(k,q),M=w.add(M,k),U=w.mul(E,C),U=w.add(U,U),k=w.mul(U,q),P=w.sub(P,k),I=w.mul(U,R),I=w.add(I,I),I=w.add(I,I),new j(P,M,I)}add(x){$(x);const{px:v,py:S,pz:N}=this,{px:E,py:C,pz:P}=x;let M=w.ZERO,I=w.ZERO,k=w.ZERO;const R=m.a,U=w.mul(m.b,d);let q=w.mul(v,E),H=w.mul(S,C),z=w.mul(N,P),K=w.add(v,S),G=w.add(E,C);K=w.mul(K,G),G=w.add(q,H),K=w.sub(K,G),G=w.add(v,N);let Y=w.add(E,P);return G=w.mul(G,Y),Y=w.add(q,z),G=w.sub(G,Y),Y=w.add(S,N),M=w.add(C,P),Y=w.mul(Y,M),M=w.add(H,z),Y=w.sub(Y,M),k=w.mul(R,G),M=w.mul(U,z),k=w.add(M,k),M=w.sub(H,k),k=w.add(H,k),I=w.mul(M,k),H=w.add(q,q),H=w.add(H,q),z=w.mul(R,z),G=w.mul(U,G),H=w.add(H,z),z=w.sub(q,z),z=w.mul(R,z),G=w.add(G,z),q=w.mul(H,G),I=w.add(I,q),q=w.mul(Y,G),M=w.mul(K,M),M=w.sub(M,q),q=w.mul(K,H),k=w.mul(Y,k),k=w.add(k,q),new j(M,I,k)}subtract(x){return this.add(x.negate())}is0(){return this.equals(j.ZERO)}wNAF(x){return L.wNAFCached(this,x,j.normalizeZ)}multiplyUnsafe(x){r.aInRange("scalar",x,c,m.n);const v=j.ZERO;if(x===c)return v;if(x===l)return this;const{endo:S}=m;if(!S)return L.unsafeLadder(this,x);let{k1neg:N,k1:E,k2neg:C,k2:P}=S.splitScalar(x),M=v,I=v,k=this;for(;E>c||P>c;)E&l&&(M=M.add(k)),P&l&&(I=I.add(k)),k=k.double(),E>>=l,P>>=l;return N&&(M=M.negate()),C&&(I=I.negate()),I=new j(w.mul(I.px,S.beta),I.py,I.pz),M.add(I)}multiply(x){const{endo:v,n:S}=m;let N,E;if(r.aInRange("scalar",x,l,S),v){const{k1neg:C,k1:P,k2neg:M,k2:I}=v.splitScalar(x);let{p:k,f:R}=this.wNAF(P),{p:U,f:q}=this.wNAF(I);k=L.constTimeNegate(C,k),U=L.constTimeNegate(M,U),U=new j(w.mul(U.px,v.beta),U.py,U.pz),N=k.add(U),E=R.add(q)}else{const{p:C,f:P}=this.wNAF(x);N=C,E=P}return j.normalizeZ([N,E])[0]}multiplyAndAddUnsafe(x,v,S){const N=j.BASE,E=(P,M)=>M!==c&&M!==l&&P.equals(N)?P.multiply(M):P.multiplyUnsafe(M),C=E(this,v).add(E(x,S));return C.is0()?void 0:C}toAffine(x){return D(this,x)}isTorsionFree(){const{h:x,isTorsionFree:v}=m;if(x===l)return!0;if(v)return v(j,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:v}=m;return x===l?this:v?v(j,this):this.multiplyUnsafe(m.h)}toRawBytes(x=!0){return(0,i.abool)("isCompressed",x),this.assertValidity(),y(j,this,x)}toHex(x=!0){return(0,i.abool)("isCompressed",x),r.bytesToHex(this.toRawBytes(x))}}j.BASE=new j(m.Gx,m.Gy,w.ONE),j.ZERO=new j(w.ZERO,w.ONE,w.ZERO);const F=m.nBitLength,L=(0,e.wNAF)(j,m.endo?Math.ceil(F/2):F);return{CURVE:m,ProjectivePoint:j,normPrivateKeyToScalar:T,weierstrassEquation:A,isWithinCurveOrder:function(B){return r.inRange(B,l,m.n)}}}function p(g,m){const w=g.ORDER;let b=c;for(let B=w-l;B%u===c;B/=u)b+=l;const y=b,_=u<<y-l-l,A=_*u,T=(w-l)/A,$=(T-l)/u,D=A-l,O=_,j=g.pow(m,T),F=g.pow(m,(T+l)/u);let L=(B,x)=>{let v=j,S=g.pow(x,D),N=g.sqr(S);N=g.mul(N,x);let E=g.mul(B,N);E=g.pow(E,$),E=g.mul(E,S),S=g.mul(E,x),N=g.mul(E,B);let C=g.mul(N,S);E=g.pow(C,O);let P=g.eql(E,g.ONE);S=g.mul(N,F),E=g.mul(C,v),N=g.cmov(S,N,P),C=g.cmov(E,C,P);for(let M=y;M>l;M--){let I=M-u;I=u<<I-l;let k=g.pow(C,I);const R=g.eql(k,g.ONE);S=g.mul(N,v),v=g.mul(v,v),k=g.mul(C,v),N=g.cmov(S,N,R),C=g.cmov(k,C,R)}return{isValid:P,value:N}};if(g.ORDER%h===d){const B=(g.ORDER-d)/h,x=g.sqrt(g.neg(m));L=(v,S)=>{let N=g.sqr(S);const E=g.mul(v,S);N=g.mul(N,E);let C=g.pow(N,B);C=g.mul(C,E);const P=g.mul(C,x),M=g.mul(g.sqr(C),S),I=g.eql(M,v);return{isValid:I,value:g.cmov(P,C,I)}}}return L}})(e8),Object.defineProperty(xb,"__esModule",{value:!0}),xb.getHash=AP,xb.createCurve=function(t,e){const n=r=>(0,xae.weierstrass)({...t,...AP(r)});return Object.freeze({...n(e),create:n})};const Aae=X6,SP=Xc,xae=e8;function AP(t){return{hash:t,hmac:(e,...n)=>(0,Aae.hmac)(t,e,(0,SP.concatBytes)(...n)),randomBytes:SP.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=Dc,n=Xc,r=xb,i=Ml,s=Bt,o=lt,a=e8,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),h=(E,C)=>(E+C/d)/C;function f(E){const C=c,P=BigInt(3),M=BigInt(6),I=BigInt(11),k=BigInt(22),R=BigInt(23),U=BigInt(44),q=BigInt(88),H=E*E*E%C,z=H*H*E%C,K=(0,s.pow2)(z,P,C)*z%C,G=(0,s.pow2)(K,P,C)*z%C,Y=(0,s.pow2)(G,d,C)*H%C,X=(0,s.pow2)(Y,I,C)*Y%C,ie=(0,s.pow2)(X,k,C)*X%C,de=(0,s.pow2)(ie,U,C)*ie%C,Se=(0,s.pow2)(de,q,C)*de%C,Ee=(0,s.pow2)(Se,U,C)*ie%C,Ae=(0,s.pow2)(Ee,P,C)*z%C,Re=(0,s.pow2)(Ae,R,C)*X%C,Me=(0,s.pow2)(Re,M,C)*H%C,Qe=(0,s.pow2)(Me,d,C);if(!p.eql(p.sqr(Qe),E))throw new Error("Cannot find square root");return Qe}const p=(0,s.Field)(c,void 0,void 0,{sqrt:f});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:E=>{const C=l,P=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),M=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),I=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),k=P,R=BigInt("0x100000000000000000000000000000000"),U=h(k*E,C),q=h(-M*E,C);let H=(0,s.mod)(E-U*P-q*I,C),z=(0,s.mod)(-U*M-q*k,C);const K=H>R,G=z>R;if(K&&(H=C-H),G&&(z=C-z),H>R||z>R)throw new Error("splitScalar: Endomorphism failed, k="+E);return{k1neg:K,k1:H,k2neg:G,k2:z}}}},e.sha256);const g=BigInt(0),m={};function w(E,...C){let P=m[E];if(P===void 0){const M=(0,e.sha256)(Uint8Array.from(E,I=>I.charCodeAt(0)));P=(0,o.concatBytes)(M,M),m[E]=P}return(0,e.sha256)((0,o.concatBytes)(P,...C))}const b=E=>E.toRawBytes(!0).slice(1),y=E=>(0,o.numberToBytesBE)(E,32),_=E=>(0,s.mod)(E,c),A=E=>(0,s.mod)(E,l),T=t.secp256k1.ProjectivePoint,$=(E,C,P)=>T.BASE.multiplyAndAddUnsafe(E,C,P);function D(E){let C=t.secp256k1.utils.normPrivateKeyToScalar(E),P=T.fromPrivateKey(C);return{scalar:P.hasEvenY()?C:A(-C),bytes:b(P)}}function O(E){(0,o.aInRange)("x",E,u,c);const C=_(E*E);let P=f(_(C*E+BigInt(7)));P%d!==g&&(P=_(-P));const M=new T(E,P,u);return M.assertValidity(),M}const j=o.bytesToNumberBE;function F(...E){return A(j(w("BIP0340/challenge",...E)))}function L(E){return D(E).bytes}function B(E,C,P=(0,n.randomBytes)(32)){const M=(0,o.ensureBytes)("message",E),{bytes:I,scalar:k}=D(C),R=(0,o.ensureBytes)("auxRand",P,32),U=y(k^j(w("BIP0340/aux",R))),q=w("BIP0340/nonce",U,I,M),H=A(j(q));if(H===g)throw new Error("sign failed: k is zero");const{bytes:z,scalar:K}=D(H),G=F(z,I,M),Y=new Uint8Array(64);if(Y.set(z,0),Y.set(y(A(K+G*k)),32),!x(Y,M,I))throw new Error("sign: Invalid signature produced");return Y}function x(E,C,P){const M=(0,o.ensureBytes)("signature",E,64),I=(0,o.ensureBytes)("message",C),k=(0,o.ensureBytes)("publicKey",P,32);try{const R=O(j(k)),U=j(M.subarray(0,32));if(!(0,o.inRange)(U,u,c))return!1;const q=j(M.subarray(32,64));if(!(0,o.inRange)(q,u,l))return!1;const H=F(y(U),b(R),I),z=$(R,q,A(-H));return!(!z||!z.hasEvenY()||z.toAffine().x!==U)}catch{return!1}}t.schnorr={getPublicKey:L,sign:B,verify:x,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:O,pointToBytes:b,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:w,mod:s.mod}};const v=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(E=>E.map(C=>BigInt(C)))),S=(0,a.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),N=(0,i.createHasher)(t.secp256k1.ProjectivePoint,E=>{const{x:C,y:P}=S(p.create(E[0]));return v(C,P)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=N.hashToCurve,t.encodeToCurve=N.encodeToCurve})(kj);var NS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=ks;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(NS),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=Z6,n=JU,r=kj,i=Fm,s=hr,o=NS;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.utils.isValidPrivateKey(u)},function(){return!0},function(){return!0})},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)})},t.getSharedPoint=function(u,d,h){return a((0,i.ellipticCurve)(),function(f){return f.getSharedSecret(u,d,h)},function(f){return f.getSharedSecret(u,d)},function(f){return l(f,u,d)})},t.convertPublicKeyFormat=function(u,d){return a((0,i.ellipticCurve)(),function(h){return h.getSharedSecret(BigInt(1),u,d)},function(){return u},function(){return u})};function a(u,d,h,f){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return h(n.x25519);if(u==="ed25519")return f(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var d=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),function(){return c(d)},function(){return d},function(){return d})};var c=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},l=function(u,d,h){var f=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(h).multiply(f).toRawBytes()}}(QU);var Nj={},sp={};Object.defineProperty(sp,"__esModule",{value:!0}),sp.hkdf=void 0,sp.extract=Rj,sp.expand=Mj;const $S=fs,xP=Xc,$j=X6;function Rj(t,e,n){return(0,$S.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,$j.hmac)(t,(0,xP.toBytes)(n),(0,xP.toBytes)(e))}const rC=new Uint8Array([0]),IP=new Uint8Array;function Mj(t,e,n,r=32){if((0,$S.hash)(t),(0,$S.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=IP);const s=new Uint8Array(i*t.outputLen),o=$j.hmac.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)rC[0]=l+1,a.update(l===0?IP:c).update(n).update(rC).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),rC.fill(0),s.slice(0,r)}sp.hkdf=(t,e,n,r,i)=>Mj(t,Rj(t,e,n),r,i),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=ks,n=sp,r=Dc;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}}(Nj);var OP={},Ap={},xn={},xd={};Object.defineProperty(xd,"__esModule",{value:!0}),xd.polyval=xd.ghash=void 0,xd._toGHASHKey=Dj;const Id=si,mi=ks,wc=16,t8=new Uint8Array(16),Sa=(0,mi.u32)(t8),io=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function Dj(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}let Bj=class{constructor(e,n){this.blockLen=wc,this.outputLen=wc,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,mi.toBytes)(e),(0,Id.bytes)(e,16);const r=(0,mi.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let w=0;w<128;w++)c.push({s0:io(i),s1:io(s),s2:io(o),s3:io(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(d=o)<<31|(h=a)>>>1,s2:(u=s)<<31|d>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&h)};var l,u,d,h;const f=(w=>w>65536?8:w>1024?4:2)(n||1024);if(![1,2,4,8].includes(f))throw new Error(`ghash: wrong window size=${f}, should be 2, 4 or 8`);this.W=f;const p=128/f,g=this.windowSize=2**f,m=[];for(let w=0;w<p;w++)for(let b=0;b<g;b++){let y=0,_=0,A=0,T=0;for(let $=0;$<f;$++){if(!(b>>>f-$-1&1))continue;const{s0:D,s1:O,s2:j,s3:F}=c[f*w+$];y^=D,_^=O,A^=j,T^=F}m.push({s0:y,s1:_,s2:A,s3:T})}this.t=m}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let c=0,l=0,u=0,d=0;const h=(1<<s)-1;let f=0;for(const p of[e,n,r,i])for(let g=0;g<4;g++){const m=p>>>8*g&255;for(let w=8/s-1;w>=0;w--){const b=m>>>s*w&h,{s0:y,s1:_,s2:A,s3:T}=o[f*a+b];c^=y,l^=_,u^=A,d^=T,f+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=d}update(e){e=(0,mi.toBytes)(e),(0,Id.exists)(this);const n=(0,mi.u32)(e),r=Math.floor(e.length/wc),i=e.length%wc;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(t8.set(e.subarray(r*wc)),this._updateBlock(Sa[0],Sa[1],Sa[2],Sa[3]),(0,mi.clean)(Sa)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,Id.exists)(this),(0,Id.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,mi.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(wc);return this.digestInto(e),this.destroy(),e}},Iae=class extends Bj{constructor(e,n){e=(0,mi.toBytes)(e);const r=Dj((0,mi.copyBytes)(e));super(r,n),(0,mi.clean)(r)}update(e){e=(0,mi.toBytes)(e),(0,Id.exists)(this);const n=(0,mi.u32)(e),r=e.length%wc,i=Math.floor(e.length/wc);for(let s=0;s<i;s++)this._updateBlock(io(n[4*s+3]),io(n[4*s+2]),io(n[4*s+1]),io(n[4*s+0]));return r&&(t8.set(e.subarray(i*wc)),this._updateBlock(io(Sa[3]),io(Sa[2]),io(Sa[1]),io(Sa[0])),(0,mi.clean)(Sa)),this}digestInto(e){(0,Id.exists)(this),(0,Id.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,mi.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}};function PP(t){const e=(r,i)=>t(i,r.length).update((0,mi.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}xd.ghash=PP((t,e)=>new Bj(t,e)),xd.polyval=PP((t,e)=>new Iae(t,e)),Object.defineProperty(xn,"__esModule",{value:!0}),xn.unsafe=xn.aeskwp=xn.aeskw=xn.siv=xn.gcm=xn.cfb=xn.cbc=xn.ecb=xn.ctr=void 0,xn.expandKeyLE=Lo,xn.expandKeyDecLE=Hm;const yt=si,RS=xd,ce=ks,Qi=16,g1=new Uint8Array(Qi),Oae=283;function n8(t){return t<<1^Oae&-(t>>7)}function op(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=n8(t);return n}const MS=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=n8(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,ce.clean)(t),e})(),Pae=MS.map((t,e)=>MS.indexOf(e)),Tae=t=>t<<24|t>>>8,iC=t=>t<<8|t>>>24,Tv=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function Lj(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,u)=>e(t[u])),r=n.map(iC),i=r.map(iC),s=i.map(iC),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const d=256*l+u;o[d]=n[l]^r[u],a[d]=i[l]^s[u],c[d]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const r8=Lj(MS,t=>op(t,3)<<24|t<<16|t<<8|op(t,2)),Uj=Lj(Pae,t=>op(t,11)<<24|op(t,13)<<16|op(t,9)<<8|op(t,14)),kae=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=n8(n))t[e]=n;return t})();function Lo(t){(0,yt.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=r8,r=[];(0,ce.isAligned32)(t)||r.push(t=(0,ce.copyBytes)(t));const i=(0,ce.u32)(t),s=i.length,o=c=>xa(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=s;c<a.length;c++){let l=a[c-1];c%s==0?l=o(Tae(l))^kae[c/s-1]:s>6&&c%s==4&&(l=o(l)),a[c]=a[c-s]^l}return(0,ce.clean)(...r),a}function Hm(t){const e=Lo(t),n=e.slice(),r=e.length,{sbox2:i}=r8,{T0:s,T1:o,T2:a,T3:c}=Uj;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,ce.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],d=xa(i,u,u,u,u);n[l]=s[255&d]^o[d>>>8&255]^a[d>>>16&255]^c[d>>>24]}return n}function ou(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function xa(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function yi(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=r8;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^ou(o,a,e,n,r,i),h=t[c++]^ou(o,a,n,r,i,e),f=t[c++]^ou(o,a,r,i,e,n),p=t[c++]^ou(o,a,i,e,n,r);e=d,n=h,r=f,i=p}return{s0:t[c++]^xa(s,e,n,r,i),s1:t[c++]^xa(s,n,r,i,e),s2:t[c++]^xa(s,r,i,e,n),s3:t[c++]^xa(s,i,e,n,r)}}function zm(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=Uj;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^ou(o,a,e,i,r,n),h=t[c++]^ou(o,a,n,e,i,r),f=t[c++]^ou(o,a,r,n,e,i),p=t[c++]^ou(o,a,i,r,n,e);e=d,n=h,r=f,i=p}return{s0:t[c++]^xa(s,e,i,r,n),s1:t[c++]^xa(s,n,e,i,r),s2:t[c++]^xa(s,r,n,e,i),s3:t[c++]^xa(s,i,r,n,e)}}function xp(t,e){if(e===void 0)return new Uint8Array(t);if((0,yt.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,ce.isAligned32)(e))throw new Error("unaligned dst");return e}function jj(t,e,n,r){(0,yt.bytes)(e,Qi),(0,yt.bytes)(n);const i=n.length;r=xp(i,r);const s=e,o=(0,ce.u32)(s);let{s0:a,s1:c,s2:l,s3:u}=yi(t,o[0],o[1],o[2],o[3]);const d=(0,ce.u32)(n),h=(0,ce.u32)(r);for(let p=0;p+4<=d.length;p+=4){h[p+0]=d[p+0]^a,h[p+1]=d[p+1]^c,h[p+2]=d[p+2]^l,h[p+3]=d[p+3]^u;let g=1;for(let m=s.length-1;m>=0;m--)g=g+(255&s[m])|0,s[m]=255&g,g>>>=8;({s0:a,s1:c,s2:l,s3:u}=yi(t,o[0],o[1],o[2],o[3]))}const f=Qi*Math.floor(d.length/4);if(f<i){const p=new Uint32Array([a,c,l,u]),g=(0,ce.u8)(p);for(let m=f,w=0;m<i;m++,w++)r[m]=n[m]^g[w];(0,ce.clean)(p)}return r}function ap(t,e,n,r,i){(0,yt.bytes)(n,Qi),(0,yt.bytes)(r),i=xp(r.length,i);const s=n,o=(0,ce.u32)(s),a=(0,ce.createView)(s),c=(0,ce.u32)(r),l=(0,ce.u32)(i),u=e?0:12,d=r.length;let h=a.getUint32(u,e),{s0:f,s1:p,s2:g,s3:m}=yi(t,o[0],o[1],o[2],o[3]);for(let b=0;b+4<=c.length;b+=4)l[b+0]=c[b+0]^f,l[b+1]=c[b+1]^p,l[b+2]=c[b+2]^g,l[b+3]=c[b+3]^m,h=h+1>>>0,a.setUint32(u,h,e),{s0:f,s1:p,s2:g,s3:m}=yi(t,o[0],o[1],o[2],o[3]);const w=Qi*Math.floor(c.length/4);if(w<d){const b=new Uint32Array([f,p,g,m]),y=(0,ce.u8)(b);for(let _=w,A=0;_<d;_++,A++)i[_]=r[_]^y[A];(0,ce.clean)(b)}return i}function TP(t){if((0,yt.bytes)(t),t.length%Qi!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function kP(t,e,n){(0,yt.bytes)(t);let r=t.length;const i=r%Qi;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,ce.isAligned32)(t)||(t=(0,ce.copyBytes)(t));const s=(0,ce.u32)(t);if(e){let a=Qi-i;a||(a=Qi),r+=a}const o=xp(r,n);return{b:s,o:(0,ce.u32)(o),out:o}}function NP(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function $P(t){const e=new Uint8Array(16),n=(0,ce.u32)(e);e.set(t);const r=Qi-t.length;for(let i=Qi-r;i<Qi;i++)e[i]=r;return n}function Fj(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),c=(0,ce.createView)(a);i&&(0,ce.setBigUint64)(c,0,BigInt(8*s),e),(0,ce.setBigUint64)(c,8,BigInt(8*r.length),e),o.update(a);const l=o.digest();return(0,ce.clean)(a),l}xn.ctr=(0,ce.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i){if((0,yt.bytes)(r),i!==void 0&&((0,yt.bytes)(i),!(0,ce.isAligned32)(i)))throw new Error("unaligned destination");const s=Lo(t),o=(0,ce.copyBytes)(e),a=[s,o];(0,ce.isAligned32)(r)||a.push(r=(0,ce.copyBytes)(r));const c=jj(s,o,r,i);return(0,ce.clean)(...a),c}return(0,yt.bytes)(t),(0,yt.bytes)(e,Qi),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}}),xn.ecb=(0,ce.wrapCipher)({blockSize:16},function(t,e={}){(0,yt.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=kP(r,n,i),c=Lo(t);let l=0;for(;l+4<=s.length;){const{s0:u,s1:d,s2:h,s3:f}=yi(c,s[l+0],s[l+1],s[l+2],s[l+3]);o[l++]=u,o[l++]=d,o[l++]=h,o[l++]=f}if(n){const u=$P(r.subarray(4*l)),{s0:d,s1:h,s2:f,s3:p}=yi(c,u[0],u[1],u[2],u[3]);o[l++]=d,o[l++]=h,o[l++]=f,o[l++]=p}return(0,ce.clean)(c),a},decrypt(r,i){TP(r);const s=Hm(t),o=xp(r.length,i),a=[s];(0,ce.isAligned32)(r)||a.push(r=(0,ce.copyBytes)(r));const c=(0,ce.u32)(r),l=(0,ce.u32)(o);for(let u=0;u+4<=c.length;){const{s0:d,s1:h,s2:f,s3:p}=zm(s,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=d,l[u++]=h,l[u++]=f,l[u++]=p}return(0,ce.clean)(...a),NP(o,n)}}}),xn.cbc=(0,ce.wrapCipher)({blockSize:16,nonceLength:16},function(t,e,n={}){(0,yt.bytes)(t),(0,yt.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=Lo(t),{b:a,o:c,out:l}=kP(i,r,s);let u=e;const d=[o];(0,ce.isAligned32)(u)||d.push(u=(0,ce.copyBytes)(u));const h=(0,ce.u32)(u);let f=h[0],p=h[1],g=h[2],m=h[3],w=0;for(;w+4<=a.length;)f^=a[w+0],p^=a[w+1],g^=a[w+2],m^=a[w+3],{s0:f,s1:p,s2:g,s3:m}=yi(o,f,p,g,m),c[w++]=f,c[w++]=p,c[w++]=g,c[w++]=m;if(r){const b=$P(i.subarray(4*w));f^=b[0],p^=b[1],g^=b[2],m^=b[3],{s0:f,s1:p,s2:g,s3:m}=yi(o,f,p,g,m),c[w++]=f,c[w++]=p,c[w++]=g,c[w++]=m}return(0,ce.clean)(...d),l},decrypt(i,s){TP(i);const o=Hm(t);let a=e;const c=[o];(0,ce.isAligned32)(a)||c.push(a=(0,ce.copyBytes)(a));const l=(0,ce.u32)(a),u=xp(i.length,s);(0,ce.isAligned32)(i)||c.push(i=(0,ce.copyBytes)(i));const d=(0,ce.u32)(i),h=(0,ce.u32)(u);let f=l[0],p=l[1],g=l[2],m=l[3];for(let w=0;w+4<=d.length;){const b=f,y=p,_=g,A=m;f=d[w+0],p=d[w+1],g=d[w+2],m=d[w+3];const{s0:T,s1:$,s2:D,s3:O}=zm(o,f,p,g,m);h[w++]=T^b,h[w++]=$^y,h[w++]=D^_,h[w++]=O^A}return(0,ce.clean)(...c),NP(u,r)}}}),xn.cfb=(0,ce.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i,s){(0,yt.bytes)(r);const o=r.length;s=xp(o,s);const a=Lo(t);let c=e;const l=[a];(0,ce.isAligned32)(c)||l.push(c=(0,ce.copyBytes)(c)),(0,ce.isAligned32)(r)||l.push(r=(0,ce.copyBytes)(r));const u=(0,ce.u32)(r),d=(0,ce.u32)(s),h=i?d:u,f=(0,ce.u32)(c);let p=f[0],g=f[1],m=f[2],w=f[3];for(let y=0;y+4<=u.length;){const{s0:_,s1:A,s2:T,s3:$}=yi(a,p,g,m,w);d[y+0]=u[y+0]^_,d[y+1]=u[y+1]^A,d[y+2]=u[y+2]^T,d[y+3]=u[y+3]^$,p=h[y++],g=h[y++],m=h[y++],w=h[y++]}const b=Qi*Math.floor(u.length/4);if(b<o){({s0:p,s1:g,s2:m,s3:w}=yi(a,p,g,m,w));const y=(0,ce.u8)(new Uint32Array([p,g,m,w]));for(let _=b,A=0;_<o;_++,A++)s[_]=r[_]^y[A];(0,ce.clean)(y)}return(0,ce.clean)(...l),s}return(0,yt.bytes)(t),(0,yt.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}}),xn.gcm=(0,ce.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){if((0,yt.bytes)(t),(0,yt.bytes)(e),n!==void 0&&(0,yt.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,c){const l=Fj(RS.ghash,!1,o,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function s(){const o=Lo(t),a=g1.slice(),c=g1.slice();if(ap(o,!1,c,c,a),e.length===12)c.set(e);else{const l=g1.slice(),u=(0,ce.createView)(l);(0,ce.setBigUint64)(u,8,BigInt(8*e.length),!1);const d=RS.ghash.create(a).update(e).update(l);d.digestInto(c),d.destroy()}return{xk:o,authKey:a,counter:c,tagMask:ap(o,!1,c,g1)}}return{encrypt(o){(0,yt.bytes)(o);const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=new Uint8Array(o.length+r),h=[a,c,l,u];(0,ce.isAligned32)(o)||h.push(o=(0,ce.copyBytes)(o)),ap(a,!1,l,o,d);const f=i(c,u,d.subarray(0,d.length-r));return h.push(f),d.set(f,o.length),(0,ce.clean)(...h),d},decrypt(o){if((0,yt.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=[a,c,u,l];(0,ce.isAligned32)(o)||d.push(o=(0,ce.copyBytes)(o));const h=o.subarray(0,-16),f=o.subarray(-16),p=i(c,u,h);if(d.push(p),!(0,ce.equalBytes)(p,f))throw new Error("aes/gcm: invalid ghash tag");const g=ap(a,!1,l,h);return(0,ce.clean)(...d),g}}});const m1=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function qj(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function Hj(t,e){if((0,yt.bytes)(e,16),!qj(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,ce.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=yi(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function zj(t,e){if((0,yt.bytes)(e,16),!qj(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,ce.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=zm(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}xn.siv=(0,ce.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){const r=m1("AAD",0,68719476736),i=m1("plaintext",0,2**36),s=m1("nonce",12,12),o=m1("ciphertext",16,2**36+16);function a(){const u=Lo(t),d=new Uint8Array(t.length),h=new Uint8Array(16),f=[u,d];let p=e;(0,ce.isAligned32)(p)||f.push(p=(0,ce.copyBytes)(p));const g=(0,ce.u32)(p);let m=0,w=g[0],b=g[1],y=g[2],_=0;for(const T of[h,d].map(ce.u32)){const $=(0,ce.u32)(T);for(let D=0;D<$.length;D+=2){const{s0:O,s1:j}=yi(u,m,w,b,y);$[D+0]=O,$[D+1]=j,m=++_}}const A={authKey:h,encKey:Lo(d)};return(0,ce.clean)(...f),A}function c(u,d,h){const f=Fj(RS.polyval,!0,d,h,n);for(let y=0;y<12;y++)f[y]^=e[y];f[15]&=127;const p=(0,ce.u32)(f);let g=p[0],m=p[1],w=p[2],b=p[3];return{s0:g,s1:m,s2:w,s3:b}=yi(u,g,m,w,b),p[0]=g,p[1]=m,p[2]=w,p[3]=b,f}function l(u,d,h){let f=(0,ce.copyBytes)(d);f[15]|=128;const p=ap(u,!0,f,h);return(0,ce.clean)(f),p}return(0,yt.bytes)(t,16,24,32),(0,yt.bytes)(e),s(e.length),n!==void 0&&((0,yt.bytes)(n),r(n.length)),{encrypt(u){(0,yt.bytes)(u),i(u.length);const{encKey:d,authKey:h}=a(),f=c(d,h,u),p=[d,h,f];(0,ce.isAligned32)(u)||p.push(u=(0,ce.copyBytes)(u));const g=new Uint8Array(u.length+16);return g.set(f,u.length),g.set(l(d,f,u)),(0,ce.clean)(...p),g},decrypt(u){(0,yt.bytes)(u),o(u.length);const d=u.subarray(-16),{encKey:h,authKey:f}=a(),p=[h,f];(0,ce.isAligned32)(u)||p.push(u=(0,ce.copyBytes)(u));const g=l(h,d,u.subarray(0,-16)),m=c(h,f,g);if(p.push(m),!(0,ce.equalBytes)(d,m))throw(0,ce.clean)(...p),new Error("invalid polyval tag");return(0,ce.clean)(...p),g}}});const kv={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=Lo(t);if(e.length===16)Hj(n,e);else{const r=(0,ce.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:d,s3:h}=yi(n,i,s,r[c],r[c+1]);i=l,s=u^Tv(a),r[c]=d,r[c+1]=h}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=Hm(t),r=e.length/8-1;if(r===1)zj(n,e);else{const i=(0,ce.u32)(e);let s=i[0],o=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){o^=Tv(c);const{s0:u,s1:d,s2:h,s3:f}=zm(n,s,o,i[l],i[l+1]);s=u,o=d,i[l]=h,i[l+1]=f}i[0]=s,i[1]=o}n.fill(0)}},RP=new Uint8Array(8).fill(166);xn.aeskw=(0,ce.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,yt.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,ce.concatBytes)(RP,e);return kv.encrypt(t,n),n},decrypt(e){if((0,yt.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,ce.copyBytes)(e);if(kv.decrypt(t,n),!(0,ce.equalBytes)(n.subarray(0,8),RP))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const MP=2790873510;xn.aeskwp=(0,ce.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,yt.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,ce.u32)(r);return i[0]=MP,i[1]=Tv(e.length),kv.encrypt(t,r),r},decrypt(e){if((0,yt.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,ce.copyBytes)(e),r=(0,ce.u32)(n);kv.decrypt(t,n);const i=Tv(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==MP||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),xn.unsafe={expandKeyLE:Lo,expandKeyDecLE:Hm,encrypt:yi,decrypt:zm,encryptBlock:Hj,decryptBlock:zj,ctrCounter:jj,ctr32:ap},Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.aes256cbc=Ap.aes256gcm=void 0;var Kj=xn;Ap.aes256gcm=function(t,e,n){return(0,Kj.gcm)(t,e,n)};Ap.aes256cbc=function(t,e,n){return(0,Kj.cbc)(t,e)};var Nv={},Vj={},cp={};Object.defineProperty(cp,"__esModule",{value:!0}),cp.sigma=void 0,cp.rotl=function(t,e){return t<<e|t>>>32-e},cp.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,Xs.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Xa.number)(i),(0,Xa.number)(o),(0,Xa.bool)(s),(0,Xa.bool)(n),(a,c,l,u,d=0)=>{(0,Xa.bytes)(a),(0,Xa.bytes)(c),(0,Xa.bytes)(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),(0,Xa.bytes)(u),(0,Xa.number)(d),d<0||d>=DP)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p,g,m=a.length;if(m===32)f.push(p=(0,Xs.copyBytes)(a)),g=Gj;else{if(m!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${m}`);p=new Uint8Array(32),p.set(a),p.set(a,16),g=Rae,f.push(p)}sC(c)||f.push(c=(0,Xs.copyBytes)(c));const w=(0,Xs.u32)(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,w,(0,Xs.u32)(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,s?0:12-c.length),c=_,f.push(c)}const y=(0,Xs.u32)(c);return function(_,A,T,$,D,O,j,F){const L=D.length,B=new Uint8Array(w1),x=(0,Xs.u32)(B),v=sC(D)&&sC(O),S=v?(0,Xs.u32)(D):BP,N=v?(0,Xs.u32)(O):BP;for(let E=0;E<L;j++){if(_(A,T,$,x,j,F),j>=DP)throw new Error("arx: counter overflow");const C=Math.min(w1,L-E);if(v&&C===w1){const P=E/4;if(E%4!=0)throw new Error("arx: invalid block position");for(let M,I=0;I<Mae;I++)M=P+I,N[M]=S[M]^x[I];E+=w1}else{for(let P,M=0;M<C;M++)P=E+M,O[P]=D[P]^B[M];E+=C}}}(t,g,w,y,l,u,d,o),(0,Xs.clean)(...f),u}};const Xa=si,Xs=ks,Wj=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Nae=Wj("expand 16-byte k"),$ae=Wj("expand 32-byte k"),Rae=(0,Xs.u32)(Nae),Gj=(0,Xs.u32)($ae);function sC(t){return t.byteOffset%4==0}cp.sigma=Gj.slice();const w1=64,Mae=16,DP=2**32-1,BP=new Uint32Array;var cm={};Object.defineProperty(cm,"__esModule",{value:!0}),cm.poly1305=void 0,cm.wrapConstructorWithKey=Zj;const y1=si,W0=ks,kr=(t,e)=>255&t[e++]|(255&t[e++])<<8;let Dae=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,W0.toBytes)(e),(0,y1.bytes)(e,32);const n=kr(e,0),r=kr(e,2),i=kr(e,4),s=kr(e,6),o=kr(e,8),a=kr(e,10),c=kr(e,12),l=kr(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=kr(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],w=kr(e,n+0),b=kr(e,n+2),y=kr(e,n+4),_=kr(e,n+6),A=kr(e,n+8),T=kr(e,n+10),$=kr(e,n+12),D=kr(e,n+14);let O=s[0]+(8191&w),j=s[1]+(8191&(w>>>13|b<<3)),F=s[2]+(8191&(b>>>10|y<<6)),L=s[3]+(8191&(y>>>7|_<<9)),B=s[4]+(8191&(_>>>4|A<<12)),x=s[5]+(A>>>1&8191),v=s[6]+(8191&(A>>>14|T<<2)),S=s[7]+(8191&(T>>>11|$<<5)),N=s[8]+(8191&($>>>8|D<<8)),E=s[9]+(D>>>5|i),C=0,P=C+O*a+j*(5*m)+F*(5*g)+L*(5*p)+B*(5*f);C=P>>>13,P&=8191,P+=x*(5*h)+v*(5*d)+S*(5*u)+N*(5*l)+E*(5*c),C+=P>>>13,P&=8191;let M=C+O*c+j*a+F*(5*m)+L*(5*g)+B*(5*p);C=M>>>13,M&=8191,M+=x*(5*f)+v*(5*h)+S*(5*d)+N*(5*u)+E*(5*l),C+=M>>>13,M&=8191;let I=C+O*l+j*c+F*a+L*(5*m)+B*(5*g);C=I>>>13,I&=8191,I+=x*(5*p)+v*(5*f)+S*(5*h)+N*(5*d)+E*(5*u),C+=I>>>13,I&=8191;let k=C+O*u+j*l+F*c+L*a+B*(5*m);C=k>>>13,k&=8191,k+=x*(5*g)+v*(5*p)+S*(5*f)+N*(5*h)+E*(5*d),C+=k>>>13,k&=8191;let R=C+O*d+j*u+F*l+L*c+B*a;C=R>>>13,R&=8191,R+=x*(5*m)+v*(5*g)+S*(5*p)+N*(5*f)+E*(5*h),C+=R>>>13,R&=8191;let U=C+O*h+j*d+F*u+L*l+B*c;C=U>>>13,U&=8191,U+=x*a+v*(5*m)+S*(5*g)+N*(5*p)+E*(5*f),C+=U>>>13,U&=8191;let q=C+O*f+j*h+F*d+L*u+B*l;C=q>>>13,q&=8191,q+=x*c+v*a+S*(5*m)+N*(5*g)+E*(5*p),C+=q>>>13,q&=8191;let H=C+O*p+j*f+F*h+L*d+B*u;C=H>>>13,H&=8191,H+=x*l+v*c+S*a+N*(5*m)+E*(5*g),C+=H>>>13,H&=8191;let z=C+O*g+j*p+F*f+L*h+B*d;C=z>>>13,z&=8191,z+=x*u+v*l+S*c+N*a+E*(5*m),C+=z>>>13,z&=8191;let K=C+O*m+j*g+F*p+L*f+B*h;C=K>>>13,K&=8191,K+=x*d+v*u+S*l+N*c+E*a,C+=K>>>13,K&=8191,C=(C<<2)+C|0,C=C+P|0,P=8191&C,C>>>=13,M+=C,s[0]=P,s[1]=M,s[2]=I,s[3]=k,s[4]=R,s[5]=U,s[6]=q,s[7]=H,s[8]=z,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,W0.clean)(r)}update(e){(0,y1.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,W0.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,W0.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,y1.exists)(this),(0,y1.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function Zj(t){const e=(r,i)=>t(i).update((0,W0.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}cm.poly1305=Zj(t=>new Dae(t)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=cp,n=si,r=cm,i=ks;function s(d,h,f,p,g,m=20){let w=d[0],b=d[1],y=d[2],_=d[3],A=h[0],T=h[1],$=h[2],D=h[3],O=h[4],j=h[5],F=h[6],L=h[7],B=g,x=f[0],v=f[1],S=f[2],N=w,E=b,C=y,P=_,M=A,I=T,k=$,R=D,U=O,q=j,H=F,z=L,K=B,G=x,Y=v,X=S;for(let de=0;de<m;de+=2)N=N+M|0,K=(0,e.rotl)(K^N,16),U=U+K|0,M=(0,e.rotl)(M^U,12),N=N+M|0,K=(0,e.rotl)(K^N,8),U=U+K|0,M=(0,e.rotl)(M^U,7),E=E+I|0,G=(0,e.rotl)(G^E,16),q=q+G|0,I=(0,e.rotl)(I^q,12),E=E+I|0,G=(0,e.rotl)(G^E,8),q=q+G|0,I=(0,e.rotl)(I^q,7),C=C+k|0,Y=(0,e.rotl)(Y^C,16),H=H+Y|0,k=(0,e.rotl)(k^H,12),C=C+k|0,Y=(0,e.rotl)(Y^C,8),H=H+Y|0,k=(0,e.rotl)(k^H,7),P=P+R|0,X=(0,e.rotl)(X^P,16),z=z+X|0,R=(0,e.rotl)(R^z,12),P=P+R|0,X=(0,e.rotl)(X^P,8),z=z+X|0,R=(0,e.rotl)(R^z,7),N=N+I|0,X=(0,e.rotl)(X^N,16),H=H+X|0,I=(0,e.rotl)(I^H,12),N=N+I|0,X=(0,e.rotl)(X^N,8),H=H+X|0,I=(0,e.rotl)(I^H,7),E=E+k|0,K=(0,e.rotl)(K^E,16),z=z+K|0,k=(0,e.rotl)(k^z,12),E=E+k|0,K=(0,e.rotl)(K^E,8),z=z+K|0,k=(0,e.rotl)(k^z,7),C=C+R|0,G=(0,e.rotl)(G^C,16),U=U+G|0,R=(0,e.rotl)(R^U,12),C=C+R|0,G=(0,e.rotl)(G^C,8),U=U+G|0,R=(0,e.rotl)(R^U,7),P=P+M|0,Y=(0,e.rotl)(Y^P,16),q=q+Y|0,M=(0,e.rotl)(M^q,12),P=P+M|0,Y=(0,e.rotl)(Y^P,8),q=q+Y|0,M=(0,e.rotl)(M^q,7);let ie=0;p[ie++]=w+N|0,p[ie++]=b+E|0,p[ie++]=y+C|0,p[ie++]=_+P|0,p[ie++]=A+M|0,p[ie++]=T+I|0,p[ie++]=$+k|0,p[ie++]=D+R|0,p[ie++]=O+U|0,p[ie++]=j+q|0,p[ie++]=F+H|0,p[ie++]=L+z|0,p[ie++]=B+K|0,p[ie++]=x+G|0,p[ie++]=v+Y|0,p[ie++]=S+X|0}function o(d,h,f,p){let g=d[0],m=d[1],w=d[2],b=d[3],y=h[0],_=h[1],A=h[2],T=h[3],$=h[4],D=h[5],O=h[6],j=h[7],F=f[0],L=f[1],B=f[2],x=f[3];for(let S=0;S<20;S+=2)g=g+y|0,F=(0,e.rotl)(F^g,16),$=$+F|0,y=(0,e.rotl)(y^$,12),g=g+y|0,F=(0,e.rotl)(F^g,8),$=$+F|0,y=(0,e.rotl)(y^$,7),m=m+_|0,L=(0,e.rotl)(L^m,16),D=D+L|0,_=(0,e.rotl)(_^D,12),m=m+_|0,L=(0,e.rotl)(L^m,8),D=D+L|0,_=(0,e.rotl)(_^D,7),w=w+A|0,B=(0,e.rotl)(B^w,16),O=O+B|0,A=(0,e.rotl)(A^O,12),w=w+A|0,B=(0,e.rotl)(B^w,8),O=O+B|0,A=(0,e.rotl)(A^O,7),b=b+T|0,x=(0,e.rotl)(x^b,16),j=j+x|0,T=(0,e.rotl)(T^j,12),b=b+T|0,x=(0,e.rotl)(x^b,8),j=j+x|0,T=(0,e.rotl)(T^j,7),g=g+_|0,x=(0,e.rotl)(x^g,16),O=O+x|0,_=(0,e.rotl)(_^O,12),g=g+_|0,x=(0,e.rotl)(x^g,8),O=O+x|0,_=(0,e.rotl)(_^O,7),m=m+A|0,F=(0,e.rotl)(F^m,16),j=j+F|0,A=(0,e.rotl)(A^j,12),m=m+A|0,F=(0,e.rotl)(F^m,8),j=j+F|0,A=(0,e.rotl)(A^j,7),w=w+T|0,L=(0,e.rotl)(L^w,16),$=$+L|0,T=(0,e.rotl)(T^$,12),w=w+T|0,L=(0,e.rotl)(L^w,8),$=$+L|0,T=(0,e.rotl)(T^$,7),b=b+y|0,B=(0,e.rotl)(B^b,16),D=D+B|0,y=(0,e.rotl)(y^D,12),b=b+y|0,B=(0,e.rotl)(B^b,8),D=D+B|0,y=(0,e.rotl)(y^D,7);let v=0;p[v++]=g,p[v++]=m,p[v++]=w,p[v++]=b,p[v++]=F,p[v++]=L,p[v++]=B,p[v++]=x}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(d,h)=>{d.update(h);const f=h.length%16;f&&d.update(a.subarray(f))},l=new Uint8Array(32);function u(d,h,f,p,g){const m=d(h,f,l),w=r.poly1305.create(m);g&&c(w,g),c(w,p);const b=new Uint8Array(16),y=(0,i.createView)(b);(0,i.setBigUint64)(y,0,BigInt(g?g.length:0),!0),(0,i.setBigUint64)(y,8,BigInt(p.length),!0),w.update(b);const _=w.digest();return(0,i.clean)(m,b),_}t._poly1305_aead=d=>(h,f,p)=>((0,n.bytes)(h,32),(0,n.bytes)(f),{encrypt(m,w){const b=m.length,y=b+16;w?(0,n.bytes)(w,y):w=new Uint8Array(y),d(h,f,m,w,1);const _=u(d,h,f,w.subarray(0,-16),p);return w.set(_,b),(0,i.clean)(_),w},decrypt(m,w){const b=m.length,y=b-16;if(b<16)throw new Error("encrypted data must be at least 16 bytes");w?(0,n.bytes)(w,y):w=new Uint8Array(y);const _=m.subarray(0,-16),A=m.subarray(-16),T=u(d,h,f,_,p);if(!(0,i.equalBytes)(A,T))throw new Error("invalid tag");return d(h,f,_,w,1),(0,i.clean)(T),w}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))}(Vj),Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.xchacha20=void 0;var Xh,LP,y0,Bae=Vj;Nv.xchacha20=function(t,e,n){return(0,Bae.xchacha20poly1305)(t,e,n)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=ks,n=Z6,r=Ap,i=Nv,s=Fm,o=hr;t.symEncrypt=function(u,d,h){return a(c,u,d,h)};function a(u,d,h,f){var p=(0,s.symmetricAlgorithm)();if(p==="aes-256-gcm")return u(r.aes256gcm,d,h,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,f);if(p==="xchacha20")return u(i.xchacha20,d,h,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,f);if(p==="aes-256-cbc")return u(r.aes256cbc,d,h,16,0);throw new Error("Not implemented")}function c(u,d,h,f,p,g){var m=(0,n.randomBytes)(f),w=u(d,m,g).encrypt(h);if(p===0)return(0,e.concatBytes)(m,w);var b=w.length-p,y=w.subarray(0,b),_=w.subarray(b);return(0,e.concatBytes)(m,_,y)}function l(u,d,h,f,p,g){var m=h.subarray(0,f),w=u(d,Uint8Array.from(m),g),b=h.subarray(f);if(p===0)return w.decrypt(b);var y=b.subarray(0,p),_=b.subarray(p);return w.decrypt((0,e.concatBytes)(_,y))}t.symDecrypt=function(u,d,h){return a(l,u,d,h)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt}(OP),Xh=cE,LP=uo&&uo.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),y0=uo&&uo.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||LP(e,t,n)},Object.defineProperty(Xh,"__esModule",{value:!0}),y0(QU,Xh),y0(Nj,Xh),y0(NS,Xh),y0(OP,Xh);var Km={};Object.defineProperty(Km,"__esModule",{value:!0}),Km.PublicKey=void 0;var UP=ks,b1=cE,Lae=function(){function t(e){this.data=(0,b1.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,b1.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return oe.from((0,b1.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return oe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,UP.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,b1.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,UP.equalBytes)(this.data,e.data)},t}();Km.PublicKey=Lae,Object.defineProperty(xv,"__esModule",{value:!0}),xv.PrivateKey=void 0;var jP=ks,ef=cE,Uae=Km,jae=function(){function t(e){if(e===void 0)this.data=(0,ef.getValidSecret)();else{if(!(0,ef.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new Uae.PublicKey((0,ef.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,ef.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return oe.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,jP.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,ef.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,ef.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,jP.equalBytes)(this.data,e.data)},t}();xv.PrivateKey=jae,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=xv;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=Km;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(z3),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),h=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,f=(0,i.symEncrypt)(d,c);return oe.from((0,e.concatBytes)(h,f))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(c.subarray(0,u)),h=c.subarray(u),f=d.decapsulate(l,(0,n.isHkdfKeyCompressed)());return oe.from((0,i.symDecrypt)(f,h))};var e=ks,n=Fm,r=z3,i=cE,s=Fm;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=z3;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(Kf);const Yj=vi("KeyExchange:Layer"),Qj=vi("SocketService:Layer"),Jj=vi("Ecies:Layer"),Xj=vi("RemoteCommunication:Layer");Yj.color="##95c44e",Qj.color="#f638d7",Jj.color="#465b9c",Xj.color="#47a2be";const ee={KeyExchange:Yj,SocketService:Qj,Ecies:Jj,RemoteCommunication:Xj};let b0,v1=[],oC=[];const Wc=(t,e)=>se(void 0,void 0,void 0,function*(){b0=e,oC.push(t),function(n){return se(this,void 0,void 0,function*(){if(!b0||!n)return;(function(){const o=oC;oC=v1,v1=o})();const r=b0.endsWith("/")?`${b0}evt`:`${b0}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);ee.RemoteCommunication(`[sendBufferedEvents] Sending ${v1.length} analytics events to ${r}`);try{const o=yield uU(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();ee.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),v1.length=0}catch{}})}(t).catch(()=>{})});let aC=class{constructor(e){this.enabled=!0,e?.debug&&vi.enable("Ecies:Layer"),this.ecies=e?.privateKey?Kf.PrivateKey.fromHex(e.privateKey):new Kf.PrivateKey,ee.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),ee.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),ee.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new Kf.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{ee.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=oe.from(e),s=Kf.encrypt(n,i);r=oe.from(s).toString("base64")}catch(i){throw ee.Ecies("[ECIES: encrypt()] error encrypt:",i),ee.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),ee.Ecies("[ECIES: encrypt()] data: ",e),ee.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{ee.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=oe.from(e.toString(),"base64");n=Kf.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw ee.Ecies("[ECIES: decrypt()] error decrypt",r),ee.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),ee.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){ee.Ecies("[ECIES: toString()]",this.getKeyInfo())}};var $u={version:"0.33.1"};const rh="https://metamask-sdk.api.cx.metamask.io/",Fae=["websocket"],tg=6048e5,qae=3e3,ni={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},Hae=[ni.METAMASK_CONNECTSIGN,ni.METAMASK_CONNECTWITH,ni.METAMASK_OPEN,ni.METAMASK_BATCH,ni.PERSONAL_SIGN,ni.WALLET_REQUESTPERMISSIONS,ni.WALLET_REVOKEPERMISSIONS,ni.WALLET_WATCHASSET,ni.ETH_SENDTRANSACTION,ni.ETH_SIGNTYPEDDATA,ni.ETH_SIGNTYPEDDATA_V3,ni.ETH_SIGNTYPEDDATA_V4,ni.ETH_SIGNTRANSACTION,ni.ETH_SIGN,ni.PERSONAL_EC_RECOVER];function Hw(t){return Hae.includes(t)}function eF(t){const{context:e}=t;ee.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Ar,ue,$v,Dt,wn,zn,tf;(tf=Ar||(Ar={})).DISCONNECTED="disconnected",tf.WAITING="waiting",tf.TIMEOUT="timeout",tf.LINKED="linked",tf.PAUSED="paused",tf.TERMINATED="terminated",function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"}(ue||(ue={})),($v||($v={})).KEY_EXCHANGE="key_exchange",function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"}(Dt||(Dt={}));let zae=class extends rE.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=Dt.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i?.privateKey&&n&&(ee.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new aC(Object.assign(Object.assign({},i),{debug:s?.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=s?.keyExchangeLayer===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on($v.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(ee.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&ee.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ue.KEY_INFO,r.type),r.type===Dt.KEY_HANDSHAKE_SYN?(this.checkStep([Dt.KEY_HANDSHAKE_NONE,Dt.KEY_HANDSHAKE_ACK]),ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Dt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(i=>{ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)}),this.setStep(Dt.KEY_HANDSHAKE_ACK)):r.type===Dt.KEY_HANDSHAKE_SYNACK?(this.checkStep([Dt.KEY_HANDSHAKE_SYNACK,Dt.KEY_HANDSHAKE_ACK,Dt.KEY_HANDSHAKE_NONE]),ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Dt.KEY_HANDSHAKE_ACK}).catch(i=>{ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)}),this.keysExchanged=!0,this.setStep(Dt.KEY_HANDSHAKE_ACK),this.emit(ue.KEYS_EXCHANGED)):r.type===Dt.KEY_HANDSHAKE_ACK&&(ee.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Dt.KEY_HANDSHAKE_ACK,Dt.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Dt.KEY_HANDSHAKE_ACK),this.emit(ue.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new aC(e)}clean(){ee.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Dt.KEY_HANDSHAKE_NONE),this.emit(ue.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?ee.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(ee.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Dt.KEY_HANDSHAKE_NONE&&this.step!==Dt.KEY_HANDSHAKE_SYNACK)||n?(ee.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Dt.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Dt.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(o=>{ee.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)})):ee.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?ee.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:Dt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(o=>{ee.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)}):(this.communicationLayer.sendMessage({type:Dt.KEY_HANDSHAKE_START}).catch(o=>{ee.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)}),this.clean()))}setStep(e){this.step=e,this.emit(ue.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new aC({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){ee.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}};(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(wn||(wn={})),function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(zn||(zn={}));const Ib=(t,e,n)=>se(void 0,void 0,void 0,function*(){var r,i,s,o,a,c;const{remote:l,state:u}=t,{channelId:d,isOriginator:h}=u;if(e==="error_terminated")return ee.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void t.emit(ue.TERMINATE);if(!n)return void ee.SocketService(`handleJoinChannelResults: No result for channel ${d}`);const{persistence:f,walletKey:p,rejected:g}=n;if(ee.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${f} walletKey=${p} rejected=${g}`),g)return ee.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ue.REJECTED,{channelId:d}),void t.remote.emitServiceStatusEvent();if(p&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(p),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ue.AUTHORIZED);const{communicationLayer:m,storageManager:w}=l.state,b=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(s=l.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+tg,localKey:m?.getKeyInfo().ecies.private,otherKey:p});t.sendMessage({type:Dt.KEY_HANDSHAKE_ACK}).catch(y=>{}),(o=t.state.socket)===null||o===void 0||o.emit(wn.PING,{id:d,clientType:h?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield w?.persistChannelConfig(b),l.emitServiceStatusEvent(),l.setConnectionStatus(Ar.LINKED)}f&&(t.emit(ue.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(ue.AUTHORIZED),Wc(Object.assign(Object.assign({id:d??"",event:h?zn.CONNECTED:zn.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:$u.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch(m=>{}))}),Ip=t=>new Promise(e=>{setTimeout(e,t)}),FP=(t,e,...n)=>se(void 0,[t,e,...n],void 0,function*(r,i,s=200){let o;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield Ip(s)}throw new Error(`RPC ${r} timed out`)}),DS=t=>se(void 0,void 0,void 0,function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return ee.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return ee.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,ee.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(ee.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield Ip(200),n.connected)return ee.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(wn.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(ue.SOCKET_RECONNECT);try{if(yield new Promise((c,l)=>{n.emit(ue.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},(u,d)=>se(void 0,void 0,void 0,function*(){try{yield Ib(t,u,d),c()}catch(h){l(h)}}))}),yield Ip(100),n.connected)return ee.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){ee.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield Ip(200))}return ee.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}});function tF(t,e){return se(this,void 0,void 0,function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return ee.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===wn.TERMINATE&&(t.state.manualDisconnect=!0),new Promise((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(ue.MESSAGE,i,(c,l)=>{var u;c&&(ee.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),o(c)),ee.SocketService("[encryptAndSendMessage] response",l),s((u=l?.success)!==null&&u!==void 0&&u)})})})}var lp;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(lp||(lp={}));const nF=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(t=>t.toLowerCase()),Kae=[{event:ue.CLIENTS_CONNECTED,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r,i,s,o,a,c,l,u,d,h,f;const p=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(ee.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${p} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(ue.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(ee.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)ee.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const g=!p;ee.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${g} -- backward compatibility`),ee.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(d=t.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${g} -- backward compatibility`),(h=t.state.keyExchange)===null||h===void 0||h.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f,force:g})}t.state.clientsConnected=!0,t.state.clientsPaused=!1})}},{event:ue.CHANNEL_CREATED,handler:function(t,e){return n=>{ee.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(ue.CHANNEL_CREATED,n)}}},{event:ue.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,ee.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?ee.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(ue.CLIENTS_DISCONNECTED,e))}}},{event:ue.CONFIG,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r,i,s;ee.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(ee.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Dt.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:wn.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(ee.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(ue.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(ue.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(ue.CHANNEL_PERSISTENCE))})}},{event:ue.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,c,l,u,d,h,f,p,g,m,w,b,y,_;const{ackId:A,message:T,error:$}=n,D=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(ee.SocketService(`[SocketService handleMessage()]  relayPersistence=${D}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),$)throw ee.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${$}`),new Error($);const O=typeof T=="string";if(!O&&T?.type===Dt.KEY_HANDSHAKE_START)return D?void 0:(ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,T),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!O&&(!((a=T?.type)===null||a===void 0)&&a.startsWith("key_handshake")))return D?void 0:(ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,T),void t.emit($v.KEY_EXCHANGE,{message:T,context:t.state.context}));if(O&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let L=!1;try{ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(T),L=!0}catch(B){ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,B)}if(!L)return t.state.isOriginator?(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h}):t.sendMessage({type:Dt.KEY_HANDSHAKE_START}).catch(B=>{}),void ee.SocketService(`Message ignored because invalid key exchange status. step=${(f=t.state.keyExchange)===null||f===void 0?void 0:f.getKeyInfo().step}`,(p=t.state.keyExchange)===null||p===void 0?void 0:p.getKeyInfo(),T);ee.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!O&&T?.type)return void t.emit(ue.MESSAGE,T);if(!O)return void t.emit(ue.MESSAGE,T);const j=(g=t.state.keyExchange)===null||g===void 0?void 0:g.decryptMessage(T),F=JSON.parse(j??"{}");if(A&&A?.length>0&&(ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${A} channelId=${e}`),(m=t.state.socket)===null||m===void 0||m.emit(ue.MESSAGE_ACK,{ackId:A,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=F?.type===wn.PAUSE,t.state.isOriginator&&F.data){const L=F.data,B=t.state.rpcMethodTracker[L.id];if(B){const x=Date.now()-B.timestamp;ee.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${L.id} method=${B.method} responseTime=${x}`,F),t.remote.state.analytics&&nF.includes(B.method.toLowerCase())&&Wc(Object.assign(Object.assign({id:(w=t.remote.state.channelId)!==null&&w!==void 0?w:"",event:zn.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:$u.version},t.remote.state.originatorInfo),{walletVersion:(b=t.remote.state.walletInfo)===null||b===void 0?void 0:b.version,params:{method:B.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch(S=>{}),Hw(B.method)&&Rn.analytics.track(L.error?L.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:B.method});const v=Object.assign(Object.assign({},B),{result:L.result,error:L.error?{code:(y=L.error)===null||y===void 0?void 0:y.code,message:(_=L.error)===null||_===void 0?void 0:_.message}:void 0,elapsedTime:x});t.state.rpcMethodTracker[L.id]=v,t.emit(ue.RPC_UPDATE,v)}}t.emit(ue.MESSAGE,{message:F})}}},{event:ue.REJECTED,handler:function(t,e){return n=>se(this,void 0,void 0,function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(ee.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Wc(Object.assign(Object.assign({id:e,event:zn.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:$u.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch(i=>{}),Rn.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(ue.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Ar.DISCONNECTED)):ee.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{ee.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(ue.CLIENTS_WAITING,n)}}}],Vae=[{event:ue.KEY_INFO,handler:function(t){return e=>{ee.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(ue.KEY_INFO,e)}}},{event:ue.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;ee.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch(a=>{})}t.emit(ue.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(ue.SERVICE_STATUS,s)}}}];function qP(t,e){ee.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n?.io.on("error",i=>{ee.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)}),n?.io.on("reconnect",i=>{ee.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),DS(t).catch(s=>{})}),n?.io.on("reconnect_error",i=>{ee.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)}),n?.io.on("reconnect_failed",()=>{ee.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)})),n?.on("disconnect",i=>(ee.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),function(s){return o=>{ee.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(ue.SOCKET_DISCONNECTED),DS(s).catch(a=>{}))}}(t)(i)))),Kae.forEach(({event:i,handler:s})=>{n?.on(`${i}-${e}`,s(t,e))}),Vae.forEach(({event:i,handler:s})=>{r?.on(i,s(t))}),t.state.setupChannelListeners=!0}let Wae=class extends rE.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=a?.serviceLayer===!0,this.remote=o,a?.serviceLayer===!0&&vi.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==rh&&a?.plaintext===!0,ee.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:Fae,withCredentials:!0},o=this.state.communicationServerUrl;ee.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=_b(o,s),function(c){if(typeof window<"u"&&typeof document<"u"&&(ee.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{ee.SocketService("Document has focus --- reconnecting socket"),DS(c).catch(u=>{})};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}}(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new zae(a)}resetKeys(){return ee.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n,r,i;if(ee.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=zl();e.state.channelId=s,qP(e,s),yield new Promise((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(ue.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},(u,d)=>se(this,void 0,void 0,function*(){try{yield Ib(e,u,d),a()}catch(h){c(h)}}))});const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:o?.ecies.public||"",privKey:o?.ecies.private||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return function(i){return se(this,arguments,void 0,function*({options:s,instance:o}){const{channelId:a,authorized:c,withKeyExchange:l}=s,{state:u,remote:d}=o,{isOriginator:h=!1,socket:f,keyExchange:p}=u,{channelConfig:g}=d.state;if(f?.connected)throw new Error("socket already connected");if(h&&g?.relayPersistence){const{localKey:m,otherKey:w}=g;m&&w&&p?.setRelayPersistence({localKey:m,otherKey:w})}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:h,channelId:a}),f?.connect(),qP(o,a),!h&&c&&(p?.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise(m=>{var w;const b=(w=p?.getKeyInfo())===null||w===void 0?void 0:w.ecies.public;f?.emit(ue.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:h?"dapp":"wallet",publicKey:c&&!h?b:void 0},(y,_)=>se(this,void 0,void 0,function*(){yield Ib(o,y,_),m()}))})})}({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(ue.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Dt.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return se(this,void 0,void 0,function*(){return function(n,r){return se(this,void 0,void 0,function*(){var i,s,o;if(!n.state.channelId)throw ee.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(ee.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r?.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return function(c,l){var u;ee.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(ue.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})}(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw ee.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),function(c,l){var u;const d=(u=l?.method)!==null&&u!==void 0?u:"",h=l?.id;c.state.isOriginator&&h&&(c.state.rpcMethodTracker[h]={id:h,timestamp:Date.now(),method:d},c.emit(ue.RPC_UPDATE,c.state.rpcMethodTracker[h]))}(n,r);const a=yield tF(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&nF.includes(r.method.toLowerCase())&&Wc({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:zn.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(c=>{}),n.remote.state.isOriginator&&r.method&&Hw(r.method)&&Rn.analytics.track("sdk_action_requested",{action:r.method}),function(c,l){return se(this,void 0,void 0,function*(){var u;const d=l?.id,h=(u=l?.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&d)try{const f=FP(d,c.state.rpcMethodTracker,200).then(m=>({type:lp.RPC_CHECK,result:m})),p=se(this,void 0,void 0,function*(){const m=yield(b=>se(void 0,[b],void 0,function*({rpcId:y,instance:_}){for(;_.state.lastRpcId===y||_.state.lastRpcId===void 0;)yield Ip(200);return _.state.lastRpcId}))({instance:c,rpcId:d}),w=yield FP(m,c.state.rpcMethodTracker,200);return{type:lp.SKIPPED_RPC,result:w}}),g=yield Promise.race([f,p]);if(g.type===lp.RPC_CHECK){const m=g.result;ee.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${h} ( ${m.elapsedTime} ms)`,m.result)}else{if(g.type!==lp.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{const m=Object.assign(Object.assign({},c.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(ue.RPC_UPDATE,m);const w={data:Object.assign(Object.assign({},m),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(ue.MESSAGE,{message:w})}}}catch(f){throw f}})}(n,r).catch(c=>{}),a})}(this,e)})}ping(){return function(e){return se(this,void 0,void 0,function*(){var n,r;ee.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(wn.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return se(this,void 0,void 0,function*(){var n,r;ee.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:wn.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return function(e){return se(this,void 0,void 0,function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(ee.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i?.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a?.areKeysExchanged()}`),!s)throw ee.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i?.connected?(ee.SocketService("[SocketService: resume()] already connected."),i.emit(wn.PING,{id:s,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a?.areKeysExchanged()||(c?yield e.sendMessage({type:wn.READY}):a?.start({isOriginator:!1}))):(i?.connect(),ee.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i?.connected}`),i?.emit(ue.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:l?"dapp":"wallet"},(u,d)=>se(this,void 0,void 0,function*(){try{yield Ib(e,u,d)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(n,r){var i,s,o,a,c;ee.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r?.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()}(this,e)}};var Ru,Hr,HP;function Gae(t){return()=>se(this,void 0,void 0,function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield se(this,void 0,void 0,function*(){for(;!i.walletInfo;)yield Ip(500)});const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(ee.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===Hr.MobileWeb||i.platformType===Hr.ReactNative||i.platformType===Hr.MetaMaskMobileWebview;ee.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(ue.AUTHORIZED))})}function Zae(t){return e=>{const{state:n}=t;ee.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(ue.CHANNEL_CREATED,e)}}function Yae(t,e){return()=>{var n,r,i,s;const{state:o}=t;ee.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&Wc(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?zn.RECONNECT:o.isOriginator?zn.REQUEST:zn.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:$u.version}),o.communicationServerUrl).catch(a=>{}),o.isOriginator&&!o.reconnection&&Rn.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(ue.CLIENTS_CONNECTED)}}function Qae(t){return e=>{const{state:n}=t;ee.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(ue.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Ar.DISCONNECTED)}}function Jae(t){return e=>{var n;const{state:r}=t;if(ee.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Ar.WAITING),t.emit(ue.CLIENTS_WAITING,e),r.originatorConnectStarted){ee.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout(()=>{ee.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Ar.TIMEOUT),clearTimeout(s)},i)}}}function Xae(t,e){return n=>{var r,i,s,o,a,c,l,u;const{state:d}=t;if(ee.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(i=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const h=Object.assign(Object.assign({},d.channelConfig),{channelId:(s=d.channelId)!==null&&s!==void 0?s:"",validUntil:((o=d.channelConfig)===null||o===void 0?void 0:o.validUntil)||tg,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(h).catch(f=>{}),t.setConnectionStatus(Ar.LINKED)}(function(h,f){var p,g,m,w,b,y,_,A;const{state:T}=h;ee.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${T.channelId}`,f);const $=Object.assign(Object.assign({},T.channelConfig),{channelId:(p=T.channelId)!==null&&p!==void 0?p:"",validUntil:(m=(g=T.channelConfig)===null||g===void 0?void 0:g.validUntil)!==null&&m!==void 0?m:0,relayPersistence:T.relayPersistence,localKey:(b=(w=T.communicationLayer)===null||w===void 0?void 0:w.state.keyExchange)===null||b===void 0?void 0:b.getKeyInfo().ecies.private,otherKey:(_=(y=T.communicationLayer)===null||y===void 0?void 0:y.state.keyExchange)===null||_===void 0?void 0:_.getKeyInfo().ecies.otherPubKey,lastActive:f.getTime()});(A=T.storageManager)===null||A===void 0||A.persistChannelConfig($)})(t,new Date),d.analytics&&d.channelId&&Wc(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?zn.CONNECTED:zn.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:e,commLayerVersion:$u.version,walletVersion:(c=d.walletInfo)===null||c===void 0?void 0:c.version}),d.communicationServerUrl).catch(h=>{}),d.isOriginator=n.isOriginator,n.isOriginator||((l=d.communicationLayer)===null||l===void 0||l.sendMessage({type:wn.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:wn.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function ece(t){return e=>{let n=e;e.message&&(n=n.message),function(r,i){const{state:s}=i;if(ee.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==wn.ORIGINATOR_INFO)if(s.isOriginator&&r.type===wn.WALLET_INFO)(function(o,a){const{state:c}=o;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(s.isOriginator&&r.type===wn.WALLET_INIT)(function(o,a){return se(this,void 0,void 0,function*(){var c,l,u;const{state:d}=o;if(d.isOriginator){const h=a.data||{};if(typeof h=="object"&&"accounts"in h&&"chainId"in h&&"walletKey"in h)try{const{channelConfig:f}=o.state;if(ee.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(f,null,2)),f){const p=h.accounts,g=h.chainId,m=h.walletKey;let w,b=!1;"deeplinkProtocol"in h&&(b=!!h.deeplinkProtocol,o.state.deeplinkProtocolAvailable=b),"walletVersion"in h&&(w=h.walletVersion),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},f),{otherKey:m,walletVersion:w,deeplinkProtocolAvailable:b,relayPersistence:!0})),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(p),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(g)}o.emit(ue.WALLET_INIT,{accounts:h.accounts,chainId:h.chainId})}catch{}}})})(i,r).catch(o=>{ee.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===wn.TERMINATE)(function(o){return se(this,void 0,void 0,function*(){const{state:a}=o;a.isOriginator&&(yield rF({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(ue.TERMINATE))})})(i).catch(o=>{ee.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===wn.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(Ar.PAUSED)})(i);else if(r.type===wn.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(Ar.LINKED);const c=a.paused;a.paused=!1,o.emit(ue.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,o.emit(ue.AUTHORIZED))})(i);else{if(r.type===wn.OTP&&s.isOriginator)return void function(o,a){var c;const{state:l}=o;o.emit(ue.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&o.emit(ue.SDK_RPC_CALL,{method:ni.ETH_REQUESTACCOUNTS,params:[]})}(i,r);r.type===wn.AUTHORIZED&&s.isOriginator&&function(o){const{state:a}=o;a.authorized=!0,o.emit(ue.AUTHORIZED)}(i)}i.emit(ue.MESSAGE,r)}else(function(o,a){var c;const{state:l}=o;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:wn.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,o.emit(ue.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)}(n,t)}}function tce(t){return()=>{const{state:e}=t;ee.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,eF(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function nce(t){return()=>{const{state:e}=t;ee.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function rce(t){return()=>se(this,void 0,void 0,function*(){var e,n,r,i,s,o,a;const{state:c}=t;ee.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(ue.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(ue.AUTHORIZED),t.emit(ue.CLIENTS_READY),t.emit(ue.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=c.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:tg,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}})}function zP({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=rh,instance:s}){var o,a,c,l,u,d,h,f,p,g,m;const{state:w}=s;if(ee.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(w,null,2)),t!==Ru.SOCKET)throw new Error("Invalid communication protocol");w.communicationLayer=new Wae({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:w.transports,communicationServerUrl:i,context:w.context,ecies:r,logging:w.logging,remote:s});let b=typeof document<"u"&&document.URL||"",y=typeof document<"u"&&document.title||"";!((o=w.dappMetadata)===null||o===void 0)&&o.url&&(b=w.dappMetadata.url),!((a=w.dappMetadata)===null||a===void 0)&&a.name&&(y=w.dappMetadata.name);const _=(d=(l=(c=w.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=w.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",A=typeof window<"u"&&window.location!==void 0&&(h=window.location.hostname)!==null&&h!==void 0?h:_,T={url:b,title:y,source:(f=w.dappMetadata)===null||f===void 0?void 0:f.source,dappId:A,anonId:w.anonId,icon:((p=w.dappMetadata)===null||p===void 0?void 0:p.iconUrl)||((g=w.dappMetadata)===null||g===void 0?void 0:g.base64Icon),platform:w.platformType,apiVersion:$u.version,connector:(m=w.dappMetadata)===null||m===void 0?void 0:m.connector};w.originatorInfo=T;const $={[ue.AUTHORIZED]:Gae(s),[ue.MESSAGE]:ece(s),[ue.CHANNEL_PERSISTENCE]:rce(s),[ue.CLIENTS_CONNECTED]:Yae(s,t),[ue.KEYS_EXCHANGED]:Xae(s,t),[ue.SOCKET_DISCONNECTED]:nce(s),[ue.SOCKET_RECONNECT]:tce(s),[ue.CLIENTS_DISCONNECTED]:Qae(s),[ue.KEY_INFO]:()=>{},[ue.CHANNEL_CREATED]:Zae(s),[ue.CLIENTS_WAITING]:Jae(s),[ue.RPC_UPDATE]:D=>{s.emit(ue.RPC_UPDATE,D)}};for(const[D,O]of Object.entries($))try{w.communicationLayer.on(D,O)}catch{}}function rF(t){return se(this,arguments,void 0,function*({options:e,instance:n}){const{state:r}=n;return ee.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((i,s)=>{var o,a,c,l,u,d;e?.terminate?(n.state.ready&&Wc({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:zn.TERMINATED},n.state.communicationServerUrl).catch(h=>{}),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&tF(n.state.communicationLayer,{type:wn.TERMINATE}).then(()=>{i(!0)}).catch(h=>{s(h)}):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=zl(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Ar.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(e),n.setConnectionStatus(Ar.DISCONNECTED),i(!0))})})}(Ru||(Ru={})).SOCKET="socket",function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"}(Hr||(Hr={}));let ice=class extends rE.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:rh,context:"",persist:!1,clientsConnected:!1,sessionDuration:tg,originatorConnectStarted:!1,debug:!1,_connectionStatus:Ar.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:d,relayPersistence:h,ecies:f,analytics:p=!1,storage:g,sdkVersion:m,communicationServerUrl:w=rh,logging:b,autoConnect:y={timeout:qae}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=p,this.state.protocolVersion=l??1,this.state.isOriginator=!s,this.state.relayPersistence=h,this.state.communicationServerUrl=w,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=m,this.setMaxListeners(50),this.setConnectionStatus(Ar.DISCONNECTED),g?.duration&&(this.state.sessionDuration=tg),this.state.storageOptions=g,this.state.autoConnectOptions=y,this.state.debug=b?.remoteLayer===!0,b?.remoteLayer===!0&&vi.enable("RemoteCommunication:Layer"),b?.serviceLayer===!0&&vi.enable("SocketService:Layer"),b?.eciesLayer===!0&&vi.enable("ECIES:Layer"),b?.keyExchangeLayer===!0&&vi.enable("KeyExchange:Layer"),this.state.logging=b,g?.storageManager&&(this.state.storageManager=g.storageManager),ee.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${h} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||zP({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:f,communicationServerUrl:w,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return se(this,void 0,void 0,function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Ar.LINKED),yield this.connectToChannel({channelId:n.channelId})))}zP({communicationLayerPreference:Ru.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return se(this,void 0,void 0,function*(){return yield function(e){return se(this,void 0,void 0,function*(){var n;const{state:r}=e;if(!r.storageManager)return void ee.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(ee.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return ee.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i?.channelId,r.reconnection=!0,i;ee.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};ee.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();ee.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}})}(this.state)})}clean(){return eF(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return function(i){return se(this,arguments,void 0,function*({channelId:s,withKeyExchange:o,authorized:a,state:c}){var l,u,d;if(!yS(s))throw ee.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(ee.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${s} withKeyExchange=${o}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void ee.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=s,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const h=Object.assign(Object.assign({},c.channelConfig),{channelId:s,validUntil:Date.now()+c.sessionDuration});c.channelConfig=h,(d=c.storageManager)===null||d===void 0||d.persistChannelConfig(h)})}({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return se(this,void 0,void 0,function*(){const n=this.state.isOriginator&&e.method&&Hw(e.method);n&&Rn.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(r,i){return se(this,void 0,void 0,function*(){var s,o;const{state:a}=r;ee.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(ee.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(c=>{r.once(ue.CLIENTS_READY,c)}),ee.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(l,u){return se(this,void 0,void 0,function*(){return new Promise(d=>{var h;const{state:f}=l;ee.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context} ready=${f.ready} authorized=${f.authorized} method=${u.method}`),!f.isOriginator||f.authorized||f.relayPersistence?(h=f.communicationLayer)===null||h===void 0||h.sendMessage(u).then(p=>{d(p)}).catch(p=>{d(!1)}):l.once(ue.AUTHORIZED,()=>{var p;ee.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(p=f.communicationLayer)===null||p===void 0||p.sendMessage(u).then(g=>{d(g)}).catch(g=>{d(!1)})})})})}(r,i)}catch(c){throw c}})}(this,e)}catch(r){throw n&&Rn.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();ee.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return se(this,void 0,void 0,function*(){var e;ee.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()})}testLogger(){ee.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),ee.SocketService(`testLogger() channel=${this.state.channelId}`),ee.Ecies(`testLogger() channel=${this.state.channelId}`),ee.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;ee.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(ue.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(ue.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return se(this,void 0,void 0,function*(){var e;ee.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Ar.PAUSED)})}getVersion(){return $u.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){var n;const{state:r}=e;ee.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Ar.LINKED)})}(this)})}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s?.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(n){return se(this,arguments,void 0,function*({channelId:r,state:i}){var s,o,a;if(!yS(r))throw ee.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void ee.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};c?.connected||(ee.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c?.connect()),Wc(Object.assign(Object.assign({id:r,event:zn.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:$u.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch(l=>{}),yield new Promise((l,u)=>{c?.emit(ue.REJECTED,{channelId:r},(d,h)=>{ee.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c?.id}`,{error:d,response:h}),d?u(d):l(h)})})})}({channelId:e,state:this.state})}disconnect(e){return se(this,void 0,void 0,function*(){return rF({options:e,instance:this})})}};(function(t){t.RENEW="renew",t.LINK="link"})(HP||(HP={}));var sce="ERC721",oce="ERC1155",In={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function ace(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[sce,oce].includes(n.params?.type||"")&&(t.warn(In.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(In.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(In.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var iF=4294967295,KP=Math.floor(Math.random()*iF);function cce(){return(t,e,n,r)=>{const i=t.id,s=KP=(KP+1)%iF;t.id=s,e.id=s,n(o=>{t.id=i,e.id=i,o()})}}var i8=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Vl=(t,e,n)=>(i8(t,e,"read from private field"),n?n.call(t):e.get(t)),Bo=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},E1=(t,e,n,r)=>(i8(t,e,"write to private field"),e.set(t,n),n),pi=(t,e,n)=>(i8(t,e,"access private method"),n),Bl={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},VP={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function WP(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Rv=(t,e)=>Object.hasOwnProperty.call(t,e);let lce=class extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}};function Uc(t){return typeof t=="object"&&t!=null}function Ua(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function uce(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ua(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*GP(t,e,n,r){(function(i){return Uc(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=uce(i,e,n,r);s&&(yield s)}}function*s8(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&Uc(e.schema)&&Uc(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=s8(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):s&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Uc(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let Jo=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(c,l)=>GP(i(c,l),l,this,c):()=>[],this.refiner=s?(c,l)=>GP(s(c,l),l,this,c):()=>[]}assert(e,n){return sF(e,this,n)}create(e,n){return oF(e,this,n)}is(e){return Gg(e,this)}mask(e,n){return function(r,i,s){const o=Vm(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]}(e,this,n)}validate(e,n={}){return Vm(e,this,n)}};function sF(t,e,n){const r=Vm(t,e,{message:n});if(r[0])throw r[0]}function oF(t,e,n){const r=Vm(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Gg(t,e){return!Vm(t,e)[0]}function Vm(t,e,n={}){const r=s8(t,e,n),i=function(s){const{done:o,value:a}=s.next();return o?void 0:a}(r);return i[0]?[new lce(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Mu(t,e){return new Jo({type:t,schema:null,validator:e})}function ZP(t){let e;return new Jo({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function aF(t){return new Jo({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Ua(e)}`})}function cF(t){const e=Ua(t),n=typeof t;return new Jo({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Ua(r)}`})}function lF(){return Mu("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Ua(t)}`)}function uF(t){const e=t?Object.keys(t):[],n=Mu("never",()=>!1);return new Jo({type:"object",schema:t||null,*entries(r){if(t&&Uc(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>Uc(r)||`Expected an object, but received: ${Ua(r)}`,coercer:r=>Uc(r)?{...r}:r})}function YP(t){return new Jo({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function dF(t,e){return new Jo({type:"record",schema:null,*entries(n){if(Uc(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>Uc(n)||`Expected an object, but received: ${Ua(n)}`})}function Du(){return Mu("string",t=>typeof t=="string"||`Expected a string, but received: ${Ua(t)}`)}function lE(t){const e=t.map(n=>n.type).join(" | ");return new Jo({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=s8(n,s,r),[a]=o;if(!a[0])return[];for(const[c]of o)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ua(n)}`,...i]}})}function dce(t){return function(e){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)}(t).replace(/\.$/u,"")}function hce(t,e){return n=t,typeof n?.prototype?.constructor?.name=="string"?new t({message:e}):t({message:e});var n}var fce=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function hF(){throw new Error("setTimeout has not been defined")}function fF(){throw new Error("clearTimeout has not been defined")}var Pl=hF,Tl=fF;function pF(t){if(Pl===setTimeout)return setTimeout(t,0);if((Pl===hF||!Pl)&&setTimeout)return Pl=setTimeout,setTimeout(t,0);try{return Pl(t,0)}catch{try{return Pl.call(null,t,0)}catch{return Pl.call(this,t,0)}}}typeof Si.setTimeout=="function"&&(Pl=setTimeout),typeof Si.clearTimeout=="function"&&(Tl=clearTimeout);var Od,Bc=[],Op=!1,Ob=-1;function pce(){Op&&Od&&(Op=!1,Od.length?Bc=Od.concat(Bc):Ob=-1,Bc.length&&gF())}function gF(){if(!Op){var t=pF(pce);Op=!0;for(var e=Bc.length;e;){for(Od=Bc,Bc=[];++Ob<e;)Od&&Od[Ob].run();Ob=-1,e=Bc.length}Od=null,Op=!1,function(n){if(Tl===clearTimeout)return clearTimeout(n);if((Tl===fF||!Tl)&&clearTimeout)return Tl=clearTimeout,clearTimeout(n);try{return Tl(n)}catch{try{return Tl.call(null,n)}catch{return Tl.call(this,n)}}}(t)}}function mF(t,e){this.fun=t,this.array=e}mF.prototype.run=function(){this.fun.apply(null,this.array)};function kh(){}var gce=kh,mce=kh,wce=kh,yce=kh,bce=kh,vce=kh,Ece=kh,Vf=Si.performance||{},Cce=Vf.now||Vf.mozNow||Vf.msNow||Vf.oNow||Vf.webkitNow||function(){return new Date().getTime()},_ce=new Date,Ct={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Bc.push(new mF(t,e)),Bc.length!==1||Op||pF(gF)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:gce,addListener:mce,once:wce,off:yce,removeListener:bce,removeAllListeners:vce,emit:Ece,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Cce.call(Vf),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-_ce)/1e3}},Wm=t=>uF(t);function QP({path:t,branch:e}){const n=t[t.length-1];return Rv(e[e.length-2],n)}function Mv(t){return new Jo({...t,type:`optional ${t.type}`,validator:(e,n)=>!QP(n)||t.validator(e,n),refiner:(e,n)=>!QP(n)||t.refiner(e,n)})}var C1,JP,XP,Dv=lE([cF(null),Mu("boolean",t=>typeof t=="boolean"),Mu("finite number",t=>Gg(t,lF())&&Number.isFinite(t)),Du(),aF(ZP(()=>Dv)),dF(Du(),ZP(()=>Dv))]),Gm=(C1=Dv,JP=Mu("any",()=>!0),XP=t=>(function(e,n,r="Assertion failed",i=fce){try{sF(e,n)}catch(s){throw hce(i,`${r}: ${dce(s)}.`)}}(t,Dv),JSON.parse(JSON.stringify(t,(e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n}))),new Jo({...C1,coercer:(t,e)=>Gg(t,JP)?C1.coercer(XP(t,e),e):C1.coercer(t,e)}));function BS(t){try{return function(e){oF(e,Gm)}(t),!0}catch{return!1}}var lm=cF("2.0"),Pb=function(t){return new Jo({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}(lE([lF(),Du()])),LS=Wm({code:Mu("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Ua(t)}`),message:Du(),data:Mv(Gm),stack:Mv(Du())}),wF=lE([dF(Du(),Gm),aF(Gm)]),Sce=Wm({id:Pb,jsonrpc:lm,method:Du(),params:Mv(wF)}),Ace=Wm({jsonrpc:lm,method:Du(),params:Mv(wF)});function e9(t){return Gg(t,Sce)}function t9(t){return Gg(t,LS)}uF({id:Pb,jsonrpc:lm,result:YP(Mu("unknown",()=>!0)),error:YP(LS)}),lE([Wm({id:Pb,jsonrpc:lm,result:Gm}),Wm({id:Pb,jsonrpc:lm,error:LS})]);var n9=Bl.internal,xce="Unspecified error message. This is a bug, please report it.",Ice={code:n9,message:yF(n9)},Oce="Unspecified server error.";function yF(t,e=xce){if(function(n){return Number.isInteger(n)}(t)){const n=t.toString();if(Rv(VP,n))return VP[n].message;if(function(r){return r>=-32099&&r<=-32e3}(t))return Oce}return e}function r9(t,{fallbackError:e=Ice,shouldIncludeStack:n=!0}={}){if(!t9(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(t9(i))return i;const o=bF(i);return{...s,data:{cause:o}}}(t,e);return n||delete r.stack,r}function bF(t){return Array.isArray(t)?t.map(e=>BS(e)?e:WP(e)?i9(e):null):WP(t)?i9(t):BS(t)?t:null}function i9(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return BS(r)&&(e[n]=r),e},{})}var vF=G0;G0.default=G0,G0.stable=s9,G0.stableStringify=s9;var Bv="[...]",EF="[Circular]",ih=[],Pd=[];function CF(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function G0(t,e,n,r){var i;r===void 0&&(r=CF()),US(t,"",0,[],void 0,0,r);try{i=Pd.length===0?JSON.stringify(t,e,n):JSON.stringify(t,_F(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ih.length!==0;){var s=ih.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function Pp(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),ih.push([r,n,e,i])):Pd.push([e,n,t]):(r[n]=t,ih.push([r,n,e]))}function US(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Pp(EF,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Pp(Bv,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)US(t[a],a,a,r,t,s,o);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];US(t[l],l,a,r,t,s,o)}}r.pop()}}function Pce(t,e){return t<e?-1:t>e?1:0}function s9(t,e,n,r){r===void 0&&(r=CF());var i,s=jS(t,"",0,[],void 0,0,r)||t;try{i=Pd.length===0?JSON.stringify(s,e,n):JSON.stringify(s,_F(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ih.length!==0;){var o=ih.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function jS(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void Pp(EF,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void Pp(Bv,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)jS(t[a],a,a,r,t,s,o);else{var c={},l=Object.keys(t).sort(Pce);for(a=0;a<l.length;a++){var u=l[a];jS(t[u],u,a,r,t,s,o),c[u]=t[u]}if(i===void 0)return c;ih.push([i,e,t]),i[e]=c}r.pop()}}function _F(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(Pd.length>0)for(var r=0;r<Pd.length;r++){var i=Pd[r];if(i[1]===e&&i[0]===n){n=i[2],Pd.splice(r,1);break}}return t.call(this,e,n)}}var Tce=aE(vF),yc=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}}(this.data)&&(t.data.cause=bF(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return Tce(this.serialize(),kce,2)}};function kce(t,e){if(e!=="[Circular]")return e}var um=t=>Nce(Bl.invalidRequest,t);function Nce(t,e){const[n,r]=function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]}(e);return new yc(t,n??yF(t),r)}var SF={};function kl(){}function Mt(){Mt.init.call(this)}function AF(t){return t._maxListeners===void 0?Mt.defaultMaxListeners:t._maxListeners}function o9(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new kl,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=AF(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,function(c){typeof console.warn=="function"?console.warn(c):console.log(c)}(a)}}else o=s[e]=n,++t._eventsCount;return t}function a9(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function c9(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function v0(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}kl.prototype=Object.create(null),Mt.EventEmitter=Mt,Mt.usingDomains=!1,Mt.prototype.domain=void 0,Mt.prototype._events=void 0,Mt.prototype._maxListeners=void 0,Mt.defaultMaxListeners=10,Mt.init=function(){this.domain=null,Mt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new kl,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Mt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Mt.prototype.getMaxListeners=function(){return AF(this)},Mt.prototype.emit=function(t){var e,n,r,i,s,o,a,c=t==="error";if(o=this._events)c=c&&o.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,h,f){if(h)d.call(f);else for(var p=d.length,g=v0(d,p),m=0;m<p;++m)g[m].call(f)})(n,u,this);break;case 2:(function(d,h,f,p){if(h)d.call(f,p);else for(var g=d.length,m=v0(d,g),w=0;w<g;++w)m[w].call(f,p)})(n,u,this,arguments[1]);break;case 3:(function(d,h,f,p,g){if(h)d.call(f,p,g);else for(var m=d.length,w=v0(d,m),b=0;b<m;++b)w[b].call(f,p,g)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,h,f,p,g,m){if(h)d.call(f,p,g,m);else for(var w=d.length,b=v0(d,w),y=0;y<w;++y)b[y].call(f,p,g,m)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(d,h,f,p){if(h)d.apply(f,p);else for(var g=d.length,m=v0(d,g),w=0;w<g;++w)m[w].apply(f,p)})(n,u,this,i)}return!0},Mt.prototype.addListener=function(t,e){return o9(this,t,e,!1)},Mt.prototype.on=Mt.prototype.addListener,Mt.prototype.prependListener=function(t,e){return o9(this,t,e,!0)},Mt.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,a9(this,t,e)),this},Mt.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,a9(this,t,e)),this},Mt.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new kl:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new kl,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,d=a.length;u<d;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},Mt.prototype.off=function(t,e){return this.removeListener(t,e)},Mt.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new kl,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new kl:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new kl,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},Mt.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(e):[],n},Mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):c9.call(t,e)},Mt.prototype.listenerCount=c9,Mt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var o8=Fw(Object.freeze({__proto__:null,EventEmitter:Mt,default:Mt}));Object.defineProperty(SF,"__esModule",{value:!0});const $ce=o8;function l9(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let Rce=class extends $ce.EventEmitter{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")l9(s,this,n);else{const o=s.length,a=function(c){const l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u}(s);for(let c=0;c<o;c+=1)l9(a[c],this,n)}return!0}};var Lv,Ll,up,Z0,Tb,kb,FS,Nb,qS,cC,u9,$b,HS,lC,d9,dm,Uv,uC,h9,xF=SF.default=Rce,Oo=class Rb extends xF{constructor({notificationHandler:e}={}){super(),Bo(this,Z0),Bo(this,kb),Bo(this,Nb),Bo(this,Lv,!1),Bo(this,Ll,void 0),Bo(this,up,void 0),E1(this,Ll,[]),E1(this,up,e)}destroy(){Vl(this,Ll).forEach(e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}),E1(this,Ll,[]),E1(this,Lv,!0)}push(e){pi(this,Z0,Tb).call(this),Vl(this,Ll).push(e)}handle(e,n){if(pi(this,Z0,Tb).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?pi(this,kb,FS).call(this,e,n):pi(this,kb,FS).call(this,e):n?pi(this,Nb,qS).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return pi(this,Z0,Tb).call(this),async(e,n,r,i)=>{var s,o;try{const[a,c,l]=await pi(s=Rb,$b,HS).call(s,e,n,Vl(this,Ll));return c?(await pi(o=Rb,dm,Uv).call(o,l),i(a)):r(async u=>{var d;try{await pi(d=Rb,dm,Uv).call(d,l)}catch(h){return u(h)}return u()})}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise((n,r)=>{pi(this,Nb,qS).call(this,e,(i,s)=>{i&&s===void 0?r(i):n(s)}).catch(r)})}};Lv=new WeakMap,Ll=new WeakMap,up=new WeakMap,Z0=new WeakSet,Tb=function(){if(Vl(this,Lv))throw new Error("This engine is destroyed and can no longer be used.")},kb=new WeakSet,FS=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new yc(Bl.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},Nb=new WeakSet,qS=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new yc(Bl.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new yc(Bl.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return Vl(this,up)&&!e9(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(Vl(this,up)&&Gg(t,Ace)&&!e9(t)){try{await Vl(this,up).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await pi(n=Oo,cC,u9).call(n,i,s,Vl(this,Ll))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=r9(r))),e(r,s)},cC=new WeakSet,u9=async function(t,e,n){var r,i,s;const[o,a,c]=await pi(r=Oo,$b,HS).call(r,t,e,n);if(pi(i=Oo,uC,h9).call(i,t,e,a),await pi(s=Oo,dm,Uv).call(s,c),o)throw o},$b=new WeakSet,HS=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await pi(r=Oo,lC,d9).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},lC=new WeakSet,d9=async function(t,e,n,r){return new Promise(i=>{const s=a=>{const c=a||e.error;c&&(e.error=r9(c)),i([c,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new yc(Bl.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${dC(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}})},dm=new WeakSet,Uv=async function(t){for(const e of t)await new Promise((n,r)=>{e(i=>i?r(i):n())})},uC=new WeakSet,h9=function(t,e,n){if(!Rv(e,"result")&&!Rv(e,"error"))throw new yc(Bl.internal,`JsonRpcEngine: Response has no error or result for request:
${dC(t)}`,{request:t});if(!n)throw new yc(Bl.internal,`JsonRpcEngine: Nothing ended request:
${dC(t)}`,{request:t})},Bo(Oo,cC),Bo(Oo,$b),Bo(Oo,lC),Bo(Oo,dm),Bo(Oo,uC);var Mce=Oo;function dC(t){return JSON.stringify(t,null,2)}var IF=Object.freeze(["eth_subscription"]),Dce=(t=console)=>[cce(),Bce(t),ace(t)];function Bce(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=um({message:"The request 'method' must be a non-empty string.",data:e})),r(i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()})}}var Mb=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},OF=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),PF=()=>{};async function f9(t,e){try{const n=await async function(){return{name:Lce(window),icon:await Uce(window)}}();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},PF)}catch(n){e.error({message:In.errors.sendSiteMetadata(),originalError:n})}}function Lce(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function Uce(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await jce(r.href))return r.href;return null}async function jce(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}var TF=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Aa=(t,e,n)=>(TF(t,e,"read from private field"),n?n.call(t):e.get(t)),zS=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},bc=(t,e,n,r)=>(TF(t,e,"write to private field"),e.set(t,n),n);function p9(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let Fce=class extends Mt{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")p9(s,this,n);else{const o=s.length,a=function(c){const l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u}(s);for(let c=0;c<o;c+=1)p9(a[c],this,n)}return!0}};var Nl,sd,qce=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},Hce=aE(qce),kF=class NF extends Fce{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),zS(this,Nl,void 0),zS(this,sd,void 0),this._log=e,this.setMaxListeners(n),this._state={...NF._defaultState},bc(this,sd,null),bc(this,Nl,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new Mce;r.forEach(s=>i.push(s)),this._rpcEngine=i}get chainId(){return Aa(this,Nl)}get selectedAddress(){return Aa(this,sd)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw um({message:In.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw um({message:In.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw um({message:In.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise((s,o)=>{this._rpcRequest(i,Mb(s,o))})}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(In.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new yc(1013,n??In.errors.disconnected()),this._log.debug(r)):(r=new yc(1011,n??In.errors.permanentlyDisconnected()),this._log.error(r),bc(this,Nl,null),this._state.accounts=null,bc(this,sd,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){OF(e)?(this._handleConnect(e),e!==Aa(this,Nl)&&(bc(this,Nl,e),this._state.initialized&&this.emit("chainChanged",Aa(this,Nl)))):this._log.error(In.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!Hce(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Aa(this,sd)!==r[0]&&bc(this,sd,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Nl=new WeakMap,sd=new WeakMap,kF._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var a8,zce=kF,KS={exports:{}},$F=o8.EventEmitter,c8=Fw(sae);a8=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var RF=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},Kce=/%[sdj%]/g;function uE(t){if(!Zm(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(ka(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(Kce,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),o=r[n];n<i;o=r[++n])zw(o)||!Nh(o)?s+=" "+o:s+=" "+ka(o);return s}function l8(t,e){if(Ia(Si.process))return function(){return l8(t,e).apply(this,arguments)};if(Ct.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(Ct.throwDeprecation)throw new Error(e);Ct.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var hC,_1={};function MF(t){return Ia(hC)&&(hC=Ct.env.NODE_DEBUG||""),t=t.toUpperCase(),!_1[t]&&(new RegExp("\\b"+t+"\\b","i").test(hC)?_1[t]=function(){var e=uE.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:_1[t]=function(){}),_1[t]}function ka(t,e){var n={seen:[],stylize:Wce};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),dE(e)?n.showHidden=e:e&&f8(n,e),Ia(n.showHidden)&&(n.showHidden=!1),Ia(n.depth)&&(n.depth=2),Ia(n.colors)&&(n.colors=!1),Ia(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Vce),jv(n,t,n.depth)}function Vce(t,e){var n=ka.styles[e];return n?"\x1B["+ka.colors[n][0]+"m"+t+"\x1B["+ka.colors[n][1]+"m":t}function Wce(t,e){return t}function jv(t,e,n){if(t.customInspect&&e&&pm(e.inspect)&&e.inspect!==ka&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return Zm(r)||(r=jv(t,r,n)),r}var i=function(h,f){if(Ia(f))return h.stylize("undefined","undefined");if(Zm(f)){var p="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return h.stylize(p,"string")}if(d8(f))return h.stylize(""+f,"number");if(dE(f))return h.stylize(""+f,"boolean");if(zw(f))return h.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),o=function(h){var f={};return h.forEach(function(p,g){f[p]=!0}),f}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),fm(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return fC(e);if(s.length===0){if(pm(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(hm(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Fv(e))return t.stylize(Date.prototype.toString.call(e),"date");if(fm(e))return fC(e)}var c,l="",u=!1,d=["{","}"];return u8(e)&&(u=!0,d=["[","]"]),pm(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),hm(e)&&(l=" "+RegExp.prototype.toString.call(e)),Fv(e)&&(l=" "+Date.prototype.toUTCString.call(e)),fm(e)&&(l=" "+fC(e)),s.length!==0||u&&e.length!=0?n<0?hm(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?function(h,f,p,g,m){for(var w=[],b=0,y=f.length;b<y;++b)FF(f,String(b))?w.push(pC(h,f,p,g,String(b),!0)):w.push("");return m.forEach(function(_){_.match(/^\d+$/)||w.push(pC(h,f,p,g,_,!0))}),w}(t,e,n,o,s):s.map(function(h){return pC(t,e,n,o,h,u)}),t.seen.pop(),function(h,f,p){var g=h.reduce(function(m,w){return w.indexOf(`
`),m+w.replace(/\u001b\[\d\d?m/g,"").length+1},0);return g>60?p[0]+(f===""?"":f+`
 `)+" "+h.join(`,
  `)+" "+p[1]:p[0]+f+" "+h.join(", ")+" "+p[1]}(c,l,d)):d[0]+l+d[1]}function fC(t){return"["+Error.prototype.toString.call(t)+"]"}function pC(t,e,n,r,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),FF(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=zw(n)?jv(t,c.value,null):jv(t,c.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):`
`+a.split(`
`).map(function(l){return"   "+l}).join(`
`)):a=t.stylize("[Circular]","special")),Ia(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function u8(t){return Array.isArray(t)}function dE(t){return typeof t=="boolean"}function zw(t){return t===null}function DF(t){return t==null}function d8(t){return typeof t=="number"}function Zm(t){return typeof t=="string"}function BF(t){return typeof t=="symbol"}function Ia(t){return t===void 0}function hm(t){return Nh(t)&&h8(t)==="[object RegExp]"}function Nh(t){return typeof t=="object"&&t!==null}function Fv(t){return Nh(t)&&h8(t)==="[object Date]"}function fm(t){return Nh(t)&&(h8(t)==="[object Error]"||t instanceof Error)}function pm(t){return typeof t=="function"}function LF(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function UF(t){return oe.isBuffer(t)}function h8(t){return Object.prototype.toString.call(t)}function gC(t){return t<10?"0"+t.toString(10):t.toString(10)}ka.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ka.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Gce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jF(){var t,e;console.log("%s - %s",(t=new Date,e=[gC(t.getHours()),gC(t.getMinutes()),gC(t.getSeconds())].join(":"),[t.getDate(),Gce[t.getMonth()],e].join(" ")),uE.apply(null,arguments))}function f8(t,e){if(!e||!Nh(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function FF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var od=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function p8(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(od&&t[od]){var e;if(typeof(e=t[od])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,od,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise(function(a,c){n=a,r=c}),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push(function(a,c){a?r(a):n(c)});try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),od&&Object.defineProperty(e,od,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,RF(t))}function Zce(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function qF(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then(function(a){Ct.nextTick(o.bind(null,null,a))},function(a){Ct.nextTick(Zce.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,RF(t)),e}p8.custom=od;var mC,g9,Yce={inherits:a8,_extend:f8,log:jF,isBuffer:UF,isPrimitive:LF,isFunction:pm,isError:fm,isDate:Fv,isObject:Nh,isRegExp:hm,isUndefined:Ia,isSymbol:BF,isString:Zm,isNumber:d8,isNullOrUndefined:DF,isNull:zw,isBoolean:dE,isArray:u8,inspect:ka,deprecate:l8,format:uE,debuglog:MF,promisify:p8,callbackify:qF},HF=Fw(Object.freeze({__proto__:null,_extend:f8,callbackify:qF,debuglog:MF,default:Yce,deprecate:l8,format:uE,inherits:a8,inspect:ka,isArray:u8,isBoolean:dE,isBuffer:UF,isDate:Fv,isError:fm,isFunction:pm,isNull:zw,isNullOrUndefined:DF,isNumber:d8,isObject:Nh,isPrimitive:LF,isRegExp:hm,isString:Zm,isSymbol:BF,isUndefined:Ia,log:jF,promisify:p8}));function Qce(){if(g9)return mC;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);l&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),u.push.apply(u,d)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach(function(d){n(c,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(u,d))})}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&function(d,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,i(p.key),p)}}(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=function(u,d){if(typeof u!="object"||u===null)return u;var h=u[Symbol.toPrimitive];if(h!==void 0){var f=h.call(u,d);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}(c,"string");return typeof l=="symbol"?l:String(l)}g9=1;var s=c8.Buffer,o=HF.inspect,a=o&&o.custom||"inspect";return mC=function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=l+u.data;return d}},{key:"concat",value:function(l){if(this.length===0)return s.alloc(0);for(var u,d,h,f=s.allocUnsafe(l>>>0),p=this.head,g=0;p;)u=p.data,d=f,h=g,s.prototype.copy.call(u,d,h),g+=p.data.length,p=p.next;return f}},{key:"consume",value:function(l,u){var d;return l<this.head.data.length?(d=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):d=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,d=1,h=u.data;for(l-=h.length;u=u.next;){var f=u.data,p=l>f.length?f.length:l;if(p===f.length?h+=f:h+=f.slice(0,l),(l-=p)===0){p===f.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=f.slice(p));break}++d}return this.length-=d,h}},{key:"_getBuffer",value:function(l){var u=s.allocUnsafe(l),d=this.head,h=1;for(d.data.copy(u),l-=d.data.length;d=d.next;){var f=d.data,p=l>f.length?f.length:l;if(f.copy(u,u.length-l,0,p),(l-=p)===0){p===f.length?(++h,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=f.slice(p));break}++h}return this.length-=h,u}},{key:a,value:function(l,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c}(),mC}function m9(t,e){VS(t,e),Db(t)}function Db(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function VS(t,e){t.emit("error",e)}var zF={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ct.nextTick(VS,this,t)):Ct.nextTick(VS,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted?Ct.nextTick(Db,n):(n._writableState.errorEmitted=!0,Ct.nextTick(m9,n,s)):Ct.nextTick(m9,n,s):e?(Ct.nextTick(Db,n),e(s)):Ct.nextTick(Db,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},$h={},KF={};function js(t,e,n){n||(n=Error);var r=function(i){var s,o;function a(c,l,u){return i.call(this,function(d,h,f){return typeof e=="string"?e:e(d,h,f)}(c,l,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a}(n);r.prototype.name=n.name,r.prototype.code=t,KF[t]=r}function w9(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}js("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),js("ERR_INVALID_ARG_TYPE",function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(w9(e,"type"));else{var o=function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(w9(e,"type"))}return s+=". Received type ".concat(typeof n)},TypeError),js("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),js("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),js("ERR_STREAM_PREMATURE_CLOSE","Premature close"),js("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),js("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),js("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),js("ERR_STREAM_WRITE_AFTER_END","write after end"),js("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),js("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),js("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$h.codes=KF;var Jce=$h.codes.ERR_INVALID_OPT_VALUE,wC,y9,yC,b9,VF={getHighWaterMark:function(t,e,n,r){var i=function(s,o,a){return s.highWaterMark!=null?s.highWaterMark:o?s[a]:null}(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new Jce(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},Xce=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Kw=Fw(Object.freeze({__proto__:null,default:Xce})),ele=function(t,e){if(bC("noDeprecation"))return t;var n=!1;return function(){if(!n){if(bC("throwDeprecation"))throw new Error(e);bC("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function bC(t){try{if(!uo.localStorage)return!1}catch{return!1}var e=uo.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function WF(){if(y9)return wC;function t(L){var B=this;this.next=null,this.entry=null,this.finish=function(){(function(x,v,S){var N=x.entry;for(x.entry=null;N;){var E=N.callback;v.pendingcb--,E(S),N=N.next}v.corkedRequestsFree.next=x})(B,L)}}var e;y9=1,wC=A,A.WritableState=_;var n={deprecate:ele},r=$F,i=c8.Buffer,s=(uo!==void 0?uo:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=zF,c=VF.getHighWaterMark,l=$h.codes,u=l.ERR_INVALID_ARG_TYPE,d=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,m=l.ERR_STREAM_WRITE_AFTER_END,w=l.ERR_UNKNOWN_ENCODING,b=a.errorOrDestroy;function y(){}function _(L,B,x){e=e||ng(),L=L||{},typeof x!="boolean"&&(x=B instanceof e),this.objectMode=!!L.objectMode,x&&(this.objectMode=this.objectMode||!!L.writableObjectMode),this.highWaterMark=c(this,L,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var v=L.decodeStrings===!1;this.decodeStrings=!v,this.defaultEncoding=L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){(function(N,E){var C=N._writableState,P=C.sync,M=C.writecb;if(typeof M!="function")throw new h;if(function(k){k.writing=!1,k.writecb=null,k.length-=k.writelen,k.writelen=0}(C),E)(function(k,R,U,q,H){--R.pendingcb,U?(Ct.nextTick(H,q),Ct.nextTick(F,k,R),k._writableState.errorEmitted=!0,b(k,q)):(H(q),k._writableState.errorEmitted=!0,b(k,q),F(k,R))})(N,C,P,E,M);else{var I=O(C)||N.destroyed;I||C.corked||C.bufferProcessing||!C.bufferedRequest||D(N,C),P?Ct.nextTick($,N,C,I,M):$(N,C,I,M)}})(B,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function A(L){var B=this instanceof(e=e||ng());if(!B&&!o.call(A,this))return new A(L);this._writableState=new _(L,this,B),this.writable=!0,L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final)),r.call(this)}function T(L,B,x,v,S,N,E){B.writelen=v,B.writecb=E,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new p("write")):x?L._writev(S,B.onwrite):L._write(S,N,B.onwrite),B.sync=!1}function $(L,B,x,v){x||function(S,N){N.length===0&&N.needDrain&&(N.needDrain=!1,S.emit("drain"))}(L,B),B.pendingcb--,v(),F(L,B)}function D(L,B){B.bufferProcessing=!0;var x=B.bufferedRequest;if(L._writev&&x&&x.next){var v=B.bufferedRequestCount,S=new Array(v),N=B.corkedRequestsFree;N.entry=x;for(var E=0,C=!0;x;)S[E]=x,x.isBuf||(C=!1),x=x.next,E+=1;S.allBuffers=C,T(L,B,!0,B.length,S,"",N.finish),B.pendingcb++,B.lastBufferedRequest=null,N.next?(B.corkedRequestsFree=N.next,N.next=null):B.corkedRequestsFree=new t(B),B.bufferedRequestCount=0}else{for(;x;){var P=x.chunk,M=x.encoding,I=x.callback;if(T(L,B,!1,B.objectMode?1:P.length,P,M,I),x=x.next,B.bufferedRequestCount--,B.writing)break}x===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=x,B.bufferProcessing=!1}function O(L){return L.ending&&L.length===0&&L.bufferedRequest===null&&!L.finished&&!L.writing}function j(L,B){L._final(function(x){B.pendingcb--,x&&b(L,x),B.prefinished=!0,L.emit("prefinish"),F(L,B)})}function F(L,B){var x=O(B);if(x&&(function(S,N){N.prefinished||N.finalCalled||(typeof S._final!="function"||N.destroyed?(N.prefinished=!0,S.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,Ct.nextTick(j,S,N)))}(L,B),B.pendingcb===0&&(B.finished=!0,L.emit("finish"),B.autoDestroy))){var v=L._readableState;(!v||v.autoDestroy&&v.endEmitted)&&L.destroy()}return x}return Kw(A,r),_.prototype.getBuffer=function(){for(var L=this.bufferedRequest,B=[];L;)B.push(L),L=L.next;return B},function(){try{Object.defineProperty(_.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(L){return!!o.call(this,L)||this===A&&L&&L._writableState instanceof _}})):o=function(L){return L instanceof this},A.prototype.pipe=function(){b(this,new f)},A.prototype.write=function(L,B,x){var v,S=this._writableState,N=!1,E=!S.objectMode&&(v=L,i.isBuffer(v)||v instanceof s);return E&&!i.isBuffer(L)&&(L=function(C){return i.from(C)}(L)),typeof B=="function"&&(x=B,B=null),E?B="buffer":B||(B=S.defaultEncoding),typeof x!="function"&&(x=y),S.ending?function(C,P){var M=new m;b(C,M),Ct.nextTick(P,M)}(this,x):(E||function(C,P,M,I){var k;return M===null?k=new g:typeof M=="string"||P.objectMode||(k=new u("chunk",["string","Buffer"],M)),!k||(b(C,k),Ct.nextTick(I,k),!1)}(this,S,L,x))&&(S.pendingcb++,N=function(C,P,M,I,k,R){if(!M){var U=function(K,G,Y){return K.objectMode||K.decodeStrings===!1||typeof G!="string"||(G=i.from(G,Y)),G}(P,I,k);I!==U&&(M=!0,k="buffer",I=U)}var q=P.objectMode?1:I.length;P.length+=q;var H=P.length<P.highWaterMark;if(H||(P.needDrain=!0),P.writing||P.corked){var z=P.lastBufferedRequest;P.lastBufferedRequest={chunk:I,encoding:k,isBuf:M,callback:R,next:null},z?z.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else T(C,P,!1,q,I,k,R);return H}(this,S,E,L,B,x)),N},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||D(this,L))},A.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new w(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(L,B,x){x(new d("_write()"))},A.prototype._writev=null,A.prototype.end=function(L,B,x){var v=this._writableState;return typeof L=="function"?(x=L,L=null,B=null):typeof B=="function"&&(x=B,B=null),L!=null&&this.write(L,B),v.corked&&(v.corked=1,this.uncork()),v.ending||function(S,N,E){N.ending=!0,F(S,N),E&&(N.finished?Ct.nextTick(E):S.once("finish",E)),N.ended=!0,S.writable=!1}(this,v,x),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),A.prototype.destroy=a.destroy,A.prototype._undestroy=a.undestroy,A.prototype._destroy=function(L,B){B(L)},wC}function ng(){if(b9)return yC;b9=1;var t=Object.keys||function(l){var u=[];for(var d in l)u.push(d);return u};yC=o;var e=GF(),n=WF();Kw(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||Ct.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),yC}var tle=oe.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Bb(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!tle(e))throw new Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=rle;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=ile;break;default:return void(this.write=nle)}this.charBuffer=new oe(6),this.charReceived=0,this.charLength=0}function nle(t){return t.toString(this.encoding)}function rle(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function ile(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Bb.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},Bb.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},Bb.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var v9=Fw(Object.freeze({__proto__:null,StringDecoder:Bb})),E9=$h.codes.ERR_STREAM_PREMATURE_CLOSE;function sle(){}var vC,C9,_9,S9,EC,A9,g8=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=function(p){var g=!1;return function(){if(!g){g=!0;for(var m=arguments.length,w=new Array(m),b=0;b<m;b++)w[b]=arguments[b];p.apply(this,w)}}}(r||sle);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){s=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,s||r.call(e)},d=function(p){r.call(e,p)},h=function(){var p;return i&&!l?(e._readableState&&e._readableState.ended||(p=new E9),r.call(e,p)):s&&!a?(e._writableState&&e._writableState.ended||(p=new E9),r.call(e,p)):void 0},f=function(){e.req.on("finish",c)};return function(p){return p.setHeader&&typeof p.abort=="function"}(e)?(e.on("complete",c),e.on("abort",h),e.req?f():e.on("request",f)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",d),e.on("close",h),function(){e.removeListener("complete",c),e.removeListener("abort",h),e.removeListener("request",f),e.req&&e.req.removeListener("finish",c),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",h)}};function ole(){if(C9)return vC;var t;function e(g,m,w){return(m=function(b){var y=function(_,A){if(typeof _!="object"||_===null)return _;var T=_[Symbol.toPrimitive];if(T!==void 0){var $=T.call(_,A);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(_)}(b,"string");return typeof y=="symbol"?y:String(y)}(m))in g?Object.defineProperty(g,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[m]=w,g}C9=1;var n=g8,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(g,m){return{value:g,done:m}}function d(g){var m=g[r];if(m!==null){var w=g[l].read();w!==null&&(g[a]=null,g[r]=null,g[i]=null,m(u(w,!1)))}}function h(g){Ct.nextTick(d,g)}var f=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var g=this,m=this[s];if(m!==null)return Promise.reject(m);if(this[o])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise(function(_,A){Ct.nextTick(function(){g[s]?A(g[s]):_(u(void 0,!0))})});var w,b=this[a];if(b)w=new Promise(function(_,A){return function(T,$){_.then(function(){A[o]?T(u(void 0,!0)):A[c](T,$)},$)}}(b,this));else{var y=this[l].read();if(y!==null)return Promise.resolve(u(y,!1));w=new Promise(this[c])}return this[a]=w,w}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var g=this;return new Promise(function(m,w){g[l].destroy(null,function(b){b?w(b):m(u(void 0,!0))})})}),t),f);return vC=function(g){var m,w=Object.create(p,(e(m={},l,{value:g,writable:!0}),e(m,r,{value:null,writable:!0}),e(m,i,{value:null,writable:!0}),e(m,s,{value:null,writable:!0}),e(m,o,{value:g._readableState.endEmitted,writable:!0}),e(m,c,{value:function(b,y){var _=w[l].read();_?(w[a]=null,w[r]=null,w[i]=null,b(u(_,!1))):(w[r]=b,w[i]=y)},writable:!0}),m));return w[a]=null,n(g,function(b){if(b&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=w[i];return y!==null&&(w[a]=null,w[r]=null,w[i]=null,y(b)),void(w[s]=b)}var _=w[r];_!==null&&(w[a]=null,w[r]=null,w[i]=null,_(u(void 0,!0))),w[o]=!0}),g.on("readable",h.bind(null,w)),w},vC}function GF(){if(A9)return EC;var t;A9=1,EC=A,A.ReadableState=_,o8.EventEmitter;var e=function(I,k){return I.listeners(k).length},n=$F,r=c8.Buffer,i=(uo!==void 0?uo:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=HF;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,c,l,u=Qce(),d=zF,h=VF.getHighWaterMark,f=$h.codes,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_STREAM_PUSH_AFTER_EOF,m=f.ERR_METHOD_NOT_IMPLEMENTED,w=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Kw(A,n);var b=d.errorOrDestroy,y=["error","close","destroy","pause","resume"];function _(I,k,R){t=t||ng(),I=I||{},typeof R!="boolean"&&(R=k instanceof t),this.objectMode=!!I.objectMode,R&&(this.objectMode=this.objectMode||!!I.readableObjectMode),this.highWaterMark=h(this,I,"readableHighWaterMark",R),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.destroyed=!1,this.defaultEncoding=I.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,I.encoding&&(a||(a=v9.StringDecoder),this.decoder=new a(I.encoding),this.encoding=I.encoding)}function A(I){if(t=t||ng(),!(this instanceof A))return new A(I);var k=this instanceof t;this._readableState=new _(I,this,k),this.readable=!0,I&&(typeof I.read=="function"&&(this._read=I.read),typeof I.destroy=="function"&&(this._destroy=I.destroy)),n.call(this)}function T(I,k,R,U,q){s("readableAddChunk",k);var H,z=I._readableState;if(k===null)z.reading=!1,function(K,G){if(s("onEofChunk"),!G.ended){if(G.decoder){var Y=G.decoder.end();Y&&Y.length&&(G.buffer.push(Y),G.length+=G.objectMode?1:Y.length)}G.ended=!0,G.sync?j(K):(G.needReadable=!1,G.emittedReadable||(G.emittedReadable=!0,F(K)))}}(I,z);else if(q||(H=function(K,G){var Y;X=G,r.isBuffer(X)||X instanceof i||typeof G=="string"||G===void 0||K.objectMode||(Y=new p("chunk",["string","Buffer","Uint8Array"],G));var X;return Y}(z,k)),H)b(I,H);else if(z.objectMode||k&&k.length>0)if(typeof k=="string"||z.objectMode||Object.getPrototypeOf(k)===r.prototype||(k=function(K){return r.from(K)}(k)),U)z.endEmitted?b(I,new w):$(I,z,k,!0);else if(z.ended)b(I,new g);else{if(z.destroyed)return!1;z.reading=!1,z.decoder&&!R?(k=z.decoder.write(k),z.objectMode||k.length!==0?$(I,z,k,!1):L(I,z)):$(I,z,k,!1)}else U||(z.reading=!1,L(I,z));return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function $(I,k,R,U){k.flowing&&k.length===0&&!k.sync?(k.awaitDrain=0,I.emit("data",R)):(k.length+=k.objectMode?1:R.length,U?k.buffer.unshift(R):k.buffer.push(R),k.needReadable&&j(I)),L(I,k)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(I){this._readableState&&(this._readableState.destroyed=I)}}),A.prototype.destroy=d.destroy,A.prototype._undestroy=d.undestroy,A.prototype._destroy=function(I,k){k(I)},A.prototype.push=function(I,k){var R,U=this._readableState;return U.objectMode?R=!0:typeof I=="string"&&((k=k||U.defaultEncoding)!==U.encoding&&(I=r.from(I,k),k=""),R=!0),T(this,I,k,!1,R)},A.prototype.unshift=function(I){return T(this,I,null,!0,!1)},A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(I){a||(a=v9.StringDecoder);var k=new a(I);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;for(var R=this._readableState.buffer.head,U="";R!==null;)U+=k.write(R.data),R=R.next;return this._readableState.buffer.clear(),U!==""&&this._readableState.buffer.push(U),this._readableState.length=U.length,this};var D=1073741824;function O(I,k){return I<=0||k.length===0&&k.ended?0:k.objectMode?1:I!=I?k.flowing&&k.length?k.buffer.head.data.length:k.length:(I>k.highWaterMark&&(k.highWaterMark=function(R){return R>=D?R=D:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}(I)),I<=k.length?I:k.ended?k.length:(k.needReadable=!0,0))}function j(I){var k=I._readableState;s("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(s("emitReadable",k.flowing),k.emittedReadable=!0,Ct.nextTick(F,I))}function F(I){var k=I._readableState;s("emitReadable_",k.destroyed,k.length,k.ended),k.destroyed||!k.length&&!k.ended||(I.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,N(I)}function L(I,k){k.readingMore||(k.readingMore=!0,Ct.nextTick(B,I,k))}function B(I,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&k.length===0);){var R=k.length;if(s("maybeReadMore read 0"),I.read(0),R===k.length)break}k.readingMore=!1}function x(I){var k=I._readableState;k.readableListening=I.listenerCount("readable")>0,k.resumeScheduled&&!k.paused?k.flowing=!0:I.listenerCount("data")>0&&I.resume()}function v(I){s("readable nexttick read 0"),I.read(0)}function S(I,k){s("resume",k.reading),k.reading||I.read(0),k.resumeScheduled=!1,I.emit("resume"),N(I),k.flowing&&!k.reading&&I.read(0)}function N(I){var k=I._readableState;for(s("flow",k.flowing);k.flowing&&I.read()!==null;);}function E(I,k){return k.length===0?null:(k.objectMode?R=k.buffer.shift():!I||I>=k.length?(R=k.decoder?k.buffer.join(""):k.buffer.length===1?k.buffer.first():k.buffer.concat(k.length),k.buffer.clear()):R=k.buffer.consume(I,k.decoder),R);var R}function C(I){var k=I._readableState;s("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,Ct.nextTick(P,k,I))}function P(I,k){if(s("endReadableNT",I.endEmitted,I.length),!I.endEmitted&&I.length===0&&(I.endEmitted=!0,k.readable=!1,k.emit("end"),I.autoDestroy)){var R=k._writableState;(!R||R.autoDestroy&&R.finished)&&k.destroy()}}function M(I,k){for(var R=0,U=I.length;R<U;R++)if(I[R]===k)return R;return-1}return A.prototype.read=function(I){s("read",I),I=parseInt(I,10);var k=this._readableState,R=I;if(I!==0&&(k.emittedReadable=!1),I===0&&k.needReadable&&((k.highWaterMark!==0?k.length>=k.highWaterMark:k.length>0)||k.ended))return s("read: emitReadable",k.length,k.ended),k.length===0&&k.ended?C(this):j(this),null;if((I=O(I,k))===0&&k.ended)return k.length===0&&C(this),null;var U,q=k.needReadable;return s("need readable",q),(k.length===0||k.length-I<k.highWaterMark)&&s("length less than watermark",q=!0),k.ended||k.reading?s("reading or ended",q=!1):q&&(s("do read"),k.reading=!0,k.sync=!0,k.length===0&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(I=O(R,k))),(U=I>0?E(I,k):null)===null?(k.needReadable=k.length<=k.highWaterMark,I=0):(k.length-=I,k.awaitDrain=0),k.length===0&&(k.ended||(k.needReadable=!0),R!==I&&k.ended&&C(this)),U!==null&&this.emit("data",U),U},A.prototype._read=function(I){b(this,new m("_read()"))},A.prototype.pipe=function(I,k){var R=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=I;break;case 1:U.pipes=[U.pipes,I];break;default:U.pipes.push(I)}U.pipesCount+=1,s("pipe count=%d opts=%j",U.pipesCount,k);var q=(!k||k.end!==!1)&&I!==Ct.stdout&&I!==Ct.stderr?z:Se;function H(Ee,Ae){s("onunpipe"),Ee===R&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,s("cleanup"),I.removeListener("close",ie),I.removeListener("finish",de),I.removeListener("drain",K),I.removeListener("error",X),I.removeListener("unpipe",H),R.removeListener("end",z),R.removeListener("end",Se),R.removeListener("data",Y),G=!0,!U.awaitDrain||I._writableState&&!I._writableState.needDrain||K())}function z(){s("onend"),I.end()}U.endEmitted?Ct.nextTick(q):R.once("end",q),I.on("unpipe",H);var K=function(Ee){return function(){var Ae=Ee._readableState;s("pipeOnDrain",Ae.awaitDrain),Ae.awaitDrain&&Ae.awaitDrain--,Ae.awaitDrain===0&&e(Ee,"data")&&(Ae.flowing=!0,N(Ee))}}(R);I.on("drain",K);var G=!1;function Y(Ee){s("ondata");var Ae=I.write(Ee);s("dest.write",Ae),Ae===!1&&((U.pipesCount===1&&U.pipes===I||U.pipesCount>1&&M(U.pipes,I)!==-1)&&!G&&(s("false write response, pause",U.awaitDrain),U.awaitDrain++),R.pause())}function X(Ee){s("onerror",Ee),Se(),I.removeListener("error",X),e(I,"error")===0&&b(I,Ee)}function ie(){I.removeListener("finish",de),Se()}function de(){s("onfinish"),I.removeListener("close",ie),Se()}function Se(){s("unpipe"),R.unpipe(I)}return R.on("data",Y),function(Ee,Ae,Re){if(typeof Ee.prependListener=="function")return Ee.prependListener(Ae,Re);Ee._events&&Ee._events[Ae]?Array.isArray(Ee._events[Ae])?Ee._events[Ae].unshift(Re):Ee._events[Ae]=[Re,Ee._events[Ae]]:Ee.on(Ae,Re)}(I,"error",X),I.once("close",ie),I.once("finish",de),I.emit("pipe",R),U.flowing||(s("pipe resume"),R.resume()),I},A.prototype.unpipe=function(I){var k=this._readableState,R={hasUnpiped:!1};if(k.pipesCount===0)return this;if(k.pipesCount===1)return I&&I!==k.pipes||(I||(I=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,I&&I.emit("unpipe",this,R)),this;if(!I){var U=k.pipes,q=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var H=0;H<q;H++)U[H].emit("unpipe",this,{hasUnpiped:!1});return this}var z=M(k.pipes,I);return z===-1||(k.pipes.splice(z,1),k.pipesCount-=1,k.pipesCount===1&&(k.pipes=k.pipes[0]),I.emit("unpipe",this,R)),this},A.prototype.on=function(I,k){var R=n.prototype.on.call(this,I,k),U=this._readableState;return I==="data"?(U.readableListening=this.listenerCount("readable")>0,U.flowing!==!1&&this.resume()):I==="readable"&&(U.endEmitted||U.readableListening||(U.readableListening=U.needReadable=!0,U.flowing=!1,U.emittedReadable=!1,s("on readable",U.length,U.reading),U.length?j(this):U.reading||Ct.nextTick(v,this))),R},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(I,k){var R=n.prototype.removeListener.call(this,I,k);return I==="readable"&&Ct.nextTick(x,this),R},A.prototype.removeAllListeners=function(I){var k=n.prototype.removeAllListeners.apply(this,arguments);return I!=="readable"&&I!==void 0||Ct.nextTick(x,this),k},A.prototype.resume=function(){var I=this._readableState;return I.flowing||(s("resume"),I.flowing=!I.readableListening,function(k,R){R.resumeScheduled||(R.resumeScheduled=!0,Ct.nextTick(S,k,R))}(this,I)),I.paused=!1,this},A.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(I){var k=this,R=this._readableState,U=!1;for(var q in I.on("end",function(){if(s("wrapped end"),R.decoder&&!R.ended){var z=R.decoder.end();z&&z.length&&k.push(z)}k.push(null)}),I.on("data",function(z){s("wrapped data"),R.decoder&&(z=R.decoder.write(z)),R.objectMode&&z==null||(R.objectMode||z&&z.length)&&(k.push(z)||(U=!0,I.pause()))}),I)this[q]===void 0&&typeof I[q]=="function"&&(this[q]=function(z){return function(){return I[z].apply(I,arguments)}}(q));for(var H=0;H<y.length;H++)I.on(y[H],this.emit.bind(this,y[H]));return this._read=function(z){s("wrapped _read",z),U&&(U=!1,I.resume())},this},typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=ole()),c(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(I){this._readableState&&(this._readableState.flowing=I)}}),A._fromList=E,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(A.from=function(I,k){return l===void 0&&(l=S9?_9:(S9=1,_9=function(){throw new Error("Readable.from is not available in the browser")})),l(A,I,k)}),EC}var ZF=vc,hE=$h.codes,ale=hE.ERR_METHOD_NOT_IMPLEMENTED,cle=hE.ERR_MULTIPLE_CALLBACK,lle=hE.ERR_TRANSFORM_ALREADY_TRANSFORMING,ule=hE.ERR_TRANSFORM_WITH_LENGTH_0,Lb=ng();function dle(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new cle);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function vc(t){if(!(this instanceof vc))return new vc(t);Lb.call(this,t),this._transformState={afterTransform:dle.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",hle)}function hle(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?x9(this,null,null):this._flush(function(e,n){x9(t,e,n)})}function x9(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new ule;if(t._transformState.transforming)throw new lle;return t.push(null)}Kw(vc,Lb),vc.prototype.push=function(t,e){return this._transformState.needTransform=!1,Lb.prototype.push.call(this,t,e)},vc.prototype._transform=function(t,e,n){n(new ale("_transform()"))},vc.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},vc.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},vc.prototype._destroy=function(t,e){Lb.prototype._destroy.call(this,t,function(n){e(n)})};var CC,fle=Ym,YF=ZF;function Ym(t){if(!(this instanceof Ym))return new Ym(t);YF.call(this,t)}Kw(Ym,YF),Ym.prototype._transform=function(t,e,n){n(null,t)};var QF=$h.codes,ple=QF.ERR_MISSING_ARGS,gle=QF.ERR_STREAM_DESTROYED;function I9(t){if(t)throw t}function O9(t){t()}function mle(t,e){return t.pipe(e)}var wle=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=function(o){return o.length?typeof o[o.length-1]!="function"?I9:o.pop():I9}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ple("streams");var s=e.map(function(o,a){var c=a<e.length-1;return function(l,u,d,h){h=function(g){var m=!1;return function(){m||(m=!0,g.apply(void 0,arguments))}}(h);var f=!1;l.on("close",function(){f=!0}),CC===void 0&&(CC=g8),CC(l,{readable:u,writable:d},function(g){if(g)return h(g);f=!0,h()});var p=!1;return function(g){if(!f&&!p)return p=!0,function(m){return m.setHeader&&typeof m.abort=="function"}(l)?l.abort():typeof l.destroy=="function"?l.destroy():void h(g||new gle("pipe"))}}(o,c,a>0,function(l){r||(r=l),l&&s.forEach(O9),c||(s.forEach(O9),i(r))})});return e.reduce(mle)};(function(t,e){(e=KS.exports=GF()).Stream=e,e.Readable=e,e.Writable=WF(),e.Duplex=ng(),e.Transform=ZF,e.PassThrough=fle,e.finished=g8,e.pipeline=wle})(0,KS.exports);var rg=KS.exports;function yle(t={}){const e={},n=new rg.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let c=null;try{s.id?function(l){const{id:u}=l;if(u===null)return;const d=e[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(d.res,l),setTimeout(d.end)}(s):function(l){t?.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach(({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const h=e[u.id];h&&(h.retryCount=d+1),i(u)}),r.emit("notification",l)}(s)}catch(l){c=l}a(c)}}),r=new xF;return{events:r,middleware:(s,o,a,c)=>{e[s.id]={req:s,res:o,next:a,end:c},i(s)},stream:n};function i(s){n.push(s)}}var qv={},WS={exports:{}},ble=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(c){o[c]=a[c]}),o}},P9=ble;function S1(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function T9(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}WS.exports=P9(S1),WS.exports.strict=P9(T9),S1.proto=S1(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return S1(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return T9(this)},configurable:!0})});var vle=WS.exports,Hv={};Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.Substream=void 0;const Ele=rg;class Cle extends Ele.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}Hv.Substream=Cle;var _le=uo&&uo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qv,"__esModule",{value:!0}),qv.ObjectMultiplex=void 0;const _C=rg,Sle=_le(vle),Ale=Hv,k9=Symbol("IGNORE_SUBSTREAM");let xle=class extends _C.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new Ale.Substream({parent:this,name:t});return this._substreams[t]=e,function(n,r){const i=(0,Sle.default)(r);(0,_C.finished)(n,{readable:!1},i),(0,_C.finished)(n,{writable:!1},i)}(this,n=>e.destroy(n||void 0)),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=k9}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==k9&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};qv.ObjectMultiplex=xle;var Ile=aE(qv.ObjectMultiplex);const ha=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";ha.writable=t=>ha(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",ha.readable=t=>ha(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",ha.duplex=t=>ha.writable(t)&&ha.readable(t),ha.transform=t=>ha.duplex(t)&&typeof t._transform=="function";var fa,Ole=ha,Ple=class extends zce{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!Ole.duplex(t))throw new Error(In.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new Ile;rg.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=yle({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),rg.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",o=>{const{method:a,params:c}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):IF.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(In.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e?.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){OF(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(In.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},Tle=class extends Ple{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:Dce(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},zS(this,fa,void 0),this._initializeStateAsync(),bc(this,fa,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",s=>{const{method:o}=s;IF.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))}),i)if(document.readyState==="complete")f9(this._rpcEngine,this._log);else{const s=()=>{f9(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(In.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(In.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Aa(this,fa)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(In.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Aa(this,fa)&&!t&&bc(this,fa,null)}_warnOfDeprecation(t){this._sentWarnings?.events[t]===!1&&(this._log.warn(In.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(In.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},Mb(t,e))}catch(n){e(n)}})}send(t,e){return this._sentWarnings.send||(this._log.warn(In.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise((n,r)=>{try{this._rpcRequest({method:t,params:e},Mb(n,r,!1))}catch(i){r(i)}})}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,PF),e=!0;break;case"net_version":e=Aa(this,fa)??null;break;default:throw new Error(In.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(t=>{this.on("_initialized",()=>t())}),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw um({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise((e,n)=>{this._rpcRequest(t,Mb(e,n))})}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(In.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Aa(this,fa)&&(bc(this,fa,e),this._state.initialized&&this.emit("networkChanged",Aa(this,fa)))}};fa=new WeakMap;const te=vi("MM_SDK");let N9;te.color="#FFAC1C";var JF={},bu={};Object.defineProperty(bu,"__esModule",{value:!0}),bu.EthereumProviderError=bu.EthereumRpcError=void 0;const kle=vF;class XF extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return kle.default(this.serialize(),Nle,2)}}bu.EthereumRpcError=XF;function Nle(t,e){if(e!=="[Circular]")return e}bu.EthereumProviderError=class extends XF{constructor(t,e,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var m8={},Ul={};Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.errorValues=Ul.errorCodes=void 0,Ul.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ul.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Ul,n=bu,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(d,h=i){if(Number.isInteger(d)){const f=d.toString();if(u(e.errorValues,f))return e.errorValues[f].message;if(c(d))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return h}function a(d){if(!Number.isInteger(d))return!1;const h=d.toString();return!!e.errorValues[h]||!!c(d)}function c(d){return d>=-32099&&d<=-32e3}function l(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,h){return Object.prototype.hasOwnProperty.call(d,h)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(d,{fallbackError:h=s,shouldIncludeStack:f=!1}={}){var p,g;if(!h||!Number.isInteger(h.code)||typeof h.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const m={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){const b=d;m.code=b.code,b.message&&typeof b.message=="string"?(m.message=b.message,u(b,"data")&&(m.data=b.data)):(m.message=o(m.code),m.data={originalError:l(d)})}else{m.code=h.code;const b=(p=d)===null||p===void 0?void 0:p.message;m.message=b&&typeof b=="string"?b:h.message,m.data={originalError:l(d)}}const w=(g=d)===null||g===void 0?void 0:g.stack;return f&&d&&w&&typeof w=="string"&&(m.stack=w),m}}(m8);var zv={};Object.defineProperty(zv,"__esModule",{value:!0}),zv.ethErrors=void 0;const w8=bu,eq=m8,Xr=Ul;function Fs(t,e){const[n,r]=tq(e);return new w8.EthereumRpcError(t,n||eq.getMessageFromCode(t),r)}function E0(t,e){const[n,r]=tq(e);return new w8.EthereumProviderError(t,n||eq.getMessageFromCode(t),r)}function tq(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}zv.ethErrors={rpc:{parse:t=>Fs(Xr.errorCodes.rpc.parse,t),invalidRequest:t=>Fs(Xr.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Fs(Xr.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Fs(Xr.errorCodes.rpc.methodNotFound,t),internal:t=>Fs(Xr.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Fs(e,t)},invalidInput:t=>Fs(Xr.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Fs(Xr.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Fs(Xr.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Fs(Xr.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Fs(Xr.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Fs(Xr.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>E0(Xr.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>E0(Xr.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>E0(Xr.errorCodes.provider.unsupportedMethod,t),disconnected:t=>E0(Xr.errorCodes.provider.disconnected,t),chainDisconnected:t=>E0(Xr.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new w8.EthereumProviderError(e,n,r)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=bu;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=m8;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=zv;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Ul;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(JF);var nq={exports:{}};nq.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,function(a){return r[a]}.bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)}({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function s(){}return s.getFirstMatch=function(o,a){var c=a.match(o);return c&&c.length>0&&c[1]||""},s.getSecondMatch=function(o,a){var c=a.match(o);return c&&c.length>1&&c[2]||""},s.matchAndReturnConst=function(o,a,c){if(o.test(a))return c},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,c){c===void 0&&(c=!1);var l=s.getVersionPrecision(o),u=s.getVersionPrecision(a),d=Math.max(l,u),h=0,f=s.map([o,a],function(p){var g=d-s.getVersionPrecision(p),m=p+new Array(g+1).join(".0");return s.map(m.split("."),function(w){return new Array(20-w.length).join("0")+w}).reverse()});for(c&&(h=d-Math.min(l,u)),d-=1;d>=h;){if(f[0][d]>f[1][d])return 1;if(f[0][d]===f[1][d]){if(d===h)return 0;d-=1}else if(f[0][d]<f[1][d])return-1}},s.map=function(o,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(c=0;c<o.length;c+=1)l.push(a(o[c]));return l},s.find=function(o,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(c=0,l=o.length;c<l;c+=1){var u=o[c];if(a(u,c))return u}},s.assign=function(o){for(var a,c,l=o,u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];if(Object.assign)return Object.assign.apply(Object,[o].concat(d));var f=function(){var p=d[a];typeof p=="object"&&p!==null&&Object.keys(p).forEach(function(g){l[g]=p[g]})};for(a=0,c=d.length;a<c;a+=1)f();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s}();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}var a=function(){function c(){}var l,u,d;return c.getParser=function(h,f){if(f===void 0&&(f=!1),typeof h!="string")throw new Error("UserAgent should be a string");return new i.default(h,f)},c.parse=function(h){return new i.default(h).getResult()},l=c,d=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(l.prototype,u),d&&o(l,d),c}();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),s=c(n(94)),o=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=function(){function u(h,f){if(f===void 0&&(f=!1),h==null||h==="")throw new Error("UserAgent parameter can't be empty");this._ua=h,this.parsedResult={},f!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(h){return h.test(this._ua)},d.parseBrowser=function(){var h=this;this.parsedResult.browser={};var f=a.default.find(r.default,function(p){if(typeof p.test=="function")return p.test(h);if(p.test instanceof Array)return p.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(h){return h?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var h=this;this.parsedResult.os={};var f=a.default.find(i.default,function(p){if(typeof p.test=="function")return p.test(h);if(p.test instanceof Array)return p.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(h){var f=this.getOS().name;return h?String(f).toLowerCase()||"":f||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(h){h===void 0&&(h=!1);var f=this.getPlatform().type;return h?String(f).toLowerCase()||"":f||""},d.parsePlatform=function(){var h=this;this.parsedResult.platform={};var f=a.default.find(s.default,function(p){if(typeof p.test=="function")return p.test(h);if(p.test instanceof Array)return p.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(h){return h?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var h=this;this.parsedResult.engine={};var f=a.default.find(o.default,function(p){if(typeof p.test=="function")return p.test(h);if(p.test instanceof Array)return p.test.some(function(g){return h.test(g)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(h){var f=this,p={},g=0,m={},w=0;if(Object.keys(h).forEach(function(O){var j=h[O];typeof j=="string"?(m[O]=j,w+=1):typeof j=="object"&&(p[O]=j,g+=1)}),g>0){var b=Object.keys(p),y=a.default.find(b,function(O){return f.isOS(O)});if(y){var _=this.satisfies(p[y]);if(_!==void 0)return _}var A=a.default.find(b,function(O){return f.isPlatform(O)});if(A){var T=this.satisfies(p[A]);if(T!==void 0)return T}}if(w>0){var $=Object.keys(m),D=a.default.find($,function(O){return f.isBrowser(O,!0)});if(D!==void 0)return this.compareVersion(m[D])}},d.isBrowser=function(h,f){f===void 0&&(f=!1);var p=this.getBrowserName().toLowerCase(),g=h.toLowerCase(),m=a.default.getBrowserTypeByAlias(g);return f&&m&&(g=m.toLowerCase()),g===p},d.compareVersion=function(h){var f=[0],p=h,g=!1,m=this.getBrowserVersion();if(typeof m=="string")return h[0]===">"||h[0]==="<"?(p=h.substr(1),h[1]==="="?(g=!0,p=h.substr(2)):f=[],h[0]===">"?f.push(1):f.push(-1)):h[0]==="="?p=h.substr(1):h[0]==="~"&&(g=!0,p=h.substr(1)),f.indexOf(a.default.compareVersions(m,p,g))>-1},d.isOS=function(h){return this.getOSName(!0)===String(h).toLowerCase()},d.isPlatform=function(h){return this.getPlatformType(!0)===String(h).toLowerCase()},d.isEngine=function(h){return this.getEngineName(!0)===String(h).toLowerCase()},d.is=function(h,f){return f===void 0&&(f=!1),this.isBrowser(h,f)||this.isOS(h)||this.isPlatform(h)},d.some=function(h){var f=this;return h===void 0&&(h=[]),h.some(function(p){return f.is(p)})},u}();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:s.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:s.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:s.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:s.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:s.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:c}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:s.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:s.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:s.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:s.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=o,t.exports=e.default}});var rq=aE(nq.exports);const Ei={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class Ho{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new sq({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{c=o,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){te("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let d=!1,h=!1;if(!window.web3){const f="__isMetaMaskShim__";let p={currentProvider:l};Object.defineProperty(p,f,{value:!0,enumerable:!0,configurable:!1,writable:!1}),p=new Proxy(p,{get:(g,m,...w)=>(m!=="currentProvider"||d?m==="currentProvider"||m===f||h||(h=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch(b=>{u.debug("MetaMask: Failed to log web3 shim usage.",b)})):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(g,m,...w)),set:(...g)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...g))}),Object.defineProperty(window,"web3",{value:p,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){te("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",l=>{this.sdkInstance.emit(Ei.DisplayURI,l)}),this.provider.on("_initialized",()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Ei.Initialized,l),te("[Ethereum: constructor()] provider initialized",l)})}static init(e){var n;return te("[Ethereum: init()] Initializing Ethereum service"),this.instance=new Ho(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class Qm{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return function(i,s,o,a){const{state:c}=i;te(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),te(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?o:s,a);if(te(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?o:s}`),c.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const l=document.createElement("a");l.href=s,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}}(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&window?.navigator&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return function(){const e=Ho.getProvider()||window?.ethereum;return te(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e?.isMetaMask} isConnected=${e?.isConnected()}`),e?.isMetaMask&&e?.isConnected()}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=rq.parse(window.navigator.userAgent);return((e=r?.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r?.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===Hr.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!window?.navigator||Si!==void 0&&((e=Si?.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||navigator?.product==="ReactNative"}isNotBrowser(){return Qm.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return Qm.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?Hr.ReactNative:e.isNotBrowser()?Hr.NonBrowser:e.isMetaMaskMobileWebView()?Hr.MetaMaskMobileWebview:e.isMobile()?Hr.MobileWeb:Hr.DesktopWeb}(this)}}const iq=t=>se(void 0,void 0,void 0,function*(){if(Qm.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return oue});return new n(t)}const e={persistChannelConfig:()=>se(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>se(void 0,void 0,void 0,function*(){}),persistAccounts:()=>se(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>se(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>se(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>se(void 0,void 0,void 0,function*(){}),terminate:()=>se(void 0,void 0,void 0,function*(){})};return Promise.resolve(e)});class sq extends Tle{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},te(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return se(this,void 0,void 0,function*(){return te(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){te("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(te("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;te(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",JF.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return se(this,void 0,void 0,function*(){return function(e){var n,r;return se(this,void 0,void 0,function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)te("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield iq({enabled:!0});if(u){const d=yield u.getPersistedChannelConfig({});c=(n=d?.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const h=yield u.getCachedAccounts();h.length>0&&(a=h[0])}if(te(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:o,cachedSelectedAddress:a}),c)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},l=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(d){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(i.providerStateRequested=!1)}if(((r=s?.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{te("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const d=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=d}e._initializeState(s),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:s?.chainId}))}})}(this)})}_initializeState(e){return te("[SDKProvider: _initializeState()]",e),function(n,r,i){return te("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){te(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(te("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==N9&&(Rn.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),N9=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})}({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var Jm,Rh={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(Jm||(Jm={}));const $9="direct",Xm="https://metamask.app.link/connect",ew="metamask://connect",R9={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},$le=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,He={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},tw={[He.ETH_REQUESTACCOUNTS]:!0,[He.ETH_SENDTRANSACTION]:!0,[He.ETH_SIGNTRANSACTION]:!0,[He.ETH_SIGN]:!0,[He.PERSONAL_SIGN]:!0,[He.ETH_ACCOUNTS]:!1,[He.ETH_CHAINID]:!1,[He.PERSONAL_SIGN]:!0,[He.ETH_SIGNTYPEDDATA]:!0,[He.ETH_SIGNTYPEDDATA_V3]:!0,[He.ETH_SIGNTYPEDDATA_V4]:!0,[He.WALLET_REQUESTPERMISSIONS]:!0,[He.WALLET_GETPERMISSIONS]:!0,[He.WALLET_WATCHASSET]:!0,[He.WALLET_ADDETHEREUMCHAIN]:!0,[He.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[He.METAMASK_CONNECTSIGN]:!0,[He.METAMASK_CONNECTWITH]:!0,[He.PERSONAL_EC_RECOVER]:!0,[He.METAMASK_BATCH]:!0,[He.METAMASK_OPEN]:!0},Rle=Object.keys(tw).filter(t=>tw[t]===!0).map(t=>t.toLowerCase()),oq=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(t=>t.toLowerCase()),SC=".sdk-comm",Kv="providerType",GS=".MMSDK_cached_address",ZS=".MMSDK_cached_chainId",na={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},Mle=1e6;var zo;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(zo||(zo={}));const Dle=typeof window<"u"&&window.localStorage;function Ble({instance:t,msg:e}){return se(this,void 0,void 0,function*(){if(t._initialized||(te("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),te(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:function(r){let i;if(oe!==void 0)i=oe.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map(o=>o.toString(16).padStart(2,"0")).join("")}else{if(typeof Si!="object"||!("Buffer"in Si))throw new Error("Unable to convert string to hex: No available method.");i=Si.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`}(e);return t.activeProvider.request({method:He.METAMASK_CONNECTWITH,params:[{method:He.PERSONAL_SIGN,params:[n]}]})})}function M9(t){var e,n;return se(this,void 0,void 0,function*(){te("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});te(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(Kv,"extension"),t.extensionActive=!0,t.emit(Ei.ProviderUpdate,zo.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:zn.SDK_USE_EXTENSION}))})}function Vv(t){let e;if(oe!==void 0)e=oe.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof Si!="object"||!("Buffer"in Si))throw new Error("Unable to base64 encode: No available method.");e=Si.Buffer.from(t,"utf8").toString("base64")}return e}function Lle(t,e,n,r){var i,s,o,a,c,l,u,d,h,f,p,g,m,w,b,y,_,A,T,$;return se(this,void 0,void 0,function*(){const D=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),O=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),j=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),F=Ho.getProvider(),L=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),B=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:x}=t.state,{method:v,data:S,triggeredInstaller:N}=(M=>{var I,k,R,U;let q;oe.isBuffer(M)?(q=M.toJSON(),q._isBuffer=!0):q=M;const H=(I=q?.data)===null||I===void 0?void 0:I.method;let z=!1;return typeof((k=q?.data)===null||k===void 0?void 0:k.params)=="object"&&((U=(R=q?.data)===null||R===void 0?void 0:R.params)===null||U===void 0?void 0:U.__triggeredInstaller)===!0&&(z=!0,q.data.params=q.data.params.wrappedParams),{method:H,data:q,triggeredInstaller:z}})(e);if(te(`[RCPMS: write()] method='${v}' isRemoteReady=${D} channelId=${L} isSocketConnected=${O} isRemotePaused=${j} providerConnected=${F.isConnected()}`,e),!L)return v!==He.METAMASK_GETPROVIDERSTATE&&te(`[RCPMS: write()] ${v} --> channelId is undefined`),r(new Error("disconnected"));te(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${B} ready=${D} socketConnected=${O}`,e);const E=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),C=(h=(d=t.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&h!==void 0&&h,P=(p=(f=t.state.remote)===null||f===void 0?void 0:f.hasDeeplinkProtocol())!==null&&p!==void 0&&p&&C&&B;try{if(!N){const k=JSON.stringify(S?.data);if(k.length>Mle)return r(new Error(`Message size ${k.length} exceeds maximum allowed size of 1000000 bytes`));(g=t.state.remote)===null||g===void 0||g.sendMessage(S?.data).then(()=>{te(`[RCPMS: _write()] ${v} sent successfully`)}).catch(R=>{te("[RCPMS: _write()] error sending message",R)})}if(!E)return te(`[RCPMS: _write()] unsecure platform for method ${v} -- return callback`),r();if(N)return te("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const M=(b=(w=(m=t.state.remote)===null||m===void 0?void 0:m.getKeyInfo())===null||w===void 0?void 0:w.ecies.public)!==null&&b!==void 0?b:"";let I=encodeURI(`channelId=${L}&pubkey=${M}&comm=socket&t=d&v=2`);if(P){const k=JSON.stringify(S?.data),R=(y=t.state.remote)===null||y===void 0?void 0:y.encrypt(k);if(!R)return te("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));I+=`&scheme=${x}&rpc=${Vv(R)}`}if(!(!((_=t.state.platformManager)===null||_===void 0)&&_.isMetaMaskInstalled()))return te("[RCPMS: _write()] prevent deeplink until installation is completed."),r();tw[v]?(te(`[RCPMS: _write()] redirect link for '${v}' socketConnected=${O} connect?${I}`),(A=t.state.platformManager)===null||A===void 0||A.openDeeplink(`${Xm}?${I}`,`${ew}?${I}`,"_self")):!((T=t.state.remote)===null||T===void 0)&&T.isPaused()?(te(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${v}`),($=t.state.platformManager)===null||$===void 0||$.openDeeplink(`${Xm}?redirect=true&${I}`,`${ew}?redirect=true&${I}`,"_self")):te(`[RCPMS: _write()] method ${v} doesn't need redirect.`)}catch(M){return te("[RCPMS: _write()] error sending message",M),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}class Ule extends rg.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ue.MESSAGE,this._onMessage)}_write(e,n,r){return se(this,void 0,void 0,function*(){return Lle(this,e,0,r)})}_read(){}_onMessage(e){return function(n,r){try{if(te("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof r?.data!="object")return;if(!r?.name)return void te("[RCPMS: onMessage()] ignore message without name",r);if(r?.name!==Jm.PROVIDER)return void te(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(oe.isBuffer(r)){const i=oe.from(r);n.push(i)}else n.push(r)}catch(i){te(`[RCPMS: onMessage()] ignore message error err=${i}`)}}(this,e)}start(){}}let D9=1;const aq=t=>new Promise(e=>{setTimeout(()=>{e(!0)},t)}),jle=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:c})=>se(void 0,void 0,void 0,function*(){var l,u;const d=(({name:j,remoteConnection:F})=>{if(!F||!F?.getConnector())throw new Error("Missing remote connection parameter");return new Ule({name:j,remote:F?.getConnector(),deeplinkProtocol:F?.state.deeplinkProtocol,platformManager:F?.getPlatformManager()})})({name:Jm.INPAGE,target:Jm.CONTENT_SCRIPT,remoteConnection:a}),h=i.getPlatformType(),f=o.options.dappMetadata,p=`Sdk/Javascript SdkVersion/${Rh.version} Platform/${h} dApp/${(l=f.url)!==null&&l!==void 0?l:f.name} dAppTitle/${f.name}`;let g=null,m=null;const w=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(w){try{const j=yield w.getCachedAccounts();j.length>0&&(g=j[0])}catch(j){console.error(`[initializeMobileProvider] failed to get cached addresses: ${j}`)}try{const j=yield w.getCachedChainId();j&&(m=j)}catch(j){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${j}`)}}te(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${m}`);const b=!(!n||h===Hr.NonBrowser||h===Hr.ReactNative),y=Ho.init({shouldSetOnWindow:b,connectionStream:d,shouldShimWeb3:r,sdkInstance:o});let _=!1;const A=j=>{_=j},T=()=>_,$=(j,F,L,B)=>se(void 0,void 0,void 0,function*(){var x,v,S,N,E,C,P,M,I;const k=Ho.getProvider();if(_){k.emit("display_uri",a?.state.qrcodeLink||""),a?.showActiveModal();let X=T();for(;X;){const ie=T(),de=a?.isAuthorized();X=ie&&!de,te(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${ie} authorized: ${de}`),yield aq(1e3)}return te("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),L(...F)}const R=i.isMetaMaskInstalled(),U=a?.isConnected();let q=null,H=null,z=null;if(q=(x=k.getSelectedAddress())!==null&&x!==void 0?x:g,z=k.getChainId()||m,q&&w&&q!==g&&w.persistAccounts([q]).catch(X=>{console.error(`[initializeMobileProvider] failed to persist account: ${X}`)}),z&&(m=z,w&&w.persistChainId(z).catch(X=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${X}`)})),te("[initializeMobileProvider: sendRequest()]",{selectedAddress:q,chainId:z}),B&&te(`[initializeMobileProvider: sendRequest()] method=${j} ongoing=${_} selectedAddress=${q} isInstalled=${R} checkInstallationOnAllCalls=${t} socketConnected=${U}`),q&&j.toLowerCase()===He.ETH_ACCOUNTS.toLowerCase())return[q];if(z&&j.toLowerCase()===He.ETH_CHAINID.toLowerCase())return z;const K=[He.ETH_REQUESTACCOUNTS,He.WALLET_REQUESTPERMISSIONS,He.METAMASK_CONNECTSIGN,He.METAMASK_CONNECTWITH],G=!tw[j],Y=(v=o.options.readonlyRPCMap)===null||v===void 0?void 0:v[z];if(Y&&G)try{const X=(S=F?.[0])===null||S===void 0?void 0:S.params,ie=yield(({rpcEndpoint:de,method:Se,sdkInfo:Ee,params:Ae})=>se(void 0,void 0,void 0,function*(){const Re=JSON.stringify({jsonrpc:"2.0",method:Se,params:Ae,id:(D9+=1,D9)}),Me={Accept:"application/json","Content-Type":"application/json"};let Qe;de.includes("infura")&&(Me["Metamask-Sdk-Info"]=Ee);try{Qe=yield uU(de,{method:"POST",headers:Me,body:Re})}catch(et){throw et instanceof Error?new Error(`Failed to fetch from RPC: ${et.message}`):new Error(`Failed to fetch from RPC: ${et}`)}if(!Qe.ok)throw new Error(`Server responded with a status of ${Qe.status}`);return(yield Qe.json()).result}))({rpcEndpoint:Y,sdkInfo:p,method:j,params:X||[]});return B&&te(`initializeProvider::ReadOnlyRPCResponse ${ie}`),ie}catch(X){console.warn(`[initializeMobileProvider: sendRequest()] method=${j} readOnlyRPCRequest failed:`,X)}if((!R||R&&!U)&&j!==He.METAMASK_GETPROVIDERSTATE){const X=((N=F?.[0])===null||N===void 0?void 0:N.params)||[];if(K.indexOf(j)!==-1||t){A(!0);const ie=j===He.METAMASK_CONNECTWITH,de=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:ie?{method:j,id:de,params:X}:void 0}),yield new Promise((Se,Ee)=>{a?.isAuthorized()&&(te("[initializeMobileProvider: sendRequest()] already authorized"),Se(!0)),a?.getConnector().once(ue.AUTHORIZED,()=>{Se(!0)}),o.once(ue.PROVIDER_UPDATE,Ae=>{te(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${Ae}`),Ae===zo.EXTENSION?Ee(ue.PROVIDER_UPDATE):Ee(new Error("Connection Terminated"))})})}catch(Se){if(zo.EXTENSION===Se){if(te(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${j} on the active provider`),j.toLowerCase()===He.METAMASK_CONNECTSIGN.toLowerCase()){const Ee=yield(E=o.getProvider())===null||E===void 0?void 0:E.request({method:He.ETH_REQUESTACCOUNTS,params:[]});if(!Ee.length)throw new Error("SDK state invalid -- undefined accounts");const Ae=yield(C=o.getProvider())===null||C===void 0?void 0:C.request({method:He.PERSONAL_SIGN,params:[X[0],Ee[0]]});return o.emit(Ei.ConnectWithResponse,Ae),Ae}if(j.toLowerCase()===He.METAMASK_CONNECTWITH.toLowerCase()){const[Ee]=X,Ae=yield(({method:Re,sdk:Me,params:Qe})=>se(void 0,void 0,void 0,function*(){var et,ze,Ye,Je;if(!Me.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");te("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",Re,Qe);const ne=yield(et=Me.getProvider())===null||et===void 0?void 0:et.request({method:He.ETH_REQUESTACCOUNTS,params:[]});if(!ne.length)throw new Error("SDK state invalid -- undefined accounts");if(Re?.toLowerCase()===He.PERSONAL_SIGN.toLowerCase()){const le={method:Re,params:[Qe[0],ne[0]]};return yield(ze=Me.getProvider())===null||ze===void 0?void 0:ze.request(le)}if(Re?.toLowerCase()===He.ETH_SENDTRANSACTION.toLowerCase()){const le={method:Re,params:[Object.assign(Object.assign({},Qe[0]),{from:ne[0]})]};return yield(Ye=Me.getProvider())===null||Ye===void 0?void 0:Ye.request(le)}return oq.includes(Re.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${Re} -- not handled by the extension -- call separately`),ne):yield(Je=Me.getProvider())===null||Je===void 0?void 0:Je.request({method:Re,params:Qe})}))({method:Ee.method,sdk:o,params:Ee.params});return o.emit(Ei.ConnectWithResponse,Ae),Ae}return te(`[initializeMobileProvider: sendRequest()] sending '${j}' on active provider`,X),yield(P=o.getProvider())===null||P===void 0?void 0:P.request({method:j,params:X})}throw Se===ue.REJECTED?(a?.closeModal(),(M=o.getProvider())===null||M===void 0||M.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(te(`[initializeMobileProvider: sendRequest()] failed to start installer: ${Se}`),Se)}finally{A(!1)}if(j===He.ETH_REQUESTACCOUNTS)return H=yield new Promise(Se=>{const Ee=setInterval(()=>{const{accounts:Ae}=k.getState();Ae&&(clearInterval(Ee),Se(Ae))},100)}),te(`[initializeMobileProvider: sendRequest()] selectedAddress: ${q} --- SKIP rpc call`),H;if(j===He.METAMASK_CONNECTWITH)try{let Se=0;const Ee=5,Ae=({resolve:et,reject:ze})=>{Se+=1;const Ye=a?.getConnector().getRPCMethodTracker(),Je=Ye?.[de];return te(`TRACKER: update method ${de}`,Je),Je?.result?(te("[initializeMobileProvider: sendRequest()] found result",Je.result),o.emit(Ei.ConnectWithResponse,Je.result),void et(Je.result)):Je?.error?(te("[initializeMobileProvider: sendRequest()] found error",Je.error),void ze(Je.error)):Se>=Ee?(te("[initializeMobileProvider: sendRequest()] max message count reached without result"),void ze(new Error("Max message count reached without result"))):void te("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let Re,Me;const Qe=yield new Promise((et,ze)=>{const Ye=a?.getConnector().getRPCMethodTracker();te(`TRACKER: method ${de}`,Ye),Ye?.[de].result?(te("[initializeMobileProvider: sendRequest()] found result",Ye?.[de].result),et(Ye?.[de].result)):Ye?.[de].error&&(te("[initializeMobileProvider: sendRequest()] found error",Ye?.[de].error),ze(Ye?.[de].error)),Me=()=>Ae({resolve:et,reject:ze}),Re=a?.getConnector().on(ue.RPC_UPDATE,Me)});return Me&&Re?.off(ue.RPC_UPDATE,Me),te("TRACKER: result",Qe),Qe}catch(Se){throw te("[initializeMobileProvider: sendRequest()] error:",Se),Se}return F[0]&&typeof F[0]=="object"&&(F[0].params={__triggeredInstaller:!0,wrappedParams:F[0].params}),L(...F)}if(i.isSecure()&&tw[j])return L(...F);if(o.isExtensionActive())return te(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${j}' to it`,F,X),yield(I=o.getProvider())===null||I===void 0?void 0:I.request({method:j,params:X});throw te(`[initializeMobileProvider: sendRequest()] method=${j} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const X=yield L(...F);if(te(`[initializeMobileProvider: sendRequest()] method=${j} rpcResponse`,X),j===He.WALLET_REQUESTPERMISSIONS){const ie=X.reduce((de,Se)=>{var Ee;if(Se.parentCapability==="eth_accounts"){const Ae=(Ee=Se.caveats.find(Re=>Re.type==="restrictReturnedAccounts"))===null||Ee===void 0?void 0:Ee.value;Ae&&de.push(...Ae)}return de},[]);te("[initializeMobileProvider: sendRequest()] accountsToPersist:",ie),ie.length>0&&(k.handleAccountsChanged(ie,!1),w?.persistAccounts(ie))}return X}catch(X){throw console.error("[initializeMobileProvider: sendRequest()] error:",X),X}}),{request:D}=y;y.request=(...j)=>se(void 0,void 0,void 0,function*(){return $(j?.[0].method,j,D,c)});const{send:O}=y;return y.send=(...j)=>se(void 0,void 0,void 0,function*(){return $(j?.[0],j,O,c)}),te("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),y});function Fle(t){var e,n,r,i;return se(this,void 0,void 0,function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:Ru.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield jle(o);t.activeProvider=a,function(c){var l,u,d,h;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(Ei.ConnectionStatus,f=>{c.emit(Ei.ConnectionStatus,f)}),(h=(d=c.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||h===void 0||h.on(Ei.ServiceStatus,f=>{c.emit(Ei.ServiceStatus,f)})}(t)})}const qle="sdk";class Hle{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=rh,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:qle,event:e,sdkVersion:Rh.version},this.originatorInfo),{params:n});te(`[Analytics: send()] event: ${e}`,r),Wc(r,this.serverURL).catch(i=>{te(`[Analytics: send()] error: ${i}`)})}}const zle=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},Kle=163400;function B9(t){var e,n,r;const{dappMetadata:i}=t,s=function({url:u,name:d}){var h;const f=u+d,p=Vv(f);if(!localStorage)return"";let g=(h=localStorage.getItem(p))!==null&&h!==void 0?h:"";if(!g){g=zl();try{localStorage.setItem(p,g)}catch{return""}}return g}({url:(e=i?.url)!==null&&e!==void 0?e:"no_url",name:(n=i?.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===Hr.DesktopWeb,c=o===Hr.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:s,from:l}}const A1=(t,e,n)=>{if(Hw(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||e?.error;r&&r.code===4001?Rn.analytics.track("sdk_action_rejected",{action:t}):Rn.analytics.track("sdk_action_failed",{action:t})}else Rn.analytics.track("sdk_action_succeeded",{action:t})},cq=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return se(this,void 0,void 0,function*(){te("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=Rle.includes(a.toLowerCase()),{id:u,from:d}=B9(e);if(l&&((s=e.analytics)===null||s===void 0||s.send({event:zn.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),Hw(a)&&Rn.analytics.track("sdk_action_requested",{action:a}),a===He.METAMASK_BATCH&&Array.isArray(c))return(({target:p,args:g,trackEvent:m,sdkInstance:w})=>se(void 0,void 0,void 0,function*(){var b,y;if(g.method!=="metamask_batch")throw new Error("Invalid usage");const _=[],A=(b=g?.params)!==null&&b!==void 0?b:[];for(const D of A){const O=yield p?.request({method:D.method,params:D.params});_.push(O)}const{id:T,from:$}=B9(w);m&&((y=w.analytics)===null||y===void 0||y.send({event:zn.SDK_RPC_REQUEST_DONE,params:{method:g.method,from:$,id:T}}));for(const D of _)A1(g.method,D,null);return _}))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===He.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>se(void 0,void 0,void 0,function*(){let m,w=null;try{const b=yield p.request({method:He.ETH_REQUESTACCOUNTS,params:[]});if(!b.length)throw new Error("SDK state invalid -- undefined accounts");return m=yield p.request({method:He.PERSONAL_SIGN,params:[g[0],b[0]]}),m}catch(b){throw w=b,b}finally{A1(He.PERSONAL_SIGN,m,w)}}))({target:n,params:c});if(a.toLowerCase()===He.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:p,params:g})=>se(void 0,void 0,void 0,function*(){const[m]=g,w=m.method,b=m.params;let y,_=null;try{const A=yield p.request({method:He.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(A)||!A.length)throw new Error("SDK state invalid -- undefined accounts");return w?.toLowerCase()===He.PERSONAL_SIGN.toLowerCase()?(y=yield p.request({method:w,params:[b[0],A[0]]}),y):w?.toLowerCase()===He.ETH_SENDTRANSACTION.toLowerCase()?(y=yield p.request({method:w,params:[Object.assign(Object.assign({},b[0]),{from:A[0]})]}),y):oq.includes(w.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${w} -- not handled by the extension -- call separately`),y=A,y):(y=yield p.request({method:w,params:b}),y)}catch(A){throw _=A,A}finally{A1(w,y,_)}}))({target:n,params:c});let h,f=null;try{return h=yield n.request(i),h}catch(p){throw f=p,p}finally{l&&((o=e.analytics)===null||o===void 0||o.send({event:zn.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}})),A1(a,h,f)}})}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var Wv;function Vle({mustBeMetaMask:t,sdkInstance:e}){return se(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(Wv.Announce,o=>{const a=o,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:d,uuid:h}=c??{};$le.test(h)&&u.startsWith(R9.NAME)&&R9.RDNS.includes(d)&&(clearTimeout(s),r(l))}),window.dispatchEvent(new Event(Wv.Request))});return cq({provider:n,sdkInstance:e})}catch{throw new Error("Provider not found")}})}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(Wv||(Wv={}));const Wle=t=>se(void 0,void 0,void 0,function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r}),Gle=t=>se(void 0,void 0,void 0,function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{te("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function Zle(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}c((r=r.apply(t,[])).next())})}function Yle(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,l])}}}var L9="INSTALLED",U9="NOT_INSTALLED",j9="REGISTERED",F9="REGISTERING",q9="RELOADING",H9={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},x1="REGISTRATION_IN_PROGRESS",z9="FORWARDER_ID",Qle=function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?L9:U9;var a=t._detectBrowser();this.downloadUrl=a?H9[a]:H9.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(x1)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return Zle(this,0,void 0,function(){return Yle(this,function(n){switch(n.label){case 0:switch(this.state){case q9:return[3,1];case U9:return[3,2];case L9:return[3,3];case F9:return[3,5];case j9:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=q9,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=F9,[4,t._register()];case 4:return n.sent(),this.state=j9,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},t.prototype.startOnboarding=function(){sessionStorage.setItem(x1,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(x1)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(x1,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",z9),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(z9))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=rq.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t}();function Jle(t,{wait:e=!1}){return se(this,void 0,void 0,function*(){return te(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield aq(1e3)),yield t.checkInstallation()})}class Xle{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return function(){return se(this,void 0,void 0,function*(){te("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new Qle().startOnboarding()})}()}redirectToProperInstall(){return se(this,void 0,void 0,function*(){return function(e){var n,r;return se(this,void 0,void 0,function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(te(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===Hr.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0})}(this)})}checkInstallation(){return se(this,void 0,void 0,function*(){return function(e){var n;return se(this,void 0,void 0,function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return te(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:n}){return se(this,void 0,void 0,function*(){this.state.connectWith=n,te(`[MetaMaskInstaller: start()] wait=${e}`,n),yield Jle(this,{wait:e})})}}class lq{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return se(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then(function(){return Nue});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}})}renderInstallModal(e){var n;return se(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var n;return se(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var n;return se(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:i}})=>e.updateOTPValue(i)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout(()=>{n()},800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,n])=>{var r;(r=n?.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0})}}const eue=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,c=null;te("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),te(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),te(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),te(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),te(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var d;te("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c?.parentNode&&((d=c.parentNode)===null||d===void 0||d.removeChild(c)),c=null,a=null,u===!0&&r?.()};return{mount:u=>{if(te("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new lq({debug:e,sdkVersion:Rh.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i?.()},onClose:l,link:t,preferDesktop:s!=null&&s}).catch(d=>{console.error(d)}):a.renderInstallModal({parentElement:c,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:o}).catch(d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)})},unmount:l}},tue=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{te("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n?.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{te("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{te("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new lq({debug:e,sdkVersion:Rh.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch(c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)}))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function uq(t,e){var n,r,i,s;t.connector||(te("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new ice({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:Rh.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(te("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,()=>!1,1e4)))}function YS(t){t.listeners.forEach(({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)}),t.listeners=[]}function nue(t,e,n){return se(this,void 0,void 0,function*(){const r=setTimeout(()=>{Rn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));te("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?ew:Xm}?${n}`;(function(a,c,l){var u,d,h,f;a.installModal=(d=(u=c.modals).install)===null||d===void 0?void 0:d.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{te("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch(p=>{console.warn("[MMSDK] failed to terminate connection",p)})},debug:a.developerMode,connectWithExtension:()=>{var p;return(p=c.connectWithExtensionProvider)===null||p===void 0||p.call(c),!1},onAnalyticsEvent:({event:p,params:g})=>{var m,w,b;const y=Object.assign(Object.assign({},g),{sdkVersion:c.sdk.getVersion(),dappId:(m=c.dappMetadata)===null||m===void 0?void 0:m.name,source:c._source,url:(w=c.dappMetadata)===null||w===void 0?void 0:w.url});(b=a.analytics)===null||b===void 0||b.send({event:p,params:y})}}),(f=(h=a.installModal)===null||h===void 0?void 0:h.mount)===null||f===void 0||f.call(h,l)})(t,e,o),e.sdk.once(ue.PROVIDER_UPDATE,a=>se(this,void 0,void 0,function*(){if(te("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===zo.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(c)}s(a)})),t.connector.once(ue.AUTHORIZED,()=>{clearTimeout(r),i()}),t.connector.once(ue.REJECTED,()=>{clearTimeout(r),s(ue.REJECTED)}),t.connector.once(ue.CLIENTS_READY,()=>se(this,void 0,void 0,function*(){te("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))})})}function dq(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(YS(t),n(ue.WALLET_INIT,({accounts:r,chainId:i})=>se(this,void 0,void 0,function*(){te(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=Ho.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})),n(ue.AUTHORIZED,()=>se(this,void 0,void 0,function*(){var r,i,s,o;try{te("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=Ho.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,te("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})),n(ue.TERMINATE,()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,Ho.getProvider().handleDisconnect({terminate:!0}),YS(t),te("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function rue(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,c,l,u,d,h,f,p,g,m,w,b,y,_,A,T;return se(this,void 0,void 0,function*(){try{if(uq(t,e),!t.connector)throw new Error("no connector defined");dq(t);const $=Ho.getProvider();t.authorized=!1,$.emit("connecting");const D=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();te(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,D);let O=(s=D?.channelId)!==null&&s!==void 0?s:"",j=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",F=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!D)return Promise.resolve();if(!D&&!n){const U=yield t.connector.generateChannelIdConnect();O=(u=U.channelId)!==null&&u!==void 0?u:"",j=(d=U.pubKey)!==null&&d!==void 0?d:"",F=(h=U.privKey)!==null&&h!==void 0?h:"";const q=Date.now();(f=t.connector.state.storageManager)===null||f===void 0||f.persistChannelConfig({channelId:O,localKey:F,lastActive:q,validUntil:q+tg})}if(n&&D?.channelId)return!((p=t.connector)===null||p===void 0)&&p.isConnected()||(te(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,D),yield(g=t.connector)===null||g===void 0?void 0:g.connectToChannel({channelId:O})),Promise.resolve();D&&!(!((m=t.connector)===null||m===void 0)&&m.isConnected())&&(te("[RemoteConnection: startConnection()] reconnecting to channel",D),yield(w=t.connector)===null||w===void 0?void 0:w.connectToChannel({channelId:O}));const L=!((b=t.platformManager)===null||b===void 0)&&b.isSecure()?"":"&t=q",B=Rh.version,{iconUrl:x,name:v,url:S,scheme:N}=e.dappMetadata||{},E=(y=t.platformManager)===null||y===void 0?void 0:y.getPlatformType();let C="N/A";typeof window<"u"&&window.location&&window.location.hostname?C=window.location.hostname:v!==void 0?C=v:S!==void 0&&(C=S);const P={url:S??"",title:v??"",icon:x,scheme:N??"",apiVersion:B,dappId:C||S||"N/A",anonId:e.anonId,platform:E??"",source:(_=e._source)!==null&&_!==void 0?_:""},M=Vv(JSON.stringify(P));let I=`channelId=${O}&v=2&comm=${(A=t.communicationLayerPreference)!==null&&A!==void 0?A:""}&pubkey=${j}${L}&originatorInfo=${M}`;if(r){I+=`&rpc=${Vv(JSON.stringify(r))}`;const U=t.connector.getRPCMethodTracker();U&&(U[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const k=encodeURI(I),R=`${t.useDeeplink?ew:Xm}?${I}`;if(t.qrcodeLink=R,t.developerMode&&te(`[RemoteConnection: startConnection()] qrcodeLink=${k}`),$.emit("display_uri",R),Rn.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(T=t.platformManager)===null||T===void 0?void 0:T.isSecure()){const U=setTimeout(()=>{Rn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(q,H){var z,K;return se(this,void 0,void 0,function*(){const G=`${Xm}?${H}`,Y=`${ew}?${H}`;(K=(z=q.platformManager)===null||z===void 0?void 0:z.openDeeplink)===null||K===void 0||K.call(z,G,Y,"_self")})}(t,k),new Promise((q,H)=>{var z,K,G;if(!((z=t.connector)===null||z===void 0)&&z.isAuthorized())return clearTimeout(U),void q();(K=t.connector)===null||K===void 0||K.once(ue.AUTHORIZED,()=>{clearTimeout(U),q()}),(G=t.connector)===null||G===void 0||G.once(ue.REJECTED,()=>{clearTimeout(U),H(ue.REJECTED)})})}return nue(t,e,k)}catch($){throw console.error("[startConnection] error",$),$}})}class iue{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=eue),e.modals.otp||(e.modals.otp=tue)}startConnection(e){return se(this,void 0,void 0,function*(){return rue(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var n,r,i;return se(this,void 0,void 0,function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s?.localKey};this.options.ecies=o}uq(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),dq(this.state,this.options)})}showActiveModal(){return function(e){var n,r,i,s;e.authorized?te("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))}(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;te("[RemoteConnection: disconnect()]",e),e?.terminate&&(Ho.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),function(s){te("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&(YS(s),s.connector.disconnect({terminate:!0}).catch(o=>{te("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)}))}(this.state)}}function sue(t){var e,n,r,i,s,o,a,c,l,u,d;return se(this,void 0,void 0,function*(){const{options:h}=t;if(h.logging=(e=h.logging)!==null&&e!==void 0?e:{},h.communicationLayerPreference=(n=h.communicationLayerPreference)!==null&&n!==void 0?n:Ru.SOCKET,h.enableDebug!==void 0&&(vi.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),h.enableAnalytics=(r=h.enableAnalytics)===null||r===void 0||r,h.injectProvider=(i=h.injectProvider)===null||i===void 0||i,h.shouldShimWeb3=(s=h.shouldShimWeb3)===null||s===void 0||s,h.extensionOnly=(o=h.extensionOnly)===null||o===void 0||o,h.useDeeplink=(a=h.useDeeplink)===null||a===void 0||a,h.storage=(c=h.storage)!==null&&c!==void 0?c:{enabled:!0},h.headless){vi("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const b=()=>{},y={install:()=>({mount:b,unmount:b})},_={installer:b};h.modals=y,h.ui=_}const f=((l=h.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=h.logging)===null||u===void 0?void 0:u.sdk)||f,te("[MetaMaskSDK: performSDKInitialization()] options",t.options);const p=Object.assign({},h.logging);f&&(p.sdk=!0,p.eciesLayer=!0,p.keyExchangeLayer=!0,p.remoteLayer=!0,p.serviceLayer=!0,p.plaintext=!0),yield function(b){var y;return se(this,void 0,void 0,function*(){const{options:_}=b;b.platformManager=new Qm({useDeepLink:(y=_.useDeeplink)!==null&&y!==void 0&&y,preferredOpenLink:_.openDeeplink,debug:b.debug})})}(t),yield function(b){var y,_,A,T,$;return se(this,void 0,void 0,function*(){const{options:D}=b,O=(y=b.platformManager)===null||y===void 0?void 0:y.getPlatformType();b.analytics=new Hle({serverUrl:(_=D.communicationServerUrl)!==null&&_!==void 0?_:rh,enabled:D.enableAnalytics,originatorInfo:{url:(A=D.dappMetadata.url)!==null&&A!==void 0?A:"",title:(T=D.dappMetadata.name)!==null&&T!==void 0?T:"",dappId:b.getDappId(),platform:O??"",source:($=D._source)!==null&&$!==void 0?$:"",anonId:""}})})}(t),yield function(b){var y,_,A;return se(this,void 0,void 0,function*(){if(!b.options.enableAnalytics||!(!((y=b.platformManager)===null||y===void 0)&&y.isBrowser())&&!(!((_=b.platformManager)===null||_===void 0)&&_.isReactNative()))return;const T=b.getVersion(),$=b.getDappId(),D=yield b.getAnonId(),O=(A=b.platformManager)===null||A===void 0?void 0:A.getPlatformType(),j=b.options._source;Rn.analytics.setGlobalProperty("sdk_version",T),Rn.analytics.setGlobalProperty("dapp_id",$),Rn.analytics.setGlobalProperty("anon_id",D),Rn.analytics.setGlobalProperty("platform",O),Rn.analytics.setGlobalProperty("integration_type",j),Rn.analytics.enable(),Rn.analytics.track("sdk_initialized",{})})}(t),yield function(b){var y;return se(this,void 0,void 0,function*(){const{options:_}=b;((y=_.storage)===null||y===void 0?void 0:y.enabled)!==!0||_.storage.storageManager||(_.storage.storageManager=yield iq(_.storage))})}(t),yield function(b){return se(this,void 0,void 0,function*(){const{options:y}=b,_=/^(http|https):\/\/[^\s]*$/;if(y.dappMetadata){y.dappMetadata.iconUrl&&!_.test(y.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),y.dappMetadata.iconUrl=void 0),y.dappMetadata.base64Icon&&y.dappMetadata.base64Icon.length>Kle&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),y.dappMetadata.base64Icon=void 0),y.dappMetadata.url&&!_.test(y.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const A=zle();if(A&&!y.dappMetadata.iconUrl&&!y.dappMetadata.base64Icon){const T=`${window.location.protocol}//${window.location.host}${A}`;y.dappMetadata.iconUrl=T}}b.dappMetadata=y.dappMetadata})}(t),yield Wle(t),yield Gle(t);const{metamaskBrowserExtension:g,preferExtension:m,shouldReturn:w}=yield function(b){var y,_,A,T;return se(this,void 0,void 0,function*(){const{options:$}=b;let D,O=!1,j=!1;if(typeof window<"u"&&window.ethereum&&!(!((y=b.platformManager)===null||y===void 0)&&y.isMetaMaskMobileWebView())){O=localStorage.getItem(Kv)==="extension";try{D=yield Vle({mustBeMetaMask:!0,sdkInstance:b}),window.extension=D,D.on(na.CHAIN_CHANGED,F=>{te(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${F}`),b.sdkProvider&&b.getMobileProvider().emit(na.CHAIN_CHANGED,F)}),D.on(na.ACCOUNTS_CHANGED,F=>se(this,void 0,void 0,function*(){var L;te(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${F}`);const B=!!b.sdkProvider,x=!!b.extensionActive;if(B&&b.getMobileProvider().emit(na.ACCOUNTS_CHANGED,F),x&&F?.length===0&&(yield(L=b.getProvider())===null||L===void 0?void 0:L.request({method:He.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield b.terminate()}catch(v){te("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",v)}})),D.on(na.DISCONNECT,F=>{te(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${F}`),b.sdkProvider&&b.getMobileProvider().emit(na.DISCONNECT,F)}),D.on(na.CONNECT,F=>{te(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${F}`),b.sdkProvider&&b.getMobileProvider().emit(na.CONNECT,F)}),D.on(na.CONNECTED,F=>{te("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",F),b.sdkProvider&&b.getMobileProvider().emit(na.CONNECTED,F)})}catch{window.extension=void 0}}else!((_=b.platformManager)===null||_===void 0)&&_.isMetaMaskMobileWebView()&&((A=b.analytics)===null||A===void 0||A.send({event:zn.SDK_USE_INAPP_BROWSER}),b.activeProvider=cq({provider:window.ethereum,sdkInstance:b}),b._initialized=!0,j=!0);return D&&$.extensionOnly&&(te("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(T=b.analytics)===null||T===void 0||T.send({event:zn.SDK_USE_EXTENSION}),b.activeProvider=D,b.extensionActive=!0,b.extension=D,b._initialized=!0,j=!0),{preferExtension:O,shouldReturn:j,metamaskBrowserExtension:D}})}(t);if(w)te("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(b,y){var _,A,T,$,D;return se(this,void 0,void 0,function*(){const{options:O}=b,j=Object.assign({},O.logging);b.remoteConnection=new iue({anonId:yield b.getAnonId(),preferDesktop:(_=O.preferDesktop)!==null&&_!==void 0&&_,communicationLayerPreference:(A=O.communicationLayerPreference)!==null&&A!==void 0?A:Ru.SOCKET,analytics:b.analytics,dappMetadata:O.dappMetadata,_source:O._source,enableAnalytics:(T=O.enableAnalytics)===null||T===void 0||T,timer:O.timer,sdk:b,platformManager:b.platformManager,transports:O.transports,communicationServerUrl:O.communicationServerUrl,storage:($=O.storage)!==null&&$!==void 0?$:{enabled:!0},getMetaMaskInstaller:()=>{if(!b.installer)throw new Error("Invalid SDK status -- installer not initialized");return b.installer},logging:j,connectWithExtensionProvider:y===void 0?void 0:()=>M9(b),modals:Object.assign(Object.assign({},O.modals),{onPendingModalDisconnect:b.terminate.bind(b)})}),yield b.remoteConnection.initRemoteCommunication({sdkInstance:b}),b.installer=new Xle({remote:b.remoteConnection,preferDesktop:(D=O.preferDesktop)!==null&&D!==void 0&&D,platformManager:b.platformManager,debug:b.debug})})}(t,g),yield Fle(t),yield function(b,y){var _,A;return se(this,void 0,void 0,function*(){const{options:T}=b;y?(te("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(_=b.analytics)===null||_===void 0||_.send({event:zn.SDK_EXTENSION_UTILIZED}),M9(b).catch($=>{console.warn("Can't connect with MetaMask extension...",$),localStorage.removeItem(Kv)})):T.checkInstallationImmediately&&(!((A=b.platformManager)===null||A===void 0)&&A.isDesktopWeb()?(te("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),b.connect().catch($=>{te(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${$}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),b._initialized=!0})}(t,m);try{yield(d=t.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(b){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",b)}t.emit(Ei.ProviderUpdate,zo.INITIALIZED)}})}class K9 extends Hse{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:$9,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",vi.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&vi.enable("MM_SDK"),te("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=$9),this.init().then(()=>{te("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)})}init(){return se(this,void 0,void 0,function*(){return function(e){var n;return se(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return te("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return te("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return te("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=sue(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return se(this,void 0,void 0,function*(){return function(e){return se(this,void 0,void 0,function*(){if(e._initialized||(te("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),te(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:He.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return se(this,void 0,void 0,function*(){return Ble({instance:this,msg:e})})}connectWith(e){return se(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return se(this,void 0,void 0,function*(){if(n._initialized||(te("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),te(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:He.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:e})})}resume(){return function(e){var n,r,i;return se(this,void 0,void 0,function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return te("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());te("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return function(e){var n,r,i;return se(this,void 0,void 0,function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(Dle&&(window.localStorage.removeItem(Kv),window.localStorage.removeItem(ZS),window.localStorage.removeItem(GS)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:He.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){te("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Ei.ProviderUpdate,zo.TERMINATE),void te("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Ei.ProviderUpdate,zo.TERMINATE))}e.emit(Ei.ProviderUpdate,zo.TERMINATE),te(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return Rh.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return se(this,void 0,void 0,function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():zl(),this._anonId=r,r})}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=zl();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),zl()}}getReactNativeAnonId(){return se(this,void 0,void 0,function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=zl();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),zl()}})}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var oue=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return se(this,void 0,void 0,function*(){const e=JSON.stringify(t);te(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(SC,e)})}getPersistedChannelConfig(){return se(this,void 0,void 0,function*(){let t;try{if(te(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(SC),te("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return te("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(t){return se(this,void 0,void 0,function*(){te(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(GS,e)})}getCachedAccounts(){return se(this,void 0,void 0,function*(){try{const t=localStorage.getItem(GS);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}})}persistChainId(t){return se(this,void 0,void 0,function*(){te(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(ZS,t)})}getCachedChainId(){return se(this,void 0,void 0,function*(){try{const t=localStorage.getItem(ZS);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}})}terminate(){return se(this,void 0,void 0,function*(){te(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(SC)})}}});const aue="hydrated",cue=!1,lue=!0;var uue=Object.defineProperty,y8=new WeakMap,au=t=>y8.get(t),b8=(t,e)=>y8.set(e.$lazyInstance$=t,e),V9=(t,e)=>e in t,zd=(t,e)=>(0,console.error)(t,e),AC=new Map,Ub=new Map,hq="slot-fb{display:contents}slot-fb[hidden]{display:none}",fE=typeof window<"u"?window:{},Oa=fE.document||{head:{}},jr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},fq=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),QS=!1,W9=[],pq=[],due=(t,e)=>n=>{t.push(n),QS||(QS=!0,4&jr.$flags$?v8(JS):jr.raf(JS))},G9=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){zd(n)}t.length=0},JS=()=>{G9(W9),G9(pq),(QS=W9.length>0)&&jr.raf(JS)},v8=t=>(e=>Promise.resolve(e))().then(t),hue=due(pq),Z9={},E8=t=>(t=typeof t)=="object"||t==="function";function gq(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)uue(t,n,{get:e[n],enumerable:!0})})({},{err:()=>mq,map:()=>fue,ok:()=>XS,unwrap:()=>pue,unwrapErr:()=>gue});var XS=t=>({isOk:!0,isErr:!1,value:t}),mq=t=>({isOk:!1,isErr:!0,value:t});function fue(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(r=>XS(r)):XS(n)}if(t.isErr){const n=t.value;return mq(n)}throw"should never get here"}var C8,pue=t=>{if(t.isOk)return t.value;throw t.value},gue=t=>{if(t.isErr)return t.value;throw t.value},re=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!E8(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?Gv(null,r):r),s=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,wue);const c=Gv(t,null);return c.$attrs$=e,o.length>0&&(c.$children$=o),c},Gv=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),mue={},wue={forEach:(t,e)=>t.map(Y9).forEach(e),map:(t,e)=>t.map(Y9).map(e).map(yue)},Y9=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),yue=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),re(t.vtag,n,...t.vchildren||[])}const e=Gv(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},pE=t=>au(t).$hostElement$,vu=(t,e,n)=>{const r=pE(t);return{emit:i=>wq(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:i})}},wq=(t,e,n)=>{const r=jr.ce(e,n);return t.dispatchEvent(r),r},Q9=new WeakMap,bue=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var c;const l=yq(o),u=Ub.get(l);if(s=s.nodeType===11?s:Oa,u)if(typeof u=="string"){s=s.head||s;let d,h=Q9.get(s);if(h||Q9.set(s,h=new Set),!h.has(l)){{d=Oa.createElement("style"),d.innerHTML=u;const f=(c=jr.$nonce$)!=null?c:gq(Oa);if(f!=null&&d.setAttribute("nonce",f),!(1&o.$flags$))if(s.nodeName==="HEAD"){const p=s.querySelectorAll("link[rel=preconnect]"),g=p.length>0?p[p.length-1].nextSibling:s.querySelector("style");s.insertBefore(d,g)}else if("host"in s)if(fq){const p=new CSSStyleSheet;p.replaceSync(u),s.adoptedStyleSheets=[p,...s.adoptedStyleSheets]}else{const p=s.querySelector("style");p?p.innerHTML=u+p.innerHTML:s.prepend(d)}else s.append(d);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(d,null)}4&o.$flags$&&(d.innerHTML+=hq),h&&h.add(l)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},yq=(t,e)=>"sc-"+t.$tagName$,J9=(t,e,n,r,i,s)=>{if(n!==r){let o=V9(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=X9(n),u=X9(r);c.remove(...l.filter(d=>d&&!u.includes(d))),c.add(...u.filter(d=>d&&!l.includes(d)))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(o||e[0]!=="o"||e[1]!=="n"){const c=E8(r);if((o||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?o=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):V9(fE,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(bq);e=e.replace(Eue,""),n&&jr.rel(t,e,n,c),r&&jr.ael(t,e,r,c)}}},vue=/\s/,X9=t=>t?t.split(vue):[],bq="Capture",Eue=new RegExp(bq+"$"),vq=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||Z9,s=e.$attrs$||Z9;for(const o of e7(Object.keys(i)))o in s||J9(r,o,i[o],void 0,n,e.$flags$);for(const o of e7(Object.keys(s)))J9(r,o,i[o],s[o],n,e.$flags$)};function e7(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var so=!1,_8=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=Oa.createTextNode(i.$text$);else{if(so||(so=i.$tag$==="svg"),s=i.$elm$=Oa.createElementNS(so?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),so&&i.$tag$==="foreignObject"&&(so=!1),vq(null,i,so),s.getRootNode().querySelector("body"),i.$children$)for(a=0;a<i.$children$.length;++a)o=_8(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?so=!1:s.tagName==="foreignObject"&&(so=!0)}return s["s-hn"]=C8,s},t7=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===C8&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=_8(null,n,i),o&&(r[i].$elm$=o,jb(a,o,e)))},n7=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},I1=(t,e,n=!1)=>t.$tag$===e.$tag$,Y0=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(vq(t,e,so=o==="svg"||o!=="foreignObject"&&so),i!==null&&s!==null?((c,l,u,d,h=!1)=>{let f,p=0,g=0,m=l.length-1,w=l[0],b=l[m],y=d.length-1,_=d[0],A=d[y];for(;p<=m&&g<=y;)w==null?w=l[++p]:b==null?b=l[--m]:_==null?_=d[++g]:A==null?A=d[--y]:I1(w,_,h)?(Y0(w,_,h),w=l[++p],_=d[++g]):I1(b,A,h)?(Y0(b,A,h),b=l[--m],A=d[--y]):I1(w,A,h)?(Y0(w,A,h),jb(c,w.$elm$,b.$elm$.nextSibling),w=l[++p],A=d[--y]):I1(b,_,h)?(Y0(b,_,h),jb(c,b.$elm$,w.$elm$),b=l[--m],_=d[++g]):(f=_8(l&&l[g],u,g),_=d[++g],f&&jb(w.$elm$.parentNode,f,w.$elm$));p>m?t7(c,d[y+1]==null?null:d[y+1].$elm$,u,d,g,y):g>y&&n7(l,p,m)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),t7(r,null,e,s,0,s.length-1)):!n&&lue&&i!==null&&n7(i,0,i.length-1),so&&o==="svg"&&(so=!1)):t.$text$!==a&&(r.data=a)},jb=(t,e,n)=>t?.insertBefore(e,n),Cue=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||Gv(null,null),o=(a=e)&&a.$tag$===mue?e:re(null,null,e);var a;if(C8=r.tagName,n&&o.$attrs$)for(const c of Object.keys(o.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(o.$attrs$[c]=r[c]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,r["s-sc"],1&i.$flags$,Y0(s,o,n)},Eq=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},S8=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(Eq(t,t.$ancestorComponent$),hue(()=>_ue(t,e)))),_ue=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return Sue(void 0,()=>xue(t,r,e))},Sue=(t,e)=>Aue(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),Aue=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",xue=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&bue(t),t.$cmpMeta$.$tagName$,Iue(t,e,i,n),s&&(s.map(o=>o()),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>Oue(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},Iue=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,Cue(t,e,r)}catch(i){zd(i,t.$hostElement$)}return null},Oue=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,_q(e),A8(r,"componentDidLoad"),t.$onReadyResolve$(e),i||Cq()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&v8(()=>S8(t,!1)),t.$flags$&=-517},Cq=t=>{_q(Oa.documentElement),v8(()=>wq(fE,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},A8=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){zd(r)}},_q=t=>{var e;return t.classList.add((e=aue)!=null?e:"hydrated")},Pue=(t,e,n,r)=>{const i=au(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||E8(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const d=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!d&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const h=r.$watchers$[e];h&&h.map(f=>{try{c[f](n,o,e)}catch(p){zd(p,s)}})}(18&a)==2&&S8(i,!1)}},Sq=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map(([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(s,a,{get(){return l=a,au(this).$instanceValues$.get(l);var l},set(l){Pue(this,a,l,e)},configurable:!0,enumerable:!0})}),1&n){const a=new Map;s.attributeChangedCallback=function(c,l,u){jr.jmp(()=>{var d;const h=a.get(c);if(this.hasOwnProperty(h))u=this[h],delete this[h];else{if(s.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;if(h==null){const f=au(this),p=f?.$flags$;if(p&&!(8&p)&&128&p&&u!==l){const g=f.$lazyInstance$,m=(d=e.$watchers$)==null?void 0:d[c];m?.forEach(w=>{g[w]!=null&&g[w].call(g,u,l,c)})}return}}this[h]=(u!==null||typeof this[h]!="boolean")&&u})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter(([c,l])=>15&l[0]).map(([c,l])=>{const u=l[1]||c;return a.set(u,c),u})]))}}return t},Tue=async(t,e,n,r)=>{let i;if(!(32&e.$flags$)){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const d=c.$tagName$.replace(/-/g,"_"),h=c.$lazyBundleId$;if(!h)return;const f=AC.get(h);if(f)return f[d];{const p=g=>(AC.set(h,g),g[d]);if(h==="mm-install-modal_3")return Promise.resolve().then(function(){return Kue}).then(p,zd)}return me(()=>import(`./${h}.entry.js`),[]).then(p=>(AC.set(h,p),p[d]),zd)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,Sq(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){zd(c)}e.$flags$&=-9,e.$flags$|=128,eA(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then(()=>e.$flags$|=128)}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=yq(n);Ub.has(c)||(n.$tagName$,((l,u,d)=>{let h=Ub.get(l);fq&&d?(h=h||new CSSStyleSheet,typeof h=="string"?h=u:h.replaceSync(u)):h=u,Ub.set(l,h)})(c,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>S8(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},eA=t=>{A8(t,"connectedCallback")},r7=t=>{A8(t,"disconnectedCallback")},kue=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=fE.customElements,o=Oa.head,a=o.querySelector("meta[charset]"),c=Oa.createElement("style"),l=[];let u,d=!0;Object.assign(jr,e),jr.$resourcesUrl$=new URL(e.resourcesUrl||"./",Oa.baseURI).href;let h=!1;if(t.map(f=>{f[1].map(p=>{var g;const m={$flags$:p[0],$tagName$:p[1],$members$:p[2],$listeners$:p[3]};4&m.$flags$&&(h=!0),m.$members$=p[2],m.$watchers$=(g=p[4])!=null?g:{};const w=m.$tagName$,b=class extends HTMLElement{constructor(y){if(super(y),this.hasRegisteredEventListeners=!1,((_,A)=>{const T={$flags$:0,$hostElement$:_,$cmpMeta$:A,$instanceValues$:new Map};T.$onReadyPromise$=new Promise($=>T.$onReadyResolve$=$),_["s-p"]=[],_["s-rc"]=[],y8.set(_,T)})(y=this,m),1&m.$flags$)if(y.shadowRoot){if(y.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${m.$tagName$}! Mode is set to ${y.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else y.attachShadow({mode:"open"})}connectedCallback(){au(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),d?l.push(this):jr.jmp(()=>(y=>{if(!(1&jr.$flags$)){const _=au(y),A=_.$cmpMeta$;if(A.$tagName$,1&_.$flags$)_?.$lazyInstance$?eA(_.$lazyInstance$):_?.$onReadyPromise$&&_.$onReadyPromise$.then(()=>eA(_.$lazyInstance$));else{_.$flags$|=1;{let T=y;for(;T=T.parentNode||T.host;)if(T["s-p"]){Eq(_,_.$ancestorComponent$=T);break}}A.$members$&&Object.entries(A.$members$).map(([T,[$]])=>{if(31&$&&y.hasOwnProperty(T)){const D=y[T];delete y[T],y[T]=D}}),Tue(y,_,A)}}})(this))}disconnectedCallback(){jr.jmp(()=>(async y=>{if(!(1&jr.$flags$)){const _=au(y);_?.$lazyInstance$?r7(_.$lazyInstance$):_?.$onReadyPromise$&&_.$onReadyPromise$.then(()=>r7(_.$lazyInstance$))}})(this))}componentOnReady(){return au(this).$onReadyPromise$}};m.$lazyBundleId$=f[0],i.includes(w)||s.get(w)||(r.push(w),s.define(w,Sq(b,m,1)))})}),r.length>0&&(h&&(c.textContent+=hq),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const f=(n=jr.$nonce$)!=null?n:gq(Oa);f!=null&&c.setAttribute("nonce",f),o.insertBefore(c,a?a.nextSibling:o.firstChild)}d=!1,l.length?l.map(f=>f.connectedCallback()):jr.jmp(()=>u=setTimeout(Cq,30))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var Nue=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,kue([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>jr.$nonce$=t});const $ue={fontFamily:"Roboto, sans-serif"},x8=({className:t},e)=>re("div",{style:$ue,class:t},e),xC=({Icon:t,text:e})=>re("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},re("div",{class:"flexItem1"},re(t,null)),re("div",{class:"flexItem11"},re("span",{style:{lineHeight:"2",color:"black"}},e))),Rue=()=>re("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),re("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),Mue=()=>re("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),Due=()=>re("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),Bue=()=>re("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),re("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),re("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function I8({version:t}){return re("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const O8=()=>re("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("rect",{width:"16",height:"16",fill:"white"}),re("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),P8=()=>re("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},re("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function Zu(t,e){return t.toString(2).padStart(e,"0")}function i7(t,e){const n=t%e;return n>=0?n:e+n}function ws(t,e){return new Array(t).fill(e)}function s7(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function o7(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function a7(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class hs{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new hs({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=hs.size(e);this.data=n||Array.from({length:r},()=>ws(i,void 0)),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=i7(e.x,this.width),e.y=i7(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=hs.size(n,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[s+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,(i,s)=>(r(i,s),s))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=ws(e,n),o=Array.from({length:e},()=>ws(i,n));return new hs({height:r,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,n){return this.rect(e,n.size(),({x:r,y:i})=>n.data[i][r])}rectSlice(e,n=this.size()){const r=new hs(hs.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:i,y:s},o)=>r.data[s][i]=o),r}inverse(){const{height:e,width:n}=this;return new hs({height:n,width:e}).rect({x:0,y:0},1/0,({x:r,y:i})=>this.data[r][i])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new hs({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)])}clone(){return new hs(this.size()).rect({x:0,y:0},this.size(),({x:e,y:n})=>this.data[n][e])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],c=s+1>=e||r[s+1][o];a||c?!a&&c?i+="▀":a&&!c?i+="▄":a&&c&&(i+=" "):i+="█"}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map(i=>i.map(s=>s?r:n).join("")).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(a,c)=>r.push(+(c===!0)));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...ws(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map(c=>+c));return s.push(r.length%i+1,128,...r.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const c7=["low","medium","quartile","high"],l7=["numeric","alphanumeric","byte","kanji","eci"],Lue=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],Uue={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},jue={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},ai={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=ai.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=ai.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^ai.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:a7("0123456789"),alphanumerc:a7("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][ai.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=Lue[t-1],r=Uue[e][t-1],i=jue[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},tA=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],$e={tables:(t=>{const e=ws(256,0),n=ws(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>$e.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return $e.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:$e.tables.exp[($e.tables.log[t]+$e.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>$e.tables.exp[$e.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return $e.tables.exp[255-$e.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=ws(t+1,0);return n[0]=e,$e.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[$e.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=ws(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=$e.add(n[r+i],$e.mul(t[r],e[i]));return $e.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=ws(t.length,0);for(let r=0;r<t.length;r++)n[r]=$e.mul(t[r],e);return $e.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=ws(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=$e.mul(t[i],n);return $e.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=ws(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=$e.add(n[a-s],r[a]);return $e.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=$e.add(n[r+s],$e.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=$e.mulPoly(e,[1,$e.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return $e.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=$e.add($e.mul(e,n),t[r]);return n},euclidian(t,e,n){$e.degree(t)<$e.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*$e.degree(i)>=n;){let l=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=l;let d=[0];const h=$e.inv(r[0]);for(;$e.degree(i)>=$e.degree(r)&&i[0]!==0;){const f=$e.degree(i)-$e.degree(r),p=$e.mul(i[0],h);d=$e.addPoly(d,$e.monomial(f,p)),i=$e.addPoly(i,$e.mulPolyMonomial(r,f,p))}if(d=$e.mulPoly(d,s),o=$e.addPoly(d,u),$e.degree(i)>=$e.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=$e.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=$e.inv(a);return[$e.mulPolyScalar(o,c),$e.mulPolyScalar(i,c)]}};function Fue(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=ai.capacity(t,e),a=(c=n,{encode(l){const u=$e.divisorPoly(c),d=Array.from(l);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from($e.remainderPoly(d,u))},decode(l){const u=l.slice(),d=$e.polynomial(Array.from(l));let h=ws(c,0),f=!1;for(let y=0;y<c;y++){const _=$e.evalPoly(d,$e.exp(y));h[h.length-1-y]=_,_!==0&&(f=!0)}if(!f)return u;h=$e.polynomial(h);const p=$e.monomial(c,1),[g,m]=$e.euclidian(p,h,c),w=ws($e.degree(g),0);let b=0;for(let y=1;y<256&&b<w.length;y++)$e.evalPoly(g,y)===0&&(w[b++]=$e.inv(y));if(b!==w.length)throw new Error("RS.decode: wrong errors number");for(let y=0;y<w.length;y++){const _=u.length-1-$e.log(w[y]);if(_<0)throw new Error("RS.decode: wrong error location");const A=$e.inv(w[y]);let T=1;for(let $=0;$<w.length;$++)y!==$&&(T=$e.mul(T,$e.add(1,$e.mul(w[$],A))));u[_]=$e.add(u[_],$e.mul($e.evalPoly(m,A),$e.inv(T)))}return u}});var c;return{encode(l){const u=[],d=[];for(let g=0;g<i;g++){const m=s+(g<r?0:1);u.push(l.subarray(0,m)),d.push(a.encode(l.subarray(0,m))),l=l.subarray(m)}const h=s7(...u),f=s7(...d),p=new Uint8Array(h.length+f.length);return p.set(h),p.set(f,h.length),p},decode(l){if(l.length!==o)throw new Error(`interleave.decode: len(data)=${l.length}, total=${o}`);const u=[];for(let f=0;f<i;f++){const p=f<r;u.push(new Uint8Array(n+s+(p?0:1)))}let d=0;for(let f=0;f<s;f++)for(let p=0;p<i;p++)u[p][f]=l[d++];for(let f=r;f<i;f++)u[f][s]=l[d++];for(let f=s;f<s+n;f++)for(let p=0;p<i;p++){const g=p<r;u[p][f+(g?0:1)]=l[d++]}const h=[];for(const f of u)h.push(...Array.from(a.decode(f)).slice(0,-n));return Uint8Array.from(h)}}}function u7(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=ai.alphabet.numeric.decode(n.split("")),h=d.length;for(let f=0;f<h-2;f+=3)i+=Zu(100*d[f]+10*d[f+1]+d[f+2],10);h%3==1?i+=Zu(d[h-1],4):h%3==2&&(i+=Zu(10*d[h-2]+d[h-1],7))}else if(r==="alphanumeric"){const d=ai.alphabet.alphanumerc.decode(n.split("")),h=d.length;for(let f=0;f<h-1;f+=2)i+=Zu(45*d[f]+d[f+1],11);h%2==1&&(i+=Zu(d[h-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const d=function(h){if(typeof h!="string")throw new Error("utf8ToBytes expected string, got "+typeof h);return new Uint8Array(new TextEncoder().encode(h))}(n);s=d.length,i=Array.from(d).map(h=>Zu(h,8)).join("")}}const{capacity:o}=ai.capacity(t,e),a=Zu(s,ai.lengthBits(t,r));let c=ai.modeBits[r]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let d=0;c.length!==o;d++)c+=l[d%16];const u=Uint8Array.from(c.match(/(.{8})/g).map(d=>+`0b${d}`));return Fue(t,e).encode(u)}function d7(t,e,n,r,i=!1){const s=function(c,l,u,d=!1){const h=ai.size.encode(c);let f=new hs(h+2);const p=new hs(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);f=f.embed(0,p).embed({x:-p.width,y:0},p).embed({x:0,y:-p.height},p),f=f.rectSlice(1,h);const g=new hs(1).rect(0,1,!0).border(1,!1).border(1,!0),m=ai.alignmentPatterns(c);for(const w of m)for(const b of m)f.data[w][b]===void 0&&f.embed({x:b-2,y:w-2},g);f=f.hLine({x:0,y:6},1/0,({x:w},b)=>b===void 0?w%2==0:b).vLine({x:6,y:0},1/0,({y:w},b)=>b===void 0?w%2==0:b);{const w=ai.formatBits(l,u),b=y=>!d&&(w>>y&1)==1;for(let y=0;y<6;y++)f.data[y][8]=b(y);for(let y=6;y<8;y++)f.data[y+1][8]=b(y);for(let y=8;y<15;y++)f.data[h-15+y][8]=b(y);for(let y=0;y<8;y++)f.data[8][h-y-1]=b(y);for(let y=8;y<9;y++)f.data[8][15-y-1+1]=b(y);for(let y=9;y<15;y++)f.data[8][15-y-1]=b(y);f.data[h-8][8]=!d}if(c>=7){const w=ai.versionBits(c);for(let b=0;b<18;b+=1){const y=!d&&(w>>b&1)==1,_=Math.floor(b/3),A=b%3+h-8-3;f.data[_][A]=y,f.data[A][_]=y}}return f}(t,e,r,i);let o=0;const a=8*n.length;if(function(c,l,u){const d=c.height,h=tA[l];let f=-1,p=d-1;for(let g=d-1;g>0;g-=2){for(g==6&&(g=5);;p+=f){for(let m=0;m<2;m+=1){const w=g-m;c.data[p][w]===void 0&&u(w,p,h(w,p))}if(p+f<0||p+f>=d)break}f=-f}}(s,r,(c,l,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[l][c]=d!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function que(t){const e=t.inverse(),n=f=>{let p=0;for(let g,m=0,w=1;m<f.length;m++)g===f[m]&&(w++,m!==f.length-1)||(w>=5&&(p+=w-5+3),g=f[m],w=1);return p};let r=0;t.data.forEach(f=>r+=n(f)),e.data.forEach(f=>r+=n(f));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let f=0;f<o;f++)for(let p=0;p<a;p++){const g=f+1,m=p+1;s[f][p]===s[g][p]&&s[g][p]===s[f][m]&&s[g][p]===s[g][m]&&(i+=3)}const c=f=>{const p=[!0,!1,!0,!0,!0,!1,!0],g=[!1,!1,!1,!1],m=[...p,...g],w=[...g,...p];let b=0;for(let y=0;y<f.length;y++)o7(f,m,y)&&(b+=40),o7(f,w,y)&&(b+=40);return b};let l=0;for(const f of t.data)l+=c(f);for(const f of e.data)l+=c(f);let u=0;t.rectRead(0,1/0,(f,p)=>u+=p?1:0);const d=u/(t.height*t.width)*100,h=10*Math.floor(Math.abs(d-50)/5);return r+i+l+h}function Aq(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!c7.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${c7}`)})(r);const i=n.encoding!==void 0?n.encoding:function(u){let d="numeric";for(let h of u)if(!ai.alphabet.numeric.has(h)&&(d="alphanumeric",!ai.alphabet.alphanumerc.has(h)))return"byte";return d}(t);(function(u){if(!l7.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${l7}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!tA[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)}(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=u7(o,r,t,i);else for(let u=1;u<=40;u++)try{s=u7(u,r,t,i),o=u;break}catch(d){a=d}if(!o||!s)throw a;let c=function(u,d,h,f){if(f===void 0){const p=function(){let g,m=1/0;return{add(w,b){w>=m||(g=b,m=w)},get:()=>g,score:()=>m}}();for(let g=0;g<tA.length;g++)p.add(que(d7(u,d,h,g,!0)),g);f=p.get()}if(f===void 0)throw new Error("Cannot find mask");return d7(u,d,h,f)}(o,r,s,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const IC={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class T8{constructor(e){var n;this.translations=IC,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e?.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(`❌ Failed to load ${n} translations, falling back to English:`,r),this.translations=IC}else this.translations=IC}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var gm;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(gm||(gm={}));const xq=class{constructor(t){b8(this,t),this.close=vu(this,"close"),this.startDesktopOnboarding=vu(this,"startDesktopOnboarding"),this.trackAnalytics=vu(this,"trackAnalytics"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new T8}componentDidLoad(){this.trackAnalytics.emit({event:gm.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:gm.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:gm.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=Aq(this.link,"svg",{ecc:"medium",scale:2});return re(x8,{className:"install-model"},re("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose(!0)},re(O8,null)))),re("div",{class:"logoContainer"},re(P8,null)),re("div",null,re("div",{class:"tabcontainer"},re("div",{class:"flexContainer"},re("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),re("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),re("div",{style:{display:e===1?"none":"block"}},re("div",{class:"flexContainer"},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&re("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),re("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",re("br",null),re("span",{class:"blue"},re("b",null,t("META_MASK_MOBILE_APP"))))))),re("div",{style:{display:e===2?"none":"block"}},re("div",{class:"item"},re(xC,{Icon:Mue,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),re("div",{class:"item"},re(xC,{Icon:Rue,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),re("div",{class:"item"},re(xC,{Icon:Due,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),re("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},re(Bue,null),re("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),re(I8,{version:this.sdkVersion})))}get el(){return pE(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};xq.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const Iq=class{constructor(t){b8(this,t),this.close=vu(this,"close"),this.disconnect=vu(this,"disconnect"),this.updateOTPValue=vu(this,"updateOTPValue"),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new T8}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return re(x8,{className:"pending-modal"},re("div",{class:"backdrop",onClick:()=>this.onClose()}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose()},re(O8,null)))),re("div",{class:"logoContainer"},re(P8,null)),re("div",null,re("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),re("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&re("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),re("div",{style:{marginTop:"20px"}},re("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),re(I8,{version:n})))}get el(){return pE(this)}};Iq.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const Hue=()=>re("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),zue=()=>re("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re("rect",{width:"400",height:"300",fill:"white"}),re("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),re("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),re("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),re("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),re("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),re("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),re("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),re("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),re("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),re("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),re("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),re("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),re("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),re("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),re("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),re("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),re("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),re("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),re("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),re("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),re("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),re("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),Oq=class{constructor(t){b8(this,t),this.close=vu(this,"close"),this.connectWithExtension=vu(this,"connectWithExtension"),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new T8,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=Aq(this.link,"svg",{ecc:"medium",scale:2});return re(x8,{className:"select-modal"},re("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),re("div",{class:"modal"},re("div",{class:"closeButtonContainer"},re("div",{class:"right"},re("span",{class:"closeButton",onClick:()=>this.onClose(!0)},re(O8,null)))),re("div",{class:"logoContainer"},re(P8,null)),re("div",null,re("div",{class:"tabcontainer"},re("div",{class:"flexContainer"},re("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),re("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),re("div",{style:{display:n===1?"none":"block"}},re("div",{class:"flexContainer"},re("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},re("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),re("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),re("br",null),re("span",{class:"blue"},re("b",null,t("META_MASK_MOBILE_APP"))))))),re("div",{style:{display:n===2?"none":"block"}},re("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},re(zue,null)),re("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),re("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},re(Hue,null),re("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),re(I8,{version:e})))}get el(){return pE(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};Oq.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var Kue=Object.freeze({__proto__:null,mm_install_modal:xq,mm_pending_modal:Iq,mm_select_modal:Oq});const Vue=Object.freeze(Object.defineProperty({__proto__:null,get CommunicationLayerPreference(){return Ru},get ConnectionStatus(){return Ar},DEFAULT_SERVER_URL:rh,get EventType(){return ue},get MessageType(){return wn},MetaMaskSDK:K9,MetaMaskSDKEvent:Ei,get PROVIDER_UPDATE_TYPE(){return zo},get PlatformType(){return Hr},SDKProvider:sq,default:K9},Symbol.toStringTag,{value:"Module"})),Pq=()=>"9.1.0",Wue=t=>t.toString(16).padStart(2,"0"),Gue=t=>{const e=new Uint8Array(t/2);return window.crypto.getRandomValues(e),Array.from(e,Wue).join("")},Zue=()=>typeof window<"u"?Gue(10):new Date().getTime().toString(36);class Vw{}Vw.makeRequest=(t,e)=>({id:Zue(),method:t,params:e,env:{sdkVersion:Pq()}});Vw.makeResponse=(t,e,n)=>({id:t,success:!0,version:n,data:e});Vw.makeErrorResponse=(t,e,n)=>({id:t,success:!1,error:e,version:n});var br;(function(t){t.sendTransactions="sendTransactions",t.rpcCall="rpcCall",t.getChainInfo="getChainInfo",t.getSafeInfo="getSafeInfo",t.getTxBySafeTxHash="getTxBySafeTxHash",t.getSafeBalances="getSafeBalances",t.signMessage="signMessage",t.signTypedMessage="signTypedMessage",t.getEnvironmentInfo="getEnvironmentInfo",t.getOffChainSignature="getOffChainSignature",t.requestAddressBook="requestAddressBook",t.wallet_getPermissions="wallet_getPermissions",t.wallet_requestPermissions="wallet_requestPermissions"})(br||(br={}));var Zv;(function(t){t.requestAddressBook="requestAddressBook"})(Zv||(Zv={}));class Yue{constructor(e=null,n=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:r,data:i,source:s})=>{const o=!i,a=!this.isServer&&s===window.parent,c=typeof i.version<"u"&&parseInt(i.version.split(".")[0]),l=typeof c=="number"&&c>=1;let u=!0;return Array.isArray(this.allowedOrigins)&&(u=this.allowedOrigins.find(d=>d.test(r))!==void 0),!o&&a&&l&&u},this.logIncomingMessage=r=>{console.info(`Safe Apps SDK v1: A message was received from origin ${r.origin}. `,r.data)},this.onParentMessage=r=>{this.isValidMessage(r)&&(this.debugMode&&this.logIncomingMessage(r),this.handleIncomingMessage(r.data))},this.handleIncomingMessage=r=>{const{id:i}=r,s=this.callbacks.get(i);s&&(s(r),this.callbacks.delete(i))},this.send=(r,i)=>{const s=Vw.makeRequest(r,i);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(s,"*"),new Promise((o,a)=>{this.callbacks.set(s.id,c=>{if(!c.success){a(new Error(c.error));return}o(c)})})},this.allowedOrigins=e,this.debugMode=n,this.isServer||window.addEventListener("message",this.onParentMessage)}}const k8=t=>typeof t=="object"&&t!=null&&"domain"in t&&"types"in t&&"message"in t;var Q0={},Zg={},Yg={},N8=Mn&&Mn.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(Yg,"__esModule",{value:!0});Yg.insertParams=Xue;Yg.stringifyQuery=ede;Yg.fetchData=tde;Yg.getData=nde;const Que=t=>typeof t=="object"&&t!==null&&("code"in t||"statusCode"in t)&&"message"in t;function Jue(t,e,n){return t.replace(new RegExp(`\\{${e}\\}`,"g"),n)}function Xue(t,e){return e?Object.keys(e).reduce((n,r)=>Jue(n,r,String(e[r])),t):t}function ede(t){if(!t)return"";const e=new URLSearchParams;Object.keys(t).forEach(r=>{t[r]!=null&&e.append(r,String(t[r]))});const n=e.toString();return n?`?${n}`:""}function Tq(t){return N8(this,void 0,void 0,function*(){var e;let n;try{n=yield t.json()}catch{n={}}if(!t.ok){const r=Que(n)?`CGW error - ${(e=n.code)!==null&&e!==void 0?e:n.statusCode}: ${n.message}`:`CGW error - status ${t.statusText}`;throw new Error(r)}return n})}function tde(t,e,n,r,i){return N8(this,void 0,void 0,function*(){const s=Object.assign({"Content-Type":"application/json"},r),o={method:e??"POST",headers:s};i&&(o.credentials=i),n!=null&&(o.body=typeof n=="string"?n:JSON.stringify(n));const a=yield fetch(t,o);return Tq(a)})}function nde(t,e,n){return N8(this,void 0,void 0,function*(){const r={method:"GET"};e&&(r.headers=Object.assign(Object.assign({},e),{"Content-Type":"application/json"})),n&&(r.credentials=n);const i=yield fetch(t,r);return Tq(i)})}Object.defineProperty(Zg,"__esModule",{value:!0});Zg.postEndpoint=rde;Zg.putEndpoint=ide;Zg.deleteEndpoint=sde;Zg.getEndpoint=ode;const sh=Yg;function gE(t,e,n,r){const i=(0,sh.insertParams)(e,n),s=(0,sh.stringifyQuery)(r);return`${t}${i}${s}`}function rde(t,e,n){const r=gE(t,e,n?.path,n?.query);return(0,sh.fetchData)(r,"POST",n?.body,n?.headers,n?.credentials)}function ide(t,e,n){const r=gE(t,e,n?.path,n?.query);return(0,sh.fetchData)(r,"PUT",n?.body,n?.headers,n?.credentials)}function sde(t,e,n){const r=gE(t,e,n?.path,n?.query);return(0,sh.fetchData)(r,"DELETE",n?.body,n?.headers,n?.credentials)}function ode(t,e,n,r){if(r)return(0,sh.getData)(r,void 0,n?.credentials);const i=gE(t,e,n?.path,n?.query);return(0,sh.getData)(i,n?.headers,n?.credentials)}var mE={};Object.defineProperty(mE,"__esModule",{value:!0});mE.DEFAULT_BASE_URL=void 0;mE.DEFAULT_BASE_URL="https://safe-client.safe.global";var wE={};Object.defineProperty(wE,"__esModule",{value:!0});wE.ImplementationVersionState=void 0;var h7;(function(t){t.UP_TO_DATE="UP_TO_DATE",t.OUTDATED="OUTDATED",t.UNKNOWN="UNKNOWN"})(h7||(wE.ImplementationVersionState=h7={}));var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SafeAppSocialPlatforms=Eu.SafeAppFeatures=Eu.SafeAppAccessPolicyTypes=void 0;var f7;(function(t){t.NoRestrictions="NO_RESTRICTIONS",t.DomainAllowlist="DOMAIN_ALLOWLIST"})(f7||(Eu.SafeAppAccessPolicyTypes=f7={}));var p7;(function(t){t.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(p7||(Eu.SafeAppFeatures=p7={}));var g7;(function(t){t.TWITTER="TWITTER",t.GITHUB="GITHUB",t.DISCORD="DISCORD",t.TELEGRAM="TELEGRAM"})(g7||(Eu.SafeAppSocialPlatforms=g7={}));var on={};Object.defineProperty(on,"__esModule",{value:!0});on.LabelValue=on.StartTimeValue=on.DurationType=on.DetailedExecutionInfoType=on.TransactionListItemType=on.ConflictType=on.TransactionInfoType=on.SettingsInfoType=on.TransactionTokenType=on.TransferDirection=on.TransactionStatus=on.Operation=void 0;var m7;(function(t){t[t.CALL=0]="CALL",t[t.DELEGATE=1]="DELEGATE"})(m7||(on.Operation=m7={}));var w7;(function(t){t.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",t.AWAITING_EXECUTION="AWAITING_EXECUTION",t.CANCELLED="CANCELLED",t.FAILED="FAILED",t.SUCCESS="SUCCESS"})(w7||(on.TransactionStatus=w7={}));var y7;(function(t){t.INCOMING="INCOMING",t.OUTGOING="OUTGOING",t.UNKNOWN="UNKNOWN"})(y7||(on.TransferDirection=y7={}));var b7;(function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_COIN="NATIVE_COIN"})(b7||(on.TransactionTokenType=b7={}));var v7;(function(t){t.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",t.ADD_OWNER="ADD_OWNER",t.REMOVE_OWNER="REMOVE_OWNER",t.SWAP_OWNER="SWAP_OWNER",t.CHANGE_THRESHOLD="CHANGE_THRESHOLD",t.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",t.ENABLE_MODULE="ENABLE_MODULE",t.DISABLE_MODULE="DISABLE_MODULE",t.SET_GUARD="SET_GUARD",t.DELETE_GUARD="DELETE_GUARD"})(v7||(on.SettingsInfoType=v7={}));var E7;(function(t){t.TRANSFER="Transfer",t.SETTINGS_CHANGE="SettingsChange",t.CUSTOM="Custom",t.CREATION="Creation",t.SWAP_ORDER="SwapOrder",t.TWAP_ORDER="TwapOrder",t.SWAP_TRANSFER="SwapTransfer",t.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",t.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",t.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(E7||(on.TransactionInfoType=E7={}));var C7;(function(t){t.NONE="None",t.HAS_NEXT="HasNext",t.END="End"})(C7||(on.ConflictType=C7={}));var _7;(function(t){t.TRANSACTION="TRANSACTION",t.LABEL="LABEL",t.CONFLICT_HEADER="CONFLICT_HEADER",t.DATE_LABEL="DATE_LABEL"})(_7||(on.TransactionListItemType=_7={}));var S7;(function(t){t.MULTISIG="MULTISIG",t.MODULE="MODULE"})(S7||(on.DetailedExecutionInfoType=S7={}));var A7;(function(t){t.AUTO="AUTO",t.LIMIT_DURATION="LIMIT_DURATION"})(A7||(on.DurationType=A7={}));var x7;(function(t){t.AT_MINING_TIME="AT_MINING_TIME",t.AT_EPOCH="AT_EPOCH"})(x7||(on.StartTimeValue=x7={}));var I7;(function(t){t.Queued="Queued",t.Next="Next"})(I7||(on.LabelValue=I7={}));var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.FEATURES=Cu.GAS_PRICE_TYPE=Cu.RPC_AUTHENTICATION=void 0;var O7;(function(t){t.API_KEY_PATH="API_KEY_PATH",t.NO_AUTHENTICATION="NO_AUTHENTICATION",t.UNKNOWN="UNKNOWN"})(O7||(Cu.RPC_AUTHENTICATION=O7={}));var P7;(function(t){t.ORACLE="ORACLE",t.FIXED="FIXED",t.FIXED_1559="FIXED1559",t.UNKNOWN="UNKNOWN"})(P7||(Cu.GAS_PRICE_TYPE=P7={}));var T7;(function(t){t.ERC721="ERC721",t.SAFE_APPS="SAFE_APPS",t.CONTRACT_INTERACTION="CONTRACT_INTERACTION",t.DOMAIN_LOOKUP="DOMAIN_LOOKUP",t.SPENDING_LIMIT="SPENDING_LIMIT",t.EIP1559="EIP1559",t.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",t.TX_SIMULATION="TX_SIMULATION",t.EIP1271="EIP1271"})(T7||(Cu.FEATURES=T7={}));var yE={};Object.defineProperty(yE,"__esModule",{value:!0});yE.TokenType=void 0;var k7;(function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_TOKEN="NATIVE_TOKEN",t.UNKNOWN="UNKNOWN"})(k7||(yE.TokenType=k7={}));var kq={};Object.defineProperty(kq,"__esModule",{value:!0});var ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.NativeStakingStatus=ig.ConfirmationViewTypes=void 0;var N7;(function(t){t.GENERIC="GENERIC",t.COW_SWAP_ORDER="COW_SWAP_ORDER",t.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",t.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",t.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",t.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(N7||(ig.ConfirmationViewTypes=N7={}));var $7;(function(t){t.NOT_STAKED="NOT_STAKED",t.ACTIVATING="ACTIVATING",t.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",t.ACTIVE="ACTIVE",t.EXIT_REQUESTED="EXIT_REQUESTED",t.EXITING="EXITING",t.EXITED="EXITED",t.SLASHED="SLASHED"})($7||(ig.NativeStakingStatus=$7={}));var sg={};Object.defineProperty(sg,"__esModule",{value:!0});sg.SafeMessageStatus=sg.SafeMessageListItemType=void 0;var R7;(function(t){t.DATE_LABEL="DATE_LABEL",t.MESSAGE="MESSAGE"})(R7||(sg.SafeMessageListItemType=R7={}));var M7;(function(t){t.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",t.CONFIRMED="CONFIRMED"})(M7||(sg.SafeMessageStatus=M7={}));var bE={};Object.defineProperty(bE,"__esModule",{value:!0});bE.DeviceType=void 0;var D7;(function(t){t.ANDROID="ANDROID",t.IOS="IOS",t.WEB="WEB"})(D7||(bE.DeviceType=D7={}));var Nq={};Object.defineProperty(Nq,"__esModule",{value:!0});(function(t){var e=Mn&&Mn.__createBinding||(Object.create?function(ne,le,ke,qe){qe===void 0&&(qe=ke);var mn=Object.getOwnPropertyDescriptor(le,ke);(!mn||("get"in mn?!le.__esModule:mn.writable||mn.configurable))&&(mn={enumerable:!0,get:function(){return le[ke]}}),Object.defineProperty(ne,qe,mn)}:function(ne,le,ke,qe){qe===void 0&&(qe=ke),ne[qe]=le[ke]}),n=Mn&&Mn.__exportStar||function(ne,le){for(var ke in ne)ke!=="default"&&!Object.prototype.hasOwnProperty.call(le,ke)&&e(le,ne,ke)};Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=void 0,t.relayTransaction=a,t.getRelayCount=c,t.getSafeInfo=l,t.getIncomingTransfers=u,t.getModuleTransactions=d,t.getMultisigTransactions=h,t.getBalances=f,t.getFiatCurrencies=p,t.getOwnedSafes=g,t.getAllOwnedSafes=m,t.getCollectibles=w,t.getCollectiblesPage=b,t.getTransactionHistory=y,t.getTransactionQueue=_,t.getTransactionDetails=A,t.deleteTransaction=T,t.postSafeGasEstimation=$,t.getNonces=D,t.proposeTransaction=O,t.getConfirmationView=j,t.getTxPreview=F,t.getChainsConfig=L,t.getChainConfig=B,t.getSafeApps=x,t.getMasterCopies=v,t.getDecodedData=S,t.getSafeMessages=N,t.getSafeMessage=E,t.proposeSafeMessage=C,t.confirmSafeMessage=P,t.getDelegates=M,t.registerDevice=I,t.unregisterSafe=k,t.unregisterDevice=R,t.registerEmail=U,t.changeEmail=q,t.resendEmailVerificationCode=H,t.verifyEmail=z,t.getRegisteredEmail=K,t.deleteRegisteredEmail=G,t.registerRecoveryModule=Y,t.unsubscribeSingle=X,t.unsubscribeAll=ie,t.getSafeOverviews=de,t.getContract=Se,t.getAuthNonce=Ee,t.verifyAuth=Ae,t.createAccount=Re,t.getAccount=Me,t.deleteAccount=Qe,t.getAccountDataTypes=et,t.getAccountDataSettings=ze,t.putAccountDataSettings=Ye,t.getIndexingStatus=Je;const r=Zg,i=mE;n(wE,t),n(Eu,t),n(on,t),n(Cu,t),n(yE,t),n(kq,t),n(ig,t),n(sg,t),n(bE,t),n(Nq,t);let s=i.DEFAULT_BASE_URL;const o=ne=>{s=ne};t.setBaseUrl=o;function a(ne,le){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/relay",{path:{chainId:ne},body:le})}function c(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:ne,address:le}})}function l(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:ne,address:le}})}function u(ne,le,ke,qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:ne,address:le},query:ke},qe)}function d(ne,le,ke,qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:ne,address:le},query:ke},qe)}function h(ne,le,ke,qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:ne,address:le},query:ke},qe)}function f(ne,le,ke="usd",qe={}){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:ne,address:le,currency:ke},query:qe})}function p(){return(0,r.getEndpoint)(s,"/v1/balances/supported-fiat-codes")}function g(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:ne,address:le}})}function m(ne){return(0,r.getEndpoint)(s,"/v1/owners/{address}/safes",{path:{address:ne}})}function w(ne,le,ke={}){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ne,address:le},query:ke})}function b(ne,le,ke={},qe){return(0,r.getEndpoint)(s,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:ne,address:le},query:ke},qe)}function y(ne,le,ke={},qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:ne,safe_address:le},query:ke},qe)}function _(ne,le,ke={},qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:ne,safe_address:le},query:ke},qe)}function A(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:ne,transactionId:le}})}function T(ne,le,ke){return(0,r.deleteEndpoint)(s,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:ne,safeTxHash:le},body:{signature:ke}})}function $(ne,le,ke){return(0,r.postEndpoint)(s,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:ne,safe_address:le},body:ke})}function D(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:ne,safe_address:le}})}function O(ne,le,ke){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:ne,safe_address:le},body:ke})}function j(ne,le,ke,qe,mn,Ds){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:ne,safe_address:le},body:{operation:ke,data:qe,to:mn,value:Ds}})}function F(ne,le,ke,qe,mn,Ds){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:ne,safe_address:le},body:{operation:ke,data:qe,to:mn,value:Ds}})}function L(ne){return(0,r.getEndpoint)(s,"/v1/chains",{query:ne})}function B(ne){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}",{path:{chainId:ne}})}function x(ne,le={}){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safe-apps",{path:{chainId:ne},query:le})}function v(ne){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:ne}})}function S(ne,le,ke,qe){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/data-decoder",{path:{chainId:ne},body:{operation:le,data:ke,to:qe}})}function N(ne,le,ke){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ne,safe_address:le},query:{}},ke)}function E(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:ne,message_hash:le}})}function C(ne,le,ke){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:ne,safe_address:le},body:ke})}function P(ne,le,ke){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:ne,message_hash:le},body:ke})}function M(ne,le={}){return(0,r.getEndpoint)(s,"/v2/chains/{chainId}/delegates",{path:{chainId:ne},query:le})}function I(ne){return(0,r.postEndpoint)(s,"/v1/register/notifications",{body:ne})}function k(ne,le,ke){return(0,r.deleteEndpoint)(s,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:ne,safe_address:le,uuid:ke}})}function R(ne,le){return(0,r.deleteEndpoint)(s,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:ne,uuid:le}})}function U(ne,le,ke,qe){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:ne,safe_address:le},body:ke,headers:qe})}function q(ne,le,ke,qe,mn){return(0,r.putEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ne,safe_address:le,signer:ke},body:qe,headers:mn})}function H(ne,le,ke){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:ne,safe_address:le,signer:ke},body:""})}function z(ne,le,ke,qe){return(0,r.putEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:ne,safe_address:le,signer:ke},body:qe})}function K(ne,le,ke,qe){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ne,safe_address:le,signer:ke},headers:qe})}function G(ne,le,ke,qe){return(0,r.deleteEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:ne,safe_address:le,signer:ke},headers:qe})}function Y(ne,le,ke){return(0,r.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:ne,safe_address:le},body:ke})}function X(ne){return(0,r.deleteEndpoint)(s,"/v1/subscriptions",{query:ne})}function ie(ne){return(0,r.deleteEndpoint)(s,"/v1/subscriptions/all",{query:ne})}function de(ne,le){return(0,r.getEndpoint)(s,"/v1/safes",{query:Object.assign(Object.assign({},le),{safes:ne.join(",")})})}function Se(ne,le){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:ne,contractAddress:le}})}function Ee(){return(0,r.getEndpoint)(s,"/v1/auth/nonce",{credentials:"include"})}function Ae(ne){return(0,r.postEndpoint)(s,"/v1/auth/verify",{body:ne,credentials:"include"})}function Re(ne){return(0,r.postEndpoint)(s,"/v1/accounts",{body:ne,credentials:"include"})}function Me(ne){return(0,r.getEndpoint)(s,"/v1/accounts/{address}",{path:{address:ne},credentials:"include"})}function Qe(ne){return(0,r.deleteEndpoint)(s,"/v1/accounts/{address}",{path:{address:ne},credentials:"include"})}function et(){return(0,r.getEndpoint)(s,"/v1/accounts/data-types")}function ze(ne){return(0,r.getEndpoint)(s,"/v1/accounts/{address}/data-settings",{path:{address:ne},credentials:"include"})}function Ye(ne,le){return(0,r.putEndpoint)(s,"/v1/accounts/{address}/data-settings",{path:{address:ne},body:le,credentials:"include"})}function Je(ne){return(0,r.getEndpoint)(s,"/v1/chains/{chainId}/about/indexing",{path:{chainId:ne}})}})(Q0);class ade{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw new Error("Invalid safeTxHash");return(await this.communicator.send(br.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){const n={message:e};return(await this.communicator.send(br.signMessage,n)).data}async signTypedMessage(e){if(!k8(e))throw new Error("Invalid typed data");return(await this.communicator.send(br.signTypedMessage,{typedData:e})).data}async send({txs:e,params:n}){if(!e||!e.length)throw new Error("No transactions were passed");const r={txs:e,params:n};return(await this.communicator.send(br.sendTransactions,r)).data}}const ri={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},ec={defaultBlockParam:(t="latest")=>t,returnFullTxObjectParam:(t=!1)=>t,blockNumberToHex:t=>Number.isInteger(t)?`0x${t.toString(16)}`:t};class cde{constructor(e){this.communicator=e,this.call=this.buildRequest({call:ri.eth_call,formatters:[null,ec.defaultBlockParam]}),this.getBalance=this.buildRequest({call:ri.eth_getBalance,formatters:[null,ec.defaultBlockParam]}),this.getCode=this.buildRequest({call:ri.eth_getCode,formatters:[null,ec.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:ri.eth_getStorageAt,formatters:[null,ec.blockNumberToHex,ec.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:ri.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:ri.eth_getBlockByHash,formatters:[null,ec.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:ri.eth_getBlockByNumber,formatters:[ec.blockNumberToHex,ec.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:ri.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:ri.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:ri.eth_getTransactionCount,formatters:[null,ec.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:ri.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:ri.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:ri.safe_setSettings})}buildRequest(e){const{call:n,formatters:r}=e;return async i=>{r&&Array.isArray(i)&&r.forEach((a,c)=>{a&&(i[c]=a(i[c]))});const s={call:n,params:i||[]};return(await this.communicator.send(br.rpcCall,s)).data}}}const lde="0x1626ba7e",ude="0x20c13b0b",nA=4001;class nw extends Error{constructor(e,n,r){super(e),this.code=n,this.data=r,Object.setPrototypeOf(this,nw.prototype)}}class $q{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(br.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new nw("Permissions request is invalid",nA);try{return(await this.communicator.send(br.wallet_requestPermissions,e)).data}catch{throw new nw("Permissions rejected",nA)}}isPermissionRequestValid(e){return e.every(n=>typeof n=="object"?Object.keys(n).every(r=>!!Object.values(Zv).includes(r)):!1)}}const B7=(t,e)=>e.some(n=>n.parentCapability===t),dde=()=>(t,e,n)=>{const r=n.value;return n.value=async function(){const i=new $q(this.communicator);let s=await i.getPermissions();if(B7(e,s)||(s=await i.requestPermissions([{[e]:{}}])),!B7(e,s))throw new nw("Permissions rejected",nA);return r.apply(this)},n};var hde=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};class Rq{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(br.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(br.getSafeInfo,void 0)).data}async experimental_getBalances({currency:e="usd"}={}){return(await this.communicator.send(br.getSafeBalances,{currency:e})).data}async check1271Signature(e,n="0x"){const r=await this.getInfo(),i=Ba({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,n]}),s={call:ri.eth_call,params:[{to:r.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(br.rpcCall,s)).data.slice(0,10).toLowerCase()===lde}catch{return!1}}async check1271SignatureBytes(e,n="0x"){const r=await this.getInfo(),i=Ba({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,n]}),s={call:ri.eth_call,params:[{to:r.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(br.rpcCall,s)).data.slice(0,10).toLowerCase()===ude}catch{return!1}}calculateMessageHash(e){return G4(e)}calculateTypedMessageHash(e){const n=typeof e.domain.chainId=="object"?e.domain.chainId.toNumber():Number(e.domain.chainId);let r=e.primaryType;if(!r){const i=Object.values(e.types),s=Object.keys(e.types).filter(o=>i.every(a=>a.every(({type:c})=>c.replace("[","").replace("]","")!==o)));if(s.length===0||s.length>1)throw new Error("Please specify primaryType");r=s[0]}return U2({message:e.message,domain:{...e.domain,chainId:n,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:r})}async getOffChainSignature(e){return(await this.communicator.send(br.getOffChainSignature,e)).data}async isMessageSigned(e,n="0x"){let r;if(typeof e=="string"&&(r=async()=>{const i=this.calculateMessageHash(e);return await this.isMessageHashSigned(i,n)}),k8(e)&&(r=async()=>{const i=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(i,n)}),r)return await r();throw new Error("Invalid message type")}async isMessageHashSigned(e,n="0x"){const r=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const i of r)if(await i(e,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(br.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(br.requestAddressBook,void 0)).data}}hde([dde()],Rq.prototype,"requestAddressBook",null);class fde{constructor(e={}){const{allowedDomains:n=null,debug:r=!1}=e;this.communicator=new Yue(n,r),this.eth=new cde(this.communicator),this.txs=new ade(this.communicator),this.safe=new Rq(this.communicator),this.wallet=new $q(this.communicator)}}const Mq=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:Vw,get Methods(){return br},Operation:Q0.Operation,RPC_CALLS:ri,get RestrictedMethods(){return Zv},TokenType:Q0.TokenType,TransactionStatus:Q0.TransactionStatus,TransferDirection:Q0.TransferDirection,default:fde,getSDKVersion:Pq,isObjectEIP712TypedData:k8},Symbol.toStringTag,{value:"Module"}));var $8={},vE={};const pde=Z4(Mq);var og={};Object.defineProperty(og,"__esModule",{value:!0});og.numberToHex=og.getLowerCase=void 0;function gde(t){return t&&t.toLowerCase()}og.getLowerCase=gde;function mde(t){return`0x${t.toString(16)}`}og.numberToHex=mde;Object.defineProperty(vE,"__esModule",{value:!0});vE.SafeAppProvider=void 0;const nf=pde,wde=Kn,qs=og;class yde extends wde.EventEmitter{constructor(e,n){super(),this.submittedTxs=new Map,this.safe=e,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(e){const{method:n,params:r=[]}=e;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,qs.numberToHex)(this.chainId);case"personal_sign":{const[c,l]=r;if(this.safe.safeAddress.toLowerCase()!==l.toLowerCase())throw new Error("The address or message hash is invalid");const u=await this.sdk.txs.signMessage(c);return("signature"in u?u.signature:void 0)||"0x"}case"eth_sign":{const[c,l]=r;if(this.safe.safeAddress.toLowerCase()!==c.toLowerCase()||!l.startsWith("0x"))throw new Error("The address or message hash is invalid");const u=await this.sdk.txs.signMessage(l);return("signature"in u?u.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[c,l]=r,u=typeof l=="string"?JSON.parse(l):l;if(this.safe.safeAddress.toLowerCase()!==c.toLowerCase())throw new Error("The address is invalid");const d=await this.sdk.txs.signTypedMessage(u);return("signature"in d?d.signature:void 0)||"0x"}case"eth_sendTransaction":const i={...r[0],value:r[0].value||"0",data:r[0].data||"0x"};typeof i.gas=="string"&&i.gas.startsWith("0x")&&(i.gas=parseInt(i.gas,16));const s=await this.sdk.txs.send({txs:[i],params:{safeTxGas:i.gas}});return this.submittedTxs.set(s.safeTxHash,{from:this.safe.safeAddress,hash:s.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:i.data,value:i.value,to:i.to,blockHash:null,blockNumber:null,transactionIndex:null}),s.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,qs.getLowerCase)(r[0]),r[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,qs.getLowerCase)(r[0]),r[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,qs.getLowerCase)(r[0]),r[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,qs.getLowerCase)(r[0]),r[1],r[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([r[0],r[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([r[0],r[1]]);case"eth_getTransactionByHash":let a=r[0];try{a=(await this.sdk.txs.getBySafeTxHash(a)).txHash||a}catch{}return this.submittedTxs.has(a)?this.submittedTxs.get(a):this.sdk.eth.getTransactionByHash([a]).then(c=>(c&&(c.hash=r[0]),c));case"eth_getTransactionReceipt":{let c=r[0];try{c=(await this.sdk.txs.getBySafeTxHash(c)).txHash||c}catch{}return this.sdk.eth.getTransactionReceipt([c]).then(l=>(l&&(l.transactionHash=r[0]),l))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(r[0]);case"eth_call":return this.sdk.eth.call([r[0],r[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([r[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(r[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([r[0]]);case"wallet_sendCalls":{const{from:c,calls:l,chainId:u}=r[0];if(u!==(0,qs.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${u}`);if(c!==this.safe.safeAddress)throw Error("Invalid from address");const d=l.map((p,g)=>{if(!p.to)throw new Error(`Invalid call #${g}: missing "to" field`);return{to:p.to,data:p.data??"0x",value:p.value??(0,qs.numberToHex)(0)}}),{safeTxHash:h}=await this.sdk.txs.send({txs:d});return{id:h}}case"wallet_getCallsStatus":{const c=r[0],l={[nf.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[nf.TransactionStatus.AWAITING_EXECUTION]:100,[nf.TransactionStatus.SUCCESS]:200,[nf.TransactionStatus.CANCELLED]:400,[nf.TransactionStatus.FAILED]:500},u=await this.sdk.txs.getBySafeTxHash(c),d={version:"1.0",id:c,chainId:(0,qs.numberToHex)(this.chainId),status:l[u.txStatus]};if(!u.txHash)return d;const h=await this.sdk.eth.getTransactionReceipt([u.txHash]);if(!h)return d;const f=u.txData?.dataDecoded?.method!=="multiSend"?1:u.txData.dataDecoded.parameters?.[0].valueDecoded?.length??1,p=Number(h.blockNumber),g=Number(h.gasUsed);return d.receipts=Array(f).fill({logs:h.logs,status:(0,qs.numberToHex)(u.txStatus===nf.TransactionStatus.SUCCESS?1:0),blockHash:h.blockHash,blockNumber:(0,qs.numberToHex)(p),gasUsed:(0,qs.numberToHex)(g),transactionHash:u.txHash}),d}case"wallet_showCallsStatus":throw new Error(`"${e.method}" not supported`);case"wallet_getCapabilities":return{[(0,qs.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${e.method}" not implemented`)}}send(e,n){e||n("Undefined request"),this.request(e).then(r=>n(null,{jsonrpc:"2.0",id:e.id,result:r})).catch(r=>n(r,null))}}vE.SafeAppProvider=yde;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;var e=vE;Object.defineProperty(t,"SafeAppProvider",{enumerable:!0,get:function(){return e.SafeAppProvider}})})($8);const bde=Lu($8),vde=kG({__proto__:null,default:bde},[$8]);var L7=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Ede=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Cde=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),_de=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),Sde=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ade=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),xde=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ide=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,U7=3,Ode=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",xde]],j7=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Dq(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ade:typeof navigator<"u"?Tde(navigator.userAgent):Nde()}function Pde(t){return t!==""&&Ode.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1)}function Tde(t){var e=Pde(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Sde;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<U7&&(i=L7(L7([],i,!0),$de(U7-i.length),!0)):i=[];var s=i.join("."),o=kde(t),a=Ide.exec(t);return a&&a[1]?new _de(n,s,o,a[1]):new Ede(n,s,o)}function kde(t){for(var e=0,n=j7.length;e<n;e++){var r=j7[e],i=r[0],s=r[1],o=s.exec(t);if(o)return i}return null}function Nde(){var t=typeof process<"u"&&process.version;return t?new Cde(process.version.slice(1)):null}function $de(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rA=function(t,e){return rA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},rA(t,e)};function Rde(t,e){rA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var iA=function(){return iA=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},iA.apply(this,arguments)};function Mde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Dde(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Bde(t,e){return function(n,r){e(n,r,t)}}function Lde(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ude(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function jde(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Fde(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function qde(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function sA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bq(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Hde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Bq(arguments[e]));return t}function zde(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function rw(t){return this instanceof rw?(this.v=t,this):new rw(t)}function Kde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof rw?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Vde(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:rw(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Wde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sA=="function"?sA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Gde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Zde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Yde(t){return t&&t.__esModule?t:{default:t}}function Qde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Jde(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Xde=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return iA},__asyncDelegator:Vde,__asyncGenerator:Kde,__asyncValues:Wde,__await:rw,__awaiter:Ude,__classPrivateFieldGet:Qde,__classPrivateFieldSet:Jde,__createBinding:Fde,__decorate:Dde,__exportStar:qde,__extends:Rde,__generator:jde,__importDefault:Yde,__importStar:Zde,__makeTemplateObject:Gde,__metadata:Lde,__param:Bde,__read:Bq,__rest:Mde,__spread:Hde,__spreadArrays:zde,__values:sA},Symbol.toStringTag,{value:"Module"})),EE=Z4(Xde);var OC={},C0={},F7;function ehe(){if(F7)return C0;F7=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return C0.delay=t,C0}var Yu={},PC={},Qu={},q7;function the(){return q7||(q7=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.ONE_THOUSAND=Qu.ONE_HUNDRED=void 0,Qu.ONE_HUNDRED=100,Qu.ONE_THOUSAND=1e3),Qu}var TC={},H7;function nhe(){return H7||(H7=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(TC)),TC}var z7;function Lq(){return z7||(z7=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=EE;e.__exportStar(the(),t),e.__exportStar(nhe(),t)}(PC)),PC}var K7;function rhe(){if(K7)return Yu;K7=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.fromMiliseconds=Yu.toMiliseconds=void 0;const t=Lq();function e(r){return r*t.ONE_THOUSAND}Yu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Yu.fromMiliseconds=n,Yu}var V7;function ihe(){return V7||(V7=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=EE;e.__exportStar(ehe(),t),e.__exportStar(rhe(),t)}(OC)),OC}var rf={},W7;function she(){if(W7)return rf;W7=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return rf.Watch=t,rf.default=t,rf}var kC={},_0={},G7;function ohe(){if(G7)return _0;G7=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.IWatch=void 0;class t{}return _0.IWatch=t,_0}var Z7;function ahe(){return Z7||(Z7=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),EE.__exportStar(ohe(),t)}(kC)),kC}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=EE;e.__exportStar(ihe(),t),e.__exportStar(she(),t),e.__exportStar(ahe(),t),e.__exportStar(Lq(),t)})(J);var an={};Object.defineProperty(an,"__esModule",{value:!0});an.getLocalStorage=an.getLocalStorageOrThrow=an.getCrypto=an.getCryptoOrThrow=R8=an.getLocation=an.getLocationOrThrow=Ww=an.getNavigator=an.getNavigatorOrThrow=Is=an.getDocument=an.getDocumentOrThrow=an.getFromWindowOrThrow=an.getFromWindow=void 0;function Mh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}an.getFromWindow=Mh;function Qg(t){const e=Mh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}an.getFromWindowOrThrow=Qg;function che(){return Qg("document")}an.getDocumentOrThrow=che;function lhe(){return Mh("document")}var Is=an.getDocument=lhe;function uhe(){return Qg("navigator")}an.getNavigatorOrThrow=uhe;function dhe(){return Mh("navigator")}var Ww=an.getNavigator=dhe;function hhe(){return Qg("location")}an.getLocationOrThrow=hhe;function fhe(){return Mh("location")}var R8=an.getLocation=fhe;function phe(){return Qg("crypto")}an.getCryptoOrThrow=phe;function ghe(){return Mh("crypto")}an.getCrypto=ghe;function mhe(){return Qg("localStorage")}an.getLocalStorageOrThrow=mhe;function whe(){return Mh("localStorage")}an.getLocalStorage=whe;var M8={};Object.defineProperty(M8,"__esModule",{value:!0});var D8=M8.getWindowMetadata=void 0;const Y7=an;function yhe(){let t,e;try{t=Y7.getDocumentOrThrow(),e=Y7.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(m.indexOf("/")===0)w+=m;else{const b=e.pathname.split("/");b.pop();const y=b.join("/");w+=y+"/"+m}h.push(w)}else if(m.indexOf("//")===0){const w=e.protocol+m;h.push(w)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}D8=M8.getWindowMetadata=yhe;function Yv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function bhe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Gw(t,...e){if(!bhe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vhe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yv(t.outputLen),Yv(t.blockLen)}function ag(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Uq(t,e){Gw(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const O1=BigInt(2**32-1),Q7=BigInt(32);function Ehe(t,e=!1){return e?{h:Number(t&O1),l:Number(t>>Q7&O1)}:{h:Number(t>>Q7&O1)|0,l:Number(t&O1)|0}}function Che(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Ehe(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const _he=(t,e,n)=>t<<n|e>>>32-n,She=(t,e,n)=>e<<n|t>>>32-n,Ahe=(t,e,n)=>e<<n-32|t>>>64-n,xhe=(t,e,n)=>t<<n-32|e>>>64-n,sf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ihe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function NC(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ra(t,e){return t<<32-e|t>>>e}const J7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ohe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function X7(t){for(let e=0;e<t.length;e++)t[e]=Ohe(t[e])}function Phe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function CE(t){return typeof t=="string"&&(t=Phe(t)),Gw(t),t}function The(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Gw(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let B8=class{clone(){return this._cloneInto()}};function jq(t){const e=r=>t().update(CE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function khe(t=32){if(sf&&typeof sf.getRandomValues=="function")return sf.getRandomValues(new Uint8Array(t));if(sf&&typeof sf.randomBytes=="function")return sf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Fq=[],qq=[],Hq=[],Nhe=BigInt(0),S0=BigInt(1),$he=BigInt(2),Rhe=BigInt(7),Mhe=BigInt(256),Dhe=BigInt(113);for(let t=0,e=S0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Fq.push(2*(5*r+n)),qq.push((t+1)*(t+2)/2%64);let i=Nhe;for(let s=0;s<7;s++)e=(e<<S0^(e>>Rhe)*Dhe)%Mhe,e&$he&&(i^=S0<<(S0<<BigInt(s))-S0);Hq.push(i)}const[Bhe,Lhe]=Che(Hq,!0),eT=(t,e,n)=>n>32?Ahe(t,e,n):_he(t,e,n),tT=(t,e,n)=>n>32?xhe(t,e,n):She(t,e,n);function Uhe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=eT(l,u,1)^n[a],h=tT(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=qq[o],c=eT(i,s,a),l=tT(i,s,a),u=Fq[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Bhe[r],t[1]^=Lhe[r]}n.fill(0)}let jhe=class zq extends B8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Yv(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ihe(this.state)}keccak(){J7||X7(this.state32),Uhe(this.state32,this.rounds),J7||X7(this.state32),this.posOut=0,this.pos=0}update(e){ag(this);const{blockLen:n,state:r}=this;e=CE(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ag(this,!1),Gw(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Uq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new zq(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Fhe=(t,e,n)=>jq(()=>new jhe(e,t,n)),UUe=Fhe(1,136,256/8);function qhe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Hhe(t,e,n){return t&e^~t&n}function zhe(t,e,n){return t&e^t&n^e&n}let Khe=class extends B8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=NC(this.buffer)}update(e){ag(this);const{view:n,buffer:r,blockLen:i}=this;e=CE(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=NC(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ag(this),Uq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;qhe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=NC(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const Vhe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ml=new Uint32Array(64);let Whe=class extends Khe{constructor(){super(64,32,8,!1),this.A=gl[0]|0,this.B=gl[1]|0,this.C=gl[2]|0,this.D=gl[3]|0,this.E=gl[4]|0,this.F=gl[5]|0,this.G=gl[6]|0,this.H=gl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ml[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ml[d-15],f=ml[d-2],p=ra(h,7)^ra(h,18)^h>>>3,g=ra(f,17)^ra(f,19)^f>>>10;ml[d]=g+ml[d-7]+p+ml[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ra(a,6)^ra(a,11)^ra(a,25),f=u+h+Hhe(a,c,l)+Vhe[d]+ml[d]|0,g=(ra(r,2)^ra(r,13)^ra(r,22))+zhe(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){ml.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ghe=jq(()=>new Whe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _E=BigInt(0),SE=BigInt(1),Zhe=BigInt(2);function oh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Zw(t){if(!oh(t))throw new Error("Uint8Array expected")}function cg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Yhe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lg(t){Zw(t);let e="";for(let n=0;n<t.length;n++)e+=Yhe[t[n]];return e}function dp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function L8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_E:BigInt("0x"+t)}const tc={_0:48,_9:57,A:65,F:70,a:97,f:102};function nT(t){if(t>=tc._0&&t<=tc._9)return t-tc._0;if(t>=tc.A&&t<=tc.F)return t-(tc.A-10);if(t>=tc.a&&t<=tc.f)return t-(tc.a-10)}function ug(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=nT(t.charCodeAt(s)),a=nT(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Kd(t){return L8(lg(t))}function U8(t){return Zw(t),L8(lg(Uint8Array.from(t).reverse()))}function dg(t,e){return ug(t.toString(16).padStart(e*2,"0"))}function j8(t,e){return dg(t,e).reverse()}function Qhe(t){return ug(dp(t))}function No(t,e,n){let r;if(typeof e=="string")try{r=ug(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(oh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function iw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Zw(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function Jhe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Xhe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const $C=t=>typeof t=="bigint"&&_E<=t;function AE(t,e,n){return $C(t)&&$C(e)&&$C(n)&&e<=t&&t<n}function Vd(t,e,n,r){if(!AE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Kq(t){let e;for(e=0;t>_E;t>>=SE,e+=1);return e}function efe(t,e){return t>>BigInt(e)&SE}function tfe(t,e,n){return t|(n?SE:_E)<<BigInt(e)}const F8=t=>(Zhe<<BigInt(t-1))-SE,RC=t=>new Uint8Array(t),rT=t=>Uint8Array.from(t);function Vq(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=RC(t),i=RC(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=RC())=>{i=a(rT([0]),d),r=a(),d.length!==0&&(i=a(rT([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return iw(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const nfe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||oh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Yw(t,e,n={}){const r=(i,s,o)=>{const a=nfe[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const rfe=()=>{throw new Error("not implemented")};function oA(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const ife=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Vd,abool:cg,abytes:Zw,bitGet:efe,bitLen:Kq,bitMask:F8,bitSet:tfe,bytesToHex:lg,bytesToNumberBE:Kd,bytesToNumberLE:U8,concatBytes:iw,createHmacDrbg:Vq,ensureBytes:No,equalBytes:Jhe,hexToBytes:ug,hexToNumber:L8,inRange:AE,isBytes:oh,memoized:oA,notImplemented:rfe,numberToBytesBE:dg,numberToBytesLE:j8,numberToHexUnpadded:dp,numberToVarBytesBE:Qhe,utf8ToBytes:Xhe,validateObject:Yw},Symbol.toStringTag,{value:"Module"}));let Wq=class extends B8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,vhe(e);const r=CE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ag(this),this.iHash.update(e),this}digestInto(e){ag(this),Gw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Gq=(t,e,n)=>new Wq(t,e).update(n).digest();Gq.create=(t,e)=>new Wq(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xr=BigInt(0),Dn=BigInt(1),hd=BigInt(2),sfe=BigInt(3),aA=BigInt(4),iT=BigInt(5),sT=BigInt(8);function Vi(t,e){const n=t%e;return n>=xr?n:e+n}function ofe(t,e,n){if(e<xr)throw new Error("invalid exponent, negatives unsupported");if(n<=xr)throw new Error("invalid modulus");if(n===Dn)return xr;let r=Dn;for(;e>xr;)e&Dn&&(r=r*t%n),t=t*t%n,e>>=Dn;return r}function Hs(t,e,n){let r=t;for(;e-- >xr;)r*=r,r%=n;return r}function cA(t,e){if(t===xr)throw new Error("invert: expected non-zero number");if(e<=xr)throw new Error("invert: expected positive modulus, got "+e);let n=Vi(t,e),r=e,i=xr,s=Dn;for(;n!==xr;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==Dn)throw new Error("invert: does not exist");return Vi(i,e)}function afe(t){const e=(t-Dn)/hd;let n,r,i;for(n=t-Dn,r=0;n%hd===xr;n/=hd,r++);for(i=hd;i<t&&ofe(i,e,t)!==t-Dn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Dn)/aA;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+Dn)/hd;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Dn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function cfe(t){if(t%aA===sfe){const e=(t+Dn)/aA;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%sT===iT){const e=(t-iT)/sT;return function(r,i){const s=r.mul(i,hd),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,hd),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return afe(t)}const lfe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ufe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lfe.reduce((r,i)=>(r[i]="function",r),e);return Yw(t,n)}function dfe(t,e,n){if(n<xr)throw new Error("invalid exponent, negatives unsupported");if(n===xr)return t.ONE;if(n===Dn)return e;let r=t.ONE,i=e;for(;n>xr;)n&Dn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Dn;return r}function hfe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Zq(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Yq(t,e,n=!1,r={}){if(t<=xr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Zq(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:F8(i),ZERO:xr,ONE:Dn,create:c=>Vi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return xr<=c&&c<t},is0:c=>c===xr,isOdd:c=>(c&Dn)===Dn,neg:c=>Vi(-c,t),eql:(c,l)=>c===l,sqr:c=>Vi(c*c,t),add:(c,l)=>Vi(c+l,t),sub:(c,l)=>Vi(c-l,t),mul:(c,l)=>Vi(c*l,t),pow:(c,l)=>dfe(a,c,l),div:(c,l)=>Vi(c*cA(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>cA(c,t),sqrt:r.sqrt||(c=>(o||(o=cfe(t)),o(a,c))),invertBatch:c=>hfe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?j8(c,s):dg(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?U8(c):Kd(c)}});return Object.freeze(a)}function Qq(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Jq(t){const e=Qq(t);return e+Math.ceil(e/2)}function ffe(t,e,n=!1){const r=t.length,i=Qq(e),s=Jq(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?U8(t):Kd(t),a=Vi(o,e-Dn)+Dn;return n?j8(a,i):dg(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oT=BigInt(0),P1=BigInt(1);function MC(t,e){const n=e.negate();return t?n:e}function Xq(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function DC(t,e){Xq(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function pfe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function gfe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const BC=new WeakMap,eH=new WeakMap;function LC(t){return eH.get(t)||1}function mfe(t,e){return{constTimeNegate:MC,hasPrecomputes(n){return LC(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>oT;)r&P1&&(i=i.add(s)),s=s.double(),r>>=P1;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=DC(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=DC(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=P1);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(MC(w,r[g])):a=a.add(MC(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=DC(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===oT)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=P1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=BC.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&BC.set(r,i(s))),s},wNAFCached(n,r,i){const s=LC(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=LC(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Xq(r,e),eH.set(n,r),BC.delete(n)}}}function wfe(t,e,n,r){if(pfe(n,t),gfe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Kq(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function tH(t){return ufe(t.Fp),Yw(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zq(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aT(t){t.lowS!==void 0&&cg("lowS",t.lowS),t.prehash!==void 0&&cg("prehash",t.prehash)}function yfe(t){const e=tH(t);Yw(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:bfe,hexToBytes:vfe}=ife;let Efe=class extends Error{constructor(e=""){super(e)}};const Ec={Err:Efe,_tlv:{encode:(t,e)=>{const{Err:n}=Ec;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=dp(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?dp(i.length/2|128):"";return dp(t)+s+i+e},decode(t,e){const{Err:n}=Ec;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ec;if(t<Pc)throw new e("integer: negative integers are not allowed");let n=dp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ec;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bfe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ec,i=typeof t=="string"?vfe(t):t;Zw(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ec,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Pc=BigInt(0),pr=BigInt(1);BigInt(2);const cT=BigInt(3);BigInt(4);function Cfe(t){const e=yfe(t),{Fp:n}=e,r=Yq(e.n,e.nBitLength),i=e.toBytes||((g,m,w)=>{const b=m.toAffine();return iw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:b}});function o(g){const{a:m,b:w}=e,b=n.sqr(g),y=n.mul(b,g);return n.add(n.add(y,n.mul(g,m)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return AE(g,pr,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:b,n:y}=e;if(m&&typeof g!="bigint"){if(oh(g)&&(g=lg(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let _;try{_=typeof g=="bigint"?g:Kd(No("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return b&&(_=Vi(_,y)),Vd("private key",_,pr,y),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=oA((g,m)=>{const{px:w,py:b,pz:y}=g;if(n.eql(y,n.ONE))return{x:w,y:b};const _=g.is0();m==null&&(m=_?n.ONE:n.inv(y));const A=n.mul(w,m),T=n.mul(b,m),$=n.mul(y,m);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:A,y:T}}),d=oA(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");const b=n.sqr(w),y=o(m);if(!n.eql(b,y))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,b){if(this.px=m,this.py=w,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:b}=m||{};if(!m||!n.isValid(w)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const y=_=>n.eql(_,n.ZERO);return y(w)&&y(b)?h.ZERO:new h(w,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=n.invertBatch(m.map(b=>b.pz));return m.map((b,y)=>b.toAffine(w[y])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(s(No("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,w){return wfe(h,r,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m,$=n.eql(n.mul(w,T),n.mul(_,y)),D=n.eql(n.mul(b,T),n.mul(A,y));return $&&D}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,b=n.mul(w,cT),{px:y,py:_,pz:A}=this;let T=n.ZERO,$=n.ZERO,D=n.ZERO,O=n.mul(y,y),j=n.mul(_,_),F=n.mul(A,A),L=n.mul(y,_);return L=n.add(L,L),D=n.mul(y,A),D=n.add(D,D),T=n.mul(m,D),$=n.mul(b,F),$=n.add(T,$),T=n.sub(j,$),$=n.add(j,$),$=n.mul(T,$),T=n.mul(L,T),D=n.mul(b,D),F=n.mul(m,F),L=n.sub(O,F),L=n.mul(m,L),L=n.add(L,D),D=n.add(O,O),O=n.add(D,O),O=n.add(O,F),O=n.mul(O,L),$=n.add($,O),F=n.mul(_,A),F=n.add(F,F),O=n.mul(F,L),T=n.sub(T,O),D=n.mul(F,j),D=n.add(D,D),D=n.add(D,D),new h(T,$,D)}add(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m;let $=n.ZERO,D=n.ZERO,O=n.ZERO;const j=e.a,F=n.mul(e.b,cT);let L=n.mul(w,_),B=n.mul(b,A),x=n.mul(y,T),v=n.add(w,b),S=n.add(_,A);v=n.mul(v,S),S=n.add(L,B),v=n.sub(v,S),S=n.add(w,y);let N=n.add(_,T);return S=n.mul(S,N),N=n.add(L,x),S=n.sub(S,N),N=n.add(b,y),$=n.add(A,T),N=n.mul(N,$),$=n.add(B,x),N=n.sub(N,$),O=n.mul(j,S),$=n.mul(F,x),O=n.add($,O),$=n.sub(B,O),O=n.add(B,O),D=n.mul($,O),B=n.add(L,L),B=n.add(B,L),x=n.mul(j,x),S=n.mul(F,S),B=n.add(B,x),x=n.sub(L,x),x=n.mul(j,x),S=n.add(S,x),L=n.mul(B,S),D=n.add(D,L),L=n.mul(N,S),$=n.mul(v,$),$=n.sub($,L),L=n.mul(v,B),O=n.mul(N,O),O=n.add(O,L),new h($,D,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:b}=e;Vd("scalar",m,Pc,b);const y=h.ZERO;if(m===Pc)return y;if(this.is0()||m===pr)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:_,k1:A,k2neg:T,k2:$}=w.splitScalar(m),D=y,O=y,j=this;for(;A>Pc||$>Pc;)A&pr&&(D=D.add(j)),$&pr&&(O=O.add(j)),j=j.double(),A>>=pr,$>>=pr;return _&&(D=D.negate()),T&&(O=O.negate()),O=new h(n.mul(O.px,w.beta),O.py,O.pz),D.add(O)}multiply(m){const{endo:w,n:b}=e;Vd("scalar",m,pr,b);let y,_;if(w){const{k1neg:A,k1:T,k2neg:$,k2:D}=w.splitScalar(m);let{p:O,f:j}=this.wNAF(T),{p:F,f:L}=this.wNAF(D);O=p.constTimeNegate(A,O),F=p.constTimeNegate($,F),F=new h(n.mul(F.px,w.beta),F.py,F.pz),y=O.add(F),_=j.add(L)}else{const{p:A,f:T}=this.wNAF(m);y=A,_=T}return h.normalizeZ([y,_])[0]}multiplyAndAddUnsafe(m,w,b){const y=h.BASE,_=(T,$)=>$===Pc||$===pr||!T.equals(y)?T.multiplyUnsafe($):T.multiply($),A=_(this,w).add(_(m,b));return A.is0()?void 0:A}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===pr)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===pr?this:w?w(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return cg("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return cg("isCompressed",m),lg(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=mfe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function _fe(t){const e=tH(t);return Yw(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Sfe(t){const e=_fe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(x){return Vi(x,r)}function a(x){return cA(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=Cfe({...e,toBytes(x,v,S){const N=v.toAffine(),E=n.toBytes(N.x),C=iw;return cg("isCompressed",S),S?C(Uint8Array.from([v.hasEvenY()?2:3]),E):C(Uint8Array.from([4]),E,n.toBytes(N.y))},fromBytes(x){const v=x.length,S=x[0],N=x.subarray(1);if(v===i&&(S===2||S===3)){const E=Kd(N);if(!AE(E,pr,n.ORDER))throw new Error("Point is not on curve");const C=u(E);let P;try{P=n.sqrt(C)}catch(k){const R=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+R)}const M=(P&pr)===pr;return(S&1)===1!==M&&(P=n.neg(P)),{x:E,y:P}}else if(v===s&&S===4){const E=n.fromBytes(N.subarray(0,n.BYTES)),C=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:E,y:C}}else{const E=i,C=s;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+C+", got "+v)}}}),h=x=>lg(dg(x,e.nByteLength));function f(x){const v=r>>pr;return x>v}function p(x){return f(x)?o(-x):x}const g=(x,v,S)=>Kd(x.slice(v,S));class m{constructor(v,S,N){this.r=v,this.s=S,this.recovery=N,this.assertValidity()}static fromCompact(v){const S=e.nByteLength;return v=No("compactSignature",v,S*2),new m(g(v,0,S),g(v,S,2*S))}static fromDER(v){const{r:S,s:N}=Ec.toSig(No("DER",v));return new m(S,N)}assertValidity(){Vd("r",this.r,pr,r),Vd("s",this.s,pr,r)}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:S,s:N,recovery:E}=this,C=T(No("msgHash",v));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const P=E===2||E===3?S+e.n:S;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=E&1?"03":"02",I=c.fromHex(M+h(P)),k=a(P),R=o(-C*k),U=o(N*k),q=c.BASE.multiplyAndAddUnsafe(I,R,U);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ug(this.toDERHex())}toDERHex(){return Ec.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ug(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=Jq(e.n);return ffe(e.randomBytes(x),e.n)},precompute(x=8,v=c.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}};function b(x,v=!0){return c.fromPrivateKey(x).toRawBytes(v)}function y(x){const v=oh(x),S=typeof x=="string",N=(v||S)&&x.length;return v?N===i||N===s:S?N===2*i||N===2*s:x instanceof c}function _(x,v,S=!0){if(y(x))throw new Error("first arg must be private key");if(!y(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(l(x)).toRawBytes(S)}const A=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const v=Kd(x),S=x.length*8-e.nBitLength;return S>0?v>>BigInt(S):v},T=e.bits2int_modN||function(x){return o(A(x))},$=F8(e.nBitLength);function D(x){return Vd("num < 2^"+e.nBitLength,x,Pc,$),dg(x,e.nByteLength)}function O(x,v,S=j){if(["recovered","canonical"].some(z=>z in S))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:E}=e;let{lowS:C,prehash:P,extraEntropy:M}=S;C==null&&(C=!0),x=No("msgHash",x),aT(S),P&&(x=No("prehashed msgHash",N(x)));const I=T(x),k=l(v),R=[D(k),D(I)];if(M!=null&&M!==!1){const z=M===!0?E(n.BYTES):M;R.push(No("extraEntropy",z))}const U=iw(...R),q=I;function H(z){const K=A(z);if(!d(K))return;const G=a(K),Y=c.BASE.multiply(K).toAffine(),X=o(Y.x);if(X===Pc)return;const ie=o(G*o(q+X*k));if(ie===Pc)return;let de=(Y.x===X?0:2)|Number(Y.y&pr),Se=ie;return C&&f(ie)&&(Se=p(ie),de^=1),new m(X,Se,de)}return{seed:U,k2sig:H}}const j={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function L(x,v,S=j){const{seed:N,k2sig:E}=O(x,v,S),C=e;return Vq(C.hash.outputLen,C.nByteLength,C.hmac)(N,E)}c.BASE._setWindowSize(8);function B(x,v,S,N=F){const E=x;v=No("msgHash",v),S=No("publicKey",S);const{lowS:C,prehash:P,format:M}=N;if(aT(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const I=typeof E=="string"||oh(E),k=!I&&!M&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!I&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let R,U;try{if(k&&(R=new m(E.r,E.s)),I){try{M!=="compact"&&(R=m.fromDER(E))}catch(de){if(!(de instanceof Ec.Err))throw de}!R&&M!=="der"&&(R=m.fromCompact(E))}U=c.fromHex(S)}catch{return!1}if(!R||C&&R.hasHighS())return!1;P&&(v=e.hash(v));const{r:q,s:H}=R,z=T(v),K=a(H),G=o(z*K),Y=o(q*K),X=c.BASE.multiplyAndAddUnsafe(U,G,Y)?.toAffine();return X?o(X.x)===q:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:L,verify:B,ProjectivePoint:c,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Afe(t){return{hash:t,hmac:(e,...n)=>Gq(t,e,The(...n)),randomBytes:khe}}function xfe(t,e){const n=r=>Sfe({...t,...Afe(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lT=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ife=BigInt(1),lA=BigInt(2),uT=(t,e)=>(t+e/lA)/e;function Ofe(t){const e=nH,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Hs(u,n,e)*u%e,h=Hs(d,n,e)*u%e,f=Hs(h,lA,e)*l%e,p=Hs(f,i,e)*f%e,g=Hs(p,s,e)*p%e,m=Hs(g,a,e)*g%e,w=Hs(m,c,e)*m%e,b=Hs(w,a,e)*g%e,y=Hs(b,n,e)*u%e,_=Hs(y,o,e)*p%e,A=Hs(_,r,e)*l%e,T=Hs(A,lA,e);if(!uA.eql(uA.sqr(T),t))throw new Error("Cannot find square root");return T}const uA=Yq(nH,void 0,void 0,{sqrt:Ofe}),rH=xfe({a:BigInt(0),b:BigInt(7),Fp:uA,n:lT,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=lT,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ife*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=uT(s*t,e),c=uT(-r*t,e);let l=Vi(t-a*n-c*i,e),u=Vi(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Ghe);BigInt(0);rH.ProjectivePoint;const zUe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:rH},Symbol.toStringTag,{value:"Module"}));function Pfe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*s+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],y=0;for(let _=p-1;(b!==0||y<d)&&_!==-1;_--,y++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=y,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let w=r.repeat(u);for(;m<p;++m)w+=t.charAt(g[m]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*i+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let y=e[b];if(y===255)return;let _=0;for(let A=f-1;(y!==0||_<h)&&A!==-1;A--,_++)y+=n*p[A]>>>0,p[A]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)m[w++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Tfe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const kfe=Pfe(Tfe),Nfe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),$fe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Go(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return $fe(t)}catch{return t}}function ho(t){return typeof t=="string"?t:Nfe(t)||""}function Rfe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iH(t,...e){if(!Rfe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function dT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mfe(t,e){iH(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const of=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UC=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Dfe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function sH(t){return typeof t=="string"&&(t=Dfe(t)),iH(t),t}let Bfe=class{clone(){return this._cloneInto()}};function Lfe(t){const e=r=>t().update(sH(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function oH(t=32){if(of&&typeof of.getRandomValues=="function")return of.getRandomValues(new Uint8Array(t));if(of&&typeof of.randomBytes=="function")return of.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Ufe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let jfe=class extends Bfe{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=UC(this.buffer)}update(e){dT(this);const{view:n,buffer:r,blockLen:i}=this;e=sH(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=UC(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dT(this),Mfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;Ufe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=UC(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const T1=BigInt(2**32-1),dA=BigInt(32);function aH(t,e=!1){return e?{h:Number(t&T1),l:Number(t>>dA&T1)}:{h:Number(t>>dA&T1)|0,l:Number(t&T1)|0}}function Ffe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=aH(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const qfe=(t,e)=>BigInt(t>>>0)<<dA|BigInt(e>>>0),Hfe=(t,e,n)=>t>>>n,zfe=(t,e,n)=>t<<32-n|e>>>n,Kfe=(t,e,n)=>t>>>n|e<<32-n,Vfe=(t,e,n)=>t<<32-n|e>>>n,Wfe=(t,e,n)=>t<<64-n|e>>>n-32,Gfe=(t,e,n)=>t>>>n-32|e<<64-n,Zfe=(t,e)=>e,Yfe=(t,e)=>t,Qfe=(t,e,n)=>t<<n|e>>>32-n,Jfe=(t,e,n)=>e<<n|t>>>32-n,Xfe=(t,e,n)=>e<<n-32|t>>>64-n,epe=(t,e,n)=>t<<n-32|e>>>64-n;function tpe(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const npe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),rpe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ipe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),spe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,ope=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),ape=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,ct={fromBig:aH,split:Ffe,toBig:qfe,shrSH:Hfe,shrSL:zfe,rotrSH:Kfe,rotrSL:Vfe,rotrBH:Wfe,rotrBL:Gfe,rotr32H:Zfe,rotr32L:Yfe,rotlSH:Qfe,rotlSL:Jfe,rotlBH:Xfe,rotlBL:epe,add:tpe,add3L:npe,add3H:rpe,add4L:ipe,add4H:spe,add5H:ape,add5L:ope},[cpe,lpe]=ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),wl=new Uint32Array(80),yl=new Uint32Array(80);let upe=class extends jfe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,i,s,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let y=0;y<16;y++,n+=4)wl[y]=e.getUint32(n),yl[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const _=wl[y-15]|0,A=yl[y-15]|0,T=ct.rotrSH(_,A,1)^ct.rotrSH(_,A,8)^ct.shrSH(_,A,7),$=ct.rotrSL(_,A,1)^ct.rotrSL(_,A,8)^ct.shrSL(_,A,7),D=wl[y-2]|0,O=yl[y-2]|0,j=ct.rotrSH(D,O,19)^ct.rotrBH(D,O,61)^ct.shrSH(D,O,6),F=ct.rotrSL(D,O,19)^ct.rotrBL(D,O,61)^ct.shrSL(D,O,6),L=ct.add4L($,F,yl[y-7],yl[y-16]),B=ct.add4H(L,T,j,wl[y-7],wl[y-16]);wl[y]=B|0,yl[y]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:b}=this;for(let y=0;y<80;y++){const _=ct.rotrSH(d,h,14)^ct.rotrSH(d,h,18)^ct.rotrBH(d,h,41),A=ct.rotrSL(d,h,14)^ct.rotrSL(d,h,18)^ct.rotrBL(d,h,41),T=d&f^~d&g,$=h&p^~h&m,D=ct.add5L(b,A,$,lpe[y],yl[y]),O=ct.add5H(D,w,_,T,cpe[y],wl[y]),j=D|0,F=ct.rotrSH(r,i,28)^ct.rotrBH(r,i,34)^ct.rotrBH(r,i,39),L=ct.rotrSL(r,i,28)^ct.rotrBL(r,i,34)^ct.rotrBL(r,i,39),B=r&s^r&a^s&a,x=i&o^i&c^o&c;w=g|0,b=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=ct.add(l|0,u|0,O|0,j|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const v=ct.add3L(j,L,x);r=ct.add3H(v,O,F,B),i=v|0}({h:r,l:i}=ct.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ct.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ct.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ct.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ct.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ct.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=ct.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:b}=ct.add(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,i,s,o,a,c,l,u,d,h,f,p,g,m,w,b)}roundClean(){wl.fill(0),yl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const dpe=Lfe(()=>new upe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q8=BigInt(0),cH=BigInt(1),hpe=BigInt(2);function H8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z8(t){if(!H8(t))throw new Error("Uint8Array expected")}function jC(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const fpe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function K8(t){z8(t);let e="";for(let n=0;n<t.length;n++)e+=fpe[t[n]];return e}function lH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?q8:BigInt("0x"+t)}const nc={_0:48,_9:57,A:65,F:70,a:97,f:102};function hT(t){if(t>=nc._0&&t<=nc._9)return t-nc._0;if(t>=nc.A&&t<=nc.F)return t-(nc.A-10);if(t>=nc.a&&t<=nc.f)return t-(nc.a-10)}function uH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=hT(t.charCodeAt(s)),a=hT(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function ppe(t){return lH(K8(t))}function Fb(t){return z8(t),lH(K8(Uint8Array.from(t).reverse()))}function dH(t,e){return uH(t.toString(16).padStart(e*2,"0"))}function hA(t,e){return dH(t,e).reverse()}function rc(t,e,n){let r;if(typeof e=="string")try{r=uH(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(H8(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function fT(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];z8(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const FC=t=>typeof t=="bigint"&&q8<=t;function gpe(t,e,n){return FC(t)&&FC(e)&&FC(n)&&e<=t&&t<n}function A0(t,e,n,r){if(!gpe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function mpe(t){let e;for(e=0;t>q8;t>>=cH,e+=1);return e}const wpe=t=>(hpe<<BigInt(t-1))-cH,ype={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||H8(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function V8(t,e,n={}){const r=(i,s,o)=>{const a=ype[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function pT(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Ir=BigInt(0),Bn=BigInt(1),fd=BigInt(2),bpe=BigInt(3),fA=BigInt(4),gT=BigInt(5),mT=BigInt(8);function tr(t,e){const n=t%e;return n>=Ir?n:e+n}function vpe(t,e,n){if(e<Ir)throw new Error("invalid exponent, negatives unsupported");if(n<=Ir)throw new Error("invalid modulus");if(n===Bn)return Ir;let r=Bn;for(;e>Ir;)e&Bn&&(r=r*t%n),t=t*t%n,e>>=Bn;return r}function ia(t,e,n){let r=t;for(;e-- >Ir;)r*=r,r%=n;return r}function wT(t,e){if(t===Ir)throw new Error("invert: expected non-zero number");if(e<=Ir)throw new Error("invert: expected positive modulus, got "+e);let n=tr(t,e),r=e,i=Ir,s=Bn;for(;n!==Ir;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==Bn)throw new Error("invert: does not exist");return tr(i,e)}function Epe(t){const e=(t-Bn)/fd;let n,r,i;for(n=t-Bn,r=0;n%fd===Ir;n/=fd,r++);for(i=fd;i<t&&vpe(i,e,t)!==t-Bn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Bn)/fA;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+Bn)/fd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Bn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Cpe(t){if(t%fA===bpe){const e=(t+Bn)/fA;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%mT===gT){const e=(t-gT)/mT;return function(n,r){const i=n.mul(r,fd),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,fd),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Epe(t)}const _pe=(t,e)=>(tr(t,e)&Bn)===Bn,Spe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ape(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Spe.reduce((r,i)=>(r[i]="function",r),e);return V8(t,n)}function xpe(t,e,n){if(n<Ir)throw new Error("invalid exponent, negatives unsupported");if(n===Ir)return t.ONE;if(n===Bn)return e;let r=t.ONE,i=e;for(;n>Ir;)n&Bn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Bn;return r}function Ipe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function hH(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function fH(t,e,n=!1,r={}){if(t<=Ir)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=hH(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:wpe(i),ZERO:Ir,ONE:Bn,create:c=>tr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ir<=c&&c<t},is0:c=>c===Ir,isOdd:c=>(c&Bn)===Bn,neg:c=>tr(-c,t),eql:(c,l)=>c===l,sqr:c=>tr(c*c,t),add:(c,l)=>tr(c+l,t),sub:(c,l)=>tr(c-l,t),mul:(c,l)=>tr(c*l,t),pow:(c,l)=>xpe(a,c,l),div:(c,l)=>tr(c*wT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>wT(c,t),sqrt:r.sqrt||(c=>(o||(o=Cpe(t)),o(a,c))),invertBatch:c=>Ipe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?hA(c,s):dH(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?Fb(c):ppe(c)}});return Object.freeze(a)}const yT=BigInt(0),k1=BigInt(1);function qC(t,e){const n=e.negate();return t?n:e}function pH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function HC(t,e){pH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Ope(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Ppe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zC=new WeakMap,gH=new WeakMap;function KC(t){return gH.get(t)||1}function Tpe(t,e){return{constTimeNegate:qC,hasPrecomputes(n){return KC(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>yT;)r&k1&&(i=i.add(s)),s=s.double(),r>>=k1;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=HC(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=HC(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=k1);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(qC(w,r[g])):a=a.add(qC(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=HC(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===yT)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=k1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=zC.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&zC.set(r,i(s))),s},wNAFCached(n,r,i){const s=KC(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=KC(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){pH(r,e),gH.set(n,r),zC.delete(n)}}}function kpe(t,e,n,r){if(Ope(n,t),Ppe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=mpe(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Npe(t){return Ape(t.Fp),V8(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hH(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const vo=BigInt(0),Ni=BigInt(1),N1=BigInt(2),$pe=BigInt(8),Rpe={zip215:!0};function Mpe(t){const e=Npe(t);return V8(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Dpe(t){const e=Mpe(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=N1<<BigInt(a*8)-Ni,u=n.create,d=fH(e.n,e.nBitLength),h=e.uvRatio||((v,S)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(S))}}catch{return{isValid:!1,value:vo}}}),f=e.adjustScalarBytes||(v=>v),p=e.domain||((v,S,N)=>{if(jC("phflag",N),S.length||N)throw new Error("Contexts/pre-hash are not supported");return v});function g(v,S){A0("coordinate "+v,S,vo,l)}function m(v){if(!(v instanceof y))throw new Error("ExtendedPoint expected")}const w=pT((v,S)=>{const{ex:N,ey:E,ez:C}=v,P=v.is0();S==null&&(S=P?$pe:n.inv(C));const M=u(N*S),I=u(E*S),k=u(C*S);if(P)return{x:vo,y:Ni};if(k!==Ni)throw new Error("invZ was invalid");return{x:M,y:I}}),b=pT(v=>{const{a:S,d:N}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:E,ey:C,ez:P,et:M}=v,I=u(E*E),k=u(C*C),R=u(P*P),U=u(R*R),q=u(I*S),H=u(R*u(q+k)),z=u(U+u(N*u(I*k)));if(H!==z)throw new Error("bad point: equation left != right (1)");const K=u(E*C),G=u(P*M);if(K!==G)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(S,N,E,C){this.ex=S,this.ey=N,this.ez=E,this.et=C,g("x",S),g("y",N),g("z",E),g("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof y)throw new Error("extended point not allowed");const{x:N,y:E}=S||{};return g("x",N),g("y",E),new y(N,E,Ni,u(N*E))}static normalizeZ(S){const N=n.invertBatch(S.map(E=>E.ez));return S.map((E,C)=>E.toAffine(N[C])).map(y.fromAffine)}static msm(S,N){return kpe(y,d,S,N)}_setWindowSize(S){T.setWindowSize(this,S)}assertValidity(){b(this)}equals(S){m(S);const{ex:N,ey:E,ez:C}=this,{ex:P,ey:M,ez:I}=S,k=u(N*I),R=u(P*C),U=u(E*I),q=u(M*C);return k===R&&U===q}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:N,ey:E,ez:C}=this,P=u(N*N),M=u(E*E),I=u(N1*u(C*C)),k=u(S*P),R=N+E,U=u(u(R*R)-P-M),q=k+M,H=q-I,z=k-M,K=u(U*H),G=u(q*z),Y=u(U*z),X=u(H*q);return new y(K,G,X,Y)}add(S){m(S);const{a:N,d:E}=e,{ex:C,ey:P,ez:M,et:I}=this,{ex:k,ey:R,ez:U,et:q}=S;if(N===BigInt(-1)){const Me=u((P-C)*(R+k)),Qe=u((P+C)*(R-k)),et=u(Qe-Me);if(et===vo)return this.double();const ze=u(M*N1*q),Ye=u(I*N1*U),Je=Ye+ze,ne=Qe+Me,le=Ye-ze,ke=u(Je*et),qe=u(ne*le),mn=u(Je*le),Ds=u(et*ne);return new y(ke,qe,Ds,mn)}const H=u(C*k),z=u(P*R),K=u(I*E*q),G=u(M*U),Y=u((C+P)*(k+R)-H-z),X=G-K,ie=G+K,de=u(z-N*H),Se=u(Y*X),Ee=u(ie*de),Ae=u(Y*de),Re=u(X*ie);return new y(Se,Ee,Re,Ae)}subtract(S){return this.add(S.negate())}wNAF(S){return T.wNAFCached(this,S,y.normalizeZ)}multiply(S){const N=S;A0("scalar",N,Ni,r);const{p:E,f:C}=this.wNAF(N);return y.normalizeZ([E,C])[0]}multiplyUnsafe(S,N=y.ZERO){const E=S;return A0("scalar",E,vo,r),E===vo?A:this.is0()||E===Ni?this:T.wNAFCachedUnsafe(this,E,y.normalizeZ,N)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(S){return w(this,S)}clearCofactor(){const{h:S}=e;return S===Ni?this:this.multiplyUnsafe(S)}static fromHex(S,N=!1){const{d:E,a:C}=e,P=n.BYTES;S=rc("pointHex",S,P),jC("zip215",N);const M=S.slice(),I=S[P-1];M[P-1]=I&-129;const k=Fb(M),R=N?l:n.ORDER;A0("pointHex.y",k,vo,R);const U=u(k*k),q=u(U-Ni),H=u(E*U-C);let{isValid:z,value:K}=h(q,H);if(!z)throw new Error("Point.fromHex: invalid y coordinate");const G=(K&Ni)===Ni,Y=(I&128)!==0;if(!N&&K===vo&&Y)throw new Error("Point.fromHex: x=0 and x_0=1");return Y!==G&&(K=u(-K)),y.fromAffine({x:K,y:k})}static fromPrivateKey(S){return O(S).point}toRawBytes(){const{x:S,y:N}=this.toAffine(),E=hA(N,n.BYTES);return E[E.length-1]|=S&Ni?128:0,E}toHex(){return K8(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,Ni,u(e.Gx*e.Gy)),y.ZERO=new y(vo,Ni,Ni,vo);const{BASE:_,ZERO:A}=y,T=Tpe(y,a*8);function $(v){return tr(v,r)}function D(v){return $(Fb(v))}function O(v){const S=n.BYTES;v=rc("private key",v,S);const N=rc("hashed private key",s(v),2*S),E=f(N.slice(0,S)),C=N.slice(S,2*S),P=D(E),M=_.multiply(P),I=M.toRawBytes();return{head:E,prefix:C,scalar:P,point:M,pointBytes:I}}function j(v){return O(v).pointBytes}function F(v=new Uint8Array,...S){const N=fT(...S);return D(s(p(N,rc("context",v),!!i)))}function L(v,S,N={}){v=rc("message",v),i&&(v=i(v));const{prefix:E,scalar:C,pointBytes:P}=O(S),M=F(N.context,E,v),I=_.multiply(M).toRawBytes(),k=F(N.context,I,P,v),R=$(M+k*C);A0("signature.s",R,vo,r);const U=fT(I,hA(R,n.BYTES));return rc("result",U,n.BYTES*2)}const B=Rpe;function x(v,S,N,E=B){const{context:C,zip215:P}=E,M=n.BYTES;v=rc("signature",v,2*M),S=rc("message",S),N=rc("publicKey",N,M),P!==void 0&&jC("zip215",P),i&&(S=i(S));const I=Fb(v.slice(M,2*M));let k,R,U;try{k=y.fromHex(N,P),R=y.fromHex(v.slice(0,M),P),U=_.multiplyUnsafe(I)}catch{return!1}if(!P&&k.isSmallOrder())return!1;const q=F(C,R.toRawBytes(),k.toRawBytes(),S);return R.add(k.multiplyUnsafe(q)).subtract(U).clearCofactor().equals(y.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:L,verify:x,ExtendedPoint:y,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(n.BYTES),precompute(v=8,S=y.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const W8=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),bT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Bpe=BigInt(1),vT=BigInt(2);BigInt(3);const Lpe=BigInt(5),Upe=BigInt(8);function jpe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=W8,o=t*t%s*t%s,a=ia(o,vT,s)*o%s,c=ia(a,Bpe,s)*t%s,l=ia(c,Lpe,s)*c%s,u=ia(l,e,s)*l%s,d=ia(u,n,s)*u%s,h=ia(d,r,s)*d%s,f=ia(h,i,s)*h%s,p=ia(f,i,s)*h%s,g=ia(p,e,s)*l%s;return{pow_p_5_8:ia(g,vT,s)*t%s,b2:o}}function Fpe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function qpe(t,e){const n=W8,r=tr(e*e*e,n),i=tr(r*r*e,n),s=jpe(t*i).pow_p_5_8;let o=tr(t*r*s,n);const a=tr(e*o*o,n),c=o,l=tr(o*bT,n),u=a===t,d=a===tr(-t,n),h=a===tr(-t*bT,n);return u&&(o=c),(d||h)&&(o=l),_pe(o,n)&&(o=tr(-o,n)),{isValid:u||d,value:o}}const Hpe=fH(W8,void 0,!0),zpe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hpe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Upe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:dpe,randomBytes:oH,adjustScalarBytes:Fpe,uvRatio:qpe},mH=Dpe(zpe),Kpe="EdDSA",Vpe="JWT",Qv=".",xE="base64url",wH="utf8",yH="utf8",Wpe=":",Gpe="did",Zpe="key",ET="base58btc",Ype="z",Qpe="K36",Jpe=32;function G8(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function bH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?G8(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function vH(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=bH(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return G8(n)}function Xpe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var y=(b-w)*u+1>>>0,_=new Uint8Array(y);w!==b;){for(var A=p[w],T=0,$=y-1;(A!==0||T<m)&&$!==-1;$--,T++)A+=256*_[$]>>>0,_[$]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,w++}for(var D=y-m;D!==y&&_[D]===0;)D++;for(var O=c.repeat(g);D<y;++D)O+=t.charAt(_[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,y=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=b-1;(_!==0||A<w)&&T!==-1;T--,A++)_+=a*y[T]>>>0,y[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=A,g++}if(p[g]!==" "){for(var $=b-w;$!==b&&y[$]===0;)$++;for(var D=new Uint8Array(m+(b-$)),O=m;$!==b;)D[O++]=y[$++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var ege=Xpe,tge=ege;const EH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nge=t=>new TextEncoder().encode(t),rge=t=>new TextDecoder().decode(t);let ige=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},sge=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return CH(this,e)}},oge=class{constructor(e){this.decoders=e}or(e){return CH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const CH=(t,e)=>new oge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let age=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new ige(e,n,r),this.decoder=new sge(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const IE=({name:t,prefix:e,encode:n,decode:r})=>new age(t,e,n,r),Qw=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=tge(n,e);return IE({prefix:t,name:e,encode:r,decode:s=>EH(i(s))})},cge=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lge=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Kr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>IE({prefix:e,name:t,encode(i){return lge(i,r,n)},decode(i){return cge(i,r,n,t)}}),uge=IE({prefix:"\0",name:"identity",encode:t=>rge(t),decode:t=>nge(t)});var dge=Object.freeze({__proto__:null,identity:uge});const hge=Kr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fge=Object.freeze({__proto__:null,base2:hge});const pge=Kr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gge=Object.freeze({__proto__:null,base8:pge});const mge=Qw({prefix:"9",name:"base10",alphabet:"0123456789"});var wge=Object.freeze({__proto__:null,base10:mge});const yge=Kr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bge=Kr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vge=Object.freeze({__proto__:null,base16:yge,base16upper:bge});const Ege=Kr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cge=Kr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_ge=Kr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sge=Kr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Age=Kr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xge=Kr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ige=Kr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oge=Kr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pge=Kr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tge=Object.freeze({__proto__:null,base32:Ege,base32upper:Cge,base32pad:_ge,base32padupper:Sge,base32hex:Age,base32hexupper:xge,base32hexpad:Ige,base32hexpadupper:Oge,base32z:Pge});const kge=Qw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Nge=Qw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $ge=Object.freeze({__proto__:null,base36:kge,base36upper:Nge});const Rge=Qw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mge=Qw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Dge=Object.freeze({__proto__:null,base58btc:Rge,base58flickr:Mge});const Bge=Kr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lge=Kr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Uge=Kr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jge=Kr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fge=Object.freeze({__proto__:null,base64:Bge,base64pad:Lge,base64url:Uge,base64urlpad:jge});const _H=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),qge=_H.reduce((t,e,n)=>(t[n]=e,t),[]),Hge=_H.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function zge(t){return t.reduce((e,n)=>(e+=qge[n],e),"")}function Kge(t){const e=[];for(const n of t){const r=Hge[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Vge=IE({prefix:"🚀",name:"base256emoji",encode:zge,decode:Kge});var Wge=Object.freeze({__proto__:null,base256emoji:Vge}),Gge=SH,CT=128,Zge=-128,Yge=Math.pow(2,31);function SH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Yge;)e[n++]=t&255|CT,t/=128;for(;t&Zge;)e[n++]=t&255|CT,t>>>=7;return e[n]=t|0,SH.bytes=n-r+1,e}var Qge=pA,Jge=128,_T=127;function pA(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw pA.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&_T)<<i:(o&_T)*Math.pow(2,i),i+=7}while(o>=Jge);return pA.bytes=s-r,n}var Xge=Math.pow(2,7),e0e=Math.pow(2,14),t0e=Math.pow(2,21),n0e=Math.pow(2,28),r0e=Math.pow(2,35),i0e=Math.pow(2,42),s0e=Math.pow(2,49),o0e=Math.pow(2,56),a0e=Math.pow(2,63),c0e=function(t){return t<Xge?1:t<e0e?2:t<t0e?3:t<n0e?4:t<r0e?5:t<i0e?6:t<s0e?7:t<o0e?8:t<a0e?9:10},l0e={encode:Gge,decode:Qge,encodingLength:c0e},AH=l0e;const ST=(t,e,n=0)=>(AH.encode(t,e,n),e),AT=t=>AH.encodingLength(t),gA=(t,e)=>{const n=e.byteLength,r=AT(t),i=r+AT(n),s=new Uint8Array(i+n);return ST(t,s,0),ST(n,s,r),s.set(e,i),new u0e(t,n,e,s)};let u0e=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const xH=({name:t,code:e,encode:n})=>new d0e(t,e,n);let d0e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?gA(this.code,n):n.then(r=>gA(this.code,r))}else throw Error("Unknown type, must be binary type")}};const IH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),h0e=xH({name:"sha2-256",code:18,encode:IH("SHA-256")}),f0e=xH({name:"sha2-512",code:19,encode:IH("SHA-512")});var p0e=Object.freeze({__proto__:null,sha256:h0e,sha512:f0e});const OH=0,g0e="identity",PH=EH,m0e=t=>gA(OH,PH(t)),w0e={code:OH,name:g0e,encode:PH,digest:m0e};var y0e=Object.freeze({__proto__:null,identity:w0e});new TextEncoder,new TextDecoder;const xT={...dge,...fge,...gge,...wge,...vge,...Tge,...$ge,...Dge,...Fge,...Wge};({...p0e,...y0e});function TH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const IT=TH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),VC=TH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=bH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),kH={utf8:IT,"utf-8":IT,hex:xT.base16,latin1:VC,ascii:VC,binary:VC,...xT};function OE(t,e="utf8"){const n=kH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Jg(t,e="utf8"){const n=kH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?G8(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function OT(t){return Go(OE(Jg(t,xE),wH))}function Jv(t){return OE(Jg(ho(t),wH),xE)}function Z8(t){const e=Jg(Qpe,ET),n=Ype+OE(vH([e,t]),ET);return[Gpe,Zpe,n].join(Wpe)}function b0e(t){return OE(t,xE)}function v0e(t){return Jg(t,xE)}function E0e(t){return Jg([Jv(t.header),Jv(t.payload)].join(Qv),yH)}function C0e(t){return[Jv(t.header),Jv(t.payload),b0e(t.signature)].join(Qv)}function hg(t){const e=t.split(Qv),n=OT(e[0]),r=OT(e[1]),i=v0e(e[2]),s=Jg(e.slice(0,2).join(Qv),yH);return{header:n,payload:r,signature:i,data:s}}function Xv(t=oH(Jpe)){const e=mH.getPublicKey(t);return{secretKey:vH([t,e]),publicKey:e}}async function NH(t,e,n,r,i=J.fromMiliseconds(Date.now())){const s={alg:Kpe,typ:Vpe},o=Z8(r.publicKey),a=i+n,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=E0e({header:s,payload:c}),u=mH.sign(l,r.secretKey.slice(0,32));return C0e({header:s,payload:c,signature:u})}function $H(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Na(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=$H(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function _0e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var y=(b-w)*u+1>>>0,_=new Uint8Array(y);w!==b;){for(var A=p[w],T=0,$=y-1;(A!==0||T<m)&&$!==-1;$--,T++)A+=256*_[$]>>>0,_[$]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,w++}for(var D=y-m;D!==y&&_[D]===0;)D++;for(var O=c.repeat(g);D<y;++D)O+=t.charAt(_[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,y=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=b-1;(_!==0||A<w)&&T!==-1;T--,A++)_+=a*y[T]>>>0,y[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=A,g++}if(p[g]!==" "){for(var $=b-w;$!==b&&y[$]===0;)$++;for(var D=new Uint8Array(m+(b-$)),O=m;$!==b;)D[O++]=y[$++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var S0e=_0e,A0e=S0e;const x0e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},I0e=t=>new TextEncoder().encode(t),O0e=t=>new TextDecoder().decode(t);class P0e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class T0e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RH(this,e)}}class k0e{constructor(e){this.decoders=e}or(e){return RH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const RH=(t,e)=>new k0e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class N0e{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new P0e(e,n,r),this.decoder=new T0e(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const PE=({name:t,prefix:e,encode:n,decode:r})=>new N0e(t,e,n,r),Jw=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=A0e(n,e);return PE({prefix:t,name:e,encode:r,decode:s=>x0e(i(s))})},$0e=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},R0e=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Vr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>PE({prefix:e,name:t,encode(i){return R0e(i,r,n)},decode(i){return $0e(i,r,n,t)}}),M0e=PE({prefix:"\0",name:"identity",encode:t=>O0e(t),decode:t=>I0e(t)}),D0e=Object.freeze(Object.defineProperty({__proto__:null,identity:M0e},Symbol.toStringTag,{value:"Module"})),B0e=Vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),L0e=Object.freeze(Object.defineProperty({__proto__:null,base2:B0e},Symbol.toStringTag,{value:"Module"})),U0e=Vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),j0e=Object.freeze(Object.defineProperty({__proto__:null,base8:U0e},Symbol.toStringTag,{value:"Module"})),F0e=Jw({prefix:"9",name:"base10",alphabet:"0123456789"}),q0e=Object.freeze(Object.defineProperty({__proto__:null,base10:F0e},Symbol.toStringTag,{value:"Module"})),H0e=Vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),z0e=Vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),K0e=Object.freeze(Object.defineProperty({__proto__:null,base16:H0e,base16upper:z0e},Symbol.toStringTag,{value:"Module"})),V0e=Vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),W0e=Vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),G0e=Vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Z0e=Vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Y0e=Vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Q0e=Vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J0e=Vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),X0e=Vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eme=Vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tme=Object.freeze(Object.defineProperty({__proto__:null,base32:V0e,base32hex:Y0e,base32hexpad:J0e,base32hexpadupper:X0e,base32hexupper:Q0e,base32pad:G0e,base32padupper:Z0e,base32upper:W0e,base32z:eme},Symbol.toStringTag,{value:"Module"})),nme=Jw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rme=Jw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ime=Object.freeze(Object.defineProperty({__proto__:null,base36:nme,base36upper:rme},Symbol.toStringTag,{value:"Module"})),sme=Jw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ome=Jw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ame=Object.freeze(Object.defineProperty({__proto__:null,base58btc:sme,base58flickr:ome},Symbol.toStringTag,{value:"Module"})),cme=Vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lme=Vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ume=Vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dme=Vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),hme=Object.freeze(Object.defineProperty({__proto__:null,base64:cme,base64pad:lme,base64url:ume,base64urlpad:dme},Symbol.toStringTag,{value:"Module"})),MH=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),fme=MH.reduce((t,e,n)=>(t[n]=e,t),[]),pme=MH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function gme(t){return t.reduce((e,n)=>(e+=fme[n],e),"")}function mme(t){const e=[];for(const n of t){const r=pme[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const wme=PE({prefix:"🚀",name:"base256emoji",encode:gme,decode:mme}),yme=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wme},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const PT={...D0e,...L0e,...j0e,...q0e,...K0e,...tme,...ime,...ame,...hme,...yme};function DH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const TT=DH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),WC=DH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=$H(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BH={utf8:TT,"utf-8":TT,hex:PT.base16,latin1:WC,ascii:WC,binary:WC,...PT};function yn(t,e="utf8"){const n=BH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function Gt(t,e="utf8"){const n=BH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const LH={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var bme={};const vme=":";function Tp(t){const[e,n]=t.split(vme);return{namespace:e,reference:n}}function kT(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const i=t[r];n.push(...i.accounts)}),n}function UH(t,e){return t.includes(":")?[t]:e.chains||[]}var Eme=Object.defineProperty,Cme=Object.defineProperties,_me=Object.getOwnPropertyDescriptors,NT=Object.getOwnPropertySymbols,Sme=Object.prototype.hasOwnProperty,Ame=Object.prototype.propertyIsEnumerable,$T=(t,e,n)=>e in t?Eme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RT=(t,e)=>{for(var n in e||(e={}))Sme.call(e,n)&&$T(t,n,e[n]);if(NT)for(var n of NT(e))Ame.call(e,n)&&$T(t,n,e[n]);return t},xme=(t,e)=>Cme(t,_me(e));const Ime="ReactNative",_s={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Ome="js";function e2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ju(){return!Is()&&!!Ww()&&navigator.product===Ime}function Pme(){return ju()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Tme(){return ju()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Xg(){return!e2()&&!!Ww()&&!!Is()}function Xw(){return ju()?_s.reactNative:e2()?_s.node:Xg()?_s.browser:_s.unknown}function MT(){var t;try{return ju()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function kme(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function Nme(t){var e,n;const r=jH();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),xme(RT(RT({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function jH(){return D8()||{name:"",description:"",url:"",icons:[""]}}function $me(){if(Xw()===_s.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Dq();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Rme(){var t;const e=Xw();return e===_s.browser?[e,((t=R8())==null?void 0:t.host)||"unknown"].join(":"):e}function FH(t,e,n){const r=$me(),i=Rme();return[[t,e].join("-"),[Ome,n].join("-"),r,i].join("/")}function Mme({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=FH(t,e,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=kme(l[1]||"",d);return l[0]+"?"+h}function Td(t,e){return t.filter(n=>e.includes(n)).length===t.length}function mA(t){return Object.fromEntries(t.entries())}function wA(t){return new Map(Object.entries(t))}function ad(t=J.FIVE_MINUTES,e){const n=J.toMiliseconds(t||J.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function cu(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function qH(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Dme(t){return qH("topic",t)}function Bme(t){return qH("id",t)}function HH(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Xn(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function jl(t){return Date.now()>=J.toMiliseconds(t)}function $t(t,e){return`${t}${e?`:${e}`:""}`}function $a(t=[],e=[]){return[...new Set([...t,...e])]}async function Lme({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i?.href;if(typeof s!="string")return;const o=Ume(s,t,e),a=Xw();if(a===_s.browser){if(!((r=Is())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}jme(o)}else a===_s.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function Ume(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${zme(r,!0)}`}else i=`${i}/wc?${r}`;return i}function jme(t){let e="_self";Hme()?e="_top":(qme()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Fme(t,e){let n="";try{if(Xg()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function DT(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function BT(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Y8(){return typeof process<"u"&&bme.IS_VITEST==="true"}function qme(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Hme(){try{return window.self!==window.top}catch{return!1}}function zme(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function zH(t){return Buffer.from(t,"base64").toString("utf-8")}function Kme(t){return new Promise(e=>setTimeout(e,t))}function sw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ey(t,...e){if(!Vme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Q8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");sw(t.outputLen),sw(t.blockLen)}function fg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KH(t,e){ey(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const $1=BigInt(2**32-1),LT=BigInt(32);function Wme(t,e=!1){return e?{h:Number(t&$1),l:Number(t>>LT&$1)}:{h:Number(t>>LT&$1)|0,l:Number(t&$1)|0}}function Gme(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Wme(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Zme=(t,e,n)=>t<<n|e>>>32-n,Yme=(t,e,n)=>e<<n|t>>>32-n,Qme=(t,e,n)=>e<<n-32|t>>>64-n,Jme=(t,e,n)=>t<<n-32|e>>>64-n,af=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Xme(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function GC(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sa(t,e){return t<<32-e|t>>>e}const UT=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ewe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function jT(t){for(let e=0;e<t.length;e++)t[e]=ewe(t[e])}function twe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function pg(t){return typeof t=="string"&&(t=twe(t)),ey(t),t}function nwe(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];ey(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let J8=class{clone(){return this._cloneInto()}};function VH(t){const e=r=>t().update(pg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function e0(t=32){if(af&&typeof af.getRandomValues=="function")return af.getRandomValues(new Uint8Array(t));if(af&&typeof af.randomBytes=="function")return af.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const WH=[],GH=[],ZH=[],rwe=BigInt(0),x0=BigInt(1),iwe=BigInt(2),swe=BigInt(7),owe=BigInt(256),awe=BigInt(113);for(let t=0,e=x0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],WH.push(2*(5*r+n)),GH.push((t+1)*(t+2)/2%64);let i=rwe;for(let s=0;s<7;s++)e=(e<<x0^(e>>swe)*awe)%owe,e&iwe&&(i^=x0<<(x0<<BigInt(s))-x0);ZH.push(i)}const[cwe,lwe]=Gme(ZH,!0),FT=(t,e,n)=>n>32?Qme(t,e,n):Zme(t,e,n),qT=(t,e,n)=>n>32?Jme(t,e,n):Yme(t,e,n);function uwe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=FT(l,u,1)^n[a],h=qT(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=GH[o],c=FT(i,s,a),l=qT(i,s,a),u=WH[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=cwe[r],t[1]^=lwe[r]}n.fill(0)}let dwe=class YH extends J8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Xme(this.state)}keccak(){UT||jT(this.state32),uwe(this.state32,this.rounds),UT||jT(this.state32),this.posOut=0,this.pos=0}update(e){fg(this);const{blockLen:n,state:r}=this;e=pg(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){fg(this,!1),ey(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KH(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new YH(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const hwe=(t,e,n)=>VH(()=>new dwe(e,t,n)),fwe=hwe(1,136,256/8),pwe="https://rpc.walletconnect.org/v1";function QH(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(fwe(n)).toString("hex")}async function gwe(t,e,n,r,i,s){switch(n.t){case"eip191":return await mwe(t,e,n.s);case"eip1271":return await wwe(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mwe(t,e,n){return(await PG({hash:QH(e),signature:n})).toLowerCase()===t.toLowerCase()}async function wwe(t,e,n,r,i,s){const o=Tp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=QH(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||pwe}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:ywe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function ywe(){return Date.now()+Math.floor(Math.random()*1e3)}function bwe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return kfe.encode(s)}var vwe=Object.defineProperty,Ewe=Object.defineProperties,Cwe=Object.getOwnPropertyDescriptors,HT=Object.getOwnPropertySymbols,_we=Object.prototype.hasOwnProperty,Swe=Object.prototype.propertyIsEnumerable,zT=(t,e,n)=>e in t?vwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Awe=(t,e)=>{for(var n in e||(e={}))_we.call(e,n)&&zT(t,n,e[n]);if(HT)for(var n of HT(e))Swe.call(e,n)&&zT(t,n,e[n]);return t},xwe=(t,e)=>Ewe(t,Cwe(e));const Iwe="did:pkh:",X8=t=>t?.split(":"),Owe=t=>{const e=t&&X8(t);if(e)return t.includes(Iwe)?e[3]:e[1]},yA=t=>{const e=t&&X8(t);if(e)return e[2]+":"+e[3]},t2=t=>{const e=t&&X8(t);if(e)return e.pop()};async function KT(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=JH(i,i.iss),o=t2(i.iss);return await gwe(o,s,r,yA(i.iss),n)}const JH=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=t2(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Owe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=qb(t.resources);if(p){const g=ow(p);i=Bwe(i,g)}return[n,r,"",i,"",s,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Pwe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Twe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ah(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function kwe(t,e,n,r={}){return n?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:Nwe(e,n,r)}}}function Nwe(t,e,n={}){e=e?.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function XH(t){return ah(t),`urn:recap:${Pwe(t).replace(/=/g,"")}`}function ow(t){const e=Twe(t.replace("urn:recap:",""));return ah(e),e}function $we(t,e,n){const r=kwe(t,e,n);return XH(r)}function Rwe(t){return t&&t.includes("urn:recap:")}function Mwe(t,e){const n=ow(t),r=ow(e),i=Dwe(n,r);return XH(i)}function Dwe(t,e){ah(t),ah(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=xwe(Awe({},r.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function Bwe(t="",e){ah(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function VT(t){var e;const n=ow(t);ah(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function WT(t){const e=ow(t);ah(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function qb(t){if(!t)return;const e=t?.[t.length-1];return Rwe(e)?e:void 0}function ZC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ez(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ys(t,...e){if(!ez(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lwe(t,e){ys(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ZT(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const _u=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Uwe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),jwe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jwe)throw new Error("Non little-endian hardware is not supported");function Fwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function bA(t){if(typeof t=="string")t=Fwe(t);else if(ez(t))t=vA(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function qwe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Hwe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const zwe=(t,e)=>{function n(r,...i){if(ys(r),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ys(l):ys(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&ys(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ys(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ys(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ys(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function YT(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Kwe(e))throw new Error("invalid output, must be aligned");return e}function QT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Kwe(t){return t.byteOffset%4===0}function vA(t){return Uint8Array.from(t)}function gg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const tz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Vwe=tz("expand 16-byte k"),Wwe=tz("expand 32-byte k"),Gwe=_u(Vwe),Zwe=_u(Wwe);function St(t,e){return t<<e|t>>>32-e}function EA(t){return t.byteOffset%4===0}const R1=64,Ywe=16,nz=2**32-1,JT=new Uint32Array;function Qwe(t,e,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(R1),u=_u(l),d=EA(i)&&EA(s),h=d?_u(i):JT,f=d?_u(s):JT;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=nz)throw new Error("arx: counter overflow");const g=Math.min(R1,c-p);if(d&&g===R1){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,b;w<Ywe;w++)b=m+w,f[b]=h[b]^u[w];p+=R1;continue}for(let m=0,w;m<g;m++)w=p+m,s[w]=i[w]^l[m];p+=g}}function Jwe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=qwe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ZC(i),ZC(o),ZT(s),ZT(n),(a,c,l,u,d=0)=>{ys(a),ys(c),ys(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ys(u),ZC(d),d<0||d>=nz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=vA(a)),m=Zwe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=Gwe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);EA(c)||f.push(c=vA(c));const w=_u(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,w,_u(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,s?0:12-c.length),c=_,f.push(c)}const y=_u(c);return Qwe(t,m,w,y,l,u,d,o),gg(...f),u}}const Nr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let Xwe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=bA(e),ys(e,32);const n=Nr(e,0),r=Nr(e,2),i=Nr(e,4),s=Nr(e,6),o=Nr(e,8),a=Nr(e,10),c=Nr(e,12),l=Nr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Nr(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],w=Nr(e,n+0),b=Nr(e,n+2),y=Nr(e,n+4),_=Nr(e,n+6),A=Nr(e,n+8),T=Nr(e,n+10),$=Nr(e,n+12),D=Nr(e,n+14);let O=s[0]+(w&8191),j=s[1]+((w>>>13|b<<3)&8191),F=s[2]+((b>>>10|y<<6)&8191),L=s[3]+((y>>>7|_<<9)&8191),B=s[4]+((_>>>4|A<<12)&8191),x=s[5]+(A>>>1&8191),v=s[6]+((A>>>14|T<<2)&8191),S=s[7]+((T>>>11|$<<5)&8191),N=s[8]+(($>>>8|D<<8)&8191),E=s[9]+(D>>>5|i),C=0,P=C+O*a+j*(5*m)+F*(5*g)+L*(5*p)+B*(5*f);C=P>>>13,P&=8191,P+=x*(5*h)+v*(5*d)+S*(5*u)+N*(5*l)+E*(5*c),C+=P>>>13,P&=8191;let M=C+O*c+j*a+F*(5*m)+L*(5*g)+B*(5*p);C=M>>>13,M&=8191,M+=x*(5*f)+v*(5*h)+S*(5*d)+N*(5*u)+E*(5*l),C+=M>>>13,M&=8191;let I=C+O*l+j*c+F*a+L*(5*m)+B*(5*g);C=I>>>13,I&=8191,I+=x*(5*p)+v*(5*f)+S*(5*h)+N*(5*d)+E*(5*u),C+=I>>>13,I&=8191;let k=C+O*u+j*l+F*c+L*a+B*(5*m);C=k>>>13,k&=8191,k+=x*(5*g)+v*(5*p)+S*(5*f)+N*(5*h)+E*(5*d),C+=k>>>13,k&=8191;let R=C+O*d+j*u+F*l+L*c+B*a;C=R>>>13,R&=8191,R+=x*(5*m)+v*(5*g)+S*(5*p)+N*(5*f)+E*(5*h),C+=R>>>13,R&=8191;let U=C+O*h+j*d+F*u+L*l+B*c;C=U>>>13,U&=8191,U+=x*a+v*(5*m)+S*(5*g)+N*(5*p)+E*(5*f),C+=U>>>13,U&=8191;let q=C+O*f+j*h+F*d+L*u+B*l;C=q>>>13,q&=8191,q+=x*c+v*a+S*(5*m)+N*(5*g)+E*(5*p),C+=q>>>13,q&=8191;let H=C+O*p+j*f+F*h+L*d+B*u;C=H>>>13,H&=8191,H+=x*l+v*c+S*a+N*(5*m)+E*(5*g),C+=H>>>13,H&=8191;let z=C+O*g+j*p+F*f+L*h+B*d;C=z>>>13,z&=8191,z+=x*u+v*l+S*c+N*a+E*(5*m),C+=z>>>13,z&=8191;let K=C+O*m+j*g+F*p+L*f+B*h;C=K>>>13,K&=8191,K+=x*d+v*u+S*l+N*c+E*a,C+=K>>>13,K&=8191,C=(C<<2)+C|0,C=C+P|0,P=C&8191,C=C>>>13,M+=C,s[0]=P,s[1]=M,s[2]=I,s[3]=k,s[4]=R,s[5]=U,s[6]=q,s[7]=H,s[8]=z,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;gg(r)}update(e){GT(this);const{buffer:n,blockLen:r}=this;e=bA(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){gg(this.h,this.r,this.buffer,this.pad)}digestInto(e){GT(this),Lwe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function eye(t){const e=(r,i)=>t(i).update(bA(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const tye=eye(t=>new Xwe(t));function nye(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],w=e[7],b=i,y=n[0],_=n[1],A=n[2],T=o,$=a,D=c,O=l,j=u,F=d,L=h,B=f,x=p,v=g,S=m,N=w,E=b,C=y,P=_,M=A;for(let k=0;k<s;k+=2)T=T+j|0,E=St(E^T,16),x=x+E|0,j=St(j^x,12),T=T+j|0,E=St(E^T,8),x=x+E|0,j=St(j^x,7),$=$+F|0,C=St(C^$,16),v=v+C|0,F=St(F^v,12),$=$+F|0,C=St(C^$,8),v=v+C|0,F=St(F^v,7),D=D+L|0,P=St(P^D,16),S=S+P|0,L=St(L^S,12),D=D+L|0,P=St(P^D,8),S=S+P|0,L=St(L^S,7),O=O+B|0,M=St(M^O,16),N=N+M|0,B=St(B^N,12),O=O+B|0,M=St(M^O,8),N=N+M|0,B=St(B^N,7),T=T+F|0,M=St(M^T,16),S=S+M|0,F=St(F^S,12),T=T+F|0,M=St(M^T,8),S=S+M|0,F=St(F^S,7),$=$+L|0,E=St(E^$,16),N=N+E|0,L=St(L^N,12),$=$+L|0,E=St(E^$,8),N=N+E|0,L=St(L^N,7),D=D+B|0,C=St(C^D,16),x=x+C|0,B=St(B^x,12),D=D+B|0,C=St(C^D,8),x=x+C|0,B=St(B^x,7),O=O+j|0,P=St(P^O,16),v=v+P|0,j=St(j^v,12),O=O+j|0,P=St(P^O,8),v=v+P|0,j=St(j^v,7);let I=0;r[I++]=o+T|0,r[I++]=a+$|0,r[I++]=c+D|0,r[I++]=l+O|0,r[I++]=u+j|0,r[I++]=d+F|0,r[I++]=h+L|0,r[I++]=f+B|0,r[I++]=p+x|0,r[I++]=g+v|0,r[I++]=m+S|0,r[I++]=w+N|0,r[I++]=b+E|0,r[I++]=y+C|0,r[I++]=_+P|0,r[I++]=A+M|0}const rye=Jwe(nye,{counterRight:!1,counterLength:4,allowShortKeys:!1}),iye=new Uint8Array(16),XT=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(iye.subarray(n))},sye=new Uint8Array(32);function ek(t,e,n,r,i){const s=t(e,n,sye),o=tye.create(s);i&&XT(o,i),XT(o,r);const a=new Uint8Array(16),c=Uwe(a);QT(c,0,BigInt(i?i.length:0),!0),QT(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return gg(s,a),l}const oye=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=YT(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const c=ek(t,e,n,a,r);return s.set(c,o),gg(c),s},decrypt(i,s){s=YT(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=ek(t,e,n,o,r);if(!Hwe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),gg(c),s}}),rz=zwe({blockSize:64,nonceLength:12,tagLength:16},oye(rye));let iz=class extends J8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Q8(e);const r=pg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return fg(this),this.iHash.update(e),this}digestInto(e){fg(this),ey(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const TE=(t,e,n)=>new iz(t,e).update(n).digest();TE.create=(t,e)=>new iz(t,e);function aye(t,e,n){return Q8(t),n===void 0&&(n=new Uint8Array(t.outputLen)),TE(t,pg(n),pg(e))}const YC=new Uint8Array([0]),tk=new Uint8Array;function cye(t,e,n,r=32){if(Q8(t),sw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=tk);const s=new Uint8Array(i*t.outputLen),o=TE.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)YC[0]=l+1,a.update(l===0?tk:c).update(n).update(YC).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),YC.fill(0),s.slice(0,r)}const lye=(t,e,n,r,i)=>cye(t,aye(t,e,n),r,i);function uye(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function dye(t,e,n){return t&e^~t&n}function hye(t,e,n){return t&e^t&n^e&n}let fye=class extends J8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=GC(this.buffer)}update(e){fg(this);const{view:n,buffer:r,blockLen:i}=this;e=pg(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=GC(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fg(this),KH(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;uye(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=GC(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const pye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vl=new Uint32Array(64);let gye=class extends fye{constructor(){super(64,32,8,!1),this.A=bl[0]|0,this.B=bl[1]|0,this.C=bl[2]|0,this.D=bl[3]|0,this.E=bl[4]|0,this.F=bl[5]|0,this.G=bl[6]|0,this.H=bl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)vl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=vl[d-15],f=vl[d-2],p=sa(h,7)^sa(h,18)^h>>>3,g=sa(f,17)^sa(f,19)^f>>>10;vl[d]=g+vl[d-7]+p+vl[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=sa(a,6)^sa(a,11)^sa(a,25),f=u+h+dye(a,c,l)+pye[d]+vl[d]|0,p=(sa(r,2)^sa(r,13)^sa(r,22))+hye(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){vl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ty=VH(()=>new gye);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kE=BigInt(0),NE=BigInt(1),mye=BigInt(2);function ch(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ny(t){if(!ch(t))throw new Error("Uint8Array expected")}function mg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const wye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wg(t){ny(t);let e="";for(let n=0;n<t.length;n++)e+=wye[t[n]];return e}function hp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ex(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?kE:BigInt("0x"+t)}const ic={_0:48,_9:57,A:65,F:70,a:97,f:102};function nk(t){if(t>=ic._0&&t<=ic._9)return t-ic._0;if(t>=ic.A&&t<=ic.F)return t-(ic.A-10);if(t>=ic.a&&t<=ic.f)return t-(ic.a-10)}function yg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=nk(t.charCodeAt(s)),a=nk(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Wd(t){return ex(wg(t))}function aw(t){return ny(t),ex(wg(Uint8Array.from(t).reverse()))}function bg(t,e){return yg(t.toString(16).padStart(e*2,"0"))}function $E(t,e){return bg(t,e).reverse()}function yye(t){return yg(hp(t))}function ps(t,e,n){let r;if(typeof e=="string")try{r=yg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ch(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function cw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];ny(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function bye(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function vye(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const QC=t=>typeof t=="bigint"&&kE<=t;function RE(t,e,n){return QC(t)&&QC(e)&&QC(n)&&e<=t&&t<n}function jc(t,e,n,r){if(!RE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function sz(t){let e;for(e=0;t>kE;t>>=NE,e+=1);return e}function Eye(t,e){return t>>BigInt(e)&NE}function Cye(t,e,n){return t|(n?NE:kE)<<BigInt(e)}const tx=t=>(mye<<BigInt(t-1))-NE,JC=t=>new Uint8Array(t),rk=t=>Uint8Array.from(t);function oz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=JC(t),i=JC(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=JC())=>{i=a(rk([0]),u),r=a(),u.length!==0&&(i=a(rk([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return cw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const _ye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ch(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function t0(t,e,n={}){const r=(i,s,o)=>{const a=_ye[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Sye=()=>{throw new Error("not implemented")};function CA(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}var Aye=Object.freeze({__proto__:null,isBytes:ch,abytes:ny,abool:mg,bytesToHex:wg,numberToHexUnpadded:hp,hexToNumber:ex,hexToBytes:yg,bytesToNumberBE:Wd,bytesToNumberLE:aw,numberToBytesBE:bg,numberToBytesLE:$E,numberToVarBytesBE:yye,ensureBytes:ps,concatBytes:cw,equalBytes:bye,utf8ToBytes:vye,inRange:RE,aInRange:jc,bitLen:sz,bitGet:Eye,bitSet:Cye,bitMask:tx,createHmacDrbg:oz,validateObject:t0,notImplemented:Sye,memoized:CA});const Or=BigInt(0),Ln=BigInt(1),pd=BigInt(2),xye=BigInt(3),_A=BigInt(4),ik=BigInt(5),sk=BigInt(8);function Wi(t,e){const n=t%e;return n>=Or?n:e+n}function az(t,e,n){if(e<Or)throw new Error("invalid exponent, negatives unsupported");if(n<=Or)throw new Error("invalid modulus");if(n===Ln)return Or;let r=Ln;for(;e>Or;)e&Ln&&(r=r*t%n),t=t*t%n,e>>=Ln;return r}function Po(t,e,n){let r=t;for(;e-- >Or;)r*=r,r%=n;return r}function SA(t,e){if(t===Or)throw new Error("invert: expected non-zero number");if(e<=Or)throw new Error("invert: expected positive modulus, got "+e);let n=Wi(t,e),r=e,i=Or,s=Ln;for(;n!==Or;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==Ln)throw new Error("invert: does not exist");return Wi(i,e)}function Iye(t){const e=(t-Ln)/pd;let n,r,i;for(n=t-Ln,r=0;n%pd===Or;n/=pd,r++);for(i=pd;i<t&&az(i,e,t)!==t-Ln;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Ln)/_A;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+Ln)/pd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Ln<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Oye(t){if(t%_A===xye){const e=(t+Ln)/_A;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%sk===ik){const e=(t-ik)/sk;return function(n,r){const i=n.mul(r,pd),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,pd),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Iye(t)}const Pye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Tye(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Pye.reduce((r,i)=>(r[i]="function",r),e);return t0(t,n)}function kye(t,e,n){if(n<Or)throw new Error("invalid exponent, negatives unsupported");if(n===Or)return t.ONE;if(n===Ln)return e;let r=t.ONE,i=e;for(;n>Or;)n&Ln&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Ln;return r}function Nye(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function cz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function lz(t,e,n=!1,r={}){if(t<=Or)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=cz(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:tx(i),ZERO:Or,ONE:Ln,create:c=>Wi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Or<=c&&c<t},is0:c=>c===Or,isOdd:c=>(c&Ln)===Ln,neg:c=>Wi(-c,t),eql:(c,l)=>c===l,sqr:c=>Wi(c*c,t),add:(c,l)=>Wi(c+l,t),sub:(c,l)=>Wi(c-l,t),mul:(c,l)=>Wi(c*l,t),pow:(c,l)=>kye(a,c,l),div:(c,l)=>Wi(c*SA(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>SA(c,t),sqrt:r.sqrt||(c=>(o||(o=Oye(t)),o(a,c))),invertBatch:c=>Nye(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?$E(c,s):bg(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?aw(c):Wd(c)}});return Object.freeze(a)}function uz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function dz(t){const e=uz(t);return e+Math.ceil(e/2)}function $ye(t,e,n=!1){const r=t.length,i=uz(e),s=dz(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?aw(t):Wd(t),a=Wi(o,e-Ln)+Ln;return n?$E(a,i):bg(a,i)}const ok=BigInt(0),M1=BigInt(1);function XC(t,e){const n=e.negate();return t?n:e}function hz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function e_(t,e){hz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Rye(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Mye(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const t_=new WeakMap,fz=new WeakMap;function n_(t){return fz.get(t)||1}function Dye(t,e){return{constTimeNegate:XC,hasPrecomputes(n){return n_(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>ok;)r&M1&&(i=i.add(s)),s=s.double(),r>>=M1;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=e_(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=e_(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=M1);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(XC(w,r[g])):a=a.add(XC(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=e_(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===ok)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=M1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=t_.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&t_.set(r,i(s))),s},wNAFCached(n,r,i){const s=n_(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=n_(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){hz(r,e),fz.set(n,r),t_.delete(n)}}}function Bye(t,e,n,r){if(Rye(n,t),Mye(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=sz(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function pz(t){return Tye(t.Fp),t0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const cf=BigInt(0),r_=BigInt(1);function Lye(t){return t0(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Uye(t){const e=Lye(t),{P:n}=e,r=b=>Wi(b,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>az(b,n-BigInt(2),n));function l(b,y,_){const A=r(b*(y-_));return y=r(y-A),_=r(_+A),[y,_]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,y){jc("u",b,cf,n),jc("scalar",y,cf,n);const _=y,A=b;let T=r_,$=cf,D=b,O=r_,j=cf,F;for(let B=BigInt(i-1);B>=cf;B--){const x=_>>B&r_;j^=x,F=l(j,T,D),T=F[0],D=F[1],F=l(j,$,O),$=F[0],O=F[1],j=x;const v=T+$,S=r(v*v),N=T-$,E=r(N*N),C=S-E,P=D+O,M=D-O,I=r(M*v),k=r(P*N),R=I+k,U=I-k;D=r(R*R),O=r(A*r(U*U)),T=r(S*E),$=r(C*(S+r(u*C)))}F=l(j,T,D),T=F[0],D=F[1],F=l(j,$,O),$=F[0],O=F[1];const L=c($);return r(T*L)}function h(b){return $E(r(b),s)}function f(b){const y=ps("u coordinate",b,s);return o===32&&(y[31]&=127),aw(y)}function p(b){const y=ps("scalar",b),_=y.length;if(_!==s&&_!==o){let A=""+s+" or "+o;throw new Error("invalid scalar, expected "+A+" bytes, got "+_)}return aw(a(y))}function g(b,y){const _=f(y),A=p(b),T=d(_,A);if(T===cf)throw new Error("invalid private or public key received");return h(T)}const m=h(e.Gu);function w(b){return g(b,m)}return{scalarMult:g,scalarMultBase:w,getSharedSecret:(b,y)=>g(b,y),getPublicKey:b=>w(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const AA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const jye=BigInt(1),ak=BigInt(2),Fye=BigInt(3),qye=BigInt(5);BigInt(8);function Hye(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=AA,o=t*t%s*t%s,a=Po(o,ak,s)*o%s,c=Po(a,jye,s)*t%s,l=Po(c,qye,s)*c%s,u=Po(l,e,s)*l%s,d=Po(u,n,s)*u%s,h=Po(d,r,s)*d%s,f=Po(h,i,s)*h%s,p=Po(f,i,s)*h%s,g=Po(p,e,s)*l%s;return{pow_p_5_8:Po(g,ak,s)*t%s,b2:o}}function zye(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const xA=Uye({P:AA,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=AA,{pow_p_5_8:n,b2:r}=Hye(t);return Wi(Po(n,Fye,e)*r,e)},adjustScalarBytes:zye,randomBytes:e0});function ck(t){t.lowS!==void 0&&mg("lowS",t.lowS),t.prehash!==void 0&&mg("prehash",t.prehash)}function Kye(t){const e=pz(t);t0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Vye,hexToBytes:Wye}=Aye;let Gye=class extends Error{constructor(e=""){super(e)}};const Cc={Err:Gye,_tlv:{encode:(t,e)=>{const{Err:n}=Cc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=hp(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?hp(i.length/2|128):"";return hp(t)+s+i+e},decode(t,e){const{Err:n}=Cc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Cc;if(t<Tc)throw new e("integer: negative integers are not allowed");let n=hp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Cc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Vye(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Cc,i=typeof t=="string"?Wye(t):t;ny(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Cc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Tc=BigInt(0),gr=BigInt(1);BigInt(2);const lk=BigInt(3);BigInt(4);function Zye(t){const e=Kye(t),{Fp:n}=e,r=lz(e.n,e.nBitLength),i=e.toBytes||((g,m,w)=>{const b=m.toAffine();return cw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:b}});function o(g){const{a:m,b:w}=e,b=n.sqr(g),y=n.mul(b,g);return n.add(n.add(y,n.mul(g,m)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return RE(g,gr,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:b,n:y}=e;if(m&&typeof g!="bigint"){if(ch(g)&&(g=wg(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let _;try{_=typeof g=="bigint"?g:Wd(ps("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return b&&(_=Wi(_,y)),jc("private key",_,gr,y),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=CA((g,m)=>{const{px:w,py:b,pz:y}=g;if(n.eql(y,n.ONE))return{x:w,y:b};const _=g.is0();m==null&&(m=_?n.ONE:n.inv(y));const A=n.mul(w,m),T=n.mul(b,m),$=n.mul(y,m);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:A,y:T}}),d=CA(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");const b=n.sqr(w),y=o(m);if(!n.eql(b,y))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,b){if(this.px=m,this.py=w,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:b}=m||{};if(!m||!n.isValid(w)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const y=_=>n.eql(_,n.ZERO);return y(w)&&y(b)?h.ZERO:new h(w,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=n.invertBatch(m.map(b=>b.pz));return m.map((b,y)=>b.toAffine(w[y])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(s(ps("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,w){return Bye(h,r,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m,$=n.eql(n.mul(w,T),n.mul(_,y)),D=n.eql(n.mul(b,T),n.mul(A,y));return $&&D}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,b=n.mul(w,lk),{px:y,py:_,pz:A}=this;let T=n.ZERO,$=n.ZERO,D=n.ZERO,O=n.mul(y,y),j=n.mul(_,_),F=n.mul(A,A),L=n.mul(y,_);return L=n.add(L,L),D=n.mul(y,A),D=n.add(D,D),T=n.mul(m,D),$=n.mul(b,F),$=n.add(T,$),T=n.sub(j,$),$=n.add(j,$),$=n.mul(T,$),T=n.mul(L,T),D=n.mul(b,D),F=n.mul(m,F),L=n.sub(O,F),L=n.mul(m,L),L=n.add(L,D),D=n.add(O,O),O=n.add(D,O),O=n.add(O,F),O=n.mul(O,L),$=n.add($,O),F=n.mul(_,A),F=n.add(F,F),O=n.mul(F,L),T=n.sub(T,O),D=n.mul(F,j),D=n.add(D,D),D=n.add(D,D),new h(T,$,D)}add(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m;let $=n.ZERO,D=n.ZERO,O=n.ZERO;const j=e.a,F=n.mul(e.b,lk);let L=n.mul(w,_),B=n.mul(b,A),x=n.mul(y,T),v=n.add(w,b),S=n.add(_,A);v=n.mul(v,S),S=n.add(L,B),v=n.sub(v,S),S=n.add(w,y);let N=n.add(_,T);return S=n.mul(S,N),N=n.add(L,x),S=n.sub(S,N),N=n.add(b,y),$=n.add(A,T),N=n.mul(N,$),$=n.add(B,x),N=n.sub(N,$),O=n.mul(j,S),$=n.mul(F,x),O=n.add($,O),$=n.sub(B,O),O=n.add(B,O),D=n.mul($,O),B=n.add(L,L),B=n.add(B,L),x=n.mul(j,x),S=n.mul(F,S),B=n.add(B,x),x=n.sub(L,x),x=n.mul(j,x),S=n.add(S,x),L=n.mul(B,S),D=n.add(D,L),L=n.mul(N,S),$=n.mul(v,$),$=n.sub($,L),L=n.mul(v,B),O=n.mul(N,O),O=n.add(O,L),new h($,D,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:b}=e;jc("scalar",m,Tc,b);const y=h.ZERO;if(m===Tc)return y;if(this.is0()||m===gr)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:_,k1:A,k2neg:T,k2:$}=w.splitScalar(m),D=y,O=y,j=this;for(;A>Tc||$>Tc;)A&gr&&(D=D.add(j)),$&gr&&(O=O.add(j)),j=j.double(),A>>=gr,$>>=gr;return _&&(D=D.negate()),T&&(O=O.negate()),O=new h(n.mul(O.px,w.beta),O.py,O.pz),D.add(O)}multiply(m){const{endo:w,n:b}=e;jc("scalar",m,gr,b);let y,_;if(w){const{k1neg:A,k1:T,k2neg:$,k2:D}=w.splitScalar(m);let{p:O,f:j}=this.wNAF(T),{p:F,f:L}=this.wNAF(D);O=p.constTimeNegate(A,O),F=p.constTimeNegate($,F),F=new h(n.mul(F.px,w.beta),F.py,F.pz),y=O.add(F),_=j.add(L)}else{const{p:A,f:T}=this.wNAF(m);y=A,_=T}return h.normalizeZ([y,_])[0]}multiplyAndAddUnsafe(m,w,b){const y=h.BASE,_=(T,$)=>$===Tc||$===gr||!T.equals(y)?T.multiplyUnsafe($):T.multiply($),A=_(this,w).add(_(m,b));return A.is0()?void 0:A}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===gr)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===gr?this:w?w(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return mg("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return mg("isCompressed",m),wg(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=Dye(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Yye(t){const e=pz(t);return t0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Qye(t){const e=Yye(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(x){return Wi(x,r)}function a(x){return SA(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=Zye({...e,toBytes(x,v,S){const N=v.toAffine(),E=n.toBytes(N.x),C=cw;return mg("isCompressed",S),S?C(Uint8Array.from([v.hasEvenY()?2:3]),E):C(Uint8Array.from([4]),E,n.toBytes(N.y))},fromBytes(x){const v=x.length,S=x[0],N=x.subarray(1);if(v===i&&(S===2||S===3)){const E=Wd(N);if(!RE(E,gr,n.ORDER))throw new Error("Point is not on curve");const C=u(E);let P;try{P=n.sqrt(C)}catch(I){const k=I instanceof Error?": "+I.message:"";throw new Error("Point is not on curve"+k)}const M=(P&gr)===gr;return(S&1)===1!==M&&(P=n.neg(P)),{x:E,y:P}}else if(v===s&&S===4){const E=n.fromBytes(N.subarray(0,n.BYTES)),C=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:E,y:C}}else{const E=i,C=s;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+C+", got "+v)}}}),h=x=>wg(bg(x,e.nByteLength));function f(x){const v=r>>gr;return x>v}function p(x){return f(x)?o(-x):x}const g=(x,v,S)=>Wd(x.slice(v,S));class m{constructor(v,S,N){this.r=v,this.s=S,this.recovery=N,this.assertValidity()}static fromCompact(v){const S=e.nByteLength;return v=ps("compactSignature",v,S*2),new m(g(v,0,S),g(v,S,2*S))}static fromDER(v){const{r:S,s:N}=Cc.toSig(ps("DER",v));return new m(S,N)}assertValidity(){jc("r",this.r,gr,r),jc("s",this.s,gr,r)}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:S,s:N,recovery:E}=this,C=T(ps("msgHash",v));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const P=E===2||E===3?S+e.n:S;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=E&1?"03":"02",I=c.fromHex(M+h(P)),k=a(P),R=o(-C*k),U=o(N*k),q=c.BASE.multiplyAndAddUnsafe(I,R,U);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return yg(this.toDERHex())}toDERHex(){return Cc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return yg(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=dz(e.n);return $ye(e.randomBytes(x),e.n)},precompute(x=8,v=c.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}};function b(x,v=!0){return c.fromPrivateKey(x).toRawBytes(v)}function y(x){const v=ch(x),S=typeof x=="string",N=(v||S)&&x.length;return v?N===i||N===s:S?N===2*i||N===2*s:x instanceof c}function _(x,v,S=!0){if(y(x))throw new Error("first arg must be private key");if(!y(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(l(x)).toRawBytes(S)}const A=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const v=Wd(x),S=x.length*8-e.nBitLength;return S>0?v>>BigInt(S):v},T=e.bits2int_modN||function(x){return o(A(x))},$=tx(e.nBitLength);function D(x){return jc("num < 2^"+e.nBitLength,x,Tc,$),bg(x,e.nByteLength)}function O(x,v,S=j){if(["recovered","canonical"].some(z=>z in S))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:E}=e;let{lowS:C,prehash:P,extraEntropy:M}=S;C==null&&(C=!0),x=ps("msgHash",x),ck(S),P&&(x=ps("prehashed msgHash",N(x)));const I=T(x),k=l(v),R=[D(k),D(I)];if(M!=null&&M!==!1){const z=M===!0?E(n.BYTES):M;R.push(ps("extraEntropy",z))}const U=cw(...R),q=I;function H(z){const K=A(z);if(!d(K))return;const G=a(K),Y=c.BASE.multiply(K).toAffine(),X=o(Y.x);if(X===Tc)return;const ie=o(G*o(q+X*k));if(ie===Tc)return;let de=(Y.x===X?0:2)|Number(Y.y&gr),Se=ie;return C&&f(ie)&&(Se=p(ie),de^=1),new m(X,Se,de)}return{seed:U,k2sig:H}}const j={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function L(x,v,S=j){const{seed:N,k2sig:E}=O(x,v,S),C=e;return oz(C.hash.outputLen,C.nByteLength,C.hmac)(N,E)}c.BASE._setWindowSize(8);function B(x,v,S,N=F){const E=x;v=ps("msgHash",v),S=ps("publicKey",S);const{lowS:C,prehash:P,format:M}=N;if(ck(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const I=typeof E=="string"||ch(E),k=!I&&!M&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!I&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let R,U;try{if(k&&(R=new m(E.r,E.s)),I){try{M!=="compact"&&(R=m.fromDER(E))}catch(ie){if(!(ie instanceof Cc.Err))throw ie}!R&&M!=="der"&&(R=m.fromCompact(E))}U=c.fromHex(S)}catch{return!1}if(!R||C&&R.hasHighS())return!1;P&&(v=e.hash(v));const{r:q,s:H}=R,z=T(v),K=a(H),G=o(z*K),Y=o(q*K),X=c.BASE.multiplyAndAddUnsafe(U,G,Y)?.toAffine();return X?o(X.x)===q:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:L,verify:B,ProjectivePoint:c,Signature:m,utils:w}}function Jye(t){return{hash:t,hmac:(e,...n)=>TE(t,e,nwe(...n)),randomBytes:e0}}function Xye(t,e){const n=r=>Qye({...t,...Jye(r)});return{...n(e),create:n}}const gz=lz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),e1e=gz.create(BigInt("-3")),t1e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),n1e=Xye({a:e1e,b:t1e,Fp:gz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ty),mz="base10",Ai="base16",Fo="base64pad",Wl="base64url",ry="utf8",wz=0,Fc=1,iy=2,r1e=0,uk=1,mm=12,nx=32;function i1e(){const t=xA.utils.randomPrivateKey(),e=xA.getPublicKey(t);return{privateKey:Gt(t,Ai),publicKey:Gt(e,Ai)}}function IA(){const t=e0(nx);return Gt(t,Ai)}function s1e(t,e){const n=xA.getSharedSecret(yn(t,Ai),yn(e,Ai)),r=lye(ty,n,void 0,void 0,nx);return Gt(r,Ai)}function Hb(t){const e=ty(yn(t,Ai));return Gt(e,Ai)}function ba(t){const e=ty(yn(t,ry));return Gt(e,Ai)}function yz(t){return yn(`${t}`,mz)}function lh(t){return Number(Gt(t,mz))}function bz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function vz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function o1e(t){const e=yz(typeof t.type<"u"?t.type:wz);if(lh(e)===Fc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?yn(t.senderPublicKey,Ai):void 0,r=typeof t.iv<"u"?yn(t.iv,Ai):e0(mm),i=yn(t.symKey,Ai),s=rz(i,r).encrypt(yn(t.message,ry)),o=Ez({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===Wl?bz(o):o}function a1e(t){const e=yn(t.symKey,Ai),{sealed:n,iv:r}=lw({encoded:t.encoded,encoding:t.encoding}),i=rz(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Gt(i,ry)}function c1e(t,e){const n=yz(iy),r=e0(mm),i=yn(t,ry),s=Ez({type:n,sealed:i,iv:r});return e===Wl?bz(s):s}function l1e(t,e){const{sealed:n}=lw({encoded:t,encoding:e});return Gt(n,ry)}function Ez(t){if(lh(t.type)===iy)return Gt(Na([t.type,t.sealed]),Fo);if(lh(t.type)===Fc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gt(Na([t.type,t.senderPublicKey,t.iv,t.sealed]),Fo)}return Gt(Na([t.type,t.iv,t.sealed]),Fo)}function lw(t){const e=(t.encoding||Fo)===Wl?vz(t.encoded):t.encoded,n=yn(e,Fo),r=n.slice(r1e,uk),i=uk;if(lh(r)===Fc){const c=i+nx,l=c+mm,u=n.slice(i,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(lh(r)===iy){const c=n.slice(i),l=e0(mm);return{type:r,sealed:c,iv:l}}const s=i+mm,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function u1e(t,e){const n=lw({encoded:t,encoding:e?.encoding});return Cz({type:lh(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Gt(n.senderPublicKey,Ai):void 0,receiverPublicKey:e?.receiverPublicKey})}function Cz(t){const e=t?.type||wz;if(e===Fc){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function dk(t){return t.type===Fc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function hk(t){return t.type===iy}function d1e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Na([new Uint8Array([4]),e,n])}function h1e(t,e){const[n,r,i]=t.split("."),s=Buffer.from(vz(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=ty(c),u=d1e(e);if(!n1e.verify(Na([o,a]),l,u))throw new Error("Invalid signature");return hg(t).payload}const f1e="irn";function n2(t){return t?.relay||{protocol:f1e}}function J0(t){const e=LH[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function p1e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function fk(t){if(!t.includes("wc:")){const l=zH(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:g1e(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:p1e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function g1e(t){return t.startsWith("//")?t.substring(2):t}function m1e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function pk(t){const e=new URLSearchParams,n=m1e(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function D1(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var w1e=Object.defineProperty,y1e=Object.defineProperties,b1e=Object.getOwnPropertyDescriptors,gk=Object.getOwnPropertySymbols,v1e=Object.prototype.hasOwnProperty,E1e=Object.prototype.propertyIsEnumerable,mk=(t,e,n)=>e in t?w1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C1e=(t,e)=>{for(var n in e||(e={}))v1e.call(e,n)&&mk(t,n,e[n]);if(gk)for(var n of gk(e))E1e.call(e,n)&&mk(t,n,e[n]);return t},_1e=(t,e)=>y1e(t,b1e(e));function n0(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function S1e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n0(n.accounts))}),e}function A1e(t,e){const n=[];return Object.values(t).forEach(r=>{n0(r.accounts).includes(e)&&n.push(...r.methods)}),n}function x1e(t,e){const n=[];return Object.values(t).forEach(r=>{n0(r.accounts).includes(e)&&n.push(...r.events)}),n}function ME(t){return t.includes(":")}function fp(t){return ME(t)?t.split(":")[0]:t}function wk(t){var e,n,r;const i={};if(!Su(t))return i;for(const[s,o]of Object.entries(t)){const a=ME(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=fp(s);i[u]=_1e(C1e({},i[u]),{chains:$a(a,(e=i[u])==null?void 0:e.chains),methods:$a(c,(n=i[u])==null?void 0:n.methods),events:$a(l,(r=i[u])==null?void 0:r.events)})}return i}function I1e(t){const e={};return t?.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function yk(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=I1e(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=$a(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function O1e(t,e){var n,r,i,s,o,a;const c=wk(t),l=wk(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:$a((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:$a((i=c[h])==null?void 0:i.methods,(s=l[h])==null?void 0:s.methods),events:$a((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const P1e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},T1e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(t,e){const{message:n,code:r}=T1e[t];return{message:e?`${n} ${e}`:n,code:r}}function qt(t,e){const{message:n,code:r}=P1e[t];return{message:e?`${n} ${e}`:n,code:r}}function Ko(t,e){return!!Array.isArray(t)}function Su(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Fr(t){return typeof t>"u"}function Zn(t,e){return e&&Fr(t)?!0:typeof t=="string"&&!!t.trim().length}function rx(t,e){return e&&Fr(t)?!0:typeof t=="number"&&!isNaN(t)}function k1e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return Td(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=n0(a),d=n[o];(!Td(UH(o,d),u)||!Td(d.methods,c)||!Td(d.events,l))&&(s=!1)}),s):!1}function r2(t){return Zn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function N1e(t){if(Zn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&r2(n)}}return!1}function $1e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Zn(t,!1)){if(e(t))return!0;const n=zH(t);return e(n)}}catch{}return!1}function R1e(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function M1e(t){return t?.topic}function D1e(t,e){let n=null;return Zn(t?.publicKey,!1)||(n=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function bk(t){let e=!0;return Ko(t)?t.length&&(e=t.every(n=>Zn(n,!1))):e=!1,e}function B1e(t,e,n){let r=null;return Ko(e)&&e.length?e.forEach(i=>{r||r2(i)||(r=qt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):r2(t)||(r=qt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function L1e(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=B1e(i,UH(i,s),`${e} ${n}`);o&&(r=o)}),r}function U1e(t,e){let n=null;return Ko(t)?t.forEach(r=>{n||N1e(r)||(n=qt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=qt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function j1e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=U1e(r?.accounts,`${e} namespace`);i&&(n=i)}),n}function F1e(t,e){let n=null;return bk(t?.methods)?bk(t?.events)||(n=qt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=qt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function _z(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=F1e(r,`${e}, namespace`);i&&(n=i)}),n}function q1e(t,e,n){let r=null;if(t&&Su(t)){const i=_z(t,e);i&&(r=i);const s=L1e(t,e,n);s&&(r=s)}else r=be("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function i_(t,e){let n=null;if(t&&Su(t)){const r=_z(t,e);r&&(n=r);const i=j1e(t,e);i&&(n=i)}else n=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Sz(t){return Zn(t.protocol,!0)}function H1e(t,e){let n=!1;return t?t&&Ko(t)&&t.length&&t.forEach(r=>{n=Sz(r)}):n=!0,n}function z1e(t){return typeof t=="number"}function Fi(t){return typeof t<"u"&&typeof t!==null}function K1e(t){return!(!t||typeof t!="object"||!t.code||!rx(t.code,!1)||!t.message||!Zn(t.message,!1))}function V1e(t){return!(Fr(t)||!Zn(t.method,!1))}function W1e(t){return!(Fr(t)||Fr(t.result)&&Fr(t.error)||!rx(t.id,!1)||!Zn(t.jsonrpc,!1))}function G1e(t){return!(Fr(t)||!Zn(t.name,!1))}function vk(t,e){return!(!r2(e)||!S1e(t).includes(e))}function Z1e(t,e,n){return Zn(n,!1)?A1e(t,e).includes(n):!1}function Y1e(t,e,n){return Zn(n,!1)?x1e(t,e).includes(n):!1}function Ek(t,e,n){let r=null;const i=Q1e(t),s=J1e(e),o=Object.keys(i),a=Object.keys(s),c=Ck(Object.keys(t)),l=Ck(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Td(o,a)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=n0(e[d].accounts);h.includes(d)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Td(i[d].methods,s[d].methods)?Td(i[d].events,s[d].events)||(r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=be("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Q1e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function Ck(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function J1e(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:n0(t[n].accounts)?.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}),e}function X1e(t,e){return rx(t,!1)&&t<=e.max&&t>=e.min}function _k(){const t=Xw();return new Promise(e=>{switch(t){case _s.browser:e(ebe());break;case _s.reactNative:e(tbe());break;case _s.node:e(nbe());break;default:e(!0)}})}function ebe(){return Xg()&&navigator?.onLine}async function tbe(){return ju()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function nbe(){return!0}function rbe(t){switch(Xw()){case _s.browser:ibe(t);break;case _s.reactNative:sbe(t);break}}function ibe(t){!ju()&&Xg()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function sbe(t){ju()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function obe(){var t;return Xg()&&Is()?((t=Is())==null?void 0:t.visibilityState)==="visible":!0}const s_={};let I0=class{static get(e){return s_[e]}static set(e,n){s_[e]=n}static delete(e){delete s_[e]}};class Ns{}let abe=class extends Ns{constructor(e){super()}};const Sk=J.FIVE_SECONDS,$s={pulse:"heartbeat_pulse"};let Az=class xz extends abe{constructor(e){super(e),this.events=new Kn.EventEmitter,this.interval=Sk,this.interval=e?.interval||Sk}static async init(e){const n=new xz(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit($s.pulse)}};const cbe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,lbe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ube=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function dbe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){hbe(t);return}return e}function hbe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function lu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!ube.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(cbe.test(t)||lbe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,dbe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function fbe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ur(t,...e){try{return fbe(t(...e))}catch(n){return Promise.reject(n)}}function pbe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function gbe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function zb(t){if(pbe(t))return String(t);if(gbe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return zb(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const OA="base64:";function mbe(t){return typeof t=="string"?t:OA+bbe(t)}function wbe(t){return typeof t!="string"||!t.startsWith(OA)?t:ybe(t.slice(OA.length))}function ybe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function bbe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ui(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function vbe(...t){return Ui(t.join(":"))}function B1(t){return t=Ui(t),t?t+":":""}function Ebe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Cbe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const _be="memory",Sbe=()=>{const t=new Map;return{name:_be,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Abe(t={}){const e={mounts:{"":t.driver||Sbe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,u)=>{if(e.watching){u=Ui(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Ak(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=Ui(g?p:p.key),w=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},y=n(m);f(y).items.push({key:m,value:w,relativeKey:y.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return ur(h.hasItem,d,u)},getItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return ur(h.getItem,d,u).then(f=>lu(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?ur(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:vbe(d.base,f.key),value:lu(f.value)}))):Promise.all(d.items.map(h=>ur(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:lu(f)})))))},getItemRaw(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?ur(h.getItemRaw,d,u):ur(h.getItem,d,u).then(f=>wbe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ui(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await ur(f.setItem,h,zb(u),d),f.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return ur(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:zb(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>ur(d.driver.setItem,h.relativeKey,zb(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ui(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await ur(f.setItemRaw,h,u,d);else if(f.setItem)await ur(f.setItem,h,mbe(u),d);else return;f.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await ur(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await ur(h.removeItem,d+"$",u),h.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await ur(h.getMeta,d,u)),!u.nativeOnly){const p=await ur(h.getItem,d+"$",u).then(g=>lu(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=B1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){m.driver.flags?.maxDepth||(p=!1);const w=await ur(m.driver.getKeys,m.relativeBase,u);for(const b of w){const y=m.mountpoint+Ui(b);h.some(_=>y.startsWith(_))||f.push(y)}h=[m.mountpoint,...h.filter(b=>!b.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||Ebe(m,u.maxDepth))&&Cbe(m,l))},async clear(l,u={}){l=B1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return ur(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>xk(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=B1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Ak(u,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=B1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await xk(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Ui(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ui(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Ak(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function xk(t){typeof t.dispose=="function"&&await ur(t.dispose)}const xbe="idb-keyval";var Ibe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=W2(t.dbName,t.storeName)),{name:xbe,options:t,async hasItem(i){return!(typeof await Lm(n(i),r)>"u")},async getItem(i){return await Lm(n(i),r)??null},setItem(i,s){return g6(n(i),s,r)},removeItem(i){return m6(n(i),r)},getKeys(){return CB(r)},clear(){return EB(r)}}};const Obe="WALLET_CONNECT_V2_INDEXED_DB",Pbe="keyvaluestorage";let Tbe=class{constructor(){this.indexedDb=Abe({driver:Ibe({dbName:Obe,storeName:Pbe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ho(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kb={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof o_<"u"&&o_.localStorage?Kb.exports=o_.localStorage:typeof window<"u"&&window.localStorage?Kb.exports=window.localStorage:Kb.exports=new e})();function kbe(t){var e;return[t[0],Go((e=t[1])!=null?e:"")]}let Nbe=class{constructor(){this.localStorage=Kb.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(kbe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Go(n)}async setItem(e,n){this.localStorage.setItem(e,ho(n))}async removeItem(e){this.localStorage.removeItem(e)}};const $be="wc_storage_version",Ik=1,Rbe=async(t,e,n)=>{const r=$be,i=await e.getItem(r);if(i&&i>=Ik){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,Ik),n(e),Mbe(t,o)},Mbe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Dbe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Nbe;this.storage=e;try{const n=new Tbe;Rbe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Bbe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Lbe=Ube;function Ube(t,e,n){var r=n&&n.stringify||Bbe,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=r(t);for(var a=1;a<s;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const Ok=Lbe;var Wf=Ra;const uw=Zbe().console||{},jbe={mapHttpRequest:L1,mapHttpResponse:L1,wrapRequestSerializer:a_,wrapResponseSerializer:a_,wrapErrorSerializer:a_,req:L1,res:L1,err:Kbe};function Fbe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ra(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||uw;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},i=Fbe(t.browser.serialize,r);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=dw),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:Vbe(t)};c.levels=Ra.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=dw,c.serializers=r,c._serialize=i,c._stdErrSerialize=s,c.child=f,e&&(c._logEvent=PA());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,lf(l,c,"error","log"),lf(l,c,"fatal","error"),lf(l,c,"warn","error"),lf(l,c,"info","log"),lf(l,c,"debug","log"),lf(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},i&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(i&&m){var w=Object.assign({},r,m),b=t.browser.serialize===!0?Object.keys(w):i;delete p.serializers,DE([p],b,w,this._stdErrSerialize)}function y(_){this._childLevel=(_._childLevel|0)+1,this.error=uf(_,p,"error"),this.fatal=uf(_,p,"fatal"),this.warn=uf(_,p,"warn"),this.info=uf(_,p,"info"),this.debug=uf(_,p,"debug"),this.trace=uf(_,p,"trace"),w&&(this.serializers=w,this._serialize=b),e&&(this._logEvent=PA([].concat(_._logEvent.bindings,p)))}return y.prototype=this,new y(this)}return c}Ra.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ra.stdSerializers=jbe;Ra.stdTimeFunctions=Object.assign({},{nullTime:Iz,epochTime:Oz,unixTime:Wbe,isoTime:Gbe});function lf(t,e,n,r){const i=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?dw:i[n]?i[n]:uw[n]||uw[r]||dw,qbe(t,e,n)}function qbe(t,e,n){!t.transmit&&e[n]===dw||(e[n]=function(r){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===uw?uw:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&DE(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Hbe(this,n,o,s)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ra.levels.values[l],d=Ra.levels.values[n];if(d<u)return;zbe(this,{ts:s,methodLevel:n,methodValue:d,transmitValue:Ra.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Hbe(t,e,n,r){t._serialize&&DE(n,t._serialize,t.serializers,t._stdErrSerialize);const i=n.slice();let s=i[0];const o={};r&&(o.time=r),o.level=Ra.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?Ok(i.shift(),i):void 0}else typeof s=="string"&&(s=Ok(i.shift(),i));return s!==void 0&&(o.msg=s),o}function DE(t,e,n,r){for(const i in t)if(r&&t[i]instanceof Error)t[i]=Ra.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in n&&(t[i][s]=n[s](t[i][s]))}function uf(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return t[n].apply(this,r)}}function zbe(t,e,n){const r=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;DE(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,r(s,t._logEvent,a),t._logEvent=PA(c)}function PA(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Kbe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Vbe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Iz:Oz}function L1(){return{}}function a_(t){return t}function dw(){}function Iz(){return!1}function Oz(){return Date.now()}function Wbe(){return Math.round(Date.now()/1e3)}function Gbe(){return new Date(Date.now()).toISOString()}function Zbe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Fu=Lu(Wf),Ybe={level:"info"},sy="custom_context",ix=1e3*1024;let Qbe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Pk=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Qbe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Pz=class{constructor(e,n=ix){this.level=e??"error",this.levelValue=Wf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Pk(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Wf.levels.values.error?console.error(e):n===Wf.levels.values.warn?console.warn(e):n===Wf.levels.values.debug?console.debug(e):n===Wf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ho({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Pk(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ho({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Jbe=class{constructor(e,n=ix){this.baseChunkLogger=new Pz(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Xbe=class{constructor(e,n=ix){this.baseChunkLogger=new Pz(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var eve=Object.defineProperty,tve=Object.defineProperties,nve=Object.getOwnPropertyDescriptors,Tk=Object.getOwnPropertySymbols,rve=Object.prototype.hasOwnProperty,ive=Object.prototype.propertyIsEnumerable,kk=(t,e,n)=>e in t?eve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i2=(t,e)=>{for(var n in e||(e={}))rve.call(e,n)&&kk(t,n,e[n]);if(Tk)for(var n of Tk(e))ive.call(e,n)&&kk(t,n,e[n]);return t},s2=(t,e)=>tve(t,nve(e));function el(t){return s2(i2({},t),{level:t?.level||Ybe.level})}function sve(t,e=sy){return t[e]||""}function ove(t,e,n=sy){return t[n]=e,t}function tn(t,e=sy){let n="";return typeof t.bindings>"u"?n=sve(t,e):n=t.bindings().context||"",n}function ave(t,e,n=sy){const r=tn(t,n);return r.trim()?`${r}/${e}`:e}function jt(t,e,n=sy){const r=ave(t,e,n),i=t.child({context:r});return ove(i,r,n)}function cve(t){var e,n;const r=new Jbe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Fu(s2(i2({},t.opts),{level:"trace",browser:s2(i2({},(n=t.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function lve(t){var e;const n=new Xbe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Fu(s2(i2({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function sx(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?cve(t):lve(t)}var uve=Object.defineProperty,dve=(t,e,n)=>e in t?uve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nk=(t,e,n)=>dve(t,typeof e!="symbol"?e+"":e,n);let hve=class extends Ns{constructor(e){super(),this.opts=e,Nk(this,"protocol","wc"),Nk(this,"version",2)}};var fve=Object.defineProperty,pve=(t,e,n)=>e in t?fve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gve=(t,e,n)=>pve(t,e+"",n);let mve=class extends Ns{constructor(e,n){super(),this.core=e,this.logger=n,gve(this,"records",new Map)}},wve=class{constructor(e,n){this.logger=e,this.core=n}},yve=class extends Ns{constructor(e,n){super(),this.relayer=e,this.logger=n}},bve=class extends Ns{constructor(e){super()}},vve=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},Eve=class extends Ns{constructor(e,n){super(),this.relayer=e,this.logger=n}},Cve=class extends Ns{constructor(e,n){super(),this.core=e,this.logger=n}},_ve=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Sve=class{constructor(e,n){this.projectId=e,this.logger=n}},Ave=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var xve=Object.defineProperty,Ive=(t,e,n)=>e in t?xve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$k=(t,e,n)=>Ive(t,typeof e!="symbol"?e+"":e,n);let Ove=class{constructor(e){this.opts=e,$k(this,"protocol","wc"),$k(this,"version",2)}},Pve=class{constructor(e){this.client=e}};const Tve="PARSE_ERROR",kve="INVALID_REQUEST",Nve="METHOD_NOT_FOUND",$ve="INVALID_PARAMS",Tz="INTERNAL_ERROR",ox="SERVER_ERROR",Rve=[-32700,-32600,-32601,-32602,-32603],wm={[Tve]:{code:-32700,message:"Parse error"},[kve]:{code:-32600,message:"Invalid Request"},[Nve]:{code:-32601,message:"Method not found"},[$ve]:{code:-32602,message:"Invalid params"},[Tz]:{code:-32603,message:"Internal error"},[ox]:{code:-32e3,message:"Server error"}},kz=ox;function Mve(t){return Rve.includes(t)}function Rk(t){return Object.keys(wm).includes(t)?wm[t]:wm[kz]}function Dve(t){const e=Object.values(wm).find(n=>n.code===t);return e||wm[kz]}function Nz(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var $z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TA=function(t,e){return TA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},TA(t,e)};function Bve(t,e){TA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kA=function(){return kA=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kA.apply(this,arguments)};function Lve(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Uve(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function jve(t,e){return function(n,r){e(n,r,t)}}function Fve(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function qve(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Hve(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zve(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Kve(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function NA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rz(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Vve(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rz(arguments[e]));return t}function Wve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function hw(t){return this instanceof hw?(this.v=t,this):new hw(t)}function Gve(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){h.value instanceof hw?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Zve(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:hw(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Yve(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof NA=="function"?NA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Qve(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Jve(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Xve(t){return t&&t.__esModule?t:{default:t}}function e2e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function t2e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const n2e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return kA},__asyncDelegator:Zve,__asyncGenerator:Gve,__asyncValues:Yve,__await:hw,__awaiter:qve,__classPrivateFieldGet:e2e,__classPrivateFieldSet:t2e,__createBinding:zve,__decorate:Uve,__exportStar:Kve,__extends:Bve,__generator:Hve,__importDefault:Xve,__importStar:Jve,__makeTemplateObject:Qve,__metadata:Fve,__param:jve,__read:Rz,__rest:Lve,__spread:Vve,__spreadArrays:Wve,__values:NA},Symbol.toStringTag,{value:"Module"})),r2e=Z4(n2e);var sc={},Mk;function i2e(){if(Mk)return sc;Mk=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.isBrowserCryptoAvailable=sc.getSubtleCrypto=sc.getBrowerCrypto=void 0;function t(){return(Mn===null||Mn===void 0?void 0:Mn.crypto)||(Mn===null||Mn===void 0?void 0:Mn.msCrypto)||{}}sc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}sc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return sc.isBrowserCryptoAvailable=n,sc}var oc={},Dk;function s2e(){if(Dk)return oc;Dk=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.isBrowser=oc.isNode=oc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}oc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}oc.isNode=e;function n(){return!t()&&!e()}return oc.isBrowser=n,oc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=r2e;e.__exportStar(i2e(),t),e.__exportStar(s2e(),t)})($z);function vr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ss(t=6){return BigInt(vr(t))}function Ci(t,e,n){return{id:n||vr(),jsonrpc:"2.0",method:t,params:e}}function qu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function r0(t,e,n){return{id:t,jsonrpc:"2.0",error:o2e(e)}}function o2e(t,e){return typeof t>"u"?Rk(Tz):(typeof t=="string"&&(t=Object.assign(Object.assign({},Rk(ox)),{message:t})),Mve(t.code)&&(t=Dve(t.code)),t)}let a2e=class{},c2e=class extends a2e{constructor(){super()}},l2e=class extends c2e{constructor(e){super()}};const u2e="^https?:",d2e="^wss?:";function h2e(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Mz(t,e){const n=h2e(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Bk(t){return Mz(t,u2e)}function Lk(t){return Mz(t,d2e)}function f2e(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Dz(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function i0(t){return Dz(t)&&"method"in t}function Dh(t){return Dz(t)&&(nr(t)||On(t))}function nr(t){return"result"in t}function On(t){return"error"in t}let En=class extends l2e{constructor(e){super(e),this.events=new Kn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Ci(e.method,e.params||[],e.id||Ss().toString()),n)}async requestStrict(e,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{On(s)?i(s.error):r(s.result)});try{await this.connection.send(e,n)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Dh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const p2e=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),g2e=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Uk=t=>t.split("?")[0],jk=10,m2e=p2e();let Bz=class{constructor(e){if(this.url=e,this.events=new Kn.EventEmitter,this.registering=!1,!Lk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ho(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Lk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const i=$z.isReactNative()?void 0:{rejectUnauthorized:!f2e(e)},s=new m2e(e,[],i);g2e()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Go(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=r0(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return Nz(e,Uk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>jk&&this.events.setMaxListeners(jk)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Uk(this.url)}`));return this.events.emit("register_error",n),n}};var w2e={};const Lz="wc",Uz=2,$A="core",ja=`${Lz}@2:${$A}:`,y2e={logger:"error"},b2e={database:":memory:"},v2e="crypto",Fk="client_ed25519_seed",E2e=J.ONE_DAY,C2e="keychain",_2e="0.3",S2e="messages",A2e="0.3",qk=J.SIX_HOURS,x2e="publisher",jz="irn",I2e="error",Fz="wss://relay.walletconnect.org",O2e="relayer",Cr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},P2e="_subscription",zs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},T2e=.1,RA="2.21.1",pn={link_mode:"link_mode",relay:"relay"},Vb={inbound:"inbound",outbound:"outbound"},k2e="0.3",N2e="WALLETCONNECT_CLIENT_ID",Hk="WALLETCONNECT_LINK_MODE_APPS",cs={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},$2e="subscription",R2e="0.3",M2e="pairing",D2e="0.3",O0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},gd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Eo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},B2e="history",L2e="0.3",U2e="expirer",eo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},j2e="0.3",F2e="verify-api",q2e="https://verify.walletconnect.com",qz="https://verify.walletconnect.org",ym=qz,H2e=`${ym}/v3`,z2e=[q2e,qz],K2e="echo",V2e="https://echo.walletconnect.com",pa={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},fc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Co={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ju={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Xu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},P0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},W2e=.1,G2e="event-client",Z2e=86400,Y2e="https://pulse.walletconnect.org/batch";function Q2e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var y=(b-w)*u+1>>>0,_=new Uint8Array(y);w!==b;){for(var A=p[w],T=0,$=y-1;(A!==0||T<m)&&$!==-1;$--,T++)A+=256*_[$]>>>0,_[$]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,w++}for(var D=y-m;D!==y&&_[D]===0;)D++;for(var O=c.repeat(g);D<y;++D)O+=t.charAt(_[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,y=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=b-1;(_!==0||A<w)&&T!==-1;T--,A++)_+=a*y[T]>>>0,y[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=A,g++}if(p[g]!==" "){for(var $=b-w;$!==b&&y[$]===0;)$++;for(var D=new Uint8Array(m+(b-$)),O=m;$!==b;)D[O++]=y[$++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var J2e=Q2e,X2e=J2e;const Hz=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eEe=t=>new TextEncoder().encode(t),tEe=t=>new TextDecoder().decode(t);let nEe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},rEe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zz(this,e)}},iEe=class{constructor(e){this.decoders=e}or(e){return zz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const zz=(t,e)=>new iEe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let sEe=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new nEe(e,n,r),this.decoder=new rEe(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const BE=({name:t,prefix:e,encode:n,decode:r})=>new sEe(t,e,n,r),oy=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=X2e(n,e);return BE({prefix:t,name:e,encode:r,decode:s=>Hz(i(s))})},oEe=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aEe=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>BE({prefix:e,name:t,encode(i){return aEe(i,r,n)},decode(i){return oEe(i,r,n,t)}}),cEe=BE({prefix:"\0",name:"identity",encode:t=>tEe(t),decode:t=>eEe(t)});var lEe=Object.freeze({__proto__:null,identity:cEe});const uEe=Wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var dEe=Object.freeze({__proto__:null,base2:uEe});const hEe=Wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var fEe=Object.freeze({__proto__:null,base8:hEe});const pEe=oy({prefix:"9",name:"base10",alphabet:"0123456789"});var gEe=Object.freeze({__proto__:null,base10:pEe});const mEe=Wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wEe=Wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yEe=Object.freeze({__proto__:null,base16:mEe,base16upper:wEe});const bEe=Wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vEe=Wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),EEe=Wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CEe=Wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_Ee=Wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),SEe=Wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),AEe=Wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xEe=Wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),IEe=Wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var OEe=Object.freeze({__proto__:null,base32:bEe,base32upper:vEe,base32pad:EEe,base32padupper:CEe,base32hex:_Ee,base32hexupper:SEe,base32hexpad:AEe,base32hexpadupper:xEe,base32z:IEe});const PEe=oy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),TEe=oy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kEe=Object.freeze({__proto__:null,base36:PEe,base36upper:TEe});const NEe=oy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$Ee=oy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var REe=Object.freeze({__proto__:null,base58btc:NEe,base58flickr:$Ee});const MEe=Wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),DEe=Wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),BEe=Wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LEe=Wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var UEe=Object.freeze({__proto__:null,base64:MEe,base64pad:DEe,base64url:BEe,base64urlpad:LEe});const Kz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jEe=Kz.reduce((t,e,n)=>(t[n]=e,t),[]),FEe=Kz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function qEe(t){return t.reduce((e,n)=>(e+=jEe[n],e),"")}function HEe(t){const e=[];for(const n of t){const r=FEe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const zEe=BE({prefix:"🚀",name:"base256emoji",encode:qEe,decode:HEe});var KEe=Object.freeze({__proto__:null,base256emoji:zEe}),VEe=Vz,zk=128,WEe=-128,GEe=Math.pow(2,31);function Vz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=GEe;)e[n++]=t&255|zk,t/=128;for(;t&WEe;)e[n++]=t&255|zk,t>>>=7;return e[n]=t|0,Vz.bytes=n-r+1,e}var ZEe=MA,YEe=128,Kk=127;function MA(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw MA.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&Kk)<<i:(o&Kk)*Math.pow(2,i),i+=7}while(o>=YEe);return MA.bytes=s-r,n}var QEe=Math.pow(2,7),JEe=Math.pow(2,14),XEe=Math.pow(2,21),e3e=Math.pow(2,28),t3e=Math.pow(2,35),n3e=Math.pow(2,42),r3e=Math.pow(2,49),i3e=Math.pow(2,56),s3e=Math.pow(2,63),o3e=function(t){return t<QEe?1:t<JEe?2:t<XEe?3:t<e3e?4:t<t3e?5:t<n3e?6:t<r3e?7:t<i3e?8:t<s3e?9:10},a3e={encode:VEe,decode:ZEe,encodingLength:o3e},Wz=a3e;const Vk=(t,e,n=0)=>(Wz.encode(t,e,n),e),Wk=t=>Wz.encodingLength(t),DA=(t,e)=>{const n=e.byteLength,r=Wk(t),i=r+Wk(n),s=new Uint8Array(i+n);return Vk(t,s,0),Vk(n,s,r),s.set(e,i),new c3e(t,n,e,s)};let c3e=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const Gz=({name:t,code:e,encode:n})=>new l3e(t,e,n);let l3e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?DA(this.code,n):n.then(r=>DA(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Zz=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),u3e=Gz({name:"sha2-256",code:18,encode:Zz("SHA-256")}),d3e=Gz({name:"sha2-512",code:19,encode:Zz("SHA-512")});var h3e=Object.freeze({__proto__:null,sha256:u3e,sha512:d3e});const Yz=0,f3e="identity",Qz=Hz,p3e=t=>DA(Yz,Qz(t)),g3e={code:Yz,name:f3e,encode:Qz,digest:p3e};var m3e=Object.freeze({__proto__:null,identity:g3e});new TextEncoder,new TextDecoder;const Gk={...lEe,...dEe,...fEe,...gEe,...yEe,...OEe,...kEe,...REe,...UEe,...KEe};({...h3e,...m3e});function w3e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Jz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Zk=Jz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),c_=Jz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=w3e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),y3e={utf8:Zk,"utf-8":Zk,hex:Gk.base16,latin1:c_,ascii:c_,binary:c_,...Gk};function b3e(t,e="utf8"){const n=y3e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var v3e=Object.defineProperty,E3e=(t,e,n)=>e in t?v3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oa=(t,e,n)=>E3e(t,typeof e!="symbol"?e+"":e,n);let C3e=class{constructor(e,n){this.core=e,this.logger=n,oa(this,"keychain",new Map),oa(this,"name",C2e),oa(this,"version",_2e),oa(this,"initialized",!1),oa(this,"storagePrefix",ja),oa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),oa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),oa(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),oa(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),oa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,mA(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?wA(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var _3e=Object.defineProperty,S3e=(t,e,n)=>e in t?_3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$r=(t,e,n)=>S3e(t,typeof e!="symbol"?e+"":e,n);let A3e=class{constructor(e,n,r){this.core=e,this.logger=n,$r(this,"name",v2e),$r(this,"keychain"),$r(this,"randomSessionIdentifier",IA()),$r(this,"initialized",!1),$r(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),$r(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),$r(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Xv(i);return Z8(s.publicKey)}),$r(this,"generateKeyPair",()=>{this.isInitialized();const i=i1e();return this.setPrivateKey(i.publicKey,i.privateKey)}),$r(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Xv(s),a=this.randomSessionIdentifier;return await NH(a,i,E2e,o)}),$r(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=s1e(a,s);return this.setSymKey(c,o)}),$r(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Hb(i);return await this.keychain.set(o,i),o}),$r(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),$r(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),$r(this,"encode",async(i,s,o)=>{this.isInitialized();const a=Cz(o),c=ho(s);if(hk(a))return c1e(c,o?.encoding);if(dk(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return o1e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),$r(this,"decode",async(i,s,o)=>{this.isInitialized();const a=u1e(s,o);if(hk(a)){const c=l1e(s,o?.encoding);return Go(c)}if(dk(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=a1e({symKey:c,encoded:s,encoding:o?.encoding});return Go(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),$r(this,"getPayloadType",(i,s=Fo)=>{const o=lw({encoded:i,encoding:s});return lh(o.type)}),$r(this,"getPayloadSenderPublicKey",(i,s=Fo)=>{const o=lw({encoded:i,encoding:s});return o.senderPublicKey?Gt(o.senderPublicKey,Ai):void 0}),this.core=e,this.logger=jt(n,this.name),this.keychain=r||new C3e(this.core,this.logger)}get context(){return tn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Fk)}catch{e=IA(),await this.keychain.set(Fk,e)}return b3e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var x3e=Object.defineProperty,I3e=Object.defineProperties,O3e=Object.getOwnPropertyDescriptors,Yk=Object.getOwnPropertySymbols,P3e=Object.prototype.hasOwnProperty,T3e=Object.prototype.propertyIsEnumerable,BA=(t,e,n)=>e in t?x3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k3e=(t,e)=>{for(var n in e||(e={}))P3e.call(e,n)&&BA(t,n,e[n]);if(Yk)for(var n of Yk(e))T3e.call(e,n)&&BA(t,n,e[n]);return t},N3e=(t,e)=>I3e(t,O3e(e)),is=(t,e,n)=>BA(t,typeof e!="symbol"?e+"":e,n);let $3e=class extends wve{constructor(e,n){super(e,n),this.logger=e,this.core=n,is(this,"messages",new Map),is(this,"messagesWithoutClientAck",new Map),is(this,"name",S2e),is(this,"version",A2e),is(this,"initialized",!1),is(this,"storagePrefix",ja),is(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),is(this,"set",async(r,i,s)=>{this.isInitialized();const o=ba(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===Vb.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,N3e(k3e({},c),{[o]:i}))}return await this.persist(),o}),is(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),is(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),is(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=ba(i);return typeof s[o]<"u"}),is(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=ba(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),is(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=jt(e,this.name),this.core=n}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,mA(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,mA(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?wA(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?wA(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var R3e=Object.defineProperty,M3e=Object.defineProperties,D3e=Object.getOwnPropertyDescriptors,Qk=Object.getOwnPropertySymbols,B3e=Object.prototype.hasOwnProperty,L3e=Object.prototype.propertyIsEnumerable,LA=(t,e,n)=>e in t?R3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U1=(t,e)=>{for(var n in e||(e={}))B3e.call(e,n)&&LA(t,n,e[n]);if(Qk)for(var n of Qk(e))L3e.call(e,n)&&LA(t,n,e[n]);return t},l_=(t,e)=>M3e(t,D3e(e)),_o=(t,e,n)=>LA(t,typeof e!="symbol"?e+"":e,n);let U3e=class extends yve{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,_o(this,"events",new Kn.EventEmitter),_o(this,"name",x2e),_o(this,"queue",new Map),_o(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),_o(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),_o(this,"needsTransportRestart",!1),_o(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=s?.ttl||qk,c=n2(s),l=s?.prompt||!1,u=s?.tag||0,d=s?.id||Ss().toString(),h={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Cr.publish,m),g(h))};this.relayer.events.on(Cr.publish,m);const w=cu(new Promise((b,y)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(b).catch(_=>{this.logger.warn(_,_?.message),y(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(Cr.publish,m)}catch(b){this.queue.set(d,l_(U1({},h),{attempt:1})),this.logger.warn(b,b?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await cu(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),_o(this,"on",(r,i)=>{this.events.on(r,i)}),_o(this,"once",(r,i)=>{this.events.once(r,i)}),_o(this,"off",(r,i)=>{this.events.off(r,i)}),_o(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=jt(n,this.name),this.registerEventListeners()}get context(){return tn(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:c=qk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:J0(n2().protocol).publish,params:U1({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Fr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Fr((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Cr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,l_(U1({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(l_(U1({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on($s.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Cr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Cr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var j3e=Object.defineProperty,F3e=(t,e,n)=>e in t?j3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,df=(t,e,n)=>F3e(t,typeof e!="symbol"?e+"":e,n);let q3e=class{constructor(){df(this,"map",new Map),df(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),df(this,"get",e=>this.map.get(e)||[]),df(this,"exists",(e,n)=>this.get(e).includes(n)),df(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),df(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var H3e=Object.defineProperty,z3e=Object.defineProperties,K3e=Object.getOwnPropertyDescriptors,Jk=Object.getOwnPropertySymbols,V3e=Object.prototype.hasOwnProperty,W3e=Object.prototype.propertyIsEnumerable,UA=(t,e,n)=>e in t?H3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T0=(t,e)=>{for(var n in e||(e={}))V3e.call(e,n)&&UA(t,n,e[n]);if(Jk)for(var n of Jk(e))W3e.call(e,n)&&UA(t,n,e[n]);return t},u_=(t,e)=>z3e(t,K3e(e)),Yt=(t,e,n)=>UA(t,typeof e!="symbol"?e+"":e,n);let G3e=class extends Eve{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Yt(this,"subscriptions",new Map),Yt(this,"topicMap",new q3e),Yt(this,"events",new Kn.EventEmitter),Yt(this,"name",$2e),Yt(this,"version",R2e),Yt(this,"pending",new Map),Yt(this,"cached",[]),Yt(this,"initialized",!1),Yt(this,"storagePrefix",ja),Yt(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),Yt(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Yt(this,"clientId"),Yt(this,"batchSubscribeTopicsLimit",500),Yt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Yt(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=n2(i),o={topic:r,relay:s,transportType:i?.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),Yt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),Yt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),Yt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),Yt(this,"on",(r,i)=>{this.events.on(r,i)}),Yt(this,"once",(r,i)=>{this.events.once(r,i)}),Yt(this,"off",(r,i)=>{this.events.off(r,i)}),Yt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),Yt(this,"start",async()=>{await this.onConnect()}),Yt(this,"stop",async()=>{await this.onDisconnect()}),Yt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Yt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),Yt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on($s.pulse,async()=>{await this.checkPending()}),this.events.on(cs.created,async r=>{const i=cs.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(cs.deleted,async r=>{const i=cs.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=jt(n,this.name),this.clientId=""}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=n2(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=qt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||r?.transportType===pn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:J0(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(r?.transportType===pn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(cs.created,d),u(h.id))};this.events.on(cs.created,d);try{const h=await cu(new Promise((f,p)=>{this.relayer.request(s).catch(g=>{this.logger.warn(g,g?.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(cs.created,d),u(h)}catch{}}),l=await cu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Cr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:J0(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await cu(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Cr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:J0(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await cu(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Cr.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:J0(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,u_(T0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,T0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,T0({},n)),this.topicMap.set(n.topic,e),this.events.emit(cs.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(cs.deleted,u_(T0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(cs.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(cs.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>u_(T0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Kme(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ba(e+await this.getClientId())}};var Z3e=Object.defineProperty,Xk=Object.getOwnPropertySymbols,Y3e=Object.prototype.hasOwnProperty,Q3e=Object.prototype.propertyIsEnumerable,jA=(t,e,n)=>e in t?Z3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eN=(t,e)=>{for(var n in e||(e={}))Y3e.call(e,n)&&jA(t,n,e[n]);if(Xk)for(var n of Xk(e))Q3e.call(e,n)&&jA(t,n,e[n]);return t},At=(t,e,n)=>jA(t,typeof e!="symbol"?e+"":e,n);let J3e=class extends bve{constructor(e){super(e),At(this,"protocol","wc"),At(this,"version",2),At(this,"core"),At(this,"logger"),At(this,"events",new Kn.EventEmitter),At(this,"provider"),At(this,"messages"),At(this,"subscriber"),At(this,"publisher"),At(this,"name",O2e),At(this,"transportExplicitlyClosed",!1),At(this,"initialized",!1),At(this,"connectionAttemptInProgress",!1),At(this,"relayUrl"),At(this,"projectId"),At(this,"packageName"),At(this,"bundleId"),At(this,"hasExperiencedNetworkDisruption",!1),At(this,"pingTimeout"),At(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),At(this,"reconnectTimeout"),At(this,"connectPromise"),At(this,"reconnectInProgress",!1),At(this,"requestsInFlight",[]),At(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),At(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||Ss().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),At(this,"resetPingTimeout",()=>{e2()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),At(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),At(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Cr.connect)}),At(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),At(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Cr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),At(this,"registerProviderListeners",()=>{this.provider.on(zs.payload,this.onPayloadHandler),this.provider.on(zs.connect,this.onConnectHandler),this.provider.on(zs.disconnect,this.onDisconnectHandler),this.provider.on(zs.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?jt(e.logger,this.name):Fu(el({level:e.logger||I2e})),this.messages=new $3e(this.logger,e.core),this.subscriber=new G3e(this,this.logger),this.publisher=new U3e(this,this.logger),this.relayUrl=e?.relayUrl||Fz,this.projectId=e.projectId,Pme()?this.packageName=MT():Tme()&&(this.bundleId=MT()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return tn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:pn.relay},Vb.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(cs.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(cs.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,eN({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await cu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await _k())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=Xn(J.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(Cr.message,e),await this.recordMessageEvent(e,Vb.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zs.disconnect,s),await cu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(zs.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zs.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(zs.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,J.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(e2())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new En(new Bz(Mme({sdkVersion:RA,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),i0(e)){if(!e.method.endsWith(P2e))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:pn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(eN({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Dh(e)&&this.events.emit(Cr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Vb.inbound),this.events.emit(Cr.message,e))}async acknowledgePayload(e){const n=qu(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(zs.payload,this.onPayloadHandler),this.provider.off(zs.connect,this.onConnectHandler),this.provider.off(zs.disconnect,this.onDisconnectHandler),this.provider.off(zs.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await _k();rbe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on($s.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&obe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Cr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(T2e)))))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function X3e(){}function tN(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function nN(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function rN(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const eCe="[object RegExp]",tCe="[object String]",nCe="[object Number]",rCe="[object Boolean]",iN="[object Arguments]",iCe="[object Symbol]",sCe="[object Date]",oCe="[object Map]",aCe="[object Set]",cCe="[object Array]",lCe="[object Function]",uCe="[object ArrayBuffer]",d_="[object Object]",dCe="[object Error]",hCe="[object DataView]",fCe="[object Uint8Array]",pCe="[object Uint8ClampedArray]",gCe="[object Uint16Array]",mCe="[object Uint32Array]",wCe="[object BigUint64Array]",yCe="[object Int8Array]",bCe="[object Int16Array]",vCe="[object Int32Array]",ECe="[object BigInt64Array]",CCe="[object Float32Array]",_Ce="[object Float64Array]";function SCe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function ACe(t,e,n){return X0(t,e,void 0,void 0,void 0,void 0,n)}function X0(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return bm(t,e,s,o)}return bm(t,e,s,o)}function bm(t,e,n,r){if(Object.is(t,e))return!0;let i=rN(t),s=rN(e);if(i===iN&&(i=d_),s===iN&&(s=d_),i!==s)return!1;switch(i){case tCe:return t.toString()===e.toString();case nCe:{const c=t.valueOf(),l=e.valueOf();return SCe(c,l)}case rCe:case sCe:case iCe:return Object.is(t.valueOf(),e.valueOf());case eCe:return t.source===e.source&&t.flags===e.flags;case lCe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case oCe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!X0(l,e.get(c),c,t,e,n,r))return!1;return!0}case aCe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>X0(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case cCe:case fCe:case pCe:case gCe:case mCe:case wCe:case yCe:case bCe:case vCe:case ECe:case CCe:case _Ce:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!X0(t[c],e[c],c,t,e,n,r))return!1;return!0}case uCe:return t.byteLength!==e.byteLength?!1:bm(new Uint8Array(t),new Uint8Array(e),n,r);case hCe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:bm(new Uint8Array(t),new Uint8Array(e),n,r);case dCe:return t.name===e.name&&t.message===e.message;case d_:{if(!(bm(t.constructor,e.constructor,n,r)||tN(t)&&tN(e)))return!1;const c=[...Object.keys(t),...nN(t)],l=[...Object.keys(e),...nN(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!X0(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function xCe(t,e){return ACe(t,e,X3e)}var ICe=Object.defineProperty,sN=Object.getOwnPropertySymbols,OCe=Object.prototype.hasOwnProperty,PCe=Object.prototype.propertyIsEnumerable,FA=(t,e,n)=>e in t?ICe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oN=(t,e)=>{for(var n in e||(e={}))OCe.call(e,n)&&FA(t,n,e[n]);if(sN)for(var n of sN(e))PCe.call(e,n)&&FA(t,n,e[n]);return t},$i=(t,e,n)=>FA(t,typeof e!="symbol"?e+"":e,n);let Bh=class extends vve{constructor(e,n,r,i=ja,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,$i(this,"map",new Map),$i(this,"version",k2e),$i(this,"cached",[]),$i(this,"initialized",!1),$i(this,"getKey"),$i(this,"storagePrefix",ja),$i(this,"recentlyDeleted",[]),$i(this,"recentlyDeletedLimit",200),$i(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Fr(o)?this.map.set(this.getKey(o),o):R1e(o)?this.map.set(o.id,o):M1e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),$i(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),$i(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),$i(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>xCe(a[c],o[c]))):this.values)),$i(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=oN(oN({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),$i(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=jt(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var TCe=Object.defineProperty,kCe=(t,e,n)=>e in t?TCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dt=(t,e,n)=>kCe(t,typeof e!="symbol"?e+"":e,n);let NCe=class{constructor(e,n){this.core=e,this.logger=n,dt(this,"name",M2e),dt(this,"version",D2e),dt(this,"events",new Vg),dt(this,"pairings"),dt(this,"initialized",!1),dt(this,"storagePrefix",ja),dt(this,"ignoredPayloadTypes",[Fc]),dt(this,"registeredMethods",[]),dt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),dt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),dt(this,"create",async r=>{this.isInitialized();const i=IA(),s=await this.core.crypto.setSymKey(i),o=Xn(J.FIVE_MINUTES),a={protocol:jz},c={topic:s,expiry:o,relay:a,active:!1,methods:r?.methods},l=pk({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(gd.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r?.transportType}),{topic:s,uri:l}}),dt(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[pa.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=fk(r.uri);i.props.properties.topic=s,i.addTrace(pa.pairing_uri_validation_success),i.addTrace(pa.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(pa.existing_pairing),u.active)throw i.setError(fc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(pa.pairing_not_expired)}const d=c||Xn(J.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(pa.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(gd.create,h),i.addTrace(pa.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(pa.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(fc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(fc.subscribe_pairing_topic_failure),f}return i.addTrace(pa.subscribe_pairing_topic_success),h}),dt(this,"activate",async({topic:r})=>{this.isInitialized();const i=Xn(J.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),dt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ad();this.events.once($t("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),dt(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),dt(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),dt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),dt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",qt("USER_DISCONNECTED")),await this.deletePairing(i))}),dt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return pk({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),dt(this,"sendRequest",async(r,i,s)=>{const o=Ci(i,s),a=await this.core.crypto.encode(r,o),c=O0[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),dt(this,"sendResult",async(r,i,s)=>{const o=qu(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=O0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),dt(this,"sendError",async(r,i,s)=>{const o=r0(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=O0[c]?O0[c].res:O0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),dt(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,qt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),dt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>jl(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),dt(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),dt(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),dt(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(gd.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),dt(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{nr(i)?this.events.emit($t("pairing_ping",s),{}):On(i)&&this.events.emit($t("pairing_ping",s),{error:i.error})},500)}),dt(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(gd.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),dt(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=qt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),dt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(qt("WC_METHOD_UNSUPPORTED",r))}),dt(this,"isValidPair",(r,i)=>{var s;if(!Fi(r)){const{message:a}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(fc.malformed_pairing_uri),new Error(a)}if(!$1e(r.uri)){const{message:a}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(fc.malformed_pairing_uri),new Error(a)}const o=fk(r?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(fc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=be("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(fc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(fc.pairing_expired);const{message:a}=be("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),dt(this,"isValidPing",async r=>{if(!Fi(r)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),dt(this,"isValidDisconnect",async r=>{if(!Fi(r)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),dt(this,"isValidPairingTopic",async r=>{if(!Zn(r,!1)){const{message:i}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(jl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=jt(n,this.name),this.pairings=new Bh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return tn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Cr.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==pn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);i0(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Dh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(eo.expired,async e=>{const{topic:n}=HH(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(gd.expire,{topic:n}))})}};var $Ce=Object.defineProperty,RCe=(t,e,n)=>e in t?$Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rr=(t,e,n)=>RCe(t,typeof e!="symbol"?e+"":e,n);let MCe=class extends mve{constructor(e,n){super(e,n),this.core=e,this.logger=n,Rr(this,"records",new Map),Rr(this,"events",new Kn.EventEmitter),Rr(this,"name",B2e),Rr(this,"version",L2e),Rr(this,"cached",[]),Rr(this,"initialized",!1),Rr(this,"storagePrefix",ja),Rr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Rr(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Xn(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Eo.created,o)}),Rr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=On(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Eo.updated,i))}),Rr(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Rr(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Eo.deleted,s)}}),this.persist()}),Rr(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Rr(this,"on",(r,i)=>{this.events.on(r,i)}),Rr(this,"once",(r,i)=>{this.events.once(r,i)}),Rr(this,"off",(r,i)=>{this.events.off(r,i)}),Rr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ci(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Eo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Eo.created,e=>{const n=Eo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Eo.updated,e=>{const n=Eo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Eo.deleted,e=>{const n=Eo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on($s.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{J.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Eo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var DCe=Object.defineProperty,BCe=(t,e,n)=>e in t?DCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ei=(t,e,n)=>BCe(t,typeof e!="symbol"?e+"":e,n);let LCe=class extends Cve{constructor(e,n){super(e,n),this.core=e,this.logger=n,ei(this,"expirations",new Map),ei(this,"events",new Kn.EventEmitter),ei(this,"name",U2e),ei(this,"version",j2e),ei(this,"cached",[]),ei(this,"initialized",!1),ei(this,"storagePrefix",ja),ei(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ei(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),ei(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(eo.created,{target:s,expiration:o})}),ei(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),ei(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(eo.deleted,{target:i,expiration:s})}}),ei(this,"on",(r,i)=>{this.events.on(r,i)}),ei(this,"once",(r,i)=>{this.events.once(r,i)}),ei(this,"off",(r,i)=>{this.events.off(r,i)}),ei(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Dme(e);if(typeof e=="number")return Bme(e);const{message:n}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(eo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;J.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(eo.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on($s.pulse,()=>this.checkExpirations()),this.events.on(eo.created,e=>{const n=eo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(eo.expired,e=>{const n=eo.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(eo.deleted,e=>{const n=eo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};var UCe=Object.defineProperty,jCe=(t,e,n)=>e in t?UCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e,n)=>jCe(t,typeof e!="symbol"?e+"":e,n);let FCe=class extends _ve{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Vn(this,"name",F2e),Vn(this,"abortController"),Vn(this,"isDevEnv"),Vn(this,"verifyUrlV3",H2e),Vn(this,"storagePrefix",ja),Vn(this,"version",Uz),Vn(this,"publicKey"),Vn(this,"fetchPromise"),Vn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Vn(this,"register",async i=>{if(!Xg()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Is(),u=this.startAbortTimer(J.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const b=JSON.parse(w.data);if(b.type==="verify_attestation"){if(hg(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Vn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(hg(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),Vn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Vn(this,"getVerifyUrl",i=>{let s=i||ym;return z2e.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${ym}`),s=ym),s}),Vn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Vn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Vn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Vn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Vn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Vn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Vn(this,"validateAttestation",(i,s)=>{const o=h1e(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=jt(n,this.name),this.abortController=new AbortController,this.isDevEnv=Y8(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return tn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}};var qCe=Object.defineProperty,HCe=(t,e,n)=>e in t?qCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aN=(t,e,n)=>HCe(t,typeof e!="symbol"?e+"":e,n);let zCe=class extends Sve{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,aN(this,"context",K2e),aN(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${V2e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=jt(n,this.context)}};var KCe=Object.defineProperty,cN=Object.getOwnPropertySymbols,VCe=Object.prototype.hasOwnProperty,WCe=Object.prototype.propertyIsEnumerable,qA=(t,e,n)=>e in t?KCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k0=(t,e)=>{for(var n in e||(e={}))VCe.call(e,n)&&qA(t,n,e[n]);if(cN)for(var n of cN(e))WCe.call(e,n)&&qA(t,n,e[n]);return t},or=(t,e,n)=>qA(t,typeof e!="symbol"?e+"":e,n);let GCe=class extends Ave{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,or(this,"context",G2e),or(this,"storagePrefix",ja),or(this,"storageVersion",W2e),or(this,"events",new Map),or(this,"shouldPersist",!1),or(this,"init",async()=>{if(!Y8())try{const i={eventId:BT(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:FH(this.core.relayer.protocol,this.core.relayer.version,RA)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),or(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=BT(),u=this.core.projectId||"",d=Date.now(),h=k0({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),or(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return k0(k0({},a),this.setMethods(a.eventId))}),or(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),or(this,"setEventListeners",()=>{this.core.heartbeat.on($s.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>Z2e&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),or(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),or(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),or(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),or(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),or(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,k0(k0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),or(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),or(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Y2e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${RA}${s}`,{method:"POST",body:JSON.stringify(i)})}),or(this,"getAppDomain",()=>jH().url),this.logger=jt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var ZCe=Object.defineProperty,lN=Object.getOwnPropertySymbols,YCe=Object.prototype.hasOwnProperty,QCe=Object.prototype.propertyIsEnumerable,HA=(t,e,n)=>e in t?ZCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uN=(t,e)=>{for(var n in e||(e={}))YCe.call(e,n)&&HA(t,n,e[n]);if(lN)for(var n of lN(e))QCe.call(e,n)&&HA(t,n,e[n]);return t},nn=(t,e,n)=>HA(t,typeof e!="symbol"?e+"":e,n);let JCe=class Xz extends hve{constructor(e){var n;super(e),nn(this,"protocol",Lz),nn(this,"version",Uz),nn(this,"name",$A),nn(this,"relayUrl"),nn(this,"projectId"),nn(this,"customStoragePrefix"),nn(this,"events",new Kn.EventEmitter),nn(this,"logger"),nn(this,"heartbeat"),nn(this,"relayer"),nn(this,"crypto"),nn(this,"storage"),nn(this,"history"),nn(this,"expirer"),nn(this,"pairing"),nn(this,"verify"),nn(this,"echoClient"),nn(this,"linkModeSupportedApps"),nn(this,"eventClient"),nn(this,"initialized",!1),nn(this,"logChunkController"),nn(this,"on",(a,c)=>this.events.on(a,c)),nn(this,"once",(a,c)=>this.events.once(a,c)),nn(this,"off",(a,c)=>this.events.off(a,c)),nn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),nn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:pn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Fz,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=el({level:typeof e?.logger=="string"&&e.logger?e.logger:y2e.logger,name:$A}),{logger:s,chunkLoggerController:o}=sx({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=jt(s,this.name),this.heartbeat=new Az,this.crypto=new A3e(this,this.logger,e?.keychain),this.history=new MCe(this,this.logger),this.expirer=new LCe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Dbe(uN(uN({},b2e),e?.storageOptions)),this.relayer=new J3e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new NCe(this,this.logger),this.verify=new FCe(this,this.logger,this.storage),this.echoClient=new zCe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new GCe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new Xz(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(N2e,r),n}get context(){return tn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Hk,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Hk)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&w2e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const XCe=JCe,eK="wc",tK=2,nK="client",ax=`${eK}@${tK}:${nK}:`,h_={name:nK,logger:"error"},dN="WALLETCONNECT_DEEPLINK_CHOICE",e_e="proposal",hN="Proposal expired",t_e="session",hf=J.SEVEN_DAYS,n_e="engine",ar={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},f_={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},aa={idle:"IDLE",active:"ACTIVE"},fN={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},r_e="request",i_e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],s_e="wc",o_e="auth",a_e="authKeys",c_e="pairingTopics",l_e="requests",LE=`${s_e}@${1.5}:${o_e}:`,Wb=`${LE}:PUB_KEY`;var u_e=Object.defineProperty,d_e=Object.defineProperties,h_e=Object.getOwnPropertyDescriptors,pN=Object.getOwnPropertySymbols,f_e=Object.prototype.hasOwnProperty,p_e=Object.prototype.propertyIsEnumerable,zA=(t,e,n)=>e in t?u_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qt=(t,e)=>{for(var n in e||(e={}))f_e.call(e,n)&&zA(t,n,e[n]);if(pN)for(var n of pN(e))p_e.call(e,n)&&zA(t,n,e[n]);return t},ui=(t,e)=>d_e(t,h_e(e)),he=(t,e,n)=>zA(t,typeof e!="symbol"?e+"":e,n);let g_e=class extends Pve{constructor(e){super(e),he(this,"name",n_e),he(this,"events",new Vg),he(this,"initialized",!1),he(this,"requestQueue",{state:aa.idle,queue:[]}),he(this,"sessionRequestQueue",{state:aa.idle,queue:[]}),he(this,"requestQueueDelay",J.ONE_SECOND),he(this,"expectedPairingMethodMap",new Map),he(this,"recentlyDeletedMap",new Map),he(this,"recentlyDeletedLimit",200),he(this,"relayMessageCache",[]),he(this,"pendingSessions",new Map),he(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ar)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),he(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ui(Qt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=O1e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:$}=await this.client.core.pairing.create();u=T,d=$}if(!u){const{message:T}=be("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=ar.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,g=Xn(p),m=ui(Qt(Qt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:jz}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:vr()}),w=$t("session_connect",m.id),{reject:b,resolve:y,done:_}=ad(p,hN),A=({id:T})=>{T===m.id&&(this.client.events.off("proposal_expire",A),this.pendingSessions.delete(m.id),this.events.emit(w,{error:{message:hN,code:0}}))};return this.client.events.on("proposal_expire",A),this.events.once(w,({error:T,session:$})=>{this.client.events.off("proposal_expire",A),T?b(T):$&&y($)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:_}}),he(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),he(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[Co.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(O){throw o.setError(Ju.no_internet_connection),O}try{await this.isValidProposalId(n?.id)}catch(O){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(Ju.proposal_not_found),O}try{await this.isValidApprove(n)}catch(O){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ju.session_approve_namespace_validation_failure),O}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:w}=f;let b=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});b||(b=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Co.session_approve_started,properties:{topic:p,trace:[Co.session_approve_started,Co.session_namespaces_validation_success]}}));const y=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,A=await this.client.core.crypto.generateSharedKey(y,_),T=Qt(Qt(Qt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:y,metadata:this.client.metadata},expiry:Xn(hf)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),$=pn.relay;b.addTrace(Co.subscribing_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:$})}catch(O){throw b.setError(Ju.subscribe_session_topic_failure),O}b.addTrace(Co.subscribe_session_topic_success);const D=ui(Qt({},T),{topic:A,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:y,transportType:pn.relay});await this.client.session.set(A,D),b.addTrace(Co.store_session);try{b.addTrace(Co.publishing_session_settle),await this.sendRequest({topic:A,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(O=>{throw b?.setError(Ju.session_settle_publish_failure),O}),b.addTrace(Co.session_settle_publish_success),b.addTrace(Co.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(O=>{throw b?.setError(Ju.session_approve_publish_failure),O}),b.addTrace(Co.session_approve_publish_success)}catch(O){throw this.client.logger.error(O),this.client.session.delete(A,qt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(A),O}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,qt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(A,Xn(hf)),{topic:A,acknowledged:()=>Promise.resolve(this.client.session.get(A))}}),he(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&(await this.sendError({id:r,topic:s,error:i,rpcOpts:ar.wc_sessionPropose.reject}),await this.client.proposal.delete(r,qt("USER_DISCONNECTED")))}),he(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=ad(),c=vr(),l=Ss().toString(),u=this.client.session.get(r).namespaces;return this.events.once($t("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),he(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=vr(),{done:s,resolve:o,reject:a}=ad();return this.events.once($t("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Xn(hf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),he(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:i,topic:s,expiry:o=ar.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);a?.transportType===pn.relay&&await this.confirmOnlineStateOrThrow();const c=vr(),l=Ss().toString(),{done:u,resolve:d,reject:h}=ad(o,"Request expired. Please try again.");this.events.once($t("session_request",c),({error:w,result:b})=>{w?h(w):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:ui(Qt({},i),{expiryTimestamp:Xn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const g={request:ui(Qt({},i),{expiryTimestamp:Xn(o)}),chainId:r},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async w=>{await this.sendRequest(Qt({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),w()}),new Promise(async w=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const y=await Fme(this.client.core.storage,dN);await Lme({id:c,topic:s,wcDeepLink:y})}w()}),u()]).then(w=>w[2])}),he(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===pn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);nr(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):On(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),he(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=vr(),s=Ss().toString(),{done:o,resolve:a,reject:c}=ad();this.events.once($t("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),he(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=Ss().toString(),a=vr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),he(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:qt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=be("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),he(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>k1e(r,n)))),he(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),he(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?pn.link_mode:pn.relay;o===pn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,w=[...n.resources||[]],{topic:b,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:y}});const _=await this.client.core.crypto.generateKeyPair(),A=Hb(_);if(await Promise.all([this.client.auth.authKeys.set(Wb,{responseTopic:A,publicKey:_}),this.client.auth.pairingTopics.set(A,{topic:A,pairingTopic:b})]),await this.client.core.relayer.subscribe(A,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:C}=Tp(a[0]);let P=$we(C,"request",g);qb(w)&&(P=Mwe(P,w.pop())),w.push(P)}const T=m&&m>ar.wc_sessionAuthenticate.req.ttl?m:ar.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Xn(T)},D={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:D,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:Xn(ar.wc_sessionPropose.req.ttl),id:vr()},{done:j,resolve:F,reject:L}=ad(T,"Request expired"),B=vr(),x=$t("session_connect",O.id),v=$t("session_request",B),S=async({error:C,session:P})=>{this.events.off(v,N),C?L(C):P&&F({session:P})},N=async C=>{var P,M,I;if(await this.deletePendingAuthRequest(B,{message:"fulfilled",code:0}),C.error){const K=qt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===K.code?void 0:(this.events.off(x,S),L(C.error.message))}await this.deleteProposal(O.id),this.events.off(x,S);const{cacaos:k,responder:R}=C.result,U=[],q=[];for(const K of k){await KT({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),L(qt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:G}=K,Y=qb(G.resources),X=[yA(G.iss)],ie=t2(G.iss);if(Y){const de=VT(Y),Se=WT(Y);U.push(...de),X.push(...Se)}for(const de of X)q.push(`${de}:${ie}`)}const H=await this.client.core.crypto.generateSharedKey(_,R.publicKey);let z;U.length>0&&(z={topic:H,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:R,controller:R.publicKey,expiry:Xn(hf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:yk([...new Set(U)],[...new Set(q)]),transportType:o},await this.client.core.relayer.subscribe(H,{transportType:o}),await this.client.session.set(H,z),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:R.metadata}),z=this.client.session.get(H)),(P=this.client.metadata.redirect)!=null&&P.linkMode&&(M=R.metadata.redirect)!=null&&M.linkMode&&(I=R.metadata.redirect)!=null&&I.universal&&r&&(this.client.core.addLinkModeSupportedApp(R.metadata.redirect.universal),this.client.session.update(H,{transportType:pn.link_mode})),F({auths:k,session:z})};this.events.once(x,S),this.events.once(v,N);let E;try{if(s){const C=Ci("wc_sessionAuthenticate",$,B);this.client.core.history.set(b,C);const P=await this.client.core.crypto.encode("",C,{type:iy,encoding:Wl});E=D1(r,b,P)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:B}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:O,expiry:ar.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(C){throw this.events.off(x,S),this.events.off(v,N),C}return await this.setProposal(O.id,O),await this.setAuthRequest(B,{request:ui(Qt({},$),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:E??y,response:j}}),he(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Xu.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw s.setError(P0.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(P0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||pn.relay;a===pn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Hb(c),d={type:Fc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of i){if(!await KT({cacao:m,projectId:this.client.core.projectId})){s.setError(P0.invalid_cacao);const A=qt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:A,encodeOpts:d}),new Error(A.message)}s.addTrace(Xu.cacaos_verified);const{p:w}=m,b=qb(w.resources),y=[yA(w.iss)],_=t2(w.iss);if(b){const A=VT(b),T=WT(b);h.push(...A),y.push(...T)}for(const A of y)f.push(`${A}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Xu.create_authenticated_session_topic);let g;if(h?.length>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Xn(hf),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:yk([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(Xu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw s.setError(P0.subscribe_authenticated_session_topic_failure),m}s.addTrace(Xu.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),s.addTrace(Xu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Xu.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw s.setError(P0.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),he(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===pn.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Hb(o),l={type:Fc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:ar.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,qt("USER_DISCONNECTED"))}),he(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return JH(r,i)}),he(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),he(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),he(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,qt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(dN).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,qt("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=aa.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),he(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Ju.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,qt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),he(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=aa.idle,this.client.events.emit("session_request_expire",{id:n}))}),he(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),he(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),he(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Xn(ar.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),he(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=pn.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),he(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||Xn(ar.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),he(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Ci(i,s,c);let f;const p=!!u;try{const w=p?Wl:Fo;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(i_e.includes(i)){const w=ba(JSON.stringify(h)),b=ba(f);g=await this.client.core.verify.register({id:b,decryptedId:w})}const m=ar[i].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const w=D1(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=ar[i].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=ui(Qt({},d),{correlationId:h.id}),l?(w.internal=ui(Qt({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(b=>this.client.logger.error(b))}return h.id}),he(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=qu(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Wl:Fo;u=await this.client.core.crypto.encode(i,l,ui(Qt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let h,f;try{h=await this.client.core.history.get(i,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,s))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(d){const p=D1(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ar[p].res;g.tvf=ui(Qt({},f),{correlationId:r}),o?(g.internal=ui(Qt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),he(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=r0(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Wl:Fo;u=await this.client.core.crypto.encode(i,l,ui(Qt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),f}if(d){const f=D1(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ar[f].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(l)}),he(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;jl(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{jl(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),he(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),he(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),he(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===aa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=aa.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=aa.idle}),he(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),he(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),he(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),he(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),he(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(fc.proposal_listener_not_found)),this.isValidConnect(Qt({},i.params));const u=a.expiryTimestamp||Xn(ar.wc_sessionPropose.req.ttl),d=Qt({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:ba(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(pa.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ar.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),he(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(nr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(On(r)){await this.client.proposal.delete(s,qt("USER_DISCONNECTED"));const o=$t("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),he(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ui(Qt(Qt(Qt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:pn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit($t("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;nr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit($t("session_approve",i),{})):On(r)&&(await this.client.session.delete(n,qt("USER_DISCONNECTED")),this.events.emit($t("session_approve",i),{error:r.error}))}),he(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=I0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:qt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Qt({topic:n},i));try{I0.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw I0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),he(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=$t("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit($t("session_update",i),{}):On(r)&&this.events.emit($t("session_update",i),{error:r.error})}),he(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Xn(hf)),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),he(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=$t("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit($t("session_extend",i),{}):On(r)&&this.events.emit($t("session_extend",i),{error:r.error})}),he(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),he(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=$t("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);nr(r)?this.events.emit($t("session_ping",i),{}):On(r)&&this.events.emit($t("session_ping",i),{error:r.error})},500)}),he(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Cr.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:qt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),he(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Qt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:ba(JSON.stringify(Ci("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===pn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),he(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=$t("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit($t("session_request",i),{result:r.result}):On(r)&&this.events.emit($t("session_request",i),{error:r.error})}),he(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=I0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Qt({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),I0.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),he(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),nr(r)?this.events.emit($t("session_request",i),{result:r.result}):On(r)&&this.events.emit($t("session_request",i),{error:r.error})}),he(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:ba(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===pn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:Fc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:ar.wc_sessionAuthenticate.autoReject,appLink:h})}}),he(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),he(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=aa.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),he(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=$t("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit($t("session_request",s.request.id),{error:r})})}),he(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===aa.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=aa.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),he(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),he(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ci("wc_sessionPropose",ui(Qt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),he(this,"isValidConnect",async n=>{if(!Fi(n)){const{message:l}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Fr(r)||await this.isValidPairingTopic(r),!H1e(c)){const{message:l}=be("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Fr(i)&&Su(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!Fr(s)&&Su(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Fr(o)||this.validateSessionProps(o,"sessionProperties"),!Fr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),he(this,"validateNamespaces",(n,r)=>{const i=q1e(n,"connect()",r);if(i)throw new Error(i.message)}),he(this,"isValidApprove",async n=>{if(!Fi(n))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=i_(i,"approve()");if(l)throw new Error(l.message);const u=Ek(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Zn(s,!0)){const{message:d}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(Fr(o)||this.validateSessionProps(o,"sessionProperties"),!Fr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),he(this,"isValidReject",async n=>{if(!Fi(n)){const{message:s}=be("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!K1e(i)){const{message:s}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),he(this,"isValidSessionSettleRequest",n=>{if(!Fi(n)){const{message:l}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!Sz(r)){const{message:l}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=D1e(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=i_(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(jl(o)){const{message:l}=be("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),he(this,"isValidUpdate",async n=>{if(!Fi(n)){const{message:c}=be("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=i_(i,"update()");if(o)throw new Error(o.message);const a=Ek(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),he(this,"isValidExtend",async n=>{if(!Fi(n)){const{message:i}=be("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),he(this,"isValidRequest",async n=>{if(!Fi(n)){const{message:c}=be("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!vk(a,s)){const{message:c}=be("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!V1e(i)){const{message:c}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!Z1e(a,s,i.method)){const{message:c}=be("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!X1e(o,f_)){const{message:c}=be("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${f_.min} and ${f_.max}`);throw new Error(c)}}),he(this,"isValidRespond",async n=>{var r;if(!Fi(n)){const{message:o}=be("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!W1e(s)){const{message:o}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),he(this,"isValidPing",async n=>{if(!Fi(n)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),he(this,"isValidEmit",async n=>{if(!Fi(n)){const{message:a}=be("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!vk(o,s)){const{message:a}=be("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!G1e(i)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Y1e(o,s,i.name)){const{message:a}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),he(this,"isValidDisconnect",async n=>{if(!Fi(n)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),he(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Zn(i,!1))throw new Error("uri is required parameter");if(!Zn(s,!1))throw new Error("domain is required parameter");if(!Zn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Tp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Tp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),he(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||ym,validation:"UNKNOWN",origin:o.url||""}};try{if(a===pn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),he(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=be("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),he(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),he(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),he(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=be("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),he(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,h;return!n||r!==pn.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n?.redirect)==null?void 0:u.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),he(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n?.redirect)==null?void 0:i.universal:void 0}),he(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=DT(n,"topic")||"",i=decodeURIComponent(DT(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:pn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),he(this,"registerLinkModeListeners",async()=>{var n;if(Y8()||ju()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),he(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:i}=r;return Object.keys(fN).includes(i.method)}),he(this,"getTVFParams",(n,r,i)=>{var s,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,i);return ui(Qt({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(s=r.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),he(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=n?.data||((r=n?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),he(this,"extractTxHashesFromResult",(n,r)=>{try{const i=fN[n];if(typeof r=="string")return[r];const s=r[i.key];if(Ko(s))return n==="solana_signAllTransactions"?s.map(o=>bwe(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Cr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Wb)?this.client.auth.authKeys.get(Wb):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===pn.link_mode?Wl:Fo});i0(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:ba(r)})):Dh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(eo.expired,async e=>{const{topic:n,id:r}=HH(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,be("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(gd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(gd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Zn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(jl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Zn(e,!1)){const{message:n}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(jl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=be("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=be("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Zn(e,!1)){const{message:n}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!z1e(e)){const{message:n}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(jl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=be("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}},m_e=class extends Bh{constructor(e,n){super(e,n,e_e,ax),this.core=e,this.logger=n}},w_e=class extends Bh{constructor(e,n){super(e,n,t_e,ax),this.core=e,this.logger=n}},y_e=class extends Bh{constructor(e,n){super(e,n,r_e,ax,r=>r.id),this.core=e,this.logger=n}},b_e=class extends Bh{constructor(e,n){super(e,n,a_e,LE,()=>Wb),this.core=e,this.logger=n}},v_e=class extends Bh{constructor(e,n){super(e,n,c_e,LE),this.core=e,this.logger=n}},E_e=class extends Bh{constructor(e,n){super(e,n,l_e,LE,r=>r.id),this.core=e,this.logger=n}};var C_e=Object.defineProperty,__e=(t,e,n)=>e in t?C_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p_=(t,e,n)=>__e(t,typeof e!="symbol"?e+"":e,n);let S_e=class{constructor(e,n){this.core=e,this.logger=n,p_(this,"authKeys"),p_(this,"pairingTopics"),p_(this,"requests"),this.authKeys=new b_e(this.core,this.logger),this.pairingTopics=new v_e(this.core,this.logger),this.requests=new E_e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var A_e=Object.defineProperty,x_e=(t,e,n)=>e in t?A_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ht=(t,e,n)=>x_e(t,typeof e!="symbol"?e+"":e,n);let I_e=class rK extends Ove{constructor(e){super(e),ht(this,"protocol",eK),ht(this,"version",tK),ht(this,"name",h_.name),ht(this,"metadata"),ht(this,"core"),ht(this,"logger"),ht(this,"events",new Kn.EventEmitter),ht(this,"engine"),ht(this,"session"),ht(this,"proposal"),ht(this,"pendingRequest"),ht(this,"auth"),ht(this,"signConfig"),ht(this,"on",(r,i)=>this.events.on(r,i)),ht(this,"once",(r,i)=>this.events.once(r,i)),ht(this,"off",(r,i)=>this.events.off(r,i)),ht(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),ht(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),ht(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),ht(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),ht(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),ht(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||h_.name,this.metadata=Nme(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Fu(el({level:e?.logger||h_.logger}));this.core=e?.core||new XCe(e),this.logger=jt(n,this.name),this.session=new w_e(this.core,this.logger),this.proposal=new m_e(this.core,this.logger),this.pendingRequest=new y_e(this.core,this.logger),this.engine=new g_e(this),this.auth=new S_e(this.core,this.logger)}static async init(e){const n=new rK(e);return await n.initialize(),n}get context(){return tn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var KA={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Mn<"u"&&Mn,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Mn<"u"&&Mn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&u.indexOf(Object.prototype.toString.call(v))>-1};function h(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function f(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var S={next:function(){var N=v.shift();return{done:N===void 0,value:N}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(v){this.map={},v instanceof g?v.forEach(function(S,N){this.append(N,S)},this):Array.isArray(v)?v.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(S){this.append(S,v[S])},this)}g.prototype.append=function(v,S){v=h(v),S=f(S);var N=this.map[v];this.map[v]=N?N+", "+S:S},g.prototype.delete=function(v){delete this.map[h(v)]},g.prototype.get=function(v){return v=h(v),this.has(v)?this.map[v]:null},g.prototype.has=function(v){return this.map.hasOwnProperty(h(v))},g.prototype.set=function(v,S){this.map[h(v)]=f(S)},g.prototype.forEach=function(v,S){for(var N in this.map)this.map.hasOwnProperty(N)&&v.call(S,this.map[N],N,this)},g.prototype.keys=function(){var v=[];return this.forEach(function(S,N){v.push(N)}),p(v)},g.prototype.values=function(){var v=[];return this.forEach(function(S){v.push(S)}),p(v)},g.prototype.entries=function(){var v=[];return this.forEach(function(S,N){v.push([N,S])}),p(v)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function w(v){return new Promise(function(S,N){v.onload=function(){S(v.result)},v.onerror=function(){N(v.error)}})}function b(v){var S=new FileReader,N=w(S);return S.readAsArrayBuffer(v),N}function y(v){var S=new FileReader,N=w(S),E=/charset=([A-Za-z0-9_-]+)/.exec(v.type),C=E?E[1]:"utf-8";return S.readAsText(v,C),N}function _(v){for(var S=new Uint8Array(v),N=new Array(S.length),E=0;E<S.length;E++)N[E]=String.fromCharCode(S[E]);return N.join("")}function A(v){if(v.slice)return v.slice(0);var S=new Uint8Array(v.byteLength);return S.set(new Uint8Array(v)),S.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&l(v)?(this._bodyArrayBuffer=A(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=A(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=m(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D(v){var S=v.toUpperCase();return $.indexOf(S)>-1?S:v}function O(v,S){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var N=S.body;if(v instanceof O){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,S.headers||(this.headers=new g(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!N&&v._bodyInit!=null&&(N=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=D(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var E=/([?&])_=[^&]*/;if(E.test(this.url))this.url=this.url.replace(E,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function j(v){var S=new FormData;return v.trim().split("&").forEach(function(N){if(N){var E=N.split("="),C=E.shift().replace(/\+/g," "),P=E.join("=").replace(/\+/g," ");S.append(decodeURIComponent(C),decodeURIComponent(P))}}),S}function F(v){var S=new g,N=v.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(E){return E.indexOf(`
`)===0?E.substr(1,E.length):E}).forEach(function(E){var C=E.split(":"),P=C.shift().trim();if(P){var M=C.join(":").trim();try{S.append(P,M)}catch(I){console.warn("Response "+I.message)}}}),S}T.call(O.prototype);function L(v,S){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(v)}T.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var v=new L(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var B=[301,302,303,307,308];L.redirect=function(v,S){if(B.indexOf(S)===-1)throw new RangeError("Invalid status code");return new L(null,{status:S,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,N){this.message=S,this.name=N;var E=Error(S);this.stack=E.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function x(v,S){return new Promise(function(N,E){var C=new O(v,S);if(C.signal&&C.signal.aborted)return E(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function M(){P.abort()}P.onload=function(){var R={statusText:P.statusText,headers:F(P.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(P.status<200||P.status>599)?R.status=200:R.status=P.status,R.url="responseURL"in P?P.responseURL:R.headers.get("X-Request-URL");var U="response"in P?P.response:P.responseText;setTimeout(function(){N(new L(U,R))},0)},P.onerror=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){E(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){E(new o.DOMException("Aborted","AbortError"))},0)};function I(R){try{return R===""&&a.location.href?a.location.href:R}catch{return R}}if(P.open(C.method,I(C.url),!0),C.credentials==="include"?P.withCredentials=!0:C.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var k=[];Object.getOwnPropertyNames(S.headers).forEach(function(R){k.push(h(R)),P.setRequestHeader(R,f(S.headers[R]))}),C.headers.forEach(function(R,U){k.indexOf(U)===-1&&P.setRequestHeader(U,R)})}else C.headers.forEach(function(R,U){P.setRequestHeader(U,R)});C.signal&&(C.signal.addEventListener("abort",M),P.onreadystatechange=function(){P.readyState===4&&C.signal.removeEventListener("abort",M)}),P.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return x.polyfill=!0,a.fetch||(a.fetch=x,a.Headers=g,a.Request=O,a.Response=L),o.Headers=g,o.Request=O,o.Response=L,o.fetch=x,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(KA,KA.exports);var O_e=KA.exports;const gN=Lu(O_e);var P_e=Object.defineProperty,T_e=Object.defineProperties,k_e=Object.getOwnPropertyDescriptors,mN=Object.getOwnPropertySymbols,N_e=Object.prototype.hasOwnProperty,$_e=Object.prototype.propertyIsEnumerable,wN=(t,e,n)=>e in t?P_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yN=(t,e)=>{for(var n in e||(e={}))N_e.call(e,n)&&wN(t,n,e[n]);if(mN)for(var n of mN(e))$_e.call(e,n)&&wN(t,n,e[n]);return t},bN=(t,e)=>T_e(t,k_e(e));const R_e={Accept:"application/json","Content-Type":"application/json"},M_e="POST",vN={headers:R_e,method:M_e},EN=10;let Tn=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Kn.EventEmitter,this.isAvailable=!1,this.registering=!1,!Bk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ho(e),r=await(await gN(this.url,bN(yN({},vN),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Bk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ho({id:1,jsonrpc:"2.0",method:"test",params:[]});await gN(e,bN(yN({},vN),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Go(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=r0(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return Nz(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>EN&&this.events.setMaxListeners(EN)}};const CN="error",D_e="wss://relay.walletconnect.org",B_e="wc",L_e="universal_provider",j1=`${B_e}@2:${L_e}:`,iK="https://rpc.walletconnect.org/v1/",Gf="generic",U_e=`${iK}bundler`,go={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function j_e(){}function cx(t){return t==null||typeof t!="object"&&typeof t!="function"}function lx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function F_e(t){if(cx(t))return t;if(Array.isArray(t)||lx(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function _N(t){return typeof t=="object"&&t!==null}function sK(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function oK(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const q_e="[object RegExp]",aK="[object String]",cK="[object Number]",lK="[object Boolean]",uK="[object Arguments]",H_e="[object Symbol]",z_e="[object Date]",K_e="[object Map]",V_e="[object Set]",W_e="[object Array]",G_e="[object ArrayBuffer]",Z_e="[object Object]",Y_e="[object DataView]",Q_e="[object Uint8Array]",J_e="[object Uint8ClampedArray]",X_e="[object Uint16Array]",e5e="[object Uint32Array]",t5e="[object Int8Array]",n5e="[object Int16Array]",r5e="[object Int32Array]",i5e="[object Float32Array]",s5e="[object Float64Array]";function o5e(t,e){return pp(t,void 0,t,new Map,e)}function pp(t,e,n,r=new Map,i=void 0){const s=i?.(t,e,n,r);if(s!=null)return s;if(cx(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=pp(t[a],a,n,r,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,pp(c,a,n,r,i));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(pp(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(lx(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=pp(t[a],a,n,r,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),md(o,t,n,r,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),md(o,t,n,r,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),md(o,t,n,r,i),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,md(o,t,n,r,i),o}if(typeof t=="object"&&a5e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),md(o,t,n,r,i),o}return t}function md(t,e,n=t,r,i){const s=[...Object.keys(e),...sK(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=pp(e[a],a,n,r,i))}}function a5e(t){switch(oK(t)){case uK:case W_e:case G_e:case Y_e:case lK:case z_e:case i5e:case s5e:case t5e:case n5e:case r5e:case K_e:case cK:case Z_e:case q_e:case V_e:case aK:case H_e:case Q_e:case J_e:case X_e:case e5e:return!0;default:return!1}}function c5e(t,e){return o5e(t,(n,r,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case cK:case aK:case lK:{const o=new t.constructor(t?.valueOf());return md(o,t),o}case uK:{const o={};return md(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function SN(t){return c5e(t)}function AN(t){return t!==null&&typeof t=="object"&&oK(t)==="[object Arguments]"}function l5e(t){return lx(t)}function u5e(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function d5e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let i=t;for(let s=0;s<n.length;s++){const o=n[s];i=VA(i,o,r,new Map)}return i}function VA(t,e,n,r){if(cx(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return F_e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...sK(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(AN(a)&&(a={...a}),AN(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=SN(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||_N(c)&&_N(a)?t[o]=VA(c,a,n,r):c==null&&u5e(a)?t[o]=VA({},a,n,r):c==null&&l5e(a)?t[o]=SN(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function h5e(t,...e){return d5e(t,...e,j_e)}var f5e=Object.defineProperty,p5e=Object.defineProperties,g5e=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,m5e=Object.prototype.hasOwnProperty,w5e=Object.prototype.propertyIsEnumerable,IN=(t,e,n)=>e in t?f5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F1=(t,e)=>{for(var n in e||(e={}))m5e.call(e,n)&&IN(t,n,e[n]);if(xN)for(var n of xN(e))w5e.call(e,n)&&IN(t,n,e[n]);return t},y5e=(t,e)=>p5e(t,g5e(e));function Os(t,e,n){var r;const i=Tp(t);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${iK}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function Lh(t){return t.includes(":")?t.split(":")[1]:t}function dK(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function b5e(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function q1(t={},e={}){const n=ON(t),r=ON(e);return h5e(n,r)}function ON(t){var e,n,r,i,s;const o={};if(!Su(t))return o;for(const[a,c]of Object.entries(t)){const l=ME(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=fp(a);o[f]=y5e(F1(F1({},o[f]),c),{chains:$a(l,(e=o[f])==null?void 0:e.chains),methods:$a(u,(n=o[f])==null?void 0:n.methods),events:$a(d,(r=o[f])==null?void 0:r.events)}),(Su(h)||Su(((i=o[f])==null?void 0:i.rpcMap)||{}))&&(o[f].rpcMap=F1(F1({},h),(s=o[f])==null?void 0:s.rpcMap))}return o}function PN(t){return t.includes(":")?t.split(":")[2]:t}function TN(t){const e={};for(const[n,r]of Object.entries(t)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=ME(n)?[n]:r.chains?r.chains:dK(r.accounts);e[n]={chains:a,methods:i,events:s,accounts:o}}return e}function g_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const hK={},Pt=t=>hK[t],m_=(t,e)=>{hK[t]=e};var v5e=Object.defineProperty,E5e=(t,e,n)=>e in t?v5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ff=(t,e,n)=>E5e(t,typeof e!="symbol"?e+"":e,n);let C5e=class{constructor(e){ff(this,"name","polkadot"),ff(this,"client"),ff(this,"httpProviders"),ff(this,"events"),ff(this,"namespace"),ff(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Lh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var _5e=Object.defineProperty,S5e=Object.defineProperties,A5e=Object.getOwnPropertyDescriptors,kN=Object.getOwnPropertySymbols,x5e=Object.prototype.hasOwnProperty,I5e=Object.prototype.propertyIsEnumerable,WA=(t,e,n)=>e in t?_5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NN=(t,e)=>{for(var n in e||(e={}))x5e.call(e,n)&&WA(t,n,e[n]);if(kN)for(var n of kN(e))I5e.call(e,n)&&WA(t,n,e[n]);return t},$N=(t,e)=>S5e(t,A5e(e)),pf=(t,e,n)=>WA(t,typeof e!="symbol"?e+"":e,n);let O5e=class{constructor(e){pf(this,"name","eip155"),pf(this,"client"),pf(this,"chainId"),pf(this,"namespace"),pf(this,"httpProviders"),pf(this,"events"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Os(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(Lh(n));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,i,s,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d?.[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:$N(NN({},u.sessionProperties||{}),{capabilities:$N(NN({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const i=this.client.session.get(e.topic),s=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ci("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,n){return`${U_e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}};var P5e=Object.defineProperty,T5e=(t,e,n)=>e in t?P5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gf=(t,e,n)=>T5e(t,typeof e!="symbol"?e+"":e,n);let k5e=class{constructor(e){gf(this,"name","solana"),gf(this,"client"),gf(this,"httpProviders"),gf(this,"events"),gf(this,"namespace"),gf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Lh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var N5e=Object.defineProperty,$5e=(t,e,n)=>e in t?N5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mf=(t,e,n)=>$5e(t,typeof e!="symbol"?e+"":e,n);let R5e=class{constructor(e){mf(this,"name","cosmos"),mf(this,"client"),mf(this,"httpProviders"),mf(this,"events"),mf(this,"namespace"),mf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Lh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var M5e=Object.defineProperty,D5e=(t,e,n)=>e in t?M5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e,n)=>D5e(t,typeof e!="symbol"?e+"":e,n);let B5e=class{constructor(e){wf(this,"name","algorand"),wf(this,"client"),wf(this,"httpProviders"),wf(this,"events"),wf(this,"namespace"),wf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Os(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new En(new Tn(r,Pt("disableProviderPing")))}};var L5e=Object.defineProperty,U5e=(t,e,n)=>e in t?L5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yf=(t,e,n)=>U5e(t,typeof e!="symbol"?e+"":e,n);let j5e=class{constructor(e){yf(this,"name","cip34"),yf(this,"client"),yf(this,"httpProviders"),yf(this,"events"),yf(this,"namespace"),yf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=Lh(n);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var F5e=Object.defineProperty,q5e=(t,e,n)=>e in t?F5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bf=(t,e,n)=>q5e(t,typeof e!="symbol"?e+"":e,n);let H5e=class{constructor(e){bf(this,"name","elrond"),bf(this,"client"),bf(this,"httpProviders"),bf(this,"events"),bf(this,"namespace"),bf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Lh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var z5e=Object.defineProperty,K5e=(t,e,n)=>e in t?z5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>K5e(t,typeof e!="symbol"?e+"":e,n);let V5e=class{constructor(e){vf(this,"name","multiversx"),vf(this,"client"),vf(this,"httpProviders"),vf(this,"events"),vf(this,"namespace"),vf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Lh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var W5e=Object.defineProperty,G5e=(t,e,n)=>e in t?W5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ef=(t,e,n)=>G5e(t,typeof e!="symbol"?e+"":e,n);let Z5e=class{constructor(e){Ef(this,"name","near"),Ef(this,"client"),Ef(this,"httpProviders"),Ef(this,"events"),Ef(this,"namespace"),Ef(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Os(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace);return typeof r>"u"?void 0:new En(new Tn(r,Pt("disableProviderPing")))}};var Y5e=Object.defineProperty,Q5e=(t,e,n)=>e in t?Y5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e,n)=>Q5e(t,typeof e!="symbol"?e+"":e,n);let J5e=class{constructor(e){Cf(this,"name","tezos"),Cf(this,"client"),Cf(this,"httpProviders"),Cf(this,"events"),Cf(this,"namespace"),Cf(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Os(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace);return typeof r>"u"?void 0:new En(new Tn(r))}};var X5e=Object.defineProperty,eSe=(t,e,n)=>e in t?X5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_f=(t,e,n)=>eSe(t,typeof e!="symbol"?e+"":e,n);let tSe=class{constructor(e){_f(this,"name",Gf),_f(this,"client"),_f(this,"httpProviders"),_f(this,"events"),_f(this,"namespace"),_f(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const s=Tp(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Os(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Pt("disableProviderPing")))}};var nSe=Object.defineProperty,rSe=Object.defineProperties,iSe=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,sSe=Object.prototype.hasOwnProperty,oSe=Object.prototype.propertyIsEnumerable,GA=(t,e,n)=>e in t?nSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H1=(t,e)=>{for(var n in e||(e={}))sSe.call(e,n)&&GA(t,n,e[n]);if(RN)for(var n of RN(e))oSe.call(e,n)&&GA(t,n,e[n]);return t},w_=(t,e)=>rSe(t,iSe(e)),Ks=(t,e,n)=>GA(t,typeof e!="symbol"?e+"":e,n);let aSe=class fK{constructor(e){Ks(this,"client"),Ks(this,"namespaces"),Ks(this,"optionalNamespaces"),Ks(this,"sessionProperties"),Ks(this,"scopedProperties"),Ks(this,"events",new Vg),Ks(this,"rpcProviders",{}),Ks(this,"session"),Ks(this,"providerOpts"),Ks(this,"logger"),Ks(this,"uri"),Ks(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Fu(el({level:e?.logger||CN})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new fK(e);return await n.initialize(),n}async request(e,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:H1({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>n(null,qu(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:qt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=TN(this.session.namespaces);this.namespaces=q1(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const s=TN(i.namespaces);return this.namespaces=q1(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,i]=this.validateChain(e),s=this.getProvider(r);s.name===Gf?s.setDefaultChain(`${r}:${i}`,n):s.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Ko(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await I_e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||CN,relayUrl:this.providerOpts.relayUrl||D_e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>fp(n)))];m_("client",this.client),m_("events",this.events),m_("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=b5e(n,this.session),i=dK(r),s=q1(this.namespaces,this.optionalNamespaces),o=w_(H1({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new O5e({namespace:o});break;case"algorand":this.rpcProviders[n]=new B5e({namespace:o});break;case"solana":this.rpcProviders[n]=new k5e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new R5e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new C5e({namespace:o});break;case"cip34":this.rpcProviders[n]=new j5e({namespace:o});break;case"elrond":this.rpcProviders[n]=new H5e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new V5e({namespace:o});break;case"near":this.rpcProviders[n]=new Z5e({namespace:o});break;case"tezos":this.rpcProviders[n]=new J5e({namespace:o});break;default:this.rpcProviders[Gf]?this.rpcProviders[Gf].updateNamespace(o):this.rpcProviders[Gf]=new tSe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&Ko(o)&&this.events.emit("accountsChanged",o.map(PN))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=fp(o),l=g_(o)!==g_(a)?`${c}:${g_(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(e);this.session=w_(H1({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",w_(H1({},qt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(go.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Gf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=q1(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>fp(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=fp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(PN);if(!Ko(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${j1}/${e}${i}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${j1}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${j1}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(j1)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const cSe=aSe,lSe="wc",uSe="ethereum_provider",dSe=`${lSe}@2:${uSe}:`,hSe="https://rpc.walletconnect.org/v1/",o2=["eth_sendTransaction","personal_sign"],pK=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],a2=["chainChanged","accountsChanged"],gK=["chainChanged","accountsChanged","message","disconnect","connect"],fSe=async()=>{const{createAppKit:t}=await me(()=>Promise.resolve().then(()=>UNe),void 0);return t};var pSe=Object.defineProperty,gSe=Object.defineProperties,mSe=Object.getOwnPropertyDescriptors,MN=Object.getOwnPropertySymbols,wSe=Object.prototype.hasOwnProperty,ySe=Object.prototype.propertyIsEnumerable,ZA=(t,e,n)=>e in t?pSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cd=(t,e)=>{for(var n in e||(e={}))wSe.call(e,n)&&ZA(t,n,e[n]);if(MN)for(var n of MN(e))ySe.call(e,n)&&ZA(t,n,e[n]);return t},N0=(t,e)=>gSe(t,mSe(e)),ss=(t,e,n)=>ZA(t,typeof e!="symbol"?e+"":e,n);function c2(t){return Number(t[0].split(":")[1])}function z1(t){return`0x${t.toString(16)}`}function bSe(t){const{chains:e,optionalChains:n,methods:r,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!Ko(e))throw new Error("Invalid chains");const c={chains:e,methods:r||o2,events:s||a2,rpcMap:cd({},e.length?{[c2(e)]:a[c2(e)]}:{})},l=s?.filter(f=>!a2.includes(f)),u=r?.filter(f=>!o2.includes(f));if(!n&&!o&&!i&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const d=l?.length&&u?.length||!n,h={chains:[...new Set(d?c.chains.concat(n||[]):n)],methods:[...new Set(c.methods.concat(i!=null&&i.length?i:pK))],events:[...new Set(c.events.concat(o!=null&&o.length?o:gK))],rpcMap:a};return{required:e.length?c:void 0,optional:n.length?h:void 0}}let mK=class wK{constructor(){ss(this,"events",new Kn.EventEmitter),ss(this,"namespace","eip155"),ss(this,"accounts",[]),ss(this,"signer"),ss(this,"chainId",1),ss(this,"modal"),ss(this,"rpc"),ss(this,"STORAGE_KEY",dSe),ss(this,"on",(e,n)=>(this.events.on(e,n),this)),ss(this,"once",(e,n)=>(this.events.once(e,n),this)),ss(this,"removeListener",(e,n)=>(this.events.removeListener(e,n),this)),ss(this,"off",(e,n)=>(this.events.off(e,n),this)),ss(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const n=new wK;return await n.initialize(e),n}async request(e,n){return await this.signer.request(e,this.formatChainId(this.chainId),n)}sendAsync(e,n,r){this.signer.sendAsync(e,n,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=bSe(this.rpc);try{const s=await new Promise(async(a,c)=>{var l,u;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(u=this.modal)==null||u.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const d=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(N0(cd({namespaces:cd({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic,scopedProperties:d})).then(h=>{a(h)}).catch(h=>{var f;(f=this.modal)==null||f.showErrorMessage("Unable to connect"),c(new Error(h.message))})});if(!s)return;const o=kT(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:z1(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(n=this.modal)==null||n.close()}}async authenticate(e,n){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(o,a)=>{var c,l;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(l=this.modal)==null||l.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(N0(cd({},e),{chains:this.rpc.chains}),n).then(u=>{o(u)}).catch(u=>{var d;(d=this.modal)==null||d.showErrorMessage("Unable to connect"),a(new Error(u.message))})}),s=i.session;if(s){const o=kT(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:z1(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:n}=e,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const n=parseInt(e);this.chainId=n,this.events.emit("chainChanged",z1(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",N0(cd({},qt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const n=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",z1(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const n=this.parseChainId(e);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(e){const[n,r,i]=e.split(":");return{chainId:`${n}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var n,r;const i=(n=e?.chains)!=null?n:[],s=(r=e?.optionalChains)!=null?r:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=i.length?e?.methods||o2:[],c=i.length?e?.events||a2:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],d=e?.rpcMap||this.buildRpcMap(o,e.projectId),h=e?.qrModalOptions||void 0;return{chains:i?.map(f=>this.formatChainId(f)),optionalChains:s.map(f=>this.formatChainId(f)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:d,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,n){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,n)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?c2(this.rpc.chains):c2(this.rpc.optionalChains),this.signer=await cSe.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const r=await fSe(),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return TSe}),s=i(N0(cd({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!s.networks.length)throw new Error("No networks found for WalletConnect·");n=r(N0(cd({},s),{universalProvider:this.signer,manualWCControl:!0}))}catch(r){throw console.warn(r),new Error("To use QR modal, please install @reown/appkit package")}if(n)try{this.modal=n}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:n,optionalChains:r,rpcMap:i}=e;n&&Ko(n)&&(this.rpc.chains=n.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)})),r&&Ko(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${hSe}?chainId=eip155:${e}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:n?.accounts),this.setAccounts(n?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(n=>this.signer.logger.warn(n))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(n=>this.parseAccount(n))}};const vSe=mK;var ESe=Object.defineProperty,CSe=Object.defineProperties,_Se=Object.getOwnPropertyDescriptors,DN=Object.getOwnPropertySymbols,SSe=Object.prototype.hasOwnProperty,ASe=Object.prototype.propertyIsEnumerable,BN=(t,e,n)=>e in t?ESe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yK=(t,e)=>{for(var n in e||(e={}))SSe.call(e,n)&&BN(t,n,e[n]);if(DN)for(var n of DN(e))ASe.call(e,n)&&BN(t,n,e[n]);return t},xSe=(t,e)=>CSe(t,_Se(e));function ISe(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const OSe=t=>{const[e,n]=t.split(":");return bK({id:n,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function PSe(t){var e,n,r,i,s,o,a;const c=(e=t.chains)==null?void 0:e.map(OSe).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const l=c.find(d=>{var h;return d.id===((h=t.defaultChain)==null?void 0:h.id)}),u={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:ISe(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:l,metadata:xSe(yK({},t.metadata),{name:((n=t.metadata)==null?void 0:n.name)||"WalletConnect",description:((r=t.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((i=t.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=t.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const d=[...(t.mobileWallets||[]).map(p=>({id:p.id,name:p.name,links:p.links})),...(t.desktopWallets||[]).map(p=>({id:p.id,name:p.name,links:{native:p.links.native,universal:p.links.universal}}))],h=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],f=d.filter(p=>!h.includes(p.id));f.length&&(u.customWallets=f)}return u}function bK(t){return yK({formatters:void 0,fees:void 0,serializers:void 0},t)}var TSe=Object.freeze({__proto__:null,convertWCMToAppKitOptions:PSe,defineChain:bK});const kSe=Object.freeze(Object.defineProperty({__proto__:null,EthereumProvider:vSe,OPTIONAL_EVENTS:gK,OPTIONAL_METHODS:pK,REQUIRED_EVENTS:a2,REQUIRED_METHODS:o2,default:mK},Symbol.toStringTag,{value:"Module"}));var LN={};const je={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof LN<"u"?LN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},vK={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return je.CHAIN_NAME_MAP?.[r]||void 0}};var NSe=20,$Se=1,uh=1e6,UN=1e6,RSe=-7,MSe=21,DSe=!1,ay="[big.js] ",Uh=ay+"Invalid ",UE=Uh+"decimal places",BSe=Uh+"rounding mode",EK=ay+"Division by zero",zt={},Ma=void 0,LSe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function CK(){function t(e){var n=this;if(!(n instanceof t))return e===Ma?CK():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Uh+"value");e=e===0&&1/e<0?"-0":String(e)}USe(n,e)}n.constructor=t}return t.prototype=zt,t.DP=NSe,t.RM=$Se,t.NE=RSe,t.PE=MSe,t.strict=DSe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function USe(t,e){var n,r,i;if(!LSe.test(e))throw Error(Uh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=i;)t.c[n++]=+e.charAt(r++)}return t}function jh(t,e,n,r){var i=t.c;if(n===Ma&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(BSe);if(e<1)r=n===3&&(r||!!i[0])||e===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(r||i[1]!==Ma))),i.length=1,r?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(r=n===1&&i[e]>=5||n===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==Ma||i[e-1]&1))||n===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Fh(t,e,n){var r=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&n?"-"+i:i}zt.abs=function(){var t=new this.constructor(this);return t.s=1,t};zt.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,s=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=i.length)?a:c,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1};zt.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,s=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>uh)throw Error(UE);if(!i[0])throw Error(EK);if(!r[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,d,h=i.slice(),f=a=i.length,p=r.length,g=r.slice(0,a),m=g.length,w=t,b=w.c=[],y=0,_=o+(w.e=e.e-t.e)+1;for(w.s=s,s=_<0?0:_,h.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(i[d]!=g[d]){u=i[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?i:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}b[y++]=u?l:++l,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Ma)&&s--);return!b[0]&&y!=1&&(b.shift(),w.e--,_--),y>_&&jh(w,_,n.RM,g[0]!==Ma),w};zt.eq=function(t){return this.cmp(t)===0};zt.gt=function(t){return this.cmp(t)>0};zt.gte=function(t){return this.cmp(t)>-1};zt.lt=function(t){return this.cmp(t)<0};zt.lte=function(t){return this.cmp(t)<1};zt.minus=zt.sub=function(t){var e,n,r,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-h){for((i=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((i=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){i=l[c]<d[c];break}if(i&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};zt.mod=function(t){var e,n=this,r=n.constructor,i=n.s,s=(t=new r(t)).s;if(!t.c[0])throw Error(EK);return n.s=t.s=1,e=t.cmp(n)==1,n.s=i,t.s=s,e?new r(n):(i=r.DP,s=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=s,this.minus(n.times(t)))};zt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};zt.plus=zt.add=function(t){var e,n,r,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};zt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,i=t<0;if(t!==~~t||t<-UN||t>UN)throw Error(Uh+"exponent");for(i&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return i?n.div(r):r};zt.prec=function(t,e){if(t!==~~t||t<1||t>uh)throw Error(Uh+"precision");return jh(new this.constructor(this),t,e)};zt.round=function(t,e){if(t===Ma)t=0;else if(t!==~~t||t<-uh||t>uh)throw Error(UE);return jh(new this.constructor(this),t+this.e+1,e)};zt.sqrt=function(){var t,e,n,r=this,i=r.constructor,s=r.s,o=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(ay+"No square root");s=Math.sqrt(+Fh(r,!0,!0)),s===0||s===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return jh(t,(i.DP-=4)+t.e+1,i.RM)};zt.times=zt.mul=function(t){var e,n=this,r=n.constructor,i=n.c,s=(t=new r(t)).c,o=i.length,a=s.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};zt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ma){if(t!==~~t||t<0||t>uh)throw Error(UE);for(n=jh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Fh(n,!0,!!r)};zt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ma){if(t!==~~t||t<0||t>uh)throw Error(UE);for(n=jh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Fh(n,!1,!!r)};zt[Symbol.for("nodejs.util.inspect.custom")]=zt.toJSON=zt.toString=function(){var t=this,e=t.constructor;return Fh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};zt.toNumber=function(){var t=+Fh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(ay+"Imprecise conversion");return t};zt.toPrecision=function(t,e){var n=this,r=n.constructor,i=n.c[0];if(t!==Ma){if(t!==~~t||t<1||t>uh)throw Error(Uh+"precision");for(n=jh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Fh(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)};zt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(ay+"valueOf disallowed");return Fh(t,t.e<=e.NE||t.e>=e.PE,!0)};var $0=CK();const jSe={bigNumber(t){return t?new $0(t):new $0(0)},multiply(t,e){if(t===void 0||e===void 0)return new $0(0);const n=new $0(t),r=new $0(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},FSe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],qSe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],HSe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],zSe={getERC20Abi:t=>je.USDT_CONTRACT_ADDRESSES.includes(t)?HSe:FSe,getSwapAbi:()=>qSe},El={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,i]=e;if(!n||!r||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},rt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function y_(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Xe={setItem(t,e){em()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(em())return localStorage.getItem(t)||void 0},removeItem(t){em()&&localStorage.removeItem(t)},clear(){em()&&localStorage.clear()}};function em(){return typeof window<"u"&&typeof localStorage<"u"}function uu(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const KSe=Symbol(),jN=Object.getPrototypeOf,YA=new WeakMap,VSe=t=>t&&(YA.has(t)?YA.get(t):jN(t)===Object.prototype||jN(t)===Array.prototype),WSe=t=>VSe(t)&&t[KSe]||null,FN=(t,e=!0)=>{YA.set(t,e)},l2={},b_=t=>typeof t=="object"&&t!==null,Fl=new WeakMap,tm=new WeakSet,GSe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>b_(l)&&!tm.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,d=r)=>{const h=i.get(l);if(h?.[0]===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return FN(f,!0),i.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:m,configurable:!0};if(tm.has(g))FN(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Fl.has(g)){const[b,y]=Fl.get(g);w.value=s(b,y(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!b_(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(O,j=++a[0])=>{d!==j&&(d=j,h.forEach(F=>F(O,j)))};let p=a[1];const g=(O=++a[1])=>(p!==O&&!h.size&&(p=O,w.forEach(([j])=>{const F=j[1](O);F>d&&(d=F)})),d),m=O=>(j,F)=>{const L=[...j];L[1]=[O,...L[1]],f(L,F)},w=new Map,b=(O,j)=>{if((l2?"production":void 0)!=="production"&&w.has(O))throw new Error("prop listener already exists");if(h.size){const F=j[3](m(O));w.set(O,[j,F])}else w.set(O,[j])},y=O=>{var j;const F=w.get(O);F&&(w.delete(O),(j=F[1])==null||j.call(F))},_=O=>(h.add(O),h.size===1&&w.forEach(([F,L],B)=>{if((l2?"production":void 0)!=="production"&&L)throw new Error("remove already exists");const x=F[3](m(B));w.set(B,[F,x])}),()=>{h.delete(O),h.size===0&&w.forEach(([F,L],B)=>{L&&(L(),w.set(B,[F]))})}),A=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),$=e(A,{deleteProperty(O,j){const F=Reflect.get(O,j);y(j);const L=Reflect.deleteProperty(O,j);return L&&f(["delete",[j],F]),L},set(O,j,F,L){const B=Reflect.has(O,j),x=Reflect.get(O,j,L);if(B&&(t(x,F)||o.has(F)&&t(x,o.get(F))))return!0;y(j),b_(F)&&(F=WSe(F)||F);let v=F;if(F instanceof Promise)F.then(S=>{F.status="fulfilled",F.value=S,f(["resolve",[j],S])}).catch(S=>{F.status="rejected",F.reason=S,f(["reject",[j],S])});else{!Fl.has(F)&&n(F)&&(v=c(F));const S=!tm.has(v)&&Fl.get(v);S&&b(j,S)}return Reflect.set(O,j,v,L),f(["set",[j],F,x]),!0}});o.set(l,$);const D=[A,g,s,_];return Fl.set($,D),Reflect.ownKeys(l).forEach(O=>{const j=Object.getOwnPropertyDescriptor(l,O);"value"in j&&($[O]=l[O],delete j.value,delete j.writable),Object.defineProperty(A,O,j)}),$})=>[c,Fl,tm,t,e,n,r,i,s,o,a],[ZSe]=GSe();function hn(t={}){return ZSe(t)}function zr(t,e,n){const r=Fl.get(t);(l2?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let i;const s=[],o=r[3];let a=!1;const l=o(u=>{s.push(u),i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function fw(t,e){const n=Fl.get(t);(l2?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,i,s]=n;return s(r,i(),e)}function dh(t){return tm.add(t),t}function Gr(t,e,n,r){let i=t[e];return zr(t,()=>{const s=t[e];Object.is(i,s)||n(i=s)})}function YSe(t){const e=hn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const i=this.data.find(s=>s[0]===n);return i?i[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(i=>i[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(i=>i[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const _K=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],QSe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ht={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,BALANCE_SUPPORTED_CHAINS:["eip155","solana"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"}},Be={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Be.getActiveNamespace(),e=Be.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Xe.setItem(rt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Xe.getItem(rt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Xe.removeItem(rt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Xe.setItem(rt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Xe.setItem(rt.ACTIVE_CAIP_NETWORK_ID,t),Be.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Xe.getItem(rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Xe.removeItem(rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=y_(t);Xe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Be.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Xe.setItem(rt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Xe.getItem(rt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=y_(t);Xe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Xe.getItem(rt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=y_(t);return Xe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Xe.setItem(rt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Xe.getItem(rt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Xe.removeItem(rt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Xe.getItem(rt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Xe.getItem(rt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{Xe.setItem(rt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Xe.getItem(rt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Xe.getItem(rt.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Xe.setItem(rt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Be.getConnectedNamespaces();e.includes(t)||(e.push(t),Be.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Be.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Be.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Xe.getItem(rt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Xe.setItem(rt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Xe.removeItem(rt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Xe.getItem(rt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Be.getBalanceCache();Xe.setItem(rt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Be.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Be.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Be.getBalanceCache();e[t.caipAddress]=t,Xe.setItem(rt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Xe.getItem(rt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Be.getBalanceCache();Xe.setItem(rt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Be.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Be.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Be.getNativeBalanceCache();e[t.caipAddress]=t,Xe.setItem(rt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Xe.getItem(rt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Be.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Be.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Be.getEnsCache();e[t.address]=t,Xe.setItem(rt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Be.getEnsCache();Xe.setItem(rt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Xe.getItem(rt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Be.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Be.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Be.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Xe.setItem(rt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Be.getIdentityCache();Xe.setItem(rt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Xe.removeItem(rt.PORTFOLIO_CACHE),Xe.removeItem(rt.NATIVE_BALANCE_CACHE),Xe.removeItem(rt.ENS_CACHE),Xe.removeItem(rt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Xe.setItem(rt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Xe.getItem(rt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Be.getConnections(),[e]:t};Xe.setItem(rt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Xe.getItem(rt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ge={isMobile(){return this.isClient()?!!(typeof window?.matchMedia=="function"&&window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ge.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ht.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ht.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ge.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),r=new URL(e);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ht.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function i(){t(...r)}n&&clearTimeout(n),n=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ge.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,i=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),i&&!i?.endsWith("/")&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const s=encodeURIComponent(e);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:i?`${i}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ge.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Be.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window.matchMedia?.("(display-mode: standalone)")?.matches,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const i=new Image;i.onload=n,i.onerror=r,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ge.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const i=Math.floor(r*1e3)/1e3;i&&(n=i.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){let n;if(t==="0")n="0";else if(typeof t=="string"){const r=Number(t);r&&(n=r.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return je.W3M_API_URL},getBlockchainApiUrl(){return je.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return je.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,i)=>{n[r]=i}),e.sort((r,i)=>{const s=n[r.id],o=n[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const i=r[e];return n.has(i)?!1:(n.add(i),!0)})},generateSdkVersion(t,e,n){const i=t.length===0?Ht.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${n}`},createAccount(t,e,n,r,i){return{namespace:t,address:e,type:n,publicKey:r,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in je.CHAIN_NAME_MAP},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),n,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",r),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,r+s),c=t.substring(r+s,o),l=t.substring(i),u=c+n;return a+u+l}};async function R0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class cy{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...i}){const s=this.createUrl(i);return(await R0(s,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const i=this.createUrl(r);return(await R0(i,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await R0(s,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await R0(s,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await R0(s,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([i,s])=>{s&&r.searchParams.append(i,s)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const JSe={getFeatureValue(t,e){const n=e?.[t];return n===void 0?Ht.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ge.isTelegram()){if(ge.isIos())return t.filter(e=>e!=="google");if(ge.isMac())return t.filter(e=>e!=="x");if(ge.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ke=hn({features:Ht.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ht.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ae={state:Ke,subscribeKey(t,e){return Gr(Ke,t,e)},setOptions(t){Object.assign(Ke,t)},setRemoteFeatures(t){if(!t)return;const e={...Ke.remoteFeatures,...t};Ke.remoteFeatures=e,Ke.remoteFeatures?.socials&&(Ke.remoteFeatures.socials=JSe.filterSocialsByPlatform(Ke.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ke.features||(Ke.features=Ht.DEFAULT_FEATURES);const e={...Ke.features,...t};Ke.features=e},setProjectId(t){Ke.projectId=t},setCustomRpcUrls(t){Ke.customRpcUrls=t},setAllWallets(t){Ke.allWallets=t},setIncludeWalletIds(t){Ke.includeWalletIds=t},setExcludeWalletIds(t){Ke.excludeWalletIds=t},setFeaturedWalletIds(t){Ke.featuredWalletIds=t},setTokens(t){Ke.tokens=t},setTermsConditionsUrl(t){Ke.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ke.privacyPolicyUrl=t},setCustomWallets(t){Ke.customWallets=t},setIsSiweEnabled(t){Ke.isSiweEnabled=t},setIsUniversalProvider(t){Ke.isUniversalProvider=t},setSdkVersion(t){Ke.sdkVersion=t},setMetadata(t){Ke.metadata=t},setDisableAppend(t){Ke.disableAppend=t},setEIP6963Enabled(t){Ke.enableEIP6963=t},setDebug(t){Ke.debug=t},setEnableWalletConnect(t){Ke.enableWalletConnect=t},setEnableWalletGuide(t){Ke.enableWalletGuide=t},setEnableAuthLogger(t){Ke.enableAuthLogger=t},setEnableWallets(t){Ke.enableWallets=t},setPreferUniversalLinks(t){Ke.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Ke.hasMultipleAddresses=t},setSIWX(t){Ke.siwx=t},setConnectMethodsOrder(t){Ke.features={...Ke.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ke.features={...Ke.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ke.remoteFeatures={...Ke.remoteFeatures,socials:t}},setCollapseWallets(t){Ke.features={...Ke.features,collapseWallets:t}},setEnableEmbedded(t){Ke.enableEmbedded=t},setAllowUnsupportedChain(t){Ke.allowUnsupportedChain=t},setManualWCControl(t){Ke.manualWCControl=t},setEnableNetworkSwitch(t){Ke.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ke.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ke.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ke.universalProviderConfigOverride},getSnapshot(){return fw(Ke)}},XSe=Object.freeze({enabled:!0,events:[]}),eAe=new cy({baseUrl:ge.getAnalyticsUrl(),clientId:null}),tAe=5,nAe=60*1e3,Cl=hn({...XSe}),rAe={state:Cl,subscribeKey(t,e){return Gr(Cl,t,e)},async sendError(t,e){if(!Cl.enabled)return;const n=Date.now();if(Cl.events.filter(s=>{const o=new Date(s.properties.timestamp||"").getTime();return n-o<nAe}).length>=tAe)return;const i={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Cl.events.push(i);try{if(typeof window>"u")return;const{projectId:s,sdkType:o,sdkVersion:a}=ae.state;await eAe.post({path:"/e",params:{projectId:s,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Cl.enabled=!0},disable(){Cl.enabled=!1},clearEvents(){Cl.events=[]}};class vg extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,vg.prototype);let i=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const s=r.stack,o=s.indexOf(`
`);if(o>-1){const a=s.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,vg):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function qN(t,e){const n=t instanceof vg?t:new vg(t instanceof Error?t.message:String(t),e,t);throw rAe.sendError(n,n.category),n}function es(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const i=t[r];if(typeof i=="function"){let s=i;i.constructor.name==="AsyncFunction"?s=async(...o)=>{try{return await i(...o)}catch(a){return qN(a,e)}}:s=(...o)=>{try{return i(...o)}catch(a){return qN(a,e)}},n[r]=s}else n[r]=i}),n}const va={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},iAe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===va.PHANTOM.id&&!("phantom"in window)){const i=n.startsWith("https")?"https":"http",s=n.split("/")[2],o=encodeURIComponent(`${i}://${s}`);window.location.href=`${va.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===va.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${va.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===je.CHAIN.SOLANA&&t===va.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${va.COINBASE.url}/dapp?cb_url=${r}`)}},os=hn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),sAe={state:os,subscribeNetworkImages(t){return zr(os.networkImages,()=>t(os.networkImages))},subscribeKey(t,e){return Gr(os,t,e)},subscribe(t){return zr(os,()=>t(os))},setWalletImage(t,e){os.walletImages[t]=e},setNetworkImage(t,e){os.networkImages[t]=e},setChainImage(t,e){os.chainImages[t]=e},setConnectorImage(t,e){os.connectorImages={...os.connectorImages,[t]:e}},setTokenImage(t,e){os.tokenImages[t]=e},setCurrencyImage(t,e){os.currencyImages[t]=e}},Yi=es(sAe),oAe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},v_=hn({networkImagePromises:{}}),ir={async fetchWalletImage(t){if(t)return await ye._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(v_.networkImagePromises[t]||(v_.networkImagePromises[t]=ye._fetchNetworkImage(t)),await v_.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Yi.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return Yi.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return Yi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Yi.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.imageId)return Yi.state.connectorImages[t.imageId]},getChainImage(t){return Yi.state.networkImages[oAe[t]]}},_l=hn({message:"",variant:"info",open:!1}),aAe={state:_l,subscribeKey(t,e){return Gr(_l,t,e)},open(t,e){const{debug:n}=ae.state,{shortMessage:r,longMessage:i}=t;n&&(_l.message=r,_l.variant=e,_l.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){_l.open=!1,_l.message="",_l.variant="info"}},Uo=es(aAe),cAe=ge.getAnalyticsUrl(),lAe=new cy({baseUrl:cAe,clientId:null}),uAe=["MODAL_CREATED"],ac=hn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),ut={state:ac,subscribe(t){return zr(ac,()=>t(ac))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ae.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ue.state.address;if(uAe.includes(t.data.event)||typeof window>"u")return;await lAe.post({path:"/e",params:ut.getSdkProperties(),body:{eventId:ge.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ac.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===je.HTTP_STATUS_CODES.FORBIDDEN&&!ac.reportedErrors.FORBIDDEN&&(Uo.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${em()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ac.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){ac.timestamp=Date.now(),ac.data=t,ae.state.features?.analytics&&ut._sendAnalyticsEvent(ac)}},dAe=ge.getApiUrl(),Ri=new cy({baseUrl:dAe,clientId:null}),hAe=40,HN=4,fAe=20,it=hn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ye={state:it,subscribeKey(t,e){return Gr(it,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ae.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ae.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ri.baseUrl}/getWalletImage/${t}`,n=await Ri.getBlob({path:e,params:ye._getSdkProperties()});Yi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ri.baseUrl}/public/getAssetImage/${t}`,n=await Ri.getBlob({path:e,params:ye._getSdkProperties()});Yi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ri.baseUrl}/public/getAssetImage/${t}`,n=await Ri.getBlob({path:e,params:ye._getSdkProperties()});Yi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ri.baseUrl}/public/getCurrencyImage/${t}`,n=await Ri.getBlob({path:e,params:ye._getSdkProperties()});Yi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ri.baseUrl}/public/getTokenImage/${t}`,n=await Ri.getBlob({path:e,params:ye._getSdkProperties()});Yi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ge.isMobile()?t?.filter(n=>n.mobile_link||n.id===va.COINBASE.id?!0:V.state.activeChain==="solana"&&(n.id===va.SOLFLARE.id||n.id===va.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ri.get({path:"/appkit/v1/config",params:ye._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ri.get({path:"/projects/v1/origins",params:ye._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const e=V.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!ir.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ye._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=pe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ye._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ye._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ye._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];ye._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(va).map(s=>s.id));const r=await Ri.get({path:"/getWallets",params:{...ye._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:ye._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ae.state;if(t?.length){const e={...ye._getSdkProperties(),page:1,entries:t?.length??HN,include:t},{data:n}=await ye.fetchWallets(e),r=[...n].sort((s,o)=>t.indexOf(s.id)-t.indexOf(o.id)),i=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(i.map(s=>ye._fetchWalletImage(s))),it.featured=r,it.allFeatured=r}},async fetchRecommendedWallets(){try{it.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ae.state,r=[...e??[],...n??[]].filter(Boolean),i=V.getRequestedCaipNetworkIds().join(","),s={page:1,entries:HN,include:t,exclude:r,chains:i},{data:o,count:a}=await ye.fetchWallets(s),c=Be.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ye._fetchWalletImage(d))),it.recommended=o,it.allRecommended=o,it.count=a??0}catch{}finally{it.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ae.state,i=V.getRequestedCaipNetworkIds().join(","),s=[...it.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:hAe,include:e,exclude:s,chains:i},{data:a,count:c}=await ye.fetchWallets(o),l=a.slice(0,fAe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ye._fetchWalletImage(u))),it.wallets=ge.uniqueBy([...it.wallets,...ye._filterOutExtensions(a)],"id").filter(u=>u.chains?.some(d=>i.includes(d))),it.count=c>it.count?c:it.count,it.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ye.fetchWallets(e);n&&n.forEach(r=>{it.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ae.state,i=V.getRequestedCaipNetworkIds().join(",");it.search=[];const s={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:r,chains:i},{data:o}=await ye.fetchWallets(s);ut.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ye._fetchWalletImage(c)),ge.wait(300)]),it.search=ye._filterOutExtensions(o)},initPromise(t,e){const n=it.promises[t];return n||(it.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const i=[t&&ye.initPromise("connectorImages",ye.fetchConnectorImages),e&&ye.initPromise("featuredWallets",ye.fetchFeaturedWallets),n&&ye.initPromise("recommendedWallets",ye.fetchRecommendedWallets),r&&ye.initPromise("networkImages",ye.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){ae.state.features?.analytics&&ye.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ri.get({path:"/getAnalyticsConfig",params:ye._getSdkProperties()});ae.setFeatures({analytics:t})}catch{ae.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){it.featured=it.allFeatured,it.recommended=it.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");it.featured=it.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),it.recommended=it.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),it.filteredWallets=it.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){it.filteredWallets=[]},setFilterByNamespace(t){if(!t){it.featured=it.allFeatured,it.recommended=it.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");it.featured=it.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),it.recommended=it.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),it.filteredWallets=it.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))}},Vt=hn({view:"Connect",history:["Connect"],transactionStack:[]}),pAe={state:Vt,subscribeKey(t,e){return Gr(Vt,t,e)},pushTransactionStack(t){Vt.transactionStack.push(t)},popTransactionStack(t){const e=Vt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:i}=e;switch(t){case"success":n?.();break;case"error":r?.(),we.goBack();break;case"cancel":i?.(),we.goBack();break}},push(t,e){t!==Vt.view&&(Vt.view=t,Vt.history.push(t),Vt.data=e)},reset(t,e){Vt.view=t,Vt.history=[t],Vt.data=e},replace(t,e){Vt.history.at(-1)===t||(Vt.view=t,Vt.history[Vt.history.length-1]=t,Vt.data=e)},goBack(){const t=V.state.activeCaipAddress,e=we.state.view==="ConnectingFarcaster",n=!t&&e;if(Vt.history.length>1){Vt.history.pop();const[r]=Vt.history.slice(-1);r&&(t&&r==="Connect"?Vt.view="Account":Vt.view=r)}else Lt.close();Vt.data?.wallet&&(Vt.data.wallet=void 0),setTimeout(()=>{if(n){Ue.setFarcasterUrl(void 0,V.state.activeChain);const r=pe.getAuthConnector();r?.provider?.reload();const i=fw(ae.state);r?.provider?.syncDappData?.({metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType})}},100)},goBackToIndex(t){if(Vt.history.length>1){Vt.history=Vt.history.slice(0,t+1);const[e]=Vt.history.slice(-1);e&&(Vt.view=e)}},goBackOrCloseModal(){we.state.history.length>1?we.goBack():Lt.close()}},we=es(pAe),cc=hn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),QA={state:cc,subscribe(t){return zr(cc,()=>t(cc))},setThemeMode(t){cc.themeMode=t;try{const e=pe.getAuthConnector();if(e){const n=QA.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:uu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){cc.themeVariables={...cc.themeVariables,...t};try{const e=pe.getAuthConnector();if(e){const n=QA.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:uu(cc.themeVariables,cc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return fw(cc)}},Ur=es(QA),SK={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},xt=hn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...SK},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),gAe={state:xt,subscribe(t){return zr(xt,()=>{t(xt)})},subscribeKey(t,e){return Gr(xt,t,e)},initialize(t){t.forEach(e=>{const n=Be.getConnectedConnectorId(e);n&&pe.setConnectorId(n,e)})},setActiveConnector(t){t&&(xt.activeConnector=dh(t))},setConnectors(t){t.filter(i=>!xt.allConnectors.some(s=>s.id===i.id&&pe.getConnectorName(s.name)===pe.getConnectorName(i.name)&&s.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&xt.allConnectors.push(dh(i))});const n=pe.getEnabledNamespaces(),r=pe.getEnabledConnectors(n);xt.connectors=pe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(xt.filterByNamespaceMap).forEach(e=>{xt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{xt.filterByNamespaceMap[e]=!0}),pe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){xt.filterByNamespaceMap[t]=e,pe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=pe.getEnabledNamespaces(),e=pe.getEnabledConnectors(t),n=pe.areAllNamespacesEnabled();xt.connectors=pe.mergeMultiChainConnectors(e),n?ye.clearFilterByNamespaces():ye.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(xt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return xt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(xt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=pe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const i=r[0],s=i?.id===je.CONNECTOR_ID.AUTH;r.length>1&&i?n.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...r],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&n.push(i)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,i=pe.getConnectorName(r);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===n.chain)||s.push(n),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===je.CONNECTOR_ID.AUTH){const e=t,n=fw(ae.state),r=Ur.getSnapshot().themeMode,i=Ur.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:uu(i,r)}),pe.setConnectors([t])}else pe.setConnectors([t])},getAuthConnector(t){const e=t||V.state.activeChain,n=xt.connectors.find(r=>r.id===je.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return xt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return xt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return xt.allConnectors.filter(r=>r.chain===V.state.activeChain).find(r=>r.explorerId===t||r.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=fw(ae.state),r=Ur.getSnapshot().themeMode,i=Ur.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:uu(i,r)})},getConnectorsByNamespace(t){const e=xt.allConnectors.filter(n=>n.chain===t);return pe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=pe.getConnector(t.id,t.rdns),n=V.state.activeChain;iAe.handleMobileDeeplinkRedirect(e?.explorerId||t.id,n),e?we.push("ConnectingExternal",{connector:e}):we.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?pe.getConnectorsByNamespace(t):pe.mergeMultiChainConnectors(xt.allConnectors)},setFilterByNamespace(t){xt.filterByNamespace=t,xt.connectors=pe.getConnectors(t),ye.setFilterByNamespace(t)},setConnectorId(t,e){t&&(xt.activeConnectorIds={...xt.activeConnectorIds,[e]:t},Be.setConnectedConnectorId(e,t))},removeConnectorId(t){xt.activeConnectorIds={...xt.activeConnectorIds,[t]:void 0},Be.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return xt.activeConnectorIds[t]},isConnected(t){return t?!!xt.activeConnectorIds[t]:Object.values(xt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){xt.activeConnectorIds={...SK}}},pe=es(gAe),vm={ACCOUNT_TYPES:{SMART_ACCOUNT:"smartAccount"}},ld=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Jn=hn({...ld}),mAe={state:Jn,subscribeKey(t,e){return Gr(Jn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ge.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Jn.message=ld.message,Jn.variant=ld.variant,Jn.svg=ld.svg,Jn.open=ld.open,Jn.autoClose=ld.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ld.autoClose}){Jn.open?(Jn.open=!1,setTimeout(()=>{Jn.message=t,Jn.variant=n,Jn.svg=e,Jn.open=!0,Jn.autoClose=r},150)):(Jn.message=t,Jn.variant=n,Jn.svg=e,Jn.open=!0,Jn.autoClose=r)}},qn=mAe,rn=hn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),wAe={state:rn,subscribe(t){return zr(rn,()=>t(rn))},setLastNetworkInView(t){rn.lastNetworkInView=t},async fetchTransactions(t,e){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");rn.loading=!0;try{const n=await Ze.fetchTransactions({account:t,cursor:rn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:V.state.activeCaipNetwork?.caipNetworkId}),r=nm.filterSpamTransactions(n.data),i=nm.filterByConnectedChain(r),s=[...rn.transactions,...i];rn.loading=!1,e==="coinbase"?rn.coinbaseTransactions=nm.groupTransactionsByYearAndMonth(rn.coinbaseTransactions,n.data):(rn.transactions=s,rn.transactionsByYear=nm.groupTransactionsByYearAndMonth(rn.transactionsByYear,i)),rn.empty=s.length===0,rn.next=n.next?n.next:void 0}catch{const r=V.state.activeChain;ut.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ae.state.projectId,cursor:rn.next,isSmartAccount:Ue.state.preferredAccountTypes?.[r]===vm.ACCOUNT_TYPES.SMART_ACCOUNT}}),qn.showError("Failed to fetch transactions"),rn.loading=!1,rn.empty=!0,rn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const i=new Date(r.metadata.minedAt).getFullYear(),s=new Date(r.metadata.minedAt).getMonth(),o=n[i]??{},c=(o[s]??[]).filter(l=>l.id!==r.id);n[i]={...o,[s]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=V.state.activeCaipNetwork?.caipNetworkId;return t.filter(r=>r.metadata.chain===e)},clearCursor(){rn.next=void 0},resetTransactions(){rn.transactions=[],rn.transactionsByYear={},rn.lastNetworkInView=void 0,rn.loading=!1,rn.empty=!1,rn.next=void 0}},nm=es(wAe,"API_ERROR"),fn=hn({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let ed;const yAe={state:fn,subscribeKey(t,e){return Gr(fn,t,e)},_getClient(){return fn._client},setClient(t){fn._client=dh(t)},async connectWalletConnect(){if(ge.isTelegram()||ge.isSafari()&&ge.isIos()){if(ed){await ed,ed=void 0;return}if(!ge.isPairingExpired(fn?.wcPairingExpiry)){const t=fn.wcUri;fn.wcUri=t;return}ed=_e._getClient()?.connectWalletConnect?.().catch(()=>{}),_e.state.status="connecting",await ed,ed=void 0,fn.wcPairingExpiry=void 0,_e.state.status="connected"}else await _e._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){await _e._getClient()?.connectExternal?.(t),n&&V.setActiveNamespace(e)},async reconnectExternal(t){await _e._getClient()?.reconnectExternal?.(t);const e=t.chain||V.state.activeChain;e&&pe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){Lt.setLoading(!0,V.state.activeChain);const n=pe.getAuthConnector();n&&(Ue.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Be.setPreferredAccountTypes(Ue.state.preferredAccountTypes??{[e]:t}),await _e.reconnectExternal(n),Lt.setLoading(!1,V.state.activeChain),ut.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:V.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return _e._getClient()?.signMessage(t)},parseUnits(t,e){return _e._getClient()?.parseUnits(t,e)},formatUnits(t,e){return _e._getClient()?.formatUnits(t,e)},async sendTransaction(t){return _e._getClient()?.sendTransaction(t)},async getCapabilities(t){return _e._getClient()?.getCapabilities(t)},async grantPermissions(t){return _e._getClient()?.grantPermissions(t)},async walletGetAssets(t){return _e._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return _e._getClient()?.estimateGas(t)},async writeContract(t){return _e._getClient()?.writeContract(t)},async getEnsAddress(t){return _e._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return _e._getClient()?.getEnsAvatar(t)},checkInstalled(t){return _e._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){fn.wcUri=void 0,fn.wcPairingExpiry=void 0,fn.wcLinking=void 0,fn.recentWallet=void 0,fn.status="disconnected",nm.resetTransactions(),Be.deleteWalletConnectDeepLink()},resetUri(){fn.wcUri=void 0,fn.wcPairingExpiry=void 0,ed=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=_e.state;t&&Be.setWalletConnectDeepLink(t),e&&Be.setAppKitRecent(e),ut.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:we.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){fn.wcBasic=t},setUri(t){fn.wcUri=t,fn.wcPairingExpiry=ge.getPairingExpiry()},setWcLinking(t){fn.wcLinking=t},setWcError(t){fn.wcError=t,fn.buffering=!1},setRecentWallet(t){fn.recentWallet=t},setBuffering(t){fn.buffering=t},setStatus(t){fn.status=t},async disconnect(t){try{await _e._getClient()?.disconnect(t)}catch(e){throw new vg("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},setConnections(t,e){fn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(pe.state.activeConnectorIds[n]===t.connectorId){const s=V.state.activeCaipNetwork;if(s){const o=`${n}:${s.id}:${e}`;Ue.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const s=pe.getConnector(t.connectorId);s?_e.connectExternal(s,n):console.warn(`No connector found for namespace "${n}"`)}}},_e=es(yAe),Sf=hn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Au={state:Sf,subscribe(t){return zr(Sf,()=>t(Sf))},subscribeOpen(t){return Gr(Sf,"open",t)},set(t){Object.assign(Sf,{...Sf,...t})}},E_={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return V4(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},zN={async getMyTokensWithBalance(t){const e=Ue.state.address,n=V.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,n);if(i)return this.filterLowQualityTokens(i)}const r=await Ze.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){try{const n=E_.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await _e.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const i=await _e.walletGetAssets({account:t,chainFilter:[n]});return E_.isWalletGetAssetsResponse(i)?(i[n]||[]).map(o=>E_.createBalance(o,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:V.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},Ft=hn({tokenBalances:[],loading:!1}),bAe={state:Ft,subscribe(t){return zr(Ft,()=>t(Ft))},subscribeKey(t,e){return Gr(Ft,t,e)},setToken(t){t&&(Ft.token=dh(t))},setTokenAmount(t){Ft.sendTokenAmount=t},setReceiverAddress(t){Ft.receiverAddress=t},setReceiverProfileImageUrl(t){Ft.receiverProfileImageUrl=t},setReceiverProfileName(t){Ft.receiverProfileName=t},setNetworkBalanceInUsd(t){Ft.networkBalanceInUSD=t},setLoading(t){Ft.loading=t},async sendToken(){try{switch(kt.setLoading(!0),V.state.activeCaipNetwork?.chainNamespace){case"eip155":await kt.sendEvmToken();return;case"solana":await kt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{kt.setLoading(!1)}},async sendEvmToken(){const t=V.state.activeChain,e=Ue.state.preferredAccountTypes?.[t];if(!kt.state.sendTokenAmount||!kt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!kt.state.token)throw new Error("A token is required");kt.state.token?.address?(ut.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===vm.ACCOUNT_TYPES.SMART_ACCOUNT,token:kt.state.token.address,amount:kt.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),await kt.sendERC20Token({receiverAddress:kt.state.receiverAddress,tokenAddress:kt.state.token.address,sendTokenAmount:kt.state.sendTokenAmount,decimals:kt.state.token.quantity.decimals})):(ut.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===vm.ACCOUNT_TYPES.SMART_ACCOUNT,token:kt.state.token.symbol||"",amount:kt.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),await kt.sendNativeToken({receiverAddress:kt.state.receiverAddress,sendTokenAmount:kt.state.sendTokenAmount,decimals:kt.state.token.quantity.decimals}))},async fetchTokenBalance(t){Ft.loading=!0;const e=V.state.activeCaipNetwork?.caipNetworkId,n=V.state.activeCaipNetwork?.chainNamespace,r=V.state.activeCaipAddress,i=r?ge.getPlainAddress(r):void 0;if(Ft.lastRetry&&!ge.isAllowedRetry(Ft.lastRetry,30*Ht.ONE_SEC_MS))return Ft.loading=!1,[];try{if(i&&e&&n){const s=await zN.getMyTokensWithBalance();return Ft.tokenBalances=s,Ft.lastRetry=void 0,s}}catch(s){Ft.lastRetry=Date.now(),t?.(s),qn.showError("Token Balance Unavailable")}finally{Ft.loading=!1}return[]},fetchNetworkBalance(){if(Ft.tokenBalances.length===0)return;const t=zN.mapBalancesToSwapTokens(Ft.tokenBalances);if(!t)return;const e=t.find(n=>n.address===V.getActiveNetworkTokenAddress());e&&(Ft.networkBalanceInUSD=e?jSe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){we.pushTransactionStack({});const e=t.receiverAddress,n=Ue.state.address,r=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await _e.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),ut.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ue.state.preferredAccountTypes?.eip155===vm.ACCOUNT_TYPES.SMART_ACCOUNT,token:kt.state.token?.symbol||"",amount:t.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}}),_e._getClient()?.updateBalance("eip155"),kt.resetSend()},async sendERC20Token(t){we.pushTransactionStack({onSuccess(){we.replace("Account")}});const e=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ue.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ge.getPlainAddress(t.tokenAddress);await _e.writeContract({fromAddress:Ue.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:zSe.getERC20Abi(n),chainNamespace:"eip155"}),kt.resetSend()}},async sendSolanaToken(){if(!kt.state.sendTokenAmount||!kt.state.receiverAddress)throw new Error("An amount and receiver address are required");we.pushTransactionStack({onSuccess(){we.replace("Account")}}),await _e.sendTransaction({chainNamespace:"solana",to:kt.state.receiverAddress,value:kt.state.sendTokenAmount}),_e._getClient()?.updateBalance("solana"),kt.resetSend()},resetSend(){Ft.token=void 0,Ft.sendTokenAmount=void 0,Ft.receiverAddress=void 0,Ft.receiverProfileImageUrl=void 0,Ft.receiverProfileName=void 0,Ft.loading=!1,Ft.tokenBalances=[]}},kt=es(bAe),C_={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},K1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=hn({chains:YSe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),vAe={state:Oe,subscribe(t){return zr(Oe,()=>{t(Oe)})},subscribeKey(t,e){return Gr(Oe,t,e)},subscribeChainProp(t,e,n){let r;return zr(Oe.chains,()=>{const i=n||Oe.activeChain;if(i){const s=Oe.chains.get(i)?.[t];r!==s&&(r=s,e(s))}})},initialize(t,e,n){const{chainId:r,namespace:i}=Be.getActiveNetworkProps(),s=e?.find(u=>u.id.toString()===r?.toString()),a=t.find(u=>u?.namespace===i)||t?.[0],c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ae.state.enableEmbedded?new Set([...c]):new Set([...e?.map(u=>u.chainNamespace)??[]]);(t?.length===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a?.namespace,Oe.activeCaipNetwork=s,V.setChainNetworkData(a?.namespace,{caipNetwork:s}),Oe.activeChain&&Au.set({activeChain:a?.namespace})),l.forEach(u=>{const d=e?.filter(h=>h.chainNamespace===u);V.state.chains.set(u,{namespace:u,networkState:hn({...K1,caipNetwork:d?.[0]}),accountState:hn(C_),caipNetworks:d??[],...n}),V.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){if(Oe.activeChain===t){const e=Array.from(Oe.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&V.setActiveCaipNetwork(n)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...K1,caipNetwork:r[0]},accountState:C_,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),V.setRequestedCaipNetworks(r?.filter(i=>i.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Oe.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===t.id)||n.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:n}),V.setRequestedCaipNetworks(n,t.chainNamespace),pe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=Oe.chains.get(t);if(n){const r=Oe.activeCaipNetwork?.id===e,i=[...n.caipNetworks?.filter(s=>s.id!==e)||[]];r&&n?.caipNetworks?.[0]&&V.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:i}),V.setRequestedCaipNetworks(i||[],t),i.length===0&&pe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||K1,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const i={...r.accountState||C_,...e};Oe.chains.set(t,{...r,accountState:i}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),Ue.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||K1,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){V.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&pe.removeConnectorId(n)},setActiveNamespace(t){Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(Oe.activeCaipAddress=e?.accountState?.caipAddress,Oe.activeCaipNetwork=n,V.setChainNetworkData(t,{caipNetwork:n}),Be.setActiveCaipNetworkId(n?.caipNetworkId),Au.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Oe.activeChain!==t.chainNamespace&&V.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,V.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Oe.activeCaipAddress=void 0,V.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&Ue.replaceState(e.accountState),kt.resetSend(),Au.set({activeChain:Oe.activeChain,selectedNetworkId:Oe.activeCaipNetwork?.caipNetworkId}),Be.setActiveCaipNetworkId(t.caipNetworkId),!V.checkIfSupportedNetwork(t.chainNamespace)&&ae.state.enableNetworkSwitch&&!ae.state.allowUnsupportedChain&&!_e.state.wcBasic&&V.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==V.state.activeChain,n=V.getNetworkData(t)?.caipNetwork,r=V.getCaipNetworkByNamespace(t,n?.id);e&&r&&await V.switchActiveNetwork(r)},async switchActiveNetwork(t){const n=!V.state.chains.get(V.state.activeChain)?.caipNetworks?.some(i=>i.id===Oe.activeCaipNetwork?.id),r=V.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Lt.close()}catch{we.goBack()}ut.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain,n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){let n=Oe.activeChain;if(e&&(n=e),!n)return;const r=Oe.chains.get(n)?.accountState;if(r)return r[t]},getNetworkProp(t,e){const n=Oe.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return ge.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{const n=V.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){V.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=V.getAllRequestedCaipNetworks().map(s=>s.chainNamespace),i=Array.from(new Set(r));pe.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{const n=V.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){return Oe.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await V.getNetworkControllerClient()?.getApprovedCaipNetworksData();V.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Oe.activeCaipNetwork,r=V.getRequestedCaipNetworks(t);return r.length?r?.some(i=>i.id===n?.id):!0},checkIfSupportedChainId(t){return Oe.activeChain?V.getRequestedCaipNetworks(Oe.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){V.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=vK.caipNetworkIdToNumber(Oe.activeCaipNetwork?.caipNetworkId),e=Oe.activeChain;return!e||!t?!1:!!V.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},getActiveNetworkTokenAddress(){const t=Oe.activeCaipNetwork?.chainNamespace||"eip155",e=Oe.activeCaipNetwork?.id||1,n=Ht.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Lt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t?.chainNamespace&&Ht.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){V.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Oe.activeCaipAddress=void 0,V.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),pe.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Oe.chains.forEach(n=>{je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?Oe.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){return t?V.state.chains.get(t)?.accountState:Ue.state},getNetworkData(t){const e=t||Oe.activeChain;if(e)return V.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=V.state.chains.get(t),r=n?.caipNetworks?.find(i=>i.id===e);return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=pe.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?V.getRequestedCaipNetworks(t):V.getAllRequestedCaipNetworks()}},V=es(vAe),EAe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},AK=ge.getBlockchainApiUrl(),Mi=hn({clientId:null,api:new cy({baseUrl:AK,clientId:null}),supportedChains:{http:[],ws:[]}}),Ze={state:Mi,async get(t){const{st:e,sv:n}=Ze.getSdkProperties(),r=ae.state.projectId,i={...t.params||{},st:e,sv:n,projectId:r};return Mi.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ae.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Mi.supportedChains.http.length||await Ze.getSupportedNetworks()}catch{return!1}return Mi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Ze.get({path:"v1/supported-chains"});return Mi.supportedChains=t,t}catch{return Mi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Ze.isNetworkSupported(e))return{avatar:"",name:""};const r=Be.getIdentityFromCacheForAddress(t);if(r)return r;const i=await Ze.get({path:`/v1/identity/${t}`,params:{sender:V.state.activeCaipAddress?ge.getPlainAddress(V.state.activeCaipAddress):void 0}});return Be.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:i,chainId:s}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:s},signal:r,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:i}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Mi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ae.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Ze.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:i}){if(!await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Mi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ht.CONVERT_SLIPPAGE_TOLERANCE},projectId:ae.state.projectId,from:e,to:n,userAddress:r,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:r,sv:i}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Ze.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:i}})},async getBalance(t,e,n){const{st:r,sv:i}=Ze.getSdkProperties();if(!await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return qn.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Be.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Ze.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:i}});return Be.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ue.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Mi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:i}){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?(await Mi.api.post({path:"/v1/generators/onrampurl",params:{projectId:ae.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Ze.get({path:"/v1/onramp/options"})}catch{return EAe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){try{return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?await Mi.api.post({path:"/v1/onramp/quote",params:{projectId:ae.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Ze.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await Ze.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?Mi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ae.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Mi.clientId=t,Mi.api=new cy({baseUrl:AK,clientId:t})}},Vs=hn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),CAe={state:Vs,replaceState(t){t&&Object.assign(Vs,dh(t))},subscribe(t){return V.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return V.subscribeChainProp("accountState",i=>{if(i){const s=i[t];r!==s&&(r=s,e(s))}},n)},setStatus(t,e){V.setAccountProp("status",t,e)},getCaipAddress(t){return V.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ge.getPlainAddress(t):void 0;e===V.state.activeChain&&(V.state.activeCaipAddress=t),V.setAccountProp("caipAddress",t,e),V.setAccountProp("address",n,e)},setBalance(t,e,n){V.setAccountProp("balance",t,n),V.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){V.setAccountProp("profileName",t,e)},setProfileImage(t,e){V.setAccountProp("profileImage",t,e)},setUser(t,e){V.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){V.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){V.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){V.setAccountProp("currentTab",t,V.state.activeChain)},setTokenBalance(t,e){t&&V.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){V.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){V.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=V.getAccountProp("addressLabels",n)||new Map;r.set(t,e),V.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=V.getAccountProp("addressLabels",e)||new Map;n.delete(t),V.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){V.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){V.setAccountProp("preferredAccountTypes",{...Vs.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Vs.preferredAccountTypes=t},setSocialProvider(t,e){t&&V.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){V.setAccountProp("socialWindow",t?dh(t):void 0,e)},setFarcasterUrl(t,e){V.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Vs.balanceLoading=!0;const e=V.state.activeCaipNetwork?.caipNetworkId,n=V.state.activeCaipNetwork?.chainNamespace,r=V.state.activeCaipAddress,i=r?ge.getPlainAddress(r):void 0;if(Vs.lastRetry&&!ge.isAllowedRetry(Vs.lastRetry,30*Ht.ONE_SEC_MS))return Vs.balanceLoading=!1,[];try{if(i&&e&&n){const o=(await Ze.getBalance(i,e)).balances.filter(a=>a.quantity.decimals!=="0");return Ue.setTokenBalance(o,n),Vs.lastRetry=void 0,Vs.balanceLoading=!1,o}}catch(s){Vs.lastRetry=Date.now(),t?.(s),qn.showError("Token Balance Unavailable")}finally{Vs.balanceLoading=!1}return[]},resetAccount(t){V.resetAccount(t)}},Ue=es(CAe),_Ae={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=V.state.activeCaipNetwork,r=we.state.data;if(t.id===n?.id)return;const s=Ue.getCaipAddress(V.state.activeChain),o=t.chainNamespace!==V.state.activeChain,a=Ue.getCaipAddress(t.chainNamespace),l=pe.getConnectorId(V.state.activeChain)===je.CONNECTOR_ID.AUTH,u=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?we.push("SwitchNetwork",{...r,network:t}):s&&o&&!a?we.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):we.push("SwitchNetwork",{...r,network:t})}},Di=hn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),SAe={state:Di,subscribe(t){return zr(Di,()=>t(Di))},subscribeKey(t,e){return Gr(Di,t,e)},async open(t){const e=Ue.state.status==="connected",n=t?.namespace,r=V.state.activeChain,i=n&&n!==r,s=V.getAccountData(t?.namespace)?.caipAddress;if(_e.state.wcBasic?ye.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ye.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),pe.setFilterByNamespace(t?.namespace),Lt.setLoading(!0,n),n&&i){const o=V.getNetworkData(n)?.caipNetwork||V.getRequestedCaipNetworks(n)[0];o&&_Ae.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0})}else{const o=V.state.noAdapters;ae.state.manualWCControl||o&&!s?ge.isMobile()?we.reset("AllWallets"):we.reset("ConnectingWalletConnectBasic"):t?.view?we.reset(t.view,t.data):s?we.reset("Account"):we.reset("Connect")}Di.open=!0,Au.set({open:!0}),ut.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=ae.state.enableEmbedded,e=!!V.state.activeCaipAddress;Di.open&&ut.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Di.open=!1,we.reset("Connect"),Lt.clearLoading(),t?e?we.replace("Account"):we.push("Connect"):Au.set({open:!1}),_e.resetUri()},setLoading(t,e){e&&Di.loadingNamespaceMap.set(e,t),Di.loading=t,Au.set({loading:t})},clearLoading(){Di.loadingNamespaceMap.clear(),Di.loading=!1},shake(){Di.shake||(Di.shake=!0,setTimeout(()=>{Di.shake=!1},500))}},Lt=es(SAe),Em={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},JA={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},AAe={providers:_K,selectedProvider:null,error:null,purchaseCurrency:Em,paymentCurrency:JA,purchaseCurrencies:[Em],paymentCurrencies:[],quotesLoading:!1},vt=hn(AAe),xAe={state:vt,subscribe(t){return zr(vt,()=>t(vt))},subscribeKey(t,e){return Gr(vt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=V.state.activeChain===je.CHAIN.SOLANA?"SOL":"USDC",n=Ue.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",QSe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ae.state.projectId),vt.selectedProvider={...t,url:r.toString()}}else vt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=_K.filter(r=>e.includes(r.name));vt.providers=n}else vt.providers=[]},setPurchaseCurrency(t){vt.purchaseCurrency=t},setPaymentCurrency(t){vt.paymentCurrency=t},setPurchaseAmount(t){XA.state.purchaseAmount=t},setPaymentAmount(t){XA.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Ze.getOnrampOptions();vt.purchaseCurrencies=t.purchaseCurrencies,vt.paymentCurrencies=t.paymentCurrencies,vt.paymentCurrency=t.paymentCurrencies[0]||JA,vt.purchaseCurrency=t.purchaseCurrencies[0]||Em,await ye.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ye.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){vt.quotesLoading=!0;try{const t=await Ze.getOnrampQuote({purchaseCurrency:vt.purchaseCurrency,paymentCurrency:vt.paymentCurrency,amount:vt.paymentAmount?.toString()||"0",network:vt.purchaseCurrency?.symbol});return vt.quotesLoading=!1,vt.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return vt.error=t.message,vt.quotesLoading=!1,null}finally{vt.quotesLoading=!1}},resetState(){vt.selectedProvider=null,vt.error=null,vt.purchaseCurrency=Em,vt.paymentCurrency=JA,vt.purchaseCurrencies=[Em],vt.paymentCurrencies=[],vt.paymentAmount=void 0,vt.purchaseAmount=void 0,vt.quotesLoading=!1}},XA=es(xAe),So=hn({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),IAe={state:So,subscribe(t){return zr(So,()=>t(So))},subscribeKey(t,e){return Gr(So,t,e)},showTooltip({message:t,triggerRect:e,variant:n}){So.open=!0,So.message=t,So.triggerRect=e,So.variant=n},hide(){So.open=!1,So.message="",So.triggerRect={width:0,height:0,top:0,left:0}}},Zf=es(IAe),KN=2147483648,OAe={convertEVMChainIdToCoinType(t){if(t>=KN)throw new Error("Invalid chainId");return(KN|t)>>>0}},Ws=hn({suggestions:[],loading:!1}),PAe={state:Ws,subscribe(t){return zr(Ws,()=>t(Ws))},subscribeKey(t,e){return Gr(Ws,t,e)},async resolveName(t){try{return await Ze.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await Ze.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ws.loading=!0,Ws.suggestions=[];const e=await Ze.getEnsNameSuggestions(t);return Ws.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ws.suggestions}catch(e){const n=Cm.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ws.loading=!1}},async getNamesForAddress(t){try{if(!V.state.activeCaipNetwork)return[];const n=Be.getEnsFromCacheForAddress(t);if(n)return n;const r=await Ze.reverseLookupEnsName({address:t});return Be.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Cm.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=V.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ue.state.address,r=pe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ws.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});we.pushTransactionStack({onCancel(){we.replace("RegisterAccountName")}});const s=await _e.signMessage(i);Ws.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=OAe.convertEVMChainIdToCoinType(Number(o));await Ze.registerEnsName({coinType:a,address:n,signature:s,message:i}),Ue.setProfileName(t,e.chainNamespace),we.replace("RegisterAccountNameSuccess")}catch(i){const s=Cm.parseEnsApiError(i,`Error registering name ${t}`);throw we.replace("RegisterAccountName"),new Error(s)}finally{Ws.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},Cm=es(PAe),Gd={getSIWX(){return ae.state.siwx},async initializeIfEnabled(){const t=ae.state.siwx,e=V.getActiveCaipAddress();if(!(t&&e))return;const[n,r,i]=e.split(":");if(V.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,i)).length)return;await Lt.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),ut.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await _e._getClient()?.disconnect().catch(console.error),we.reset("Connect"),qn.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ae.state.siwx,e=ge.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork(),r=_e._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),s=i.toString();pe.getConnectorId(n.chainNamespace)===je.CONNECTOR_ID.AUTH&&we.pushTransactionStack({});const a=await r.signMessage(s);await t.addSession({data:i,message:s,signature:a}),Lt.close(),ut.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!Lt.state.open||we.state.view==="ApproveTransaction")&&await Lt.open({view:"SIWXSignMessage"}),s.isSmartAccount?qn.showError("This application might not support Smart Accounts"):qn.showError("Signature declined"),ut.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{this.getSIWX()?.getRequired?.()?await _e.disconnect():Lt.close(),we.reset("Connect"),ut.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getSessions(){const t=ae.state.siwx,e=ge.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=we.state.view==="ApproveTransaction",n=we.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const r=Gd.getSIWX(),i=new Set(e.map(a=>a.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const s=await r.createMessage({chainId:V.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:n,chains:[s.chainId,...e.filter(a=>a!==s.chainId)]});if(qn.showLoading("Authenticating...",{autoClose:!1}),Ue.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:o.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),o?.auths?.length){const a=o.auths.map(c=>{const l=t.client.formatAuthMessage({request:c.p,iss:c.p.iss});return{data:{...c.p,accountAddress:c.p.iss.split(":").slice(-1).join(""),chainId:c.p.iss.split(":").slice(2,4).join(":"),uri:c.p.aud,version:c.p.version||s.version,expirationTime:c.p.exp,issuedAt:c.p.iat,notBefore:c.p.nbf},message:l,signature:c.s.s,cacao:c}});try{await r.setSessions(a),ut.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Gd.getSIWXEventProperties()})}catch(c){throw console.error("SIWX:universalProviderAuth - failed to set sessions",c),ut.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Gd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),c}finally{qn.hide()}}return!0},getSIWXEventProperties(){const t=V.state.activeChain;return{network:V.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Ue.state.preferredAccountTypes?.[t]===vm.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},xK={isUnsupportedChainView(){return we.state.view==="UnsupportedChain"||we.state.view==="SwitchNetwork"&&we.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){Lt.shake();return}if(await Gd.isSIWXCloseDisabled()){Lt.shake();return}Lt.close()}};function TAe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function dr(t,...e){try{return TAe(t(...e))}catch(n){return Promise.reject(n)}}function kAe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function NAe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Gb(t){if(kAe(t))return String(t);if(NAe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Gb(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const e4="base64:";function $Ae(t){return typeof t=="string"?t:e4+DAe(t)}function RAe(t){return typeof t!="string"||!t.startsWith(e4)?t:MAe(t.slice(e4.length))}function MAe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function DAe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ji(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function BAe(...t){return ji(t.join(":"))}function V1(t){return t=ji(t),t?t+":":""}function LAe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function UAe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const jAe="memory",FAe=()=>{const t=new Map;return{name:jAe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function qAe(t={}){const e={mounts:{"":t.driver||FAe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,u)=>{if(e.watching){u=ji(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await VN(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=ji(g?p:p.key),w=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},y=n(m);f(y).items.push({key:m,value:w,relativeKey:y.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return dr(h.hasItem,d,u)},getItem(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return dr(h.getItem,d,u).then(f=>lu(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?dr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:BAe(d.base,f.key),value:lu(f.value)}))):Promise.all(d.items.map(h=>dr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:lu(f)})))))},getItemRaw(l,u={}){l=ji(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?dr(h.getItemRaw,d,u):dr(h.getItem,d,u).then(f=>RAe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=ji(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await dr(f.setItem,h,Gb(u),d),f.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return dr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Gb(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>dr(d.driver.setItem,h.relativeKey,Gb(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=ji(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await dr(f.setItemRaw,h,u,d);else if(f.setItem)await dr(f.setItem,h,$Ae(u),d);else return;f.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ji(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await dr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await dr(h.removeItem,d+"$",u),h.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ji(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await dr(h.getMeta,d,u)),!u.nativeOnly){const p=await dr(h.getItem,d+"$",u).then(g=>lu(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=V1(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){m.driver.flags?.maxDepth||(p=!1);const w=await dr(m.driver.getKeys,m.relativeBase,u);for(const b of w){const y=m.mountpoint+ji(b);h.some(_=>y.startsWith(_))||f.push(y)}h=[m.mountpoint,...h.filter(b=>!b.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||LAe(m,u.maxDepth))&&UAe(m,l))},async clear(l,u={}){l=V1(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return dr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>WN(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=V1(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(VN(u,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=V1(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await WN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=ji(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ji(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function VN(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function WN(t){typeof t.dispose=="function"&&await dr(t.dispose)}const HAe="idb-keyval";var zAe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=W2(t.dbName,t.storeName)),{name:HAe,options:t,async hasItem(i){return!(typeof await Lm(n(i),r)>"u")},async getItem(i){return await Lm(n(i),r)??null},setItem(i,s){return g6(n(i),s,r)},removeItem(i){return m6(n(i),r)},getKeys(){return CB(r)},clear(){return EB(r)}}};const KAe="WALLET_CONNECT_V2_INDEXED_DB",VAe="keyvaluestorage";let WAe=class{constructor(){this.indexedDb=qAe({driver:zAe({dbName:KAe,storeName:VAe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ho(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zb={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof __<"u"&&__.localStorage?Zb.exports=__.localStorage:typeof window<"u"&&window.localStorage?Zb.exports=window.localStorage:Zb.exports=new e})();function GAe(t){var e;return[t[0],Go((e=t[1])!=null?e:"")]}let ZAe=class{constructor(){this.localStorage=Zb.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(GAe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Go(n)}async setItem(e,n){this.localStorage.setItem(e,ho(n))}async removeItem(e){this.localStorage.removeItem(e)}};const YAe="wc_storage_version",GN=1,QAe=async(t,e,n)=>{const r=YAe,i=await e.getItem(r);if(i&&i>=GN){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,GN),n(e),JAe(t,o)},JAe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let XAe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new ZAe;this.storage=e;try{const n=new WAe;QAe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var e4e=Object.defineProperty,t4e=(t,e,n)=>e in t?e4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZN=(t,e,n)=>t4e(t,typeof e!="symbol"?e+"":e,n);let n4e=class extends Ns{constructor(e){super(),this.opts=e,ZN(this,"protocol","wc"),ZN(this,"version",2)}};var r4e=Object.defineProperty,i4e=(t,e,n)=>e in t?r4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s4e=(t,e,n)=>i4e(t,e+"",n);let o4e=class extends Ns{constructor(e,n){super(),this.core=e,this.logger=n,s4e(this,"records",new Map)}},a4e=class{constructor(e,n){this.logger=e,this.core=n}},c4e=class extends Ns{constructor(e,n){super(),this.relayer=e,this.logger=n}},l4e=class extends Ns{constructor(e){super()}},u4e=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},d4e=class extends Ns{constructor(e,n){super(),this.relayer=e,this.logger=n}},h4e=class extends Ns{constructor(e,n){super(),this.core=e,this.logger=n}},f4e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},p4e=class{constructor(e,n){this.projectId=e,this.logger=n}},g4e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var m4e=Object.defineProperty,w4e=(t,e,n)=>e in t?m4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YN=(t,e,n)=>w4e(t,typeof e!="symbol"?e+"":e,n);let y4e=class{constructor(e){this.opts=e,YN(this,"protocol","wc"),YN(this,"version",2)}},b4e=class{constructor(e){this.client=e}};function u2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function v4e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ly(t,...e){if(!v4e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function E4e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");u2(t.outputLen),u2(t.blockLen)}function Eg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function IK(t,e){ly(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const W1=BigInt(2**32-1),QN=BigInt(32);function C4e(t,e=!1){return e?{h:Number(t&W1),l:Number(t>>QN&W1)}:{h:Number(t>>QN&W1)|0,l:Number(t&W1)|0}}function _4e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=C4e(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const S4e=(t,e,n)=>t<<n|e>>>32-n,A4e=(t,e,n)=>e<<n|t>>>32-n,x4e=(t,e,n)=>e<<n-32|t>>>64-n,I4e=(t,e,n)=>t<<n-32|e>>>64-n,Af=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function O4e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function S_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ca(t,e){return t<<32-e|t>>>e}const JN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function P4e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function XN(t){for(let e=0;e<t.length;e++)t[e]=P4e(t[e])}function T4e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function jE(t){return typeof t=="string"&&(t=T4e(t)),ly(t),t}function k4e(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];ly(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class ux{clone(){return this._cloneInto()}}function OK(t){const e=r=>t().update(jE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function N4e(t=32){if(Af&&typeof Af.getRandomValues=="function")return Af.getRandomValues(new Uint8Array(t));if(Af&&typeof Af.randomBytes=="function")return Af.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const PK=[],TK=[],kK=[],$4e=BigInt(0),M0=BigInt(1),R4e=BigInt(2),M4e=BigInt(7),D4e=BigInt(256),B4e=BigInt(113);for(let t=0,e=M0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],PK.push(2*(5*r+n)),TK.push((t+1)*(t+2)/2%64);let i=$4e;for(let s=0;s<7;s++)e=(e<<M0^(e>>M4e)*B4e)%D4e,e&R4e&&(i^=M0<<(M0<<BigInt(s))-M0);kK.push(i)}const[L4e,U4e]=_4e(kK,!0),e$=(t,e,n)=>n>32?x4e(t,e,n):S4e(t,e,n),t$=(t,e,n)=>n>32?I4e(t,e,n):A4e(t,e,n);function j4e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=e$(l,u,1)^n[a],h=t$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=TK[o],c=e$(i,s,a),l=t$(i,s,a),u=PK[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=L4e[r],t[1]^=U4e[r]}n.fill(0)}class dx extends ux{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,u2(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=O4e(this.state)}keccak(){JN||XN(this.state32),j4e(this.state32,this.rounds),JN||XN(this.state32),this.posOut=0,this.pos=0}update(e){Eg(this);const{blockLen:n,state:r}=this;e=jE(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Eg(this,!1),ly(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return u2(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(IK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new dx(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const F4e=(t,e,n)=>OK(()=>new dx(e,t,n)),DFe=F4e(1,136,256/8);function q4e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function H4e(t,e,n){return t&e^~t&n}function z4e(t,e,n){return t&e^t&n^e&n}class K4e extends ux{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=S_(this.buffer)}update(e){Eg(this);const{view:n,buffer:r,blockLen:i}=this;e=jE(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=S_(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Eg(this),IK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;q4e(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=S_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const V4e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Al=new Uint32Array(64);class W4e extends K4e{constructor(){super(64,32,8,!1),this.A=Sl[0]|0,this.B=Sl[1]|0,this.C=Sl[2]|0,this.D=Sl[3]|0,this.E=Sl[4]|0,this.F=Sl[5]|0,this.G=Sl[6]|0,this.H=Sl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Al[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Al[d-15],f=Al[d-2],p=ca(h,7)^ca(h,18)^h>>>3,g=ca(f,17)^ca(f,19)^f>>>10;Al[d]=g+Al[d-7]+p+Al[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ca(a,6)^ca(a,11)^ca(a,25),f=u+h+H4e(a,c,l)+V4e[d]+Al[d]|0,g=(ca(r,2)^ca(r,13)^ca(r,22))+z4e(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Al.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const G4e=OK(()=>new W4e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FE=BigInt(0),qE=BigInt(1),Z4e=BigInt(2);function hh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function uy(t){if(!hh(t))throw new Error("Uint8Array expected")}function Cg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Y4e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _g(t){uy(t);let e="";for(let n=0;n<t.length;n++)e+=Y4e[t[n]];return e}function gp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?FE:BigInt("0x"+t)}const lc={_0:48,_9:57,A:65,F:70,a:97,f:102};function n$(t){if(t>=lc._0&&t<=lc._9)return t-lc._0;if(t>=lc.A&&t<=lc.F)return t-(lc.A-10);if(t>=lc.a&&t<=lc.f)return t-(lc.a-10)}function Sg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=n$(t.charCodeAt(s)),a=n$(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Zd(t){return hx(_g(t))}function fx(t){return uy(t),hx(_g(Uint8Array.from(t).reverse()))}function Ag(t,e){return Sg(t.toString(16).padStart(e*2,"0"))}function px(t,e){return Ag(t,e).reverse()}function Q4e(t){return Sg(gp(t))}function $o(t,e,n){let r;if(typeof e=="string")try{r=Sg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(hh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function pw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];uy(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function J4e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function X4e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const A_=t=>typeof t=="bigint"&&FE<=t;function HE(t,e,n){return A_(t)&&A_(e)&&A_(n)&&e<=t&&t<n}function Yd(t,e,n,r){if(!HE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function NK(t){let e;for(e=0;t>FE;t>>=qE,e+=1);return e}function e6e(t,e){return t>>BigInt(e)&qE}function t6e(t,e,n){return t|(n?qE:FE)<<BigInt(e)}const gx=t=>(Z4e<<BigInt(t-1))-qE,x_=t=>new Uint8Array(t),r$=t=>Uint8Array.from(t);function $K(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=x_(t),i=x_(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=x_())=>{i=a(r$([0]),d),r=a(),d.length!==0&&(i=a(r$([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return pw(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const n6e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||hh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function dy(t,e,n={}){const r=(i,s,o)=>{const a=n6e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const r6e=()=>{throw new Error("not implemented")};function t4(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const i6e=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Yd,abool:Cg,abytes:uy,bitGet:e6e,bitLen:NK,bitMask:gx,bitSet:t6e,bytesToHex:_g,bytesToNumberBE:Zd,bytesToNumberLE:fx,concatBytes:pw,createHmacDrbg:$K,ensureBytes:$o,equalBytes:J4e,hexToBytes:Sg,hexToNumber:hx,inRange:HE,isBytes:hh,memoized:t4,notImplemented:r6e,numberToBytesBE:Ag,numberToBytesLE:px,numberToHexUnpadded:gp,numberToVarBytesBE:Q4e,utf8ToBytes:X4e,validateObject:dy},Symbol.toStringTag,{value:"Module"}));class RK extends ux{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,E4e(e);const r=jE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Eg(this),this.iHash.update(e),this}digestInto(e){Eg(this),ly(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const MK=(t,e,n)=>new RK(t,e).update(n).digest();MK.create=(t,e)=>new RK(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pr=BigInt(0),Un=BigInt(1),wd=BigInt(2),s6e=BigInt(3),n4=BigInt(4),i$=BigInt(5),s$=BigInt(8);function Gi(t,e){const n=t%e;return n>=Pr?n:e+n}function o6e(t,e,n){if(e<Pr)throw new Error("invalid exponent, negatives unsupported");if(n<=Pr)throw new Error("invalid modulus");if(n===Un)return Pr;let r=Un;for(;e>Pr;)e&Un&&(r=r*t%n),t=t*t%n,e>>=Un;return r}function Gs(t,e,n){let r=t;for(;e-- >Pr;)r*=r,r%=n;return r}function r4(t,e){if(t===Pr)throw new Error("invert: expected non-zero number");if(e<=Pr)throw new Error("invert: expected positive modulus, got "+e);let n=Gi(t,e),r=e,i=Pr,s=Un;for(;n!==Pr;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==Un)throw new Error("invert: does not exist");return Gi(i,e)}function a6e(t){const e=(t-Un)/wd;let n,r,i;for(n=t-Un,r=0;n%wd===Pr;n/=wd,r++);for(i=wd;i<t&&o6e(i,e,t)!==t-Un;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Un)/n4;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+Un)/wd;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Un<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function c6e(t){if(t%n4===s6e){const e=(t+Un)/n4;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%s$===i$){const e=(t-i$)/s$;return function(r,i){const s=r.mul(i,wd),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,wd),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return a6e(t)}const l6e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function u6e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=l6e.reduce((r,i)=>(r[i]="function",r),e);return dy(t,n)}function d6e(t,e,n){if(n<Pr)throw new Error("invalid exponent, negatives unsupported");if(n===Pr)return t.ONE;if(n===Un)return e;let r=t.ONE,i=e;for(;n>Pr;)n&Un&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Un;return r}function h6e(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function DK(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function BK(t,e,n=!1,r={}){if(t<=Pr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=DK(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:gx(i),ZERO:Pr,ONE:Un,create:c=>Gi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Pr<=c&&c<t},is0:c=>c===Pr,isOdd:c=>(c&Un)===Un,neg:c=>Gi(-c,t),eql:(c,l)=>c===l,sqr:c=>Gi(c*c,t),add:(c,l)=>Gi(c+l,t),sub:(c,l)=>Gi(c-l,t),mul:(c,l)=>Gi(c*l,t),pow:(c,l)=>d6e(a,c,l),div:(c,l)=>Gi(c*r4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>r4(c,t),sqrt:r.sqrt||(c=>(o||(o=c6e(t)),o(a,c))),invertBatch:c=>h6e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?px(c,s):Ag(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?fx(c):Zd(c)}});return Object.freeze(a)}function LK(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function UK(t){const e=LK(t);return e+Math.ceil(e/2)}function f6e(t,e,n=!1){const r=t.length,i=LK(e),s=UK(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?fx(t):Zd(t),a=Gi(o,e-Un)+Un;return n?px(a,i):Ag(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const o$=BigInt(0),G1=BigInt(1);function I_(t,e){const n=e.negate();return t?n:e}function jK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function O_(t,e){jK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function p6e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function g6e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const P_=new WeakMap,FK=new WeakMap;function T_(t){return FK.get(t)||1}function m6e(t,e){return{constTimeNegate:I_,hasPrecomputes(n){return T_(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>o$;)r&G1&&(i=i.add(s)),s=s.double(),r>>=G1;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=O_(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=O_(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=G1);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(I_(w,r[g])):a=a.add(I_(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=O_(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===o$)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=G1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=P_.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&P_.set(r,i(s))),s},wNAFCached(n,r,i){const s=T_(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=T_(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){jK(r,e),FK.set(n,r),P_.delete(n)}}}function w6e(t,e,n,r){if(p6e(n,t),g6e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=NK(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function qK(t){return u6e(t.Fp),dy(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...DK(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function a$(t){t.lowS!==void 0&&Cg("lowS",t.lowS),t.prehash!==void 0&&Cg("prehash",t.prehash)}function y6e(t){const e=qK(t);dy(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b6e,hexToBytes:v6e}=i6e;class E6e extends Error{constructor(e=""){super(e)}}const _c={Err:E6e,_tlv:{encode:(t,e)=>{const{Err:n}=_c;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=gp(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?gp(i.length/2|128):"";return gp(t)+s+i+e},decode(t,e){const{Err:n}=_c;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=_c;if(t<kc)throw new e("integer: negative integers are not allowed");let n=gp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=_c;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return b6e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=_c,i=typeof t=="string"?v6e(t):t;uy(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=_c,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},kc=BigInt(0),mr=BigInt(1);BigInt(2);const c$=BigInt(3);BigInt(4);function C6e(t){const e=y6e(t),{Fp:n}=e,r=BK(e.n,e.nBitLength),i=e.toBytes||((g,m,w)=>{const b=m.toAffine();return pw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:b}});function o(g){const{a:m,b:w}=e,b=n.sqr(g),y=n.mul(b,g);return n.add(n.add(y,n.mul(g,m)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return HE(g,mr,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:b,n:y}=e;if(m&&typeof g!="bigint"){if(hh(g)&&(g=_g(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let _;try{_=typeof g=="bigint"?g:Zd($o("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return b&&(_=Gi(_,y)),Yd("private key",_,mr,y),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=t4((g,m)=>{const{px:w,py:b,pz:y}=g;if(n.eql(y,n.ONE))return{x:w,y:b};const _=g.is0();m==null&&(m=_?n.ONE:n.inv(y));const A=n.mul(w,m),T=n.mul(b,m),$=n.mul(y,m);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:A,y:T}}),d=t4(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");const b=n.sqr(w),y=o(m);if(!n.eql(b,y))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,b){if(this.px=m,this.py=w,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:b}=m||{};if(!m||!n.isValid(w)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const y=_=>n.eql(_,n.ZERO);return y(w)&&y(b)?h.ZERO:new h(w,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=n.invertBatch(m.map(b=>b.pz));return m.map((b,y)=>b.toAffine(w[y])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(s($o("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,w){return w6e(h,r,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m,$=n.eql(n.mul(w,T),n.mul(_,y)),D=n.eql(n.mul(b,T),n.mul(A,y));return $&&D}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,b=n.mul(w,c$),{px:y,py:_,pz:A}=this;let T=n.ZERO,$=n.ZERO,D=n.ZERO,O=n.mul(y,y),j=n.mul(_,_),F=n.mul(A,A),L=n.mul(y,_);return L=n.add(L,L),D=n.mul(y,A),D=n.add(D,D),T=n.mul(m,D),$=n.mul(b,F),$=n.add(T,$),T=n.sub(j,$),$=n.add(j,$),$=n.mul(T,$),T=n.mul(L,T),D=n.mul(b,D),F=n.mul(m,F),L=n.sub(O,F),L=n.mul(m,L),L=n.add(L,D),D=n.add(O,O),O=n.add(D,O),O=n.add(O,F),O=n.mul(O,L),$=n.add($,O),F=n.mul(_,A),F=n.add(F,F),O=n.mul(F,L),T=n.sub(T,O),D=n.mul(F,j),D=n.add(D,D),D=n.add(D,D),new h(T,$,D)}add(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m;let $=n.ZERO,D=n.ZERO,O=n.ZERO;const j=e.a,F=n.mul(e.b,c$);let L=n.mul(w,_),B=n.mul(b,A),x=n.mul(y,T),v=n.add(w,b),S=n.add(_,A);v=n.mul(v,S),S=n.add(L,B),v=n.sub(v,S),S=n.add(w,y);let N=n.add(_,T);return S=n.mul(S,N),N=n.add(L,x),S=n.sub(S,N),N=n.add(b,y),$=n.add(A,T),N=n.mul(N,$),$=n.add(B,x),N=n.sub(N,$),O=n.mul(j,S),$=n.mul(F,x),O=n.add($,O),$=n.sub(B,O),O=n.add(B,O),D=n.mul($,O),B=n.add(L,L),B=n.add(B,L),x=n.mul(j,x),S=n.mul(F,S),B=n.add(B,x),x=n.sub(L,x),x=n.mul(j,x),S=n.add(S,x),L=n.mul(B,S),D=n.add(D,L),L=n.mul(N,S),$=n.mul(v,$),$=n.sub($,L),L=n.mul(v,B),O=n.mul(N,O),O=n.add(O,L),new h($,D,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:b}=e;Yd("scalar",m,kc,b);const y=h.ZERO;if(m===kc)return y;if(this.is0()||m===mr)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:_,k1:A,k2neg:T,k2:$}=w.splitScalar(m),D=y,O=y,j=this;for(;A>kc||$>kc;)A&mr&&(D=D.add(j)),$&mr&&(O=O.add(j)),j=j.double(),A>>=mr,$>>=mr;return _&&(D=D.negate()),T&&(O=O.negate()),O=new h(n.mul(O.px,w.beta),O.py,O.pz),D.add(O)}multiply(m){const{endo:w,n:b}=e;Yd("scalar",m,mr,b);let y,_;if(w){const{k1neg:A,k1:T,k2neg:$,k2:D}=w.splitScalar(m);let{p:O,f:j}=this.wNAF(T),{p:F,f:L}=this.wNAF(D);O=p.constTimeNegate(A,O),F=p.constTimeNegate($,F),F=new h(n.mul(F.px,w.beta),F.py,F.pz),y=O.add(F),_=j.add(L)}else{const{p:A,f:T}=this.wNAF(m);y=A,_=T}return h.normalizeZ([y,_])[0]}multiplyAndAddUnsafe(m,w,b){const y=h.BASE,_=(T,$)=>$===kc||$===mr||!T.equals(y)?T.multiplyUnsafe($):T.multiply($),A=_(this,w).add(_(m,b));return A.is0()?void 0:A}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===mr)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===mr?this:w?w(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Cg("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return Cg("isCompressed",m),_g(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=m6e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function _6e(t){const e=qK(t);return dy(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function S6e(t){const e=_6e(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(x){return Gi(x,r)}function a(x){return r4(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=C6e({...e,toBytes(x,v,S){const N=v.toAffine(),E=n.toBytes(N.x),C=pw;return Cg("isCompressed",S),S?C(Uint8Array.from([v.hasEvenY()?2:3]),E):C(Uint8Array.from([4]),E,n.toBytes(N.y))},fromBytes(x){const v=x.length,S=x[0],N=x.subarray(1);if(v===i&&(S===2||S===3)){const E=Zd(N);if(!HE(E,mr,n.ORDER))throw new Error("Point is not on curve");const C=u(E);let P;try{P=n.sqrt(C)}catch(k){const R=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+R)}const M=(P&mr)===mr;return(S&1)===1!==M&&(P=n.neg(P)),{x:E,y:P}}else if(v===s&&S===4){const E=n.fromBytes(N.subarray(0,n.BYTES)),C=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:E,y:C}}else{const E=i,C=s;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+C+", got "+v)}}}),h=x=>_g(Ag(x,e.nByteLength));function f(x){const v=r>>mr;return x>v}function p(x){return f(x)?o(-x):x}const g=(x,v,S)=>Zd(x.slice(v,S));class m{constructor(v,S,N){this.r=v,this.s=S,this.recovery=N,this.assertValidity()}static fromCompact(v){const S=e.nByteLength;return v=$o("compactSignature",v,S*2),new m(g(v,0,S),g(v,S,2*S))}static fromDER(v){const{r:S,s:N}=_c.toSig($o("DER",v));return new m(S,N)}assertValidity(){Yd("r",this.r,mr,r),Yd("s",this.s,mr,r)}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:S,s:N,recovery:E}=this,C=T($o("msgHash",v));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const P=E===2||E===3?S+e.n:S;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=E&1?"03":"02",I=c.fromHex(M+h(P)),k=a(P),R=o(-C*k),U=o(N*k),q=c.BASE.multiplyAndAddUnsafe(I,R,U);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Sg(this.toDERHex())}toDERHex(){return _c.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Sg(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=UK(e.n);return f6e(e.randomBytes(x),e.n)},precompute(x=8,v=c.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}};function b(x,v=!0){return c.fromPrivateKey(x).toRawBytes(v)}function y(x){const v=hh(x),S=typeof x=="string",N=(v||S)&&x.length;return v?N===i||N===s:S?N===2*i||N===2*s:x instanceof c}function _(x,v,S=!0){if(y(x))throw new Error("first arg must be private key");if(!y(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(l(x)).toRawBytes(S)}const A=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const v=Zd(x),S=x.length*8-e.nBitLength;return S>0?v>>BigInt(S):v},T=e.bits2int_modN||function(x){return o(A(x))},$=gx(e.nBitLength);function D(x){return Yd("num < 2^"+e.nBitLength,x,kc,$),Ag(x,e.nByteLength)}function O(x,v,S=j){if(["recovered","canonical"].some(z=>z in S))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:E}=e;let{lowS:C,prehash:P,extraEntropy:M}=S;C==null&&(C=!0),x=$o("msgHash",x),a$(S),P&&(x=$o("prehashed msgHash",N(x)));const I=T(x),k=l(v),R=[D(k),D(I)];if(M!=null&&M!==!1){const z=M===!0?E(n.BYTES):M;R.push($o("extraEntropy",z))}const U=pw(...R),q=I;function H(z){const K=A(z);if(!d(K))return;const G=a(K),Y=c.BASE.multiply(K).toAffine(),X=o(Y.x);if(X===kc)return;const ie=o(G*o(q+X*k));if(ie===kc)return;let de=(Y.x===X?0:2)|Number(Y.y&mr),Se=ie;return C&&f(ie)&&(Se=p(ie),de^=1),new m(X,Se,de)}return{seed:U,k2sig:H}}const j={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function L(x,v,S=j){const{seed:N,k2sig:E}=O(x,v,S),C=e;return $K(C.hash.outputLen,C.nByteLength,C.hmac)(N,E)}c.BASE._setWindowSize(8);function B(x,v,S,N=F){const E=x;v=$o("msgHash",v),S=$o("publicKey",S);const{lowS:C,prehash:P,format:M}=N;if(a$(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const I=typeof E=="string"||hh(E),k=!I&&!M&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!I&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let R,U;try{if(k&&(R=new m(E.r,E.s)),I){try{M!=="compact"&&(R=m.fromDER(E))}catch(de){if(!(de instanceof _c.Err))throw de}!R&&M!=="der"&&(R=m.fromCompact(E))}U=c.fromHex(S)}catch{return!1}if(!R||C&&R.hasHighS())return!1;P&&(v=e.hash(v));const{r:q,s:H}=R,z=T(v),K=a(H),G=o(z*K),Y=o(q*K),X=c.BASE.multiplyAndAddUnsafe(U,G,Y)?.toAffine();return X?o(X.x)===q:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:L,verify:B,ProjectivePoint:c,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A6e(t){return{hash:t,hmac:(e,...n)=>MK(t,e,k4e(...n)),randomBytes:N4e}}function x6e(t,e){const n=r=>S6e({...t,...A6e(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HK=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l$=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),I6e=BigInt(1),i4=BigInt(2),u$=(t,e)=>(t+e/i4)/e;function O6e(t){const e=HK,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Gs(u,n,e)*u%e,h=Gs(d,n,e)*u%e,f=Gs(h,i4,e)*l%e,p=Gs(f,i,e)*f%e,g=Gs(p,s,e)*p%e,m=Gs(g,a,e)*g%e,w=Gs(m,c,e)*m%e,b=Gs(w,a,e)*g%e,y=Gs(b,n,e)*u%e,_=Gs(y,o,e)*p%e,A=Gs(_,r,e)*l%e,T=Gs(A,i4,e);if(!s4.eql(s4.sqr(T),t))throw new Error("Cannot find square root");return T}const s4=BK(HK,void 0,void 0,{sqrt:O6e}),zK=x6e({a:BigInt(0),b:BigInt(7),Fp:s4,n:l$,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=l$,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-I6e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=u$(s*t,e),c=u$(-r*t,e);let l=Gi(t-a*n-c*i,e),u=Gi(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},G4e);BigInt(0);zK.ProjectivePoint;const BFe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:zK},Symbol.toStringTag,{value:"Module"}));function P6e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*s+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],y=0;for(let _=p-1;(b!==0||y<d)&&_!==-1;_--,y++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=y,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let w=r.repeat(u);for(;m<p;++m)w+=t.charAt(g[m]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*i+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let y=e[b];if(y===255)return;let _=0;for(let A=f-1;(y!==0||_<h)&&A!==-1;A--,_++)y+=n*p[A]>>>0,p[A]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)m[w++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var T6e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const KK=P6e(T6e);var k6e={};const N6e=":";function kp(t){const[e,n]=t.split(N6e);return{namespace:e,reference:n}}function VK(t,e){return t.includes(":")?[t]:e.chains||[]}var $6e=Object.defineProperty,R6e=Object.defineProperties,M6e=Object.getOwnPropertyDescriptors,d$=Object.getOwnPropertySymbols,D6e=Object.prototype.hasOwnProperty,B6e=Object.prototype.propertyIsEnumerable,h$=(t,e,n)=>e in t?$6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f$=(t,e)=>{for(var n in e||(e={}))D6e.call(e,n)&&h$(t,n,e[n]);if(d$)for(var n of d$(e))B6e.call(e,n)&&h$(t,n,e[n]);return t},L6e=(t,e)=>R6e(t,M6e(e));const U6e="ReactNative",As={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},j6e="js";function d2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Hu(){return!Is()&&!!Ww()&&navigator.product===U6e}function F6e(){return Hu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function q6e(){return Hu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function s0(){return!d2()&&!!Ww()&&!!Is()}function hy(){return Hu()?As.reactNative:d2()?As.node:s0()?As.browser:As.unknown}function p$(){var t;try{return Hu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function H6e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function z6e(t){var e,n;const r=WK();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),L6e(f$(f$({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function WK(){return D8()||{name:"",description:"",url:"",icons:[""]}}function K6e(){if(hy()===As.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Dq();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function V6e(){var t;const e=hy();return e===As.browser?[e,((t=R8())==null?void 0:t.host)||"unknown"].join(":"):e}function GK(t,e,n){const r=K6e(),i=V6e();return[[t,e].join("-"),[j6e,n].join("-"),r,i].join("/")}function W6e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=GK(t,e,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=H6e(l[1]||"",d);return l[0]+"?"+h}function kd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function o4(t){return Object.fromEntries(t.entries())}function a4(t){return new Map(Object.entries(t))}function ud(t=J.FIVE_MINUTES,e){const n=J.toMiliseconds(t||J.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function du(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function ZK(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function G6e(t){return ZK("topic",t)}function Z6e(t){return ZK("id",t)}function YK(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function er(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function ql(t){return Date.now()>=J.toMiliseconds(t)}function Rt(t,e){return`${t}${e?`:${e}`:""}`}function Da(t=[],e=[]){return[...new Set([...t,...e])]}async function Y6e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i?.href;if(typeof s!="string")return;const o=Q6e(s,t,e),a=hy();if(a===As.browser){if(!((r=Is())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}J6e(o)}else a===As.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function Q6e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${n8e(r,!0)}`}else i=`${i}/wc?${r}`;return i}function J6e(t){let e="_self";t8e()?e="_top":(e8e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function X6e(t,e){let n="";try{if(s0()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function g$(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function m$(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function mx(){return typeof process<"u"&&k6e.IS_VITEST==="true"}function e8e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function t8e(){try{return window.self!==window.top}catch{return!1}}function n8e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function QK(t){return Buffer.from(t,"base64").toString("utf-8")}function r8e(t){return new Promise(e=>setTimeout(e,t))}function gw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function i8e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fy(t,...e){if(!i8e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gw(t.outputLen),gw(t.blockLen)}function xg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function JK(t,e){fy(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Z1=BigInt(2**32-1),w$=BigInt(32);function s8e(t,e=!1){return e?{h:Number(t&Z1),l:Number(t>>w$&Z1)}:{h:Number(t>>w$&Z1)|0,l:Number(t&Z1)|0}}function o8e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=s8e(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const a8e=(t,e,n)=>t<<n|e>>>32-n,c8e=(t,e,n)=>e<<n|t>>>32-n,l8e=(t,e,n)=>e<<n-32|t>>>64-n,u8e=(t,e,n)=>t<<n-32|e>>>64-n,xf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function d8e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function k_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function la(t,e){return t<<32-e|t>>>e}const y$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h8e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function b$(t){for(let e=0;e<t.length;e++)t[e]=h8e(t[e])}function f8e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ig(t){return typeof t=="string"&&(t=f8e(t)),fy(t),t}function p8e(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];fy(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let yx=class{clone(){return this._cloneInto()}};function XK(t){const e=r=>t().update(Ig(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function o0(t=32){if(xf&&typeof xf.getRandomValues=="function")return xf.getRandomValues(new Uint8Array(t));if(xf&&typeof xf.randomBytes=="function")return xf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const eV=[],tV=[],nV=[],g8e=BigInt(0),D0=BigInt(1),m8e=BigInt(2),w8e=BigInt(7),y8e=BigInt(256),b8e=BigInt(113);for(let t=0,e=D0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],eV.push(2*(5*r+n)),tV.push((t+1)*(t+2)/2%64);let i=g8e;for(let s=0;s<7;s++)e=(e<<D0^(e>>w8e)*b8e)%y8e,e&m8e&&(i^=D0<<(D0<<BigInt(s))-D0);nV.push(i)}const[v8e,E8e]=o8e(nV,!0),v$=(t,e,n)=>n>32?l8e(t,e,n):a8e(t,e,n),E$=(t,e,n)=>n>32?u8e(t,e,n):c8e(t,e,n);function C8e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=v$(l,u,1)^n[a],h=E$(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=tV[o],c=v$(i,s,a),l=E$(i,s,a),u=eV[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=v8e[r],t[1]^=E8e[r]}n.fill(0)}let _8e=class rV extends yx{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,gw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d8e(this.state)}keccak(){y$||b$(this.state32),C8e(this.state32,this.rounds),y$||b$(this.state32),this.posOut=0,this.pos=0}update(e){xg(this);const{blockLen:n,state:r}=this;e=Ig(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){xg(this,!1),fy(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(JK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new rV(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const S8e=(t,e,n)=>XK(()=>new _8e(e,t,n)),A8e=S8e(1,136,256/8),x8e="https://rpc.walletconnect.org/v1";function iV(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(A8e(n)).toString("hex")}async function I8e(t,e,n,r,i,s){switch(n.t){case"eip191":return await O8e(t,e,n.s);case"eip1271":return await P8e(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function O8e(t,e,n){return(await TG({hash:iV(e),signature:n})).toLowerCase()===t.toLowerCase()}async function P8e(t,e,n,r,i,s){const o=kp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=iV(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||x8e}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:T8e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function T8e(){return Date.now()+Math.floor(Math.random()*1e3)}function k8e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return KK.encode(s)}var N8e=Object.defineProperty,$8e=Object.defineProperties,R8e=Object.getOwnPropertyDescriptors,C$=Object.getOwnPropertySymbols,M8e=Object.prototype.hasOwnProperty,D8e=Object.prototype.propertyIsEnumerable,_$=(t,e,n)=>e in t?N8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B8e=(t,e)=>{for(var n in e||(e={}))M8e.call(e,n)&&_$(t,n,e[n]);if(C$)for(var n of C$(e))D8e.call(e,n)&&_$(t,n,e[n]);return t},L8e=(t,e)=>$8e(t,R8e(e));const U8e="did:pkh:",bx=t=>t?.split(":"),j8e=t=>{const e=t&&bx(t);if(e)return t.includes(U8e)?e[3]:e[1]},c4=t=>{const e=t&&bx(t);if(e)return e[2]+":"+e[3]},h2=t=>{const e=t&&bx(t);if(e)return e.pop()};async function S$(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=sV(i,i.iss),o=h2(i.iss);return await I8e(o,s,r,c4(i.iss),n)}const sV=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=h2(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${j8e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Yb(t.resources);if(p){const g=mw(p);i=Z8e(i,g)}return[n,r,"",i,"",s,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function F8e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function q8e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function fh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function H8e(t,e,n,r={}){return n?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:z8e(e,n,r)}}}function z8e(t,e,n={}){e=e?.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function oV(t){return fh(t),`urn:recap:${F8e(t).replace(/=/g,"")}`}function mw(t){const e=q8e(t.replace("urn:recap:",""));return fh(e),e}function K8e(t,e,n){const r=H8e(t,e,n);return oV(r)}function V8e(t){return t&&t.includes("urn:recap:")}function W8e(t,e){const n=mw(t),r=mw(e),i=G8e(n,r);return oV(i)}function G8e(t,e){fh(t),fh(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=L8e(B8e({},r.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function Z8e(t="",e){fh(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function A$(t){var e;const n=mw(t);fh(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function x$(t){const e=mw(t);fh(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Yb(t){if(!t)return;const e=t?.[t.length-1];return V8e(e)?e:void 0}function N_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function aV(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bs(t,...e){if(!aV(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function I$(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Y8e(t,e){bs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function O$(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const xu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Q8e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),J8e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!J8e)throw new Error("Non little-endian hardware is not supported");function X8e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function l4(t){if(typeof t=="string")t=X8e(t);else if(aV(t))t=u4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function exe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function txe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const nxe=(t,e)=>{function n(r,...i){if(bs(r),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?bs(l):bs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&bs(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");bs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,bs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(bs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function P$(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!rxe(e))throw new Error("invalid output, must be aligned");return e}function T$(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function rxe(t){return t.byteOffset%4===0}function u4(t){return Uint8Array.from(t)}function Og(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const cV=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),ixe=cV("expand 16-byte k"),sxe=cV("expand 32-byte k"),oxe=xu(ixe),axe=xu(sxe);function It(t,e){return t<<e|t>>>32-e}function d4(t){return t.byteOffset%4===0}const Y1=64,cxe=16,lV=2**32-1,k$=new Uint32Array;function lxe(t,e,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(Y1),u=xu(l),d=d4(i)&&d4(s),h=d?xu(i):k$,f=d?xu(s):k$;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=lV)throw new Error("arx: counter overflow");const g=Math.min(Y1,c-p);if(d&&g===Y1){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,b;w<cxe;w++)b=m+w,f[b]=h[b]^u[w];p+=Y1;continue}for(let m=0,w;m<g;m++)w=p+m,s[w]=i[w]^l[m];p+=g}}function uxe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=exe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return N_(i),N_(o),O$(s),O$(n),(a,c,l,u,d=0)=>{bs(a),bs(c),bs(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),bs(u),N_(d),d<0||d>=lV)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=u4(a)),m=axe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=oxe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);d4(c)||f.push(c=u4(c));const w=xu(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,w,xu(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,s?0:12-c.length),c=_,f.push(c)}const y=xu(c);return lxe(t,m,w,y,l,u,d,o),Og(...f),u}}const Mr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class dxe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=l4(e),bs(e,32);const n=Mr(e,0),r=Mr(e,2),i=Mr(e,4),s=Mr(e,6),o=Mr(e,8),a=Mr(e,10),c=Mr(e,12),l=Mr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Mr(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],w=Mr(e,n+0),b=Mr(e,n+2),y=Mr(e,n+4),_=Mr(e,n+6),A=Mr(e,n+8),T=Mr(e,n+10),$=Mr(e,n+12),D=Mr(e,n+14);let O=s[0]+(w&8191),j=s[1]+((w>>>13|b<<3)&8191),F=s[2]+((b>>>10|y<<6)&8191),L=s[3]+((y>>>7|_<<9)&8191),B=s[4]+((_>>>4|A<<12)&8191),x=s[5]+(A>>>1&8191),v=s[6]+((A>>>14|T<<2)&8191),S=s[7]+((T>>>11|$<<5)&8191),N=s[8]+(($>>>8|D<<8)&8191),E=s[9]+(D>>>5|i),C=0,P=C+O*a+j*(5*m)+F*(5*g)+L*(5*p)+B*(5*f);C=P>>>13,P&=8191,P+=x*(5*h)+v*(5*d)+S*(5*u)+N*(5*l)+E*(5*c),C+=P>>>13,P&=8191;let M=C+O*c+j*a+F*(5*m)+L*(5*g)+B*(5*p);C=M>>>13,M&=8191,M+=x*(5*f)+v*(5*h)+S*(5*d)+N*(5*u)+E*(5*l),C+=M>>>13,M&=8191;let I=C+O*l+j*c+F*a+L*(5*m)+B*(5*g);C=I>>>13,I&=8191,I+=x*(5*p)+v*(5*f)+S*(5*h)+N*(5*d)+E*(5*u),C+=I>>>13,I&=8191;let k=C+O*u+j*l+F*c+L*a+B*(5*m);C=k>>>13,k&=8191,k+=x*(5*g)+v*(5*p)+S*(5*f)+N*(5*h)+E*(5*d),C+=k>>>13,k&=8191;let R=C+O*d+j*u+F*l+L*c+B*a;C=R>>>13,R&=8191,R+=x*(5*m)+v*(5*g)+S*(5*p)+N*(5*f)+E*(5*h),C+=R>>>13,R&=8191;let U=C+O*h+j*d+F*u+L*l+B*c;C=U>>>13,U&=8191,U+=x*a+v*(5*m)+S*(5*g)+N*(5*p)+E*(5*f),C+=U>>>13,U&=8191;let q=C+O*f+j*h+F*d+L*u+B*l;C=q>>>13,q&=8191,q+=x*c+v*a+S*(5*m)+N*(5*g)+E*(5*p),C+=q>>>13,q&=8191;let H=C+O*p+j*f+F*h+L*d+B*u;C=H>>>13,H&=8191,H+=x*l+v*c+S*a+N*(5*m)+E*(5*g),C+=H>>>13,H&=8191;let z=C+O*g+j*p+F*f+L*h+B*d;C=z>>>13,z&=8191,z+=x*u+v*l+S*c+N*a+E*(5*m),C+=z>>>13,z&=8191;let K=C+O*m+j*g+F*p+L*f+B*h;C=K>>>13,K&=8191,K+=x*d+v*u+S*l+N*c+E*a,C+=K>>>13,K&=8191,C=(C<<2)+C|0,C=C+P|0,P=C&8191,C=C>>>13,M+=C,s[0]=P,s[1]=M,s[2]=I,s[3]=k,s[4]=R,s[5]=U,s[6]=q,s[7]=H,s[8]=z,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Og(r)}update(e){I$(this);const{buffer:n,blockLen:r}=this;e=l4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Og(this.h,this.r,this.buffer,this.pad)}digestInto(e){I$(this),Y8e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function hxe(t){const e=(r,i)=>t(i).update(l4(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const fxe=hxe(t=>new dxe(t));function pxe(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],w=e[7],b=i,y=n[0],_=n[1],A=n[2],T=o,$=a,D=c,O=l,j=u,F=d,L=h,B=f,x=p,v=g,S=m,N=w,E=b,C=y,P=_,M=A;for(let k=0;k<s;k+=2)T=T+j|0,E=It(E^T,16),x=x+E|0,j=It(j^x,12),T=T+j|0,E=It(E^T,8),x=x+E|0,j=It(j^x,7),$=$+F|0,C=It(C^$,16),v=v+C|0,F=It(F^v,12),$=$+F|0,C=It(C^$,8),v=v+C|0,F=It(F^v,7),D=D+L|0,P=It(P^D,16),S=S+P|0,L=It(L^S,12),D=D+L|0,P=It(P^D,8),S=S+P|0,L=It(L^S,7),O=O+B|0,M=It(M^O,16),N=N+M|0,B=It(B^N,12),O=O+B|0,M=It(M^O,8),N=N+M|0,B=It(B^N,7),T=T+F|0,M=It(M^T,16),S=S+M|0,F=It(F^S,12),T=T+F|0,M=It(M^T,8),S=S+M|0,F=It(F^S,7),$=$+L|0,E=It(E^$,16),N=N+E|0,L=It(L^N,12),$=$+L|0,E=It(E^$,8),N=N+E|0,L=It(L^N,7),D=D+B|0,C=It(C^D,16),x=x+C|0,B=It(B^x,12),D=D+B|0,C=It(C^D,8),x=x+C|0,B=It(B^x,7),O=O+j|0,P=It(P^O,16),v=v+P|0,j=It(j^v,12),O=O+j|0,P=It(P^O,8),v=v+P|0,j=It(j^v,7);let I=0;r[I++]=o+T|0,r[I++]=a+$|0,r[I++]=c+D|0,r[I++]=l+O|0,r[I++]=u+j|0,r[I++]=d+F|0,r[I++]=h+L|0,r[I++]=f+B|0,r[I++]=p+x|0,r[I++]=g+v|0,r[I++]=m+S|0,r[I++]=w+N|0,r[I++]=b+E|0,r[I++]=y+C|0,r[I++]=_+P|0,r[I++]=A+M|0}const gxe=uxe(pxe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),mxe=new Uint8Array(16),N$=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(mxe.subarray(n))},wxe=new Uint8Array(32);function $$(t,e,n,r,i){const s=t(e,n,wxe),o=fxe.create(s);i&&N$(o,i),N$(o,r);const a=new Uint8Array(16),c=Q8e(a);T$(c,0,BigInt(i?i.length:0),!0),T$(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Og(s,a),l}const yxe=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=P$(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const c=$$(t,e,n,a,r);return s.set(c,o),Og(c),s},decrypt(i,s){s=P$(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=$$(t,e,n,o,r);if(!txe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),Og(c),s}}),uV=nxe({blockSize:64,nonceLength:12,tagLength:16},yxe(gxe));let dV=class extends yx{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,wx(e);const r=Ig(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return xg(this),this.iHash.update(e),this}digestInto(e){xg(this),fy(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zE=(t,e,n)=>new dV(t,e).update(n).digest();zE.create=(t,e)=>new dV(t,e);function bxe(t,e,n){return wx(t),n===void 0&&(n=new Uint8Array(t.outputLen)),zE(t,Ig(n),Ig(e))}const $_=new Uint8Array([0]),R$=new Uint8Array;function vxe(t,e,n,r=32){if(wx(t),gw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=R$);const s=new Uint8Array(i*t.outputLen),o=zE.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)$_[0]=l+1,a.update(l===0?R$:c).update(n).update($_).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),$_.fill(0),s.slice(0,r)}const Exe=(t,e,n,r,i)=>vxe(t,bxe(t,e,n),r,i);function Cxe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function _xe(t,e,n){return t&e^~t&n}function Sxe(t,e,n){return t&e^t&n^e&n}let Axe=class extends yx{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=k_(this.buffer)}update(e){xg(this);const{view:n,buffer:r,blockLen:i}=this;e=Ig(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=k_(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xg(this),JK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;Cxe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=k_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const xxe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Il=new Uint32Array(64);class Ixe extends Axe{constructor(){super(64,32,8,!1),this.A=xl[0]|0,this.B=xl[1]|0,this.C=xl[2]|0,this.D=xl[3]|0,this.E=xl[4]|0,this.F=xl[5]|0,this.G=xl[6]|0,this.H=xl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Il[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Il[d-15],f=Il[d-2],p=la(h,7)^la(h,18)^h>>>3,g=la(f,17)^la(f,19)^f>>>10;Il[d]=g+Il[d-7]+p+Il[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=la(a,6)^la(a,11)^la(a,25),f=u+h+_xe(a,c,l)+xxe[d]+Il[d]|0,p=(la(r,2)^la(r,13)^la(r,22))+Sxe(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Il.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const py=XK(()=>new Ixe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const KE=BigInt(0),VE=BigInt(1),Oxe=BigInt(2);function ph(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gy(t){if(!ph(t))throw new Error("Uint8Array expected")}function Pg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Pxe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tg(t){gy(t);let e="";for(let n=0;n<t.length;n++)e+=Pxe[t[n]];return e}function mp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function vx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?KE:BigInt("0x"+t)}const uc={_0:48,_9:57,A:65,F:70,a:97,f:102};function M$(t){if(t>=uc._0&&t<=uc._9)return t-uc._0;if(t>=uc.A&&t<=uc.F)return t-(uc.A-10);if(t>=uc.a&&t<=uc.f)return t-(uc.a-10)}function kg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=M$(t.charCodeAt(s)),a=M$(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Qd(t){return vx(Tg(t))}function ww(t){return gy(t),vx(Tg(Uint8Array.from(t).reverse()))}function Ng(t,e){return kg(t.toString(16).padStart(e*2,"0"))}function WE(t,e){return Ng(t,e).reverse()}function Txe(t){return kg(mp(t))}function gs(t,e,n){let r;if(typeof e=="string")try{r=kg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ph(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function yw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];gy(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function kxe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Nxe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const R_=t=>typeof t=="bigint"&&KE<=t;function GE(t,e,n){return R_(t)&&R_(e)&&R_(n)&&e<=t&&t<n}function qc(t,e,n,r){if(!GE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hV(t){let e;for(e=0;t>KE;t>>=VE,e+=1);return e}function $xe(t,e){return t>>BigInt(e)&VE}function Rxe(t,e,n){return t|(n?VE:KE)<<BigInt(e)}const Ex=t=>(Oxe<<BigInt(t-1))-VE,M_=t=>new Uint8Array(t),D$=t=>Uint8Array.from(t);function fV(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=M_(t),i=M_(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=M_())=>{i=a(D$([0]),u),r=a(),u.length!==0&&(i=a(D$([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return yw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const Mxe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ph(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function a0(t,e,n={}){const r=(i,s,o)=>{const a=Mxe[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Dxe=()=>{throw new Error("not implemented")};function h4(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}var Bxe=Object.freeze({__proto__:null,isBytes:ph,abytes:gy,abool:Pg,bytesToHex:Tg,numberToHexUnpadded:mp,hexToNumber:vx,hexToBytes:kg,bytesToNumberBE:Qd,bytesToNumberLE:ww,numberToBytesBE:Ng,numberToBytesLE:WE,numberToVarBytesBE:Txe,ensureBytes:gs,concatBytes:yw,equalBytes:kxe,utf8ToBytes:Nxe,inRange:GE,aInRange:qc,bitLen:hV,bitGet:$xe,bitSet:Rxe,bitMask:Ex,createHmacDrbg:fV,validateObject:a0,notImplemented:Dxe,memoized:h4});const Tr=BigInt(0),jn=BigInt(1),yd=BigInt(2),Lxe=BigInt(3),f4=BigInt(4),B$=BigInt(5),L$=BigInt(8);function Zi(t,e){const n=t%e;return n>=Tr?n:e+n}function pV(t,e,n){if(e<Tr)throw new Error("invalid exponent, negatives unsupported");if(n<=Tr)throw new Error("invalid modulus");if(n===jn)return Tr;let r=jn;for(;e>Tr;)e&jn&&(r=r*t%n),t=t*t%n,e>>=jn;return r}function To(t,e,n){let r=t;for(;e-- >Tr;)r*=r,r%=n;return r}function p4(t,e){if(t===Tr)throw new Error("invert: expected non-zero number");if(e<=Tr)throw new Error("invert: expected positive modulus, got "+e);let n=Zi(t,e),r=e,i=Tr,s=jn;for(;n!==Tr;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==jn)throw new Error("invert: does not exist");return Zi(i,e)}function Uxe(t){const e=(t-jn)/yd;let n,r,i;for(n=t-jn,r=0;n%yd===Tr;n/=yd,r++);for(i=yd;i<t&&pV(i,e,t)!==t-jn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+jn)/f4;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+jn)/yd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,jn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function jxe(t){if(t%f4===Lxe){const e=(t+jn)/f4;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%L$===B$){const e=(t-B$)/L$;return function(n,r){const i=n.mul(r,yd),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,yd),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Uxe(t)}const Fxe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qxe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Fxe.reduce((r,i)=>(r[i]="function",r),e);return a0(t,n)}function Hxe(t,e,n){if(n<Tr)throw new Error("invalid exponent, negatives unsupported");if(n===Tr)return t.ONE;if(n===jn)return e;let r=t.ONE,i=e;for(;n>Tr;)n&jn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=jn;return r}function zxe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function gV(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mV(t,e,n=!1,r={}){if(t<=Tr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=gV(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Ex(i),ZERO:Tr,ONE:jn,create:c=>Zi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Tr<=c&&c<t},is0:c=>c===Tr,isOdd:c=>(c&jn)===jn,neg:c=>Zi(-c,t),eql:(c,l)=>c===l,sqr:c=>Zi(c*c,t),add:(c,l)=>Zi(c+l,t),sub:(c,l)=>Zi(c-l,t),mul:(c,l)=>Zi(c*l,t),pow:(c,l)=>Hxe(a,c,l),div:(c,l)=>Zi(c*p4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>p4(c,t),sqrt:r.sqrt||(c=>(o||(o=jxe(t)),o(a,c))),invertBatch:c=>zxe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?WE(c,s):Ng(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?ww(c):Qd(c)}});return Object.freeze(a)}function wV(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function yV(t){const e=wV(t);return e+Math.ceil(e/2)}function Kxe(t,e,n=!1){const r=t.length,i=wV(e),s=yV(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?ww(t):Qd(t),a=Zi(o,e-jn)+jn;return n?WE(a,i):Ng(a,i)}const U$=BigInt(0),Q1=BigInt(1);function D_(t,e){const n=e.negate();return t?n:e}function bV(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function B_(t,e){bV(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Vxe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Wxe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const L_=new WeakMap,vV=new WeakMap;function U_(t){return vV.get(t)||1}function Gxe(t,e){return{constTimeNegate:D_,hasPrecomputes(n){return U_(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>U$;)r&Q1&&(i=i.add(s)),s=s.double(),r>>=Q1;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=B_(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=B_(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=Q1);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(D_(w,r[g])):a=a.add(D_(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=B_(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===U$)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Q1),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=L_.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&L_.set(r,i(s))),s},wNAFCached(n,r,i){const s=U_(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=U_(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){bV(r,e),vV.set(n,r),L_.delete(n)}}}function Zxe(t,e,n,r){if(Vxe(n,t),Wxe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=hV(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function EV(t){return qxe(t.Fp),a0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gV(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const If=BigInt(0),j_=BigInt(1);function Yxe(t){return a0(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Qxe(t){const e=Yxe(t),{P:n}=e,r=b=>Zi(b,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>pV(b,n-BigInt(2),n));function l(b,y,_){const A=r(b*(y-_));return y=r(y-A),_=r(_+A),[y,_]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,y){qc("u",b,If,n),qc("scalar",y,If,n);const _=y,A=b;let T=j_,$=If,D=b,O=j_,j=If,F;for(let B=BigInt(i-1);B>=If;B--){const x=_>>B&j_;j^=x,F=l(j,T,D),T=F[0],D=F[1],F=l(j,$,O),$=F[0],O=F[1],j=x;const v=T+$,S=r(v*v),N=T-$,E=r(N*N),C=S-E,P=D+O,M=D-O,I=r(M*v),k=r(P*N),R=I+k,U=I-k;D=r(R*R),O=r(A*r(U*U)),T=r(S*E),$=r(C*(S+r(u*C)))}F=l(j,T,D),T=F[0],D=F[1],F=l(j,$,O),$=F[0],O=F[1];const L=c($);return r(T*L)}function h(b){return WE(r(b),s)}function f(b){const y=gs("u coordinate",b,s);return o===32&&(y[31]&=127),ww(y)}function p(b){const y=gs("scalar",b),_=y.length;if(_!==s&&_!==o){let A=""+s+" or "+o;throw new Error("invalid scalar, expected "+A+" bytes, got "+_)}return ww(a(y))}function g(b,y){const _=f(y),A=p(b),T=d(_,A);if(T===If)throw new Error("invalid private or public key received");return h(T)}const m=h(e.Gu);function w(b){return g(b,m)}return{scalarMult:g,scalarMultBase:w,getSharedSecret:(b,y)=>g(b,y),getPublicKey:b=>w(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const g4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Jxe=BigInt(1),j$=BigInt(2),Xxe=BigInt(3),eIe=BigInt(5);BigInt(8);function tIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=g4,o=t*t%s*t%s,a=To(o,j$,s)*o%s,c=To(a,Jxe,s)*t%s,l=To(c,eIe,s)*c%s,u=To(l,e,s)*l%s,d=To(u,n,s)*u%s,h=To(d,r,s)*d%s,f=To(h,i,s)*h%s,p=To(f,i,s)*h%s,g=To(p,e,s)*l%s;return{pow_p_5_8:To(g,j$,s)*t%s,b2:o}}function nIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const m4=Qxe({P:g4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=g4,{pow_p_5_8:n,b2:r}=tIe(t);return Zi(To(n,Xxe,e)*r,e)},adjustScalarBytes:nIe,randomBytes:o0});function F$(t){t.lowS!==void 0&&Pg("lowS",t.lowS),t.prehash!==void 0&&Pg("prehash",t.prehash)}function rIe(t){const e=EV(t);a0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:iIe,hexToBytes:sIe}=Bxe;class oIe extends Error{constructor(e=""){super(e)}}const Sc={Err:oIe,_tlv:{encode:(t,e)=>{const{Err:n}=Sc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=mp(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?mp(i.length/2|128):"";return mp(t)+s+i+e},decode(t,e){const{Err:n}=Sc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Sc;if(t<Nc)throw new e("integer: negative integers are not allowed");let n=mp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Sc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return iIe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Sc,i=typeof t=="string"?sIe(t):t;gy(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Sc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Nc=BigInt(0),wr=BigInt(1);BigInt(2);const q$=BigInt(3);BigInt(4);function aIe(t){const e=rIe(t),{Fp:n}=e,r=mV(e.n,e.nBitLength),i=e.toBytes||((g,m,w)=>{const b=m.toAffine();return yw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),w=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:w,y:b}});function o(g){const{a:m,b:w}=e,b=n.sqr(g),y=n.mul(b,g);return n.add(n.add(y,n.mul(g,m)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return GE(g,wr,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:b,n:y}=e;if(m&&typeof g!="bigint"){if(ph(g)&&(g=Tg(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let _;try{_=typeof g=="bigint"?g:Qd(gs("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return b&&(_=Zi(_,y)),qc("private key",_,wr,y),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=h4((g,m)=>{const{px:w,py:b,pz:y}=g;if(n.eql(y,n.ONE))return{x:w,y:b};const _=g.is0();m==null&&(m=_?n.ONE:n.inv(y));const A=n.mul(w,m),T=n.mul(b,m),$=n.mul(y,m);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:A,y:T}}),d=h4(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!n.isValid(m)||!n.isValid(w))throw new Error("bad point: x or y not FE");const b=n.sqr(w),y=o(m);if(!n.eql(b,y))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,b){if(this.px=m,this.py=w,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:b}=m||{};if(!m||!n.isValid(w)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const y=_=>n.eql(_,n.ZERO);return y(w)&&y(b)?h.ZERO:new h(w,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=n.invertBatch(m.map(b=>b.pz));return m.map((b,y)=>b.toAffine(w[y])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(s(gs("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,w){return Zxe(h,r,m,w)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m,$=n.eql(n.mul(w,T),n.mul(_,y)),D=n.eql(n.mul(b,T),n.mul(A,y));return $&&D}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,b=n.mul(w,q$),{px:y,py:_,pz:A}=this;let T=n.ZERO,$=n.ZERO,D=n.ZERO,O=n.mul(y,y),j=n.mul(_,_),F=n.mul(A,A),L=n.mul(y,_);return L=n.add(L,L),D=n.mul(y,A),D=n.add(D,D),T=n.mul(m,D),$=n.mul(b,F),$=n.add(T,$),T=n.sub(j,$),$=n.add(j,$),$=n.mul(T,$),T=n.mul(L,T),D=n.mul(b,D),F=n.mul(m,F),L=n.sub(O,F),L=n.mul(m,L),L=n.add(L,D),D=n.add(O,O),O=n.add(D,O),O=n.add(O,F),O=n.mul(O,L),$=n.add($,O),F=n.mul(_,A),F=n.add(F,F),O=n.mul(F,L),T=n.sub(T,O),D=n.mul(F,j),D=n.add(D,D),D=n.add(D,D),new h(T,$,D)}add(m){l(m);const{px:w,py:b,pz:y}=this,{px:_,py:A,pz:T}=m;let $=n.ZERO,D=n.ZERO,O=n.ZERO;const j=e.a,F=n.mul(e.b,q$);let L=n.mul(w,_),B=n.mul(b,A),x=n.mul(y,T),v=n.add(w,b),S=n.add(_,A);v=n.mul(v,S),S=n.add(L,B),v=n.sub(v,S),S=n.add(w,y);let N=n.add(_,T);return S=n.mul(S,N),N=n.add(L,x),S=n.sub(S,N),N=n.add(b,y),$=n.add(A,T),N=n.mul(N,$),$=n.add(B,x),N=n.sub(N,$),O=n.mul(j,S),$=n.mul(F,x),O=n.add($,O),$=n.sub(B,O),O=n.add(B,O),D=n.mul($,O),B=n.add(L,L),B=n.add(B,L),x=n.mul(j,x),S=n.mul(F,S),B=n.add(B,x),x=n.sub(L,x),x=n.mul(j,x),S=n.add(S,x),L=n.mul(B,S),D=n.add(D,L),L=n.mul(N,S),$=n.mul(v,$),$=n.sub($,L),L=n.mul(v,B),O=n.mul(N,O),O=n.add(O,L),new h($,D,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:b}=e;qc("scalar",m,Nc,b);const y=h.ZERO;if(m===Nc)return y;if(this.is0()||m===wr)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:_,k1:A,k2neg:T,k2:$}=w.splitScalar(m),D=y,O=y,j=this;for(;A>Nc||$>Nc;)A&wr&&(D=D.add(j)),$&wr&&(O=O.add(j)),j=j.double(),A>>=wr,$>>=wr;return _&&(D=D.negate()),T&&(O=O.negate()),O=new h(n.mul(O.px,w.beta),O.py,O.pz),D.add(O)}multiply(m){const{endo:w,n:b}=e;qc("scalar",m,wr,b);let y,_;if(w){const{k1neg:A,k1:T,k2neg:$,k2:D}=w.splitScalar(m);let{p:O,f:j}=this.wNAF(T),{p:F,f:L}=this.wNAF(D);O=p.constTimeNegate(A,O),F=p.constTimeNegate($,F),F=new h(n.mul(F.px,w.beta),F.py,F.pz),y=O.add(F),_=j.add(L)}else{const{p:A,f:T}=this.wNAF(m);y=A,_=T}return h.normalizeZ([y,_])[0]}multiplyAndAddUnsafe(m,w,b){const y=h.BASE,_=(T,$)=>$===Nc||$===wr||!T.equals(y)?T.multiplyUnsafe($):T.multiply($),A=_(this,w).add(_(m,b));return A.is0()?void 0:A}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===wr)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===wr?this:w?w(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Pg("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return Pg("isCompressed",m),Tg(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=Gxe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function cIe(t){const e=EV(t);return a0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function lIe(t){const e=cIe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(x){return Zi(x,r)}function a(x){return p4(x,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=aIe({...e,toBytes(x,v,S){const N=v.toAffine(),E=n.toBytes(N.x),C=yw;return Pg("isCompressed",S),S?C(Uint8Array.from([v.hasEvenY()?2:3]),E):C(Uint8Array.from([4]),E,n.toBytes(N.y))},fromBytes(x){const v=x.length,S=x[0],N=x.subarray(1);if(v===i&&(S===2||S===3)){const E=Qd(N);if(!GE(E,wr,n.ORDER))throw new Error("Point is not on curve");const C=u(E);let P;try{P=n.sqrt(C)}catch(I){const k=I instanceof Error?": "+I.message:"";throw new Error("Point is not on curve"+k)}const M=(P&wr)===wr;return(S&1)===1!==M&&(P=n.neg(P)),{x:E,y:P}}else if(v===s&&S===4){const E=n.fromBytes(N.subarray(0,n.BYTES)),C=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:E,y:C}}else{const E=i,C=s;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+C+", got "+v)}}}),h=x=>Tg(Ng(x,e.nByteLength));function f(x){const v=r>>wr;return x>v}function p(x){return f(x)?o(-x):x}const g=(x,v,S)=>Qd(x.slice(v,S));class m{constructor(v,S,N){this.r=v,this.s=S,this.recovery=N,this.assertValidity()}static fromCompact(v){const S=e.nByteLength;return v=gs("compactSignature",v,S*2),new m(g(v,0,S),g(v,S,2*S))}static fromDER(v){const{r:S,s:N}=Sc.toSig(gs("DER",v));return new m(S,N)}assertValidity(){qc("r",this.r,wr,r),qc("s",this.s,wr,r)}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:S,s:N,recovery:E}=this,C=T(gs("msgHash",v));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const P=E===2||E===3?S+e.n:S;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=E&1?"03":"02",I=c.fromHex(M+h(P)),k=a(P),R=o(-C*k),U=o(N*k),q=c.BASE.multiplyAndAddUnsafe(I,R,U);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return kg(this.toDERHex())}toDERHex(){return Sc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return kg(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=yV(e.n);return Kxe(e.randomBytes(x),e.n)},precompute(x=8,v=c.BASE){return v._setWindowSize(x),v.multiply(BigInt(3)),v}};function b(x,v=!0){return c.fromPrivateKey(x).toRawBytes(v)}function y(x){const v=ph(x),S=typeof x=="string",N=(v||S)&&x.length;return v?N===i||N===s:S?N===2*i||N===2*s:x instanceof c}function _(x,v,S=!0){if(y(x))throw new Error("first arg must be private key");if(!y(v))throw new Error("second arg must be public key");return c.fromHex(v).multiply(l(x)).toRawBytes(S)}const A=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const v=Qd(x),S=x.length*8-e.nBitLength;return S>0?v>>BigInt(S):v},T=e.bits2int_modN||function(x){return o(A(x))},$=Ex(e.nBitLength);function D(x){return qc("num < 2^"+e.nBitLength,x,Nc,$),Ng(x,e.nByteLength)}function O(x,v,S=j){if(["recovered","canonical"].some(z=>z in S))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:E}=e;let{lowS:C,prehash:P,extraEntropy:M}=S;C==null&&(C=!0),x=gs("msgHash",x),F$(S),P&&(x=gs("prehashed msgHash",N(x)));const I=T(x),k=l(v),R=[D(k),D(I)];if(M!=null&&M!==!1){const z=M===!0?E(n.BYTES):M;R.push(gs("extraEntropy",z))}const U=yw(...R),q=I;function H(z){const K=A(z);if(!d(K))return;const G=a(K),Y=c.BASE.multiply(K).toAffine(),X=o(Y.x);if(X===Nc)return;const ie=o(G*o(q+X*k));if(ie===Nc)return;let de=(Y.x===X?0:2)|Number(Y.y&wr),Se=ie;return C&&f(ie)&&(Se=p(ie),de^=1),new m(X,Se,de)}return{seed:U,k2sig:H}}const j={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function L(x,v,S=j){const{seed:N,k2sig:E}=O(x,v,S),C=e;return fV(C.hash.outputLen,C.nByteLength,C.hmac)(N,E)}c.BASE._setWindowSize(8);function B(x,v,S,N=F){const E=x;v=gs("msgHash",v),S=gs("publicKey",S);const{lowS:C,prehash:P,format:M}=N;if(F$(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const I=typeof E=="string"||ph(E),k=!I&&!M&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!I&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let R,U;try{if(k&&(R=new m(E.r,E.s)),I){try{M!=="compact"&&(R=m.fromDER(E))}catch(ie){if(!(ie instanceof Sc.Err))throw ie}!R&&M!=="der"&&(R=m.fromCompact(E))}U=c.fromHex(S)}catch{return!1}if(!R||C&&R.hasHighS())return!1;P&&(v=e.hash(v));const{r:q,s:H}=R,z=T(v),K=a(H),G=o(z*K),Y=o(q*K),X=c.BASE.multiplyAndAddUnsafe(U,G,Y)?.toAffine();return X?o(X.x)===q:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:L,verify:B,ProjectivePoint:c,Signature:m,utils:w}}function uIe(t){return{hash:t,hmac:(e,...n)=>zE(t,e,p8e(...n)),randomBytes:o0}}function dIe(t,e){const n=r=>lIe({...t,...uIe(r)});return{...n(e),create:n}}const CV=mV(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),hIe=CV.create(BigInt("-3")),fIe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),pIe=dIe({a:hIe,b:fIe,Fp:CV,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},py),_V="base10",xi="base16",qo="base64pad",Gl="base64url",my="utf8",SV=0,Hc=1,wy=2,gIe=0,H$=1,_m=12,Cx=32;function mIe(){const t=m4.utils.randomPrivateKey(),e=m4.getPublicKey(t);return{privateKey:Gt(t,xi),publicKey:Gt(e,xi)}}function w4(){const t=o0(Cx);return Gt(t,xi)}function wIe(t,e){const n=m4.getSharedSecret(yn(t,xi),yn(e,xi)),r=Exe(py,n,void 0,void 0,Cx);return Gt(r,xi)}function Qb(t){const e=py(yn(t,xi));return Gt(e,xi)}function Ea(t){const e=py(yn(t,my));return Gt(e,xi)}function AV(t){return yn(`${t}`,_V)}function gh(t){return Number(Gt(t,_V))}function xV(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function IV(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function yIe(t){const e=AV(typeof t.type<"u"?t.type:SV);if(gh(e)===Hc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?yn(t.senderPublicKey,xi):void 0,r=typeof t.iv<"u"?yn(t.iv,xi):o0(_m),i=yn(t.symKey,xi),s=uV(i,r).encrypt(yn(t.message,my)),o=OV({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===Gl?xV(o):o}function bIe(t){const e=yn(t.symKey,xi),{sealed:n,iv:r}=bw({encoded:t.encoded,encoding:t.encoding}),i=uV(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Gt(i,my)}function vIe(t,e){const n=AV(wy),r=o0(_m),i=yn(t,my),s=OV({type:n,sealed:i,iv:r});return e===Gl?xV(s):s}function EIe(t,e){const{sealed:n}=bw({encoded:t,encoding:e});return Gt(n,my)}function OV(t){if(gh(t.type)===wy)return Gt(Na([t.type,t.sealed]),qo);if(gh(t.type)===Hc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gt(Na([t.type,t.senderPublicKey,t.iv,t.sealed]),qo)}return Gt(Na([t.type,t.iv,t.sealed]),qo)}function bw(t){const e=(t.encoding||qo)===Gl?IV(t.encoded):t.encoded,n=yn(e,qo),r=n.slice(gIe,H$),i=H$;if(gh(r)===Hc){const c=i+Cx,l=c+_m,u=n.slice(i,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(gh(r)===wy){const c=n.slice(i),l=o0(_m);return{type:r,sealed:c,iv:l}}const s=i+_m,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function CIe(t,e){const n=bw({encoded:t,encoding:e?.encoding});return PV({type:gh(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Gt(n.senderPublicKey,xi):void 0,receiverPublicKey:e?.receiverPublicKey})}function PV(t){const e=t?.type||SV;if(e===Hc){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function z$(t){return t.type===Hc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function K$(t){return t.type===wy}function _Ie(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Na([new Uint8Array([4]),e,n])}function SIe(t,e){const[n,r,i]=t.split("."),s=Buffer.from(IV(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=py(c),u=_Ie(e);if(!pIe.verify(Na([o,a]),l,u))throw new Error("Invalid signature");return hg(t).payload}const AIe="irn";function f2(t){return t?.relay||{protocol:AIe}}function rm(t){const e=LH[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function xIe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function V$(t){if(!t.includes("wc:")){const l=QK(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:IIe(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:xIe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function IIe(t){return t.startsWith("//")?t.substring(2):t}function OIe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function W$(t){const e=new URLSearchParams,n=OIe(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function J1(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var PIe=Object.defineProperty,TIe=Object.defineProperties,kIe=Object.getOwnPropertyDescriptors,G$=Object.getOwnPropertySymbols,NIe=Object.prototype.hasOwnProperty,$Ie=Object.prototype.propertyIsEnumerable,Z$=(t,e,n)=>e in t?PIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RIe=(t,e)=>{for(var n in e||(e={}))NIe.call(e,n)&&Z$(t,n,e[n]);if(G$)for(var n of G$(e))$Ie.call(e,n)&&Z$(t,n,e[n]);return t},MIe=(t,e)=>TIe(t,kIe(e));function c0(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function DIe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...c0(n.accounts))}),e}function BIe(t,e){const n=[];return Object.values(t).forEach(r=>{c0(r.accounts).includes(e)&&n.push(...r.methods)}),n}function LIe(t,e){const n=[];return Object.values(t).forEach(r=>{c0(r.accounts).includes(e)&&n.push(...r.events)}),n}function ZE(t){return t.includes(":")}function wp(t){return ZE(t)?t.split(":")[0]:t}function Y$(t){var e,n,r;const i={};if(!Ou(t))return i;for(const[s,o]of Object.entries(t)){const a=ZE(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=wp(s);i[u]=MIe(RIe({},i[u]),{chains:Da(a,(e=i[u])==null?void 0:e.chains),methods:Da(c,(n=i[u])==null?void 0:n.methods),events:Da(l,(r=i[u])==null?void 0:r.events)})}return i}function UIe(t){const e={};return t?.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function Q$(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=UIe(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=Da(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function jIe(t,e){var n,r,i,s,o,a;const c=Y$(t),l=Y$(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Da((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Da((i=c[h])==null?void 0:i.methods,(s=l[h])==null?void 0:s.methods),events:Da((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const FIe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},qIe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ve(t,e){const{message:n,code:r}=qIe[t];return{message:e?`${n} ${e}`:n,code:r}}function Wt(t,e){const{message:n,code:r}=FIe[t];return{message:e?`${n} ${e}`:n,code:r}}function Iu(t,e){return!!Array.isArray(t)}function Ou(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function qr(t){return typeof t>"u"}function Yn(t,e){return e&&qr(t)?!0:typeof t=="string"&&!!t.trim().length}function _x(t,e){return e&&qr(t)?!0:typeof t=="number"&&!isNaN(t)}function HIe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return kd(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=c0(a),d=n[o];(!kd(VK(o,d),u)||!kd(d.methods,c)||!kd(d.events,l))&&(s=!1)}),s):!1}function p2(t){return Yn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function zIe(t){if(Yn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&p2(n)}}return!1}function KIe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Yn(t,!1)){if(e(t))return!0;const n=QK(t);return e(n)}}catch{}return!1}function VIe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function WIe(t){return t?.topic}function GIe(t,e){let n=null;return Yn(t?.publicKey,!1)||(n=ve("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function J$(t){let e=!0;return Iu(t)?t.length&&(e=t.every(n=>Yn(n,!1))):e=!1,e}function ZIe(t,e,n){let r=null;return Iu(e)&&e.length?e.forEach(i=>{r||p2(i)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):p2(t)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function YIe(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=ZIe(i,VK(i,s),`${e} ${n}`);o&&(r=o)}),r}function QIe(t,e){let n=null;return Iu(t)?t.forEach(r=>{n||zIe(r)||(n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function JIe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=QIe(r?.accounts,`${e} namespace`);i&&(n=i)}),n}function XIe(t,e){let n=null;return J$(t?.methods)?J$(t?.events)||(n=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function TV(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=XIe(r,`${e}, namespace`);i&&(n=i)}),n}function eOe(t,e,n){let r=null;if(t&&Ou(t)){const i=TV(t,e);i&&(r=i);const s=YIe(t,e,n);s&&(r=s)}else r=ve("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function F_(t,e){let n=null;if(t&&Ou(t)){const r=TV(t,e);r&&(n=r);const i=JIe(t,e);i&&(n=i)}else n=ve("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function kV(t){return Yn(t.protocol,!0)}function tOe(t,e){let n=!1;return t?t&&Iu(t)&&t.length&&t.forEach(r=>{n=kV(r)}):n=!0,n}function nOe(t){return typeof t=="number"}function qi(t){return typeof t<"u"&&typeof t!==null}function rOe(t){return!(!t||typeof t!="object"||!t.code||!_x(t.code,!1)||!t.message||!Yn(t.message,!1))}function iOe(t){return!(qr(t)||!Yn(t.method,!1))}function sOe(t){return!(qr(t)||qr(t.result)&&qr(t.error)||!_x(t.id,!1)||!Yn(t.jsonrpc,!1))}function oOe(t){return!(qr(t)||!Yn(t.name,!1))}function X$(t,e){return!(!p2(e)||!DIe(t).includes(e))}function aOe(t,e,n){return Yn(n,!1)?BIe(t,e).includes(n):!1}function cOe(t,e,n){return Yn(n,!1)?LIe(t,e).includes(n):!1}function eR(t,e,n){let r=null;const i=lOe(t),s=uOe(e),o=Object.keys(i),a=Object.keys(s),c=tR(Object.keys(t)),l=tR(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),kd(o,a)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=c0(e[d].accounts);h.includes(d)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(kd(i[d].methods,s[d].methods)?kd(i[d].events,s[d].events)||(r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ve("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function lOe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function tR(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function uOe(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:c0(t[n].accounts)?.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}),e}function dOe(t,e){return _x(t,!1)&&t<=e.max&&t>=e.min}function nR(){const t=hy();return new Promise(e=>{switch(t){case As.browser:e(hOe());break;case As.reactNative:e(fOe());break;case As.node:e(pOe());break;default:e(!0)}})}function hOe(){return s0()&&navigator?.onLine}async function fOe(){return Hu()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function pOe(){return!0}function gOe(t){switch(hy()){case As.browser:mOe(t);break;case As.reactNative:wOe(t);break}}function mOe(t){!Hu()&&s0()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function wOe(t){Hu()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function yOe(){var t;return s0()&&Is()?((t=Is())==null?void 0:t.visibilityState)==="visible":!0}const q_={};class B0{static get(e){return q_[e]}static set(e,n){q_[e]=n}static delete(e){delete q_[e]}}var bOe={};const NV="wc",$V=2,y4="core",Fa=`${NV}@2:${y4}:`,vOe={logger:"error"},EOe={database:":memory:"},COe="crypto",rR="client_ed25519_seed",_Oe=J.ONE_DAY,SOe="keychain",AOe="0.3",xOe="messages",IOe="0.3",iR=J.SIX_HOURS,OOe="publisher",RV="irn",POe="error",MV="wss://relay.walletconnect.org",TOe="relayer",_r={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},kOe="_subscription",Zs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},NOe=.1,b4="2.21.0",gn={link_mode:"link_mode",relay:"relay"},Jb={inbound:"inbound",outbound:"outbound"},$Oe="0.3",ROe="WALLETCONNECT_CLIENT_ID",sR="WALLETCONNECT_LINK_MODE_APPS",ls={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},MOe="subscription",DOe="0.3",BOe="pairing",LOe="0.3",L0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},bd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ao={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},UOe="history",jOe="0.3",FOe="expirer",to={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},qOe="0.3",HOe="verify-api",zOe="https://verify.walletconnect.com",DV="https://verify.walletconnect.org",Sm=DV,KOe=`${Sm}/v3`,VOe=[zOe,DV],WOe="echo",GOe="https://echo.walletconnect.com",ga={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},pc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},xo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},td={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},nd={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},U0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ZOe=.1,YOe="event-client",QOe=86400,JOe="https://pulse.walletconnect.org/batch";function XOe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var y=(b-w)*u+1>>>0,_=new Uint8Array(y);w!==b;){for(var A=p[w],T=0,$=y-1;(A!==0||T<m)&&$!==-1;$--,T++)A+=256*_[$]>>>0,_[$]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,w++}for(var D=y-m;D!==y&&_[D]===0;)D++;for(var O=c.repeat(g);D<y;++D)O+=t.charAt(_[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,y=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var A=0,T=b-1;(_!==0||A<w)&&T!==-1;T--,A++)_+=a*y[T]>>>0,y[T]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");w=A,g++}if(p[g]!==" "){for(var $=b-w;$!==b&&y[$]===0;)$++;for(var D=new Uint8Array(m+(b-$)),O=m;$!==b;)D[O++]=y[$++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var ePe=XOe,tPe=ePe;const BV=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nPe=t=>new TextEncoder().encode(t),rPe=t=>new TextDecoder().decode(t);class iPe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sPe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return LV(this,e)}}class oPe{constructor(e){this.decoders=e}or(e){return LV(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const LV=(t,e)=>new oPe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class aPe{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new iPe(e,n,r),this.decoder=new sPe(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const YE=({name:t,prefix:e,encode:n,decode:r})=>new aPe(t,e,n,r),yy=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=tPe(n,e);return YE({prefix:t,name:e,encode:r,decode:s=>BV(i(s))})},cPe=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lPe=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Zr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>YE({prefix:e,name:t,encode(i){return lPe(i,r,n)},decode(i){return cPe(i,r,n,t)}}),uPe=YE({prefix:"\0",name:"identity",encode:t=>rPe(t),decode:t=>nPe(t)});var dPe=Object.freeze({__proto__:null,identity:uPe});const hPe=Zr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fPe=Object.freeze({__proto__:null,base2:hPe});const pPe=Zr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gPe=Object.freeze({__proto__:null,base8:pPe});const mPe=yy({prefix:"9",name:"base10",alphabet:"0123456789"});var wPe=Object.freeze({__proto__:null,base10:mPe});const yPe=Zr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bPe=Zr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vPe=Object.freeze({__proto__:null,base16:yPe,base16upper:bPe});const EPe=Zr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CPe=Zr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_Pe=Zr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),SPe=Zr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),APe=Zr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xPe=Zr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),IPe=Zr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),OPe=Zr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PPe=Zr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var TPe=Object.freeze({__proto__:null,base32:EPe,base32upper:CPe,base32pad:_Pe,base32padupper:SPe,base32hex:APe,base32hexupper:xPe,base32hexpad:IPe,base32hexpadupper:OPe,base32z:PPe});const kPe=yy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NPe=yy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $Pe=Object.freeze({__proto__:null,base36:kPe,base36upper:NPe});const RPe=yy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MPe=yy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var DPe=Object.freeze({__proto__:null,base58btc:RPe,base58flickr:MPe});const BPe=Zr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),LPe=Zr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),UPe=Zr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jPe=Zr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var FPe=Object.freeze({__proto__:null,base64:BPe,base64pad:LPe,base64url:UPe,base64urlpad:jPe});const UV=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),qPe=UV.reduce((t,e,n)=>(t[n]=e,t),[]),HPe=UV.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function zPe(t){return t.reduce((e,n)=>(e+=qPe[n],e),"")}function KPe(t){const e=[];for(const n of t){const r=HPe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const VPe=YE({prefix:"🚀",name:"base256emoji",encode:zPe,decode:KPe});var WPe=Object.freeze({__proto__:null,base256emoji:VPe}),GPe=jV,oR=128,ZPe=-128,YPe=Math.pow(2,31);function jV(t,e,n){e=e||[],n=n||0;for(var r=n;t>=YPe;)e[n++]=t&255|oR,t/=128;for(;t&ZPe;)e[n++]=t&255|oR,t>>>=7;return e[n]=t|0,jV.bytes=n-r+1,e}var QPe=v4,JPe=128,aR=127;function v4(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw v4.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&aR)<<i:(o&aR)*Math.pow(2,i),i+=7}while(o>=JPe);return v4.bytes=s-r,n}var XPe=Math.pow(2,7),e9e=Math.pow(2,14),t9e=Math.pow(2,21),n9e=Math.pow(2,28),r9e=Math.pow(2,35),i9e=Math.pow(2,42),s9e=Math.pow(2,49),o9e=Math.pow(2,56),a9e=Math.pow(2,63),c9e=function(t){return t<XPe?1:t<e9e?2:t<t9e?3:t<n9e?4:t<r9e?5:t<i9e?6:t<s9e?7:t<o9e?8:t<a9e?9:10},l9e={encode:GPe,decode:QPe,encodingLength:c9e},FV=l9e;const cR=(t,e,n=0)=>(FV.encode(t,e,n),e),lR=t=>FV.encodingLength(t),E4=(t,e)=>{const n=e.byteLength,r=lR(t),i=r+lR(n),s=new Uint8Array(i+n);return cR(t,s,0),cR(n,s,r),s.set(e,i),new u9e(t,n,e,s)};class u9e{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const qV=({name:t,code:e,encode:n})=>new d9e(t,e,n);class d9e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?E4(this.code,n):n.then(r=>E4(this.code,r))}else throw Error("Unknown type, must be binary type")}}const HV=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),h9e=qV({name:"sha2-256",code:18,encode:HV("SHA-256")}),f9e=qV({name:"sha2-512",code:19,encode:HV("SHA-512")});var p9e=Object.freeze({__proto__:null,sha256:h9e,sha512:f9e});const zV=0,g9e="identity",KV=BV,m9e=t=>E4(zV,KV(t)),w9e={code:zV,name:g9e,encode:KV,digest:m9e};var y9e=Object.freeze({__proto__:null,identity:w9e});new TextEncoder,new TextDecoder;const uR={...dPe,...fPe,...gPe,...wPe,...vPe,...TPe,...$Pe,...DPe,...FPe,...WPe};({...p9e,...y9e});function b9e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function VV(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const dR=VV("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),H_=VV("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=b9e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),v9e={utf8:dR,"utf-8":dR,hex:uR.base16,latin1:H_,ascii:H_,binary:H_,...uR};function E9e(t,e="utf8"){const n=v9e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var C9e=Object.defineProperty,_9e=(t,e,n)=>e in t?C9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ua=(t,e,n)=>_9e(t,typeof e!="symbol"?e+"":e,n);class S9e{constructor(e,n){this.core=e,this.logger=n,ua(this,"keychain",new Map),ua(this,"name",SOe),ua(this,"version",AOe),ua(this,"initialized",!1),ua(this,"storagePrefix",Fa),ua(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ua(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ua(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),ua(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=ve("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),ua(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,o4(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?a4(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var A9e=Object.defineProperty,x9e=(t,e,n)=>e in t?A9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dr=(t,e,n)=>x9e(t,typeof e!="symbol"?e+"":e,n);class I9e{constructor(e,n,r){this.core=e,this.logger=n,Dr(this,"name",COe),Dr(this,"keychain"),Dr(this,"randomSessionIdentifier",w4()),Dr(this,"initialized",!1),Dr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Dr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Dr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Xv(i);return Z8(s.publicKey)}),Dr(this,"generateKeyPair",()=>{this.isInitialized();const i=mIe();return this.setPrivateKey(i.publicKey,i.privateKey)}),Dr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Xv(s),a=this.randomSessionIdentifier;return await NH(a,i,_Oe,o)}),Dr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=wIe(a,s);return this.setSymKey(c,o)}),Dr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Qb(i);return await this.keychain.set(o,i),o}),Dr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Dr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Dr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=PV(o),c=ho(s);if(K$(a))return vIe(c,o?.encoding);if(z$(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return yIe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),Dr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=CIe(s,o);if(K$(a)){const c=EIe(s,o?.encoding);return Go(c)}if(z$(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=bIe({symKey:c,encoded:s,encoding:o?.encoding});return Go(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Dr(this,"getPayloadType",(i,s=qo)=>{const o=bw({encoded:i,encoding:s});return gh(o.type)}),Dr(this,"getPayloadSenderPublicKey",(i,s=qo)=>{const o=bw({encoded:i,encoding:s});return o.senderPublicKey?Gt(o.senderPublicKey,xi):void 0}),this.core=e,this.logger=jt(n,this.name),this.keychain=r||new S9e(this.core,this.logger)}get context(){return tn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(rR)}catch{e=w4(),await this.keychain.set(rR,e)}return E9e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var O9e=Object.defineProperty,P9e=Object.defineProperties,T9e=Object.getOwnPropertyDescriptors,hR=Object.getOwnPropertySymbols,k9e=Object.prototype.hasOwnProperty,N9e=Object.prototype.propertyIsEnumerable,C4=(t,e,n)=>e in t?O9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$9e=(t,e)=>{for(var n in e||(e={}))k9e.call(e,n)&&C4(t,n,e[n]);if(hR)for(var n of hR(e))N9e.call(e,n)&&C4(t,n,e[n]);return t},R9e=(t,e)=>P9e(t,T9e(e)),as=(t,e,n)=>C4(t,typeof e!="symbol"?e+"":e,n);class M9e extends a4e{constructor(e,n){super(e,n),this.logger=e,this.core=n,as(this,"messages",new Map),as(this,"messagesWithoutClientAck",new Map),as(this,"name",xOe),as(this,"version",IOe),as(this,"initialized",!1),as(this,"storagePrefix",Fa),as(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),as(this,"set",async(r,i,s)=>{this.isInitialized();const o=Ea(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===Jb.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,R9e($9e({},c),{[o]:i}))}return await this.persist(),o}),as(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),as(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),as(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=Ea(i);return typeof s[o]<"u"}),as(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=Ea(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),as(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=jt(e,this.name),this.core=n}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,o4(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,o4(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?a4(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?a4(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var D9e=Object.defineProperty,B9e=Object.defineProperties,L9e=Object.getOwnPropertyDescriptors,fR=Object.getOwnPropertySymbols,U9e=Object.prototype.hasOwnProperty,j9e=Object.prototype.propertyIsEnumerable,_4=(t,e,n)=>e in t?D9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X1=(t,e)=>{for(var n in e||(e={}))U9e.call(e,n)&&_4(t,n,e[n]);if(fR)for(var n of fR(e))j9e.call(e,n)&&_4(t,n,e[n]);return t},z_=(t,e)=>B9e(t,L9e(e)),Io=(t,e,n)=>_4(t,typeof e!="symbol"?e+"":e,n);class F9e extends c4e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Io(this,"events",new Kn.EventEmitter),Io(this,"name",OOe),Io(this,"queue",new Map),Io(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Io(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Io(this,"needsTransportRestart",!1),Io(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=s?.ttl||iR,c=f2(s),l=s?.prompt||!1,u=s?.tag||0,d=s?.id||Ss().toString(),h={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(_r.publish,m),g(h))};this.relayer.events.on(_r.publish,m);const w=du(new Promise((b,y)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(b).catch(_=>{this.logger.warn(_,_?.message),y(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(_r.publish,m)}catch(b){this.queue.set(d,z_(X1({},h),{attempt:1})),this.logger.warn(b,b?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await du(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Io(this,"on",(r,i)=>{this.events.on(r,i)}),Io(this,"once",(r,i)=>{this.events.once(r,i)}),Io(this,"off",(r,i)=>{this.events.off(r,i)}),Io(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=jt(n,this.name),this.registerEventListeners()}get context(){return tn(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:c=iR,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:rm(f2().protocol).publish,params:X1({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};qr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),qr((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(_r.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,z_(X1({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(z_(X1({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on($s.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_r.connection_stalled);return}this.checkQueue()}),this.relayer.on(_r.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var q9e=Object.defineProperty,H9e=(t,e,n)=>e in t?q9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Of=(t,e,n)=>H9e(t,typeof e!="symbol"?e+"":e,n);class z9e{constructor(){Of(this,"map",new Map),Of(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Of(this,"get",e=>this.map.get(e)||[]),Of(this,"exists",(e,n)=>this.get(e).includes(n)),Of(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Of(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var K9e=Object.defineProperty,V9e=Object.defineProperties,W9e=Object.getOwnPropertyDescriptors,pR=Object.getOwnPropertySymbols,G9e=Object.prototype.hasOwnProperty,Z9e=Object.prototype.propertyIsEnumerable,S4=(t,e,n)=>e in t?K9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j0=(t,e)=>{for(var n in e||(e={}))G9e.call(e,n)&&S4(t,n,e[n]);if(pR)for(var n of pR(e))Z9e.call(e,n)&&S4(t,n,e[n]);return t},K_=(t,e)=>V9e(t,W9e(e)),Jt=(t,e,n)=>S4(t,typeof e!="symbol"?e+"":e,n);class Y9e extends d4e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Jt(this,"subscriptions",new Map),Jt(this,"topicMap",new z9e),Jt(this,"events",new Kn.EventEmitter),Jt(this,"name",MOe),Jt(this,"version",DOe),Jt(this,"pending",new Map),Jt(this,"cached",[]),Jt(this,"initialized",!1),Jt(this,"storagePrefix",Fa),Jt(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),Jt(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Jt(this,"clientId"),Jt(this,"batchSubscribeTopicsLimit",500),Jt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Jt(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=f2(i),o={topic:r,relay:s,transportType:i?.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),Jt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),Jt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),Jt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),Jt(this,"on",(r,i)=>{this.events.on(r,i)}),Jt(this,"once",(r,i)=>{this.events.once(r,i)}),Jt(this,"off",(r,i)=>{this.events.off(r,i)}),Jt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),Jt(this,"start",async()=>{await this.onConnect()}),Jt(this,"stop",async()=>{await this.onDisconnect()}),Jt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Jt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),Jt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on($s.pulse,async()=>{await this.checkPending()}),this.events.on(ls.created,async r=>{const i=ls.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(ls.deleted,async r=>{const i=ls.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=jt(n,this.name),this.clientId=""}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=f2(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||r?.transportType===gn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:rm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(r?.transportType===gn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(ls.created,d),u(h.id))};this.events.on(ls.created,d);try{const h=await du(new Promise((f,p)=>{this.relayer.request(s).catch(g=>{this.logger.warn(g,g?.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ls.created,d),u(h)}catch{}}),l=await du(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_r.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:rm(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await du(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_r.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:rm(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await du(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_r.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:rm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,K_(j0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,j0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,j0({},n)),this.topicMap.set(n.topic,e),this.events.emit(ls.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ls.deleted,K_(j0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ls.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ls.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>K_(j0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await r8e(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ea(e+await this.getClientId())}}var Q9e=Object.defineProperty,gR=Object.getOwnPropertySymbols,J9e=Object.prototype.hasOwnProperty,X9e=Object.prototype.propertyIsEnumerable,A4=(t,e,n)=>e in t?Q9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mR=(t,e)=>{for(var n in e||(e={}))J9e.call(e,n)&&A4(t,n,e[n]);if(gR)for(var n of gR(e))X9e.call(e,n)&&A4(t,n,e[n]);return t},Ot=(t,e,n)=>A4(t,typeof e!="symbol"?e+"":e,n);class e7e extends l4e{constructor(e){super(e),Ot(this,"protocol","wc"),Ot(this,"version",2),Ot(this,"core"),Ot(this,"logger"),Ot(this,"events",new Kn.EventEmitter),Ot(this,"provider"),Ot(this,"messages"),Ot(this,"subscriber"),Ot(this,"publisher"),Ot(this,"name",TOe),Ot(this,"transportExplicitlyClosed",!1),Ot(this,"initialized",!1),Ot(this,"connectionAttemptInProgress",!1),Ot(this,"relayUrl"),Ot(this,"projectId"),Ot(this,"packageName"),Ot(this,"bundleId"),Ot(this,"hasExperiencedNetworkDisruption",!1),Ot(this,"pingTimeout"),Ot(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Ot(this,"reconnectTimeout"),Ot(this,"connectPromise"),Ot(this,"reconnectInProgress",!1),Ot(this,"requestsInFlight",[]),Ot(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ot(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||Ss().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Ot(this,"resetPingTimeout",()=>{d2()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Ot(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ot(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(_r.connect)}),Ot(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ot(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(_r.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ot(this,"registerProviderListeners",()=>{this.provider.on(Zs.payload,this.onPayloadHandler),this.provider.on(Zs.connect,this.onConnectHandler),this.provider.on(Zs.disconnect,this.onDisconnectHandler),this.provider.on(Zs.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?jt(e.logger,this.name):Fu(el({level:e.logger||POe})),this.messages=new M9e(this.logger,e.core),this.subscriber=new Y9e(this,this.logger),this.publisher=new F9e(this,this.logger),this.relayUrl=e?.relayUrl||MV,this.projectId=e.projectId,F6e()?this.packageName=p$():q6e()&&(this.bundleId=p$()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return tn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:gn.relay},Jb.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ls.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ls.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,mR({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await du(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await nR())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=er(J.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(_r.message,e),await this.recordMessageEvent(e,Jb.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zs.disconnect,s),await du(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Zs.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zs.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Zs.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,J.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(d2())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new En(new Bz(W6e({sdkVersion:b4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),i0(e)){if(!e.method.endsWith(kOe))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:gn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(mR({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Dh(e)&&this.events.emit(_r.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Jb.inbound),this.events.emit(_r.message,e))}async acknowledgePayload(e){const n=qu(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Zs.payload,this.onPayloadHandler),this.provider.off(Zs.connect,this.onConnectHandler),this.provider.off(Zs.disconnect,this.onDisconnectHandler),this.provider.off(Zs.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await nR();gOe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on($s.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&yOe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_r.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(NOe)))))}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function t7e(){}function wR(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function yR(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function bR(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const n7e="[object RegExp]",r7e="[object String]",i7e="[object Number]",s7e="[object Boolean]",vR="[object Arguments]",o7e="[object Symbol]",a7e="[object Date]",c7e="[object Map]",l7e="[object Set]",u7e="[object Array]",d7e="[object Function]",h7e="[object ArrayBuffer]",V_="[object Object]",f7e="[object Error]",p7e="[object DataView]",g7e="[object Uint8Array]",m7e="[object Uint8ClampedArray]",w7e="[object Uint16Array]",y7e="[object Uint32Array]",b7e="[object BigUint64Array]",v7e="[object Int8Array]",E7e="[object Int16Array]",C7e="[object Int32Array]",_7e="[object BigInt64Array]",S7e="[object Float32Array]",A7e="[object Float64Array]";function x7e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function I7e(t,e,n){return im(t,e,void 0,void 0,void 0,void 0,n)}function im(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Am(t,e,s,o)}return Am(t,e,s,o)}function Am(t,e,n,r){if(Object.is(t,e))return!0;let i=bR(t),s=bR(e);if(i===vR&&(i=V_),s===vR&&(s=V_),i!==s)return!1;switch(i){case r7e:return t.toString()===e.toString();case i7e:{const c=t.valueOf(),l=e.valueOf();return x7e(c,l)}case s7e:case a7e:case o7e:return Object.is(t.valueOf(),e.valueOf());case n7e:return t.source===e.source&&t.flags===e.flags;case d7e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case c7e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!im(l,e.get(c),c,t,e,n,r))return!1;return!0}case l7e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>im(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case u7e:case g7e:case m7e:case w7e:case y7e:case b7e:case v7e:case E7e:case C7e:case _7e:case S7e:case A7e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!im(t[c],e[c],c,t,e,n,r))return!1;return!0}case h7e:return t.byteLength!==e.byteLength?!1:Am(new Uint8Array(t),new Uint8Array(e),n,r);case p7e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Am(new Uint8Array(t),new Uint8Array(e),n,r);case f7e:return t.name===e.name&&t.message===e.message;case V_:{if(!(Am(t.constructor,e.constructor,n,r)||wR(t)&&wR(e)))return!1;const c=[...Object.keys(t),...yR(t)],l=[...Object.keys(e),...yR(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!im(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function O7e(t,e){return I7e(t,e,t7e)}var P7e=Object.defineProperty,ER=Object.getOwnPropertySymbols,T7e=Object.prototype.hasOwnProperty,k7e=Object.prototype.propertyIsEnumerable,x4=(t,e,n)=>e in t?P7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CR=(t,e)=>{for(var n in e||(e={}))T7e.call(e,n)&&x4(t,n,e[n]);if(ER)for(var n of ER(e))k7e.call(e,n)&&x4(t,n,e[n]);return t},Bi=(t,e,n)=>x4(t,typeof e!="symbol"?e+"":e,n);class qh extends u4e{constructor(e,n,r,i=Fa,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,Bi(this,"map",new Map),Bi(this,"version",$Oe),Bi(this,"cached",[]),Bi(this,"initialized",!1),Bi(this,"getKey"),Bi(this,"storagePrefix",Fa),Bi(this,"recentlyDeleted",[]),Bi(this,"recentlyDeletedLimit",200),Bi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!qr(o)?this.map.set(this.getKey(o),o):VIe(o)?this.map.set(o.id,o):WIe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Bi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Bi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Bi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>O7e(a[c],o[c]))):this.values)),Bi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=CR(CR({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Bi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=jt(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=ve("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var N7e=Object.defineProperty,$7e=(t,e,n)=>e in t?N7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e,n)=>$7e(t,typeof e!="symbol"?e+"":e,n);class R7e{constructor(e,n){this.core=e,this.logger=n,ft(this,"name",BOe),ft(this,"version",LOe),ft(this,"events",new Vg),ft(this,"pairings"),ft(this,"initialized",!1),ft(this,"storagePrefix",Fa),ft(this,"ignoredPayloadTypes",[Hc]),ft(this,"registeredMethods",[]),ft(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ft(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ft(this,"create",async r=>{this.isInitialized();const i=w4(),s=await this.core.crypto.setSymKey(i),o=er(J.FIVE_MINUTES),a={protocol:RV},c={topic:s,expiry:o,relay:a,active:!1,methods:r?.methods},l=W$({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(bd.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r?.transportType}),{topic:s,uri:l}}),ft(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[ga.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=V$(r.uri);i.props.properties.topic=s,i.addTrace(ga.pairing_uri_validation_success),i.addTrace(ga.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(ga.existing_pairing),u.active)throw i.setError(pc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(ga.pairing_not_expired)}const d=c||er(J.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(ga.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(bd.create,h),i.addTrace(ga.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(ga.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(pc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(pc.subscribe_pairing_topic_failure),f}return i.addTrace(ga.subscribe_pairing_topic_success),h}),ft(this,"activate",async({topic:r})=>{this.isInitialized();const i=er(J.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),ft(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ud();this.events.once(Rt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),ft(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),ft(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),ft(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ft(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(i))}),ft(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return W$({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),ft(this,"sendRequest",async(r,i,s)=>{const o=Ci(i,s),a=await this.core.crypto.encode(r,o),c=L0[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),ft(this,"sendResult",async(r,i,s)=>{const o=qu(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=L0[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ft(this,"sendError",async(r,i,s)=>{const o=r0(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=L0[c]?L0[c].res:L0.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ft(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),ft(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>ql(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),ft(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),ft(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),ft(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(bd.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ft(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{nr(i)?this.events.emit(Rt("pairing_ping",s),{}):On(i)&&this.events.emit(Rt("pairing_ping",s),{error:i.error})},500)}),ft(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(bd.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ft(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Wt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),ft(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",r))}),ft(this,"isValidPair",(r,i)=>{var s;if(!qi(r)){const{message:a}=ve("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(pc.malformed_pairing_uri),new Error(a)}if(!KIe(r.uri)){const{message:a}=ve("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(pc.malformed_pairing_uri),new Error(a)}const o=V$(r?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=ve("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(pc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ve("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(pc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(pc.pairing_expired);const{message:a}=ve("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ft(this,"isValidPing",async r=>{if(!qi(r)){const{message:s}=ve("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ft(this,"isValidDisconnect",async r=>{if(!qi(r)){const{message:s}=ve("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ft(this,"isValidPairingTopic",async r=>{if(!Yn(r,!1)){const{message:i}=ve("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=ve("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(ql(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=ve("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=jt(n,this.name),this.pairings=new qh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return tn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_r.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==gn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);i0(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Dh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(to.expired,async e=>{const{topic:n}=YK(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(bd.expire,{topic:n}))})}}var M7e=Object.defineProperty,D7e=(t,e,n)=>e in t?M7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Br=(t,e,n)=>D7e(t,typeof e!="symbol"?e+"":e,n);class B7e extends o4e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Br(this,"records",new Map),Br(this,"events",new Kn.EventEmitter),Br(this,"name",UOe),Br(this,"version",jOe),Br(this,"cached",[]),Br(this,"initialized",!1),Br(this,"storagePrefix",Fa),Br(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Br(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:er(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Ao.created,o)}),Br(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=On(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(Ao.updated,i))}),Br(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Br(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Ao.deleted,s)}}),this.persist()}),Br(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Br(this,"on",(r,i)=>{this.events.on(r,i)}),Br(this,"once",(r,i)=>{this.events.once(r,i)}),Br(this,"off",(r,i)=>{this.events.off(r,i)}),Br(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ci(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ao.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ao.created,e=>{const n=Ao.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ao.updated,e=>{const n=Ao.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Ao.deleted,e=>{const n=Ao.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on($s.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{J.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Ao.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var L7e=Object.defineProperty,U7e=(t,e,n)=>e in t?L7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ti=(t,e,n)=>U7e(t,typeof e!="symbol"?e+"":e,n);class j7e extends h4e{constructor(e,n){super(e,n),this.core=e,this.logger=n,ti(this,"expirations",new Map),ti(this,"events",new Kn.EventEmitter),ti(this,"name",FOe),ti(this,"version",qOe),ti(this,"cached",[]),ti(this,"initialized",!1),ti(this,"storagePrefix",Fa),ti(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ti(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),ti(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(to.created,{target:s,expiration:o})}),ti(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),ti(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(to.deleted,{target:i,expiration:s})}}),ti(this,"on",(r,i)=>{this.events.on(r,i)}),ti(this,"once",(r,i)=>{this.events.once(r,i)}),ti(this,"off",(r,i)=>{this.events.off(r,i)}),ti(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=jt(n,this.name)}get context(){return tn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return G6e(e);if(typeof e=="number")return Z6e(e);const{message:n}=ve("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(to.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;J.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(to.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on($s.pulse,()=>this.checkExpirations()),this.events.on(to.created,e=>{const n=to.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(to.expired,e=>{const n=to.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(to.deleted,e=>{const n=to.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}}var F7e=Object.defineProperty,q7e=(t,e,n)=>e in t?F7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wn=(t,e,n)=>q7e(t,typeof e!="symbol"?e+"":e,n);class H7e extends f4e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Wn(this,"name",HOe),Wn(this,"abortController"),Wn(this,"isDevEnv"),Wn(this,"verifyUrlV3",KOe),Wn(this,"storagePrefix",Fa),Wn(this,"version",$V),Wn(this,"publicKey"),Wn(this,"fetchPromise"),Wn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Wn(this,"register",async i=>{if(!s0()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Is(),u=this.startAbortTimer(J.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const b=JSON.parse(w.data);if(b.type==="verify_attestation"){if(hg(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Wn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(hg(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),Wn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Wn(this,"getVerifyUrl",i=>{let s=i||Sm;return VOe.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Sm}`),s=Sm),s}),Wn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(J.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Wn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Wn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Wn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Wn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Wn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Wn(this,"validateAttestation",(i,s)=>{const o=SIe(i,s.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=jt(n,this.name),this.abortController=new AbortController,this.isDevEnv=mx(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return tn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var z7e=Object.defineProperty,K7e=(t,e,n)=>e in t?z7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_R=(t,e,n)=>K7e(t,typeof e!="symbol"?e+"":e,n);class V7e extends p4e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,_R(this,"context",WOe),_R(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${GOe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=jt(n,this.context)}}var W7e=Object.defineProperty,SR=Object.getOwnPropertySymbols,G7e=Object.prototype.hasOwnProperty,Z7e=Object.prototype.propertyIsEnumerable,I4=(t,e,n)=>e in t?W7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F0=(t,e)=>{for(var n in e||(e={}))G7e.call(e,n)&&I4(t,n,e[n]);if(SR)for(var n of SR(e))Z7e.call(e,n)&&I4(t,n,e[n]);return t},cr=(t,e,n)=>I4(t,typeof e!="symbol"?e+"":e,n);class Y7e extends g4e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,cr(this,"context",YOe),cr(this,"storagePrefix",Fa),cr(this,"storageVersion",ZOe),cr(this,"events",new Map),cr(this,"shouldPersist",!1),cr(this,"init",async()=>{if(!mx())try{const i={eventId:m$(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:GK(this.core.relayer.protocol,this.core.relayer.version,b4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),cr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=m$(),u=this.core.projectId||"",d=Date.now(),h=F0({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),cr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return F0(F0({},a),this.setMethods(a.eventId))}),cr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),cr(this,"setEventListeners",()=>{this.core.heartbeat.on($s.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(i.timestamp)>QOe&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),cr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),cr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),cr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),cr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),cr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,F0(F0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),cr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),cr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${JOe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${b4}${s}`,{method:"POST",body:JSON.stringify(i)})}),cr(this,"getAppDomain",()=>WK().url),this.logger=jt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Q7e=Object.defineProperty,AR=Object.getOwnPropertySymbols,J7e=Object.prototype.hasOwnProperty,X7e=Object.prototype.propertyIsEnumerable,O4=(t,e,n)=>e in t?Q7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xR=(t,e)=>{for(var n in e||(e={}))J7e.call(e,n)&&O4(t,n,e[n]);if(AR)for(var n of AR(e))X7e.call(e,n)&&O4(t,n,e[n]);return t},sn=(t,e,n)=>O4(t,typeof e!="symbol"?e+"":e,n);let eTe=class WV extends n4e{constructor(e){var n;super(e),sn(this,"protocol",NV),sn(this,"version",$V),sn(this,"name",y4),sn(this,"relayUrl"),sn(this,"projectId"),sn(this,"customStoragePrefix"),sn(this,"events",new Kn.EventEmitter),sn(this,"logger"),sn(this,"heartbeat"),sn(this,"relayer"),sn(this,"crypto"),sn(this,"storage"),sn(this,"history"),sn(this,"expirer"),sn(this,"pairing"),sn(this,"verify"),sn(this,"echoClient"),sn(this,"linkModeSupportedApps"),sn(this,"eventClient"),sn(this,"initialized",!1),sn(this,"logChunkController"),sn(this,"on",(a,c)=>this.events.on(a,c)),sn(this,"once",(a,c)=>this.events.once(a,c)),sn(this,"off",(a,c)=>this.events.off(a,c)),sn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),sn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:gn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||MV,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=el({level:typeof e?.logger=="string"&&e.logger?e.logger:vOe.logger,name:y4}),{logger:s,chunkLoggerController:o}=sx({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=jt(s,this.name),this.heartbeat=new Az,this.crypto=new I9e(this,this.logger,e?.keychain),this.history=new B7e(this,this.logger),this.expirer=new j7e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new XAe(xR(xR({},EOe),e?.storageOptions)),this.relayer=new e7e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new R7e(this,this.logger),this.verify=new H7e(this,this.logger,this.storage),this.echoClient=new V7e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Y7e(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new WV(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(ROe,r),n}get context(){return tn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(sR,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(sR)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&bOe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const tTe=eTe,GV="wc",ZV=2,YV="client",Sx=`${GV}@${ZV}:${YV}:`,W_={name:YV,logger:"error"},IR="WALLETCONNECT_DEEPLINK_CHOICE",nTe="proposal",OR="Proposal expired",rTe="session",Pf=J.SEVEN_DAYS,iTe="engine",lr={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},G_={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},da={idle:"IDLE",active:"ACTIVE"},PR={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},sTe="request",oTe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],aTe="wc",cTe="auth",lTe="authKeys",uTe="pairingTopics",dTe="requests",QE=`${aTe}@${1.5}:${cTe}:`,Xb=`${QE}:PUB_KEY`;var hTe=Object.defineProperty,fTe=Object.defineProperties,pTe=Object.getOwnPropertyDescriptors,TR=Object.getOwnPropertySymbols,gTe=Object.prototype.hasOwnProperty,mTe=Object.prototype.propertyIsEnumerable,P4=(t,e,n)=>e in t?hTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xt=(t,e)=>{for(var n in e||(e={}))gTe.call(e,n)&&P4(t,n,e[n]);if(TR)for(var n of TR(e))mTe.call(e,n)&&P4(t,n,e[n]);return t},di=(t,e)=>fTe(t,pTe(e)),fe=(t,e,n)=>P4(t,typeof e!="symbol"?e+"":e,n);class wTe extends b4e{constructor(e){super(e),fe(this,"name",iTe),fe(this,"events",new Vg),fe(this,"initialized",!1),fe(this,"requestQueue",{state:da.idle,queue:[]}),fe(this,"sessionRequestQueue",{state:da.idle,queue:[]}),fe(this,"requestQueueDelay",J.ONE_SECOND),fe(this,"expectedPairingMethodMap",new Map),fe(this,"recentlyDeletedMap",new Map),fe(this,"recentlyDeletedLimit",200),fe(this,"relayMessageCache",[]),fe(this,"pendingSessions",new Map),fe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(lr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),fe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=di(Xt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=jIe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:$}=await this.client.core.pairing.create();u=T,d=$}if(!u){const{message:T}=ve("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=lr.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,g=er(p),m=di(Xt(Xt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:RV}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:vr()}),w=Rt("session_connect",m.id),{reject:b,resolve:y,done:_}=ud(p,OR),A=({id:T})=>{T===m.id&&(this.client.events.off("proposal_expire",A),this.pendingSessions.delete(m.id),this.events.emit(w,{error:{message:OR,code:0}}))};return this.client.events.on("proposal_expire",A),this.events.once(w,({error:T,session:$})=>{this.client.events.off("proposal_expire",A),T?b(T):$&&y($)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:_}}),fe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),fe(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[xo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(O){throw o.setError(td.no_internet_connection),O}try{await this.isValidProposalId(n?.id)}catch(O){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(td.proposal_not_found),O}try{await this.isValidApprove(n)}catch(O){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(td.session_approve_namespace_validation_failure),O}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:w}=f;let b=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});b||(b=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:xo.session_approve_started,properties:{topic:p,trace:[xo.session_approve_started,xo.session_namespaces_validation_success]}}));const y=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,A=await this.client.core.crypto.generateSharedKey(y,_),T=Xt(Xt(Xt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:y,metadata:this.client.metadata},expiry:er(Pf)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),$=gn.relay;b.addTrace(xo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:$})}catch(O){throw b.setError(td.subscribe_session_topic_failure),O}b.addTrace(xo.subscribe_session_topic_success);const D=di(Xt({},T),{topic:A,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:y,transportType:gn.relay});await this.client.session.set(A,D),b.addTrace(xo.store_session);try{b.addTrace(xo.publishing_session_settle),await this.sendRequest({topic:A,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(O=>{throw b?.setError(td.session_settle_publish_failure),O}),b.addTrace(xo.session_settle_publish_success),b.addTrace(xo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(O=>{throw b?.setError(td.session_approve_publish_failure),O}),b.addTrace(xo.session_approve_publish_success)}catch(O){throw this.client.logger.error(O),this.client.session.delete(A,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(A),O}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Wt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(A,er(Pf)),{topic:A,acknowledged:()=>Promise.resolve(this.client.session.get(A))}}),fe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&(await this.sendError({id:r,topic:s,error:i,rpcOpts:lr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Wt("USER_DISCONNECTED")))}),fe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=ud(),c=vr(),l=Ss().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Rt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),fe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=vr(),{done:s,resolve:o,reject:a}=ud();return this.events.once(Rt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,er(Pf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),fe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:i,topic:s,expiry:o=lr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);a?.transportType===gn.relay&&await this.confirmOnlineStateOrThrow();const c=vr(),l=Ss().toString(),{done:u,resolve:d,reject:h}=ud(o,"Request expired. Please try again.");this.events.once(Rt("session_request",c),({error:w,result:b})=>{w?h(w):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:di(Xt({},i),{expiryTimestamp:er(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const g={request:di(Xt({},i),{expiryTimestamp:er(o)}),chainId:r},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async w=>{await this.sendRequest(Xt({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),w()}),new Promise(async w=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const y=await X6e(this.client.core.storage,IR);await Y6e({id:c,topic:s,wcDeepLink:y})}w()}),u()]).then(w=>w[2])}),fe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===gn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);nr(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):On(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),fe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=vr(),s=Ss().toString(),{done:o,resolve:a,reject:c}=ud();this.events.once(Rt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),fe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=Ss().toString(),a=vr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),fe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=ve("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),fe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>HIe(r,n)))),fe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),fe(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?gn.link_mode:gn.relay;o===gn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,w=[...n.resources||[]],{topic:b,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:y}});const _=await this.client.core.crypto.generateKeyPair(),A=Qb(_);if(await Promise.all([this.client.auth.authKeys.set(Xb,{responseTopic:A,publicKey:_}),this.client.auth.pairingTopics.set(A,{topic:A,pairingTopic:b})]),await this.client.core.relayer.subscribe(A,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:C}=kp(a[0]);let P=K8e(C,"request",g);Yb(w)&&(P=W8e(P,w.pop())),w.push(P)}const T=m&&m>lr.wc_sessionAuthenticate.req.ttl?m:lr.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:er(T)},D={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:D,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:er(lr.wc_sessionPropose.req.ttl),id:vr()},{done:j,resolve:F,reject:L}=ud(T,"Request expired"),B=vr(),x=Rt("session_connect",O.id),v=Rt("session_request",B),S=async({error:C,session:P})=>{this.events.off(v,N),C?L(C):P&&F({session:P})},N=async C=>{var P,M,I;if(await this.deletePendingAuthRequest(B,{message:"fulfilled",code:0}),C.error){const K=Wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===K.code?void 0:(this.events.off(x,S),L(C.error.message))}await this.deleteProposal(O.id),this.events.off(x,S);const{cacaos:k,responder:R}=C.result,U=[],q=[];for(const K of k){await S$({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),L(Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:G}=K,Y=Yb(G.resources),X=[c4(G.iss)],ie=h2(G.iss);if(Y){const de=A$(Y),Se=x$(Y);U.push(...de),X.push(...Se)}for(const de of X)q.push(`${de}:${ie}`)}const H=await this.client.core.crypto.generateSharedKey(_,R.publicKey);let z;U.length>0&&(z={topic:H,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:R,controller:R.publicKey,expiry:er(Pf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:Q$([...new Set(U)],[...new Set(q)]),transportType:o},await this.client.core.relayer.subscribe(H,{transportType:o}),await this.client.session.set(H,z),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:R.metadata}),z=this.client.session.get(H)),(P=this.client.metadata.redirect)!=null&&P.linkMode&&(M=R.metadata.redirect)!=null&&M.linkMode&&(I=R.metadata.redirect)!=null&&I.universal&&r&&(this.client.core.addLinkModeSupportedApp(R.metadata.redirect.universal),this.client.session.update(H,{transportType:gn.link_mode})),F({auths:k,session:z})};this.events.once(x,S),this.events.once(v,N);let E;try{if(s){const C=Ci("wc_sessionAuthenticate",$,B);this.client.core.history.set(b,C);const P=await this.client.core.crypto.encode("",C,{type:wy,encoding:Gl});E=J1(r,b,P)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:B}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:O,expiry:lr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(C){throw this.events.off(x,S),this.events.off(v,N),C}return await this.setProposal(O.id,O),await this.setAuthRequest(B,{request:di(Xt({},$),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:E??y,response:j}}),fe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[nd.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw s.setError(U0.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(U0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||gn.relay;a===gn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Qb(c),d={type:Hc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of i){if(!await S$({cacao:m,projectId:this.client.core.projectId})){s.setError(U0.invalid_cacao);const A=Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:A,encodeOpts:d}),new Error(A.message)}s.addTrace(nd.cacaos_verified);const{p:w}=m,b=Yb(w.resources),y=[c4(w.iss)],_=h2(w.iss);if(b){const A=A$(b),T=x$(b);h.push(...A),y.push(...T)}for(const A of y)f.push(`${A}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(nd.create_authenticated_session_topic);let g;if(h?.length>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:er(Pf),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Q$([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(nd.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw s.setError(U0.subscribe_authenticated_session_topic_failure),m}s.addTrace(nd.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),s.addTrace(nd.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(nd.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw s.setError(U0.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),fe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===gn.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Qb(o),l={type:Hc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:lr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Wt("USER_DISCONNECTED"))}),fe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return sV(r,i)}),fe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),fe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),fe(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(IR).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=da.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),fe(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(td.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),fe(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=da.idle,this.client.events.emit("session_request_expire",{id:n}))}),fe(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),fe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),fe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,er(lr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),fe(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=gn.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),fe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||er(lr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),fe(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Ci(i,s,c);let f;const p=!!u;try{const w=p?Gl:qo;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(oTe.includes(i)){const w=Ea(JSON.stringify(h)),b=Ea(f);g=await this.client.core.verify.register({id:b,decryptedId:w})}const m=lr[i].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const w=J1(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=lr[i].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=di(Xt({},d),{correlationId:h.id}),l?(w.internal=di(Xt({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(b=>this.client.logger.error(b))}return h.id}),fe(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=qu(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Gl:qo;u=await this.client.core.crypto.encode(i,l,di(Xt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let h,f;try{h=await this.client.core.history.get(i,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,s))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(d){const p=J1(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=lr[p].res;g.tvf=di(Xt({},f),{correlationId:r}),o?(g.internal=di(Xt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),fe(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=r0(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Gl:qo;u=await this.client.core.crypto.encode(i,l,di(Xt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),f}if(d){const f=J1(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||lr[f].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(l)}),fe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;ql(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{ql(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),fe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),fe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),fe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===da.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=da.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=da.idle}),fe(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),fe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),fe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=ve("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),fe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),fe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(pc.proposal_listener_not_found)),this.isValidConnect(Xt({},i.params));const u=a.expiryTimestamp||er(lr.wc_sessionPropose.req.ttl),d=Xt({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:Ea(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(ga.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:lr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),fe(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(nr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(On(r)){await this.client.proposal.delete(s,Wt("USER_DISCONNECTED"));const o=Rt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),fe(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=di(Xt(Xt(Xt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:gn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Rt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;nr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Rt("session_approve",i),{})):On(r)&&(await this.client.session.delete(n,Wt("USER_DISCONNECTED")),this.events.emit(Rt("session_approve",i),{error:r.error}))}),fe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=B0.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:Wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Xt({topic:n},i));try{B0.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw B0.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),fe(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=Rt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit(Rt("session_update",i),{}):On(r)&&this.events.emit(Rt("session_update",i),{error:r.error})}),fe(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,er(Pf)),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),fe(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=Rt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit(Rt("session_extend",i),{}):On(r)&&this.events.emit(Rt("session_extend",i),{error:r.error})}),fe(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),fe(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=Rt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);nr(r)?this.events.emit(Rt("session_ping",i),{}):On(r)&&this.events.emit(Rt("session_ping",i),{error:r.error})},500)}),fe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(_r.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),fe(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Xt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ea(JSON.stringify(Ci("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===gn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),fe(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=Rt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);nr(r)?this.events.emit(Rt("session_request",i),{result:r.result}):On(r)&&this.events.emit(Rt("session_request",i),{error:r.error})}),fe(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=B0.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Xt({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),B0.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),nr(r)?this.events.emit(Rt("session_request",i),{result:r.result}):On(r)&&this.events.emit(Rt("session_request",i),{error:r.error})}),fe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:Ea(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===gn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:Hc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:lr.wc_sessionAuthenticate.autoReject,appLink:h})}}),fe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),fe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=da.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),fe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Rt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Rt("session_request",s.request.id),{error:r})})}),fe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===da.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=da.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),fe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),fe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ci("wc_sessionPropose",di(Xt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),fe(this,"isValidConnect",async n=>{if(!qi(n)){const{message:l}=ve("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(qr(r)||await this.isValidPairingTopic(r),!tOe(c)){const{message:l}=ve("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!qr(i)&&Ou(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!qr(s)&&Ou(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),qr(o)||this.validateSessionProps(o,"sessionProperties"),!qr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),fe(this,"validateNamespaces",(n,r)=>{const i=eOe(n,"connect()",r);if(i)throw new Error(i.message)}),fe(this,"isValidApprove",async n=>{if(!qi(n))throw new Error(ve("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=F_(i,"approve()");if(l)throw new Error(l.message);const u=eR(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Yn(s,!0)){const{message:d}=ve("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(qr(o)||this.validateSessionProps(o,"sessionProperties"),!qr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),fe(this,"isValidReject",async n=>{if(!qi(n)){const{message:s}=ve("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!rOe(i)){const{message:s}=ve("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),fe(this,"isValidSessionSettleRequest",n=>{if(!qi(n)){const{message:l}=ve("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!kV(r)){const{message:l}=ve("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=GIe(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=F_(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ql(o)){const{message:l}=ve("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),fe(this,"isValidUpdate",async n=>{if(!qi(n)){const{message:c}=ve("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=F_(i,"update()");if(o)throw new Error(o.message);const a=eR(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),fe(this,"isValidExtend",async n=>{if(!qi(n)){const{message:i}=ve("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),fe(this,"isValidRequest",async n=>{if(!qi(n)){const{message:c}=ve("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!X$(a,s)){const{message:c}=ve("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!iOe(i)){const{message:c}=ve("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!aOe(a,s,i.method)){const{message:c}=ve("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!dOe(o,G_)){const{message:c}=ve("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${G_.min} and ${G_.max}`);throw new Error(c)}}),fe(this,"isValidRespond",async n=>{var r;if(!qi(n)){const{message:o}=ve("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!sOe(s)){const{message:o}=ve("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),fe(this,"isValidPing",async n=>{if(!qi(n)){const{message:i}=ve("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidEmit",async n=>{if(!qi(n)){const{message:a}=ve("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!X$(o,s)){const{message:a}=ve("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!oOe(i)){const{message:a}=ve("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!cOe(o,s,i.name)){const{message:a}=ve("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),fe(this,"isValidDisconnect",async n=>{if(!qi(n)){const{message:i}=ve("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Yn(i,!1))throw new Error("uri is required parameter");if(!Yn(s,!1))throw new Error("domain is required parameter");if(!Yn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>kp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=kp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),fe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Sm,validation:"UNKNOWN",origin:o.url||""}};try{if(a===gn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),fe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=ve("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),fe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),fe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),fe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=ve("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),fe(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,h;return!n||r!==gn.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n?.redirect)==null?void 0:u.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),fe(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n?.redirect)==null?void 0:i.universal:void 0}),fe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=g$(n,"topic")||"",i=decodeURIComponent(g$(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:gn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),fe(this,"registerLinkModeListeners",async()=>{var n;if(mx()||Hu()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),fe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:i}=r;return Object.keys(PR).includes(i.method)}),fe(this,"getTVFParams",(n,r,i)=>{var s,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,i);return di(Xt({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(s=r.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),fe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=n?.data||((r=n?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),fe(this,"extractTxHashesFromResult",(n,r)=>{try{const i=PR[n];if(typeof r=="string")return[r];const s=r[i.key];if(Iu(s))return n==="solana_signAllTransactions"?s.map(o=>k8e(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_r.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Xb)?this.client.auth.authKeys.get(Xb):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===gn.link_mode?Gl:qo});i0(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:Ea(r)})):Dh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(to.expired,async e=>{const{topic:n,id:r}=YK(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ve("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ve("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(bd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(bd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Yn(e,!1)){const{message:n}=ve("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(ql(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ve("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Yn(e,!1)){const{message:n}=ve("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(ql(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ve("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ve("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Yn(e,!1)){const{message:n}=ve("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ve("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!nOe(e)){const{message:n}=ve("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ve("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(ql(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ve("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class yTe extends qh{constructor(e,n){super(e,n,nTe,Sx),this.core=e,this.logger=n}}let bTe=class extends qh{constructor(e,n){super(e,n,rTe,Sx),this.core=e,this.logger=n}};class vTe extends qh{constructor(e,n){super(e,n,sTe,Sx,r=>r.id),this.core=e,this.logger=n}}class ETe extends qh{constructor(e,n){super(e,n,lTe,QE,()=>Xb),this.core=e,this.logger=n}}class CTe extends qh{constructor(e,n){super(e,n,uTe,QE),this.core=e,this.logger=n}}class _Te extends qh{constructor(e,n){super(e,n,dTe,QE,r=>r.id),this.core=e,this.logger=n}}var STe=Object.defineProperty,ATe=(t,e,n)=>e in t?STe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z_=(t,e,n)=>ATe(t,typeof e!="symbol"?e+"":e,n);class xTe{constructor(e,n){this.core=e,this.logger=n,Z_(this,"authKeys"),Z_(this,"pairingTopics"),Z_(this,"requests"),this.authKeys=new ETe(this.core,this.logger),this.pairingTopics=new CTe(this.core,this.logger),this.requests=new _Te(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var ITe=Object.defineProperty,OTe=(t,e,n)=>e in t?ITe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pt=(t,e,n)=>OTe(t,typeof e!="symbol"?e+"":e,n);let PTe=class QV extends y4e{constructor(e){super(e),pt(this,"protocol",GV),pt(this,"version",ZV),pt(this,"name",W_.name),pt(this,"metadata"),pt(this,"core"),pt(this,"logger"),pt(this,"events",new Kn.EventEmitter),pt(this,"engine"),pt(this,"session"),pt(this,"proposal"),pt(this,"pendingRequest"),pt(this,"auth"),pt(this,"signConfig"),pt(this,"on",(r,i)=>this.events.on(r,i)),pt(this,"once",(r,i)=>this.events.once(r,i)),pt(this,"off",(r,i)=>this.events.off(r,i)),pt(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),pt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),pt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),pt(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),pt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),pt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||W_.name,this.metadata=z6e(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Fu(el({level:e?.logger||W_.logger}));this.core=e?.core||new tTe(e),this.logger=jt(n,this.name),this.session=new bTe(this.core,this.logger),this.proposal=new yTe(this.core,this.logger),this.pendingRequest=new vTe(this.core,this.logger),this.engine=new wTe(this),this.auth=new xTe(this.core,this.logger)}static async init(e){const n=new QV(e);return await n.initialize(),n}get context(){return tn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const kR="error",TTe="wss://relay.walletconnect.org",kTe="wc",NTe="universal_provider",eb=`${kTe}@2:${NTe}:`,JV="https://rpc.walletconnect.org/v1/",Yf="generic",$Te=`${JV}bundler`,mo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function RTe(){}function Ax(t){return t==null||typeof t!="object"&&typeof t!="function"}function xx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function MTe(t){if(Ax(t))return t;if(Array.isArray(t)||xx(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function NR(t){return typeof t=="object"&&t!==null}function XV(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function eW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const DTe="[object RegExp]",tW="[object String]",nW="[object Number]",rW="[object Boolean]",iW="[object Arguments]",BTe="[object Symbol]",LTe="[object Date]",UTe="[object Map]",jTe="[object Set]",FTe="[object Array]",qTe="[object ArrayBuffer]",HTe="[object Object]",zTe="[object DataView]",KTe="[object Uint8Array]",VTe="[object Uint8ClampedArray]",WTe="[object Uint16Array]",GTe="[object Uint32Array]",ZTe="[object Int8Array]",YTe="[object Int16Array]",QTe="[object Int32Array]",JTe="[object Float32Array]",XTe="[object Float64Array]";function eke(t,e){return yp(t,void 0,t,new Map,e)}function yp(t,e,n,r=new Map,i=void 0){const s=i?.(t,e,n,r);if(s!=null)return s;if(Ax(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=yp(t[a],a,n,r,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,yp(c,a,n,r,i));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(yp(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(xx(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=yp(t[a],a,n,r,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),vd(o,t,n,r,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),vd(o,t,n,r,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),vd(o,t,n,r,i),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,vd(o,t,n,r,i),o}if(typeof t=="object"&&tke(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),vd(o,t,n,r,i),o}return t}function vd(t,e,n=t,r,i){const s=[...Object.keys(e),...XV(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=yp(e[a],a,n,r,i))}}function tke(t){switch(eW(t)){case iW:case FTe:case qTe:case zTe:case rW:case LTe:case JTe:case XTe:case ZTe:case YTe:case QTe:case UTe:case nW:case HTe:case DTe:case jTe:case tW:case BTe:case KTe:case VTe:case WTe:case GTe:return!0;default:return!1}}function nke(t,e){return eke(t,(n,r,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case nW:case tW:case rW:{const o=new t.constructor(t?.valueOf());return vd(o,t),o}case iW:{const o={};return vd(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function $R(t){return nke(t)}function RR(t){return t!==null&&typeof t=="object"&&eW(t)==="[object Arguments]"}function rke(t){return xx(t)}function ike(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ske(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let i=t;for(let s=0;s<n.length;s++){const o=n[s];i=T4(i,o,r,new Map)}return i}function T4(t,e,n,r){if(Ax(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return MTe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...XV(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(RR(a)&&(a={...a}),RR(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=$R(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||NR(c)&&NR(a)?t[o]=T4(c,a,n,r):c==null&&ike(a)?t[o]=T4({},a,n,r):c==null&&rke(a)?t[o]=$R(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function oke(t,...e){return ske(t,...e,RTe)}var ake=Object.defineProperty,cke=Object.defineProperties,lke=Object.getOwnPropertyDescriptors,MR=Object.getOwnPropertySymbols,uke=Object.prototype.hasOwnProperty,dke=Object.prototype.propertyIsEnumerable,DR=(t,e,n)=>e in t?ake(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tb=(t,e)=>{for(var n in e||(e={}))uke.call(e,n)&&DR(t,n,e[n]);if(MR)for(var n of MR(e))dke.call(e,n)&&DR(t,n,e[n]);return t},hke=(t,e)=>cke(t,lke(e));function Ps(t,e,n){var r;const i=kp(t);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${JV}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function Hh(t){return t.includes(":")?t.split(":")[1]:t}function sW(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function fke(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function nb(t={},e={}){const n=BR(t),r=BR(e);return oke(n,r)}function BR(t){var e,n,r,i,s;const o={};if(!Ou(t))return o;for(const[a,c]of Object.entries(t)){const l=ZE(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=wp(a);o[f]=hke(tb(tb({},o[f]),c),{chains:Da(l,(e=o[f])==null?void 0:e.chains),methods:Da(u,(n=o[f])==null?void 0:n.methods),events:Da(d,(r=o[f])==null?void 0:r.events)}),(Ou(h)||Ou(((i=o[f])==null?void 0:i.rpcMap)||{}))&&(o[f].rpcMap=tb(tb({},h),(s=o[f])==null?void 0:s.rpcMap))}return o}function LR(t){return t.includes(":")?t.split(":")[2]:t}function UR(t){const e={};for(const[n,r]of Object.entries(t)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=ZE(n)?[n]:r.chains?r.chains:sW(r.accounts);e[n]={chains:a,methods:i,events:s,accounts:o}}return e}function Y_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const oW={},Tt=t=>oW[t],Q_=(t,e)=>{oW[t]=e};var pke=Object.defineProperty,gke=(t,e,n)=>e in t?pke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tf=(t,e,n)=>gke(t,typeof e!="symbol"?e+"":e,n);class mke{constructor(e){Tf(this,"name","polkadot"),Tf(this,"client"),Tf(this,"httpProviders"),Tf(this,"events"),Tf(this,"namespace"),Tf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Hh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var wke=Object.defineProperty,yke=Object.defineProperties,bke=Object.getOwnPropertyDescriptors,jR=Object.getOwnPropertySymbols,vke=Object.prototype.hasOwnProperty,Eke=Object.prototype.propertyIsEnumerable,k4=(t,e,n)=>e in t?wke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FR=(t,e)=>{for(var n in e||(e={}))vke.call(e,n)&&k4(t,n,e[n]);if(jR)for(var n of jR(e))Eke.call(e,n)&&k4(t,n,e[n]);return t},qR=(t,e)=>yke(t,bke(e)),kf=(t,e,n)=>k4(t,typeof e!="symbol"?e+"":e,n);class Cke{constructor(e){kf(this,"name","eip155"),kf(this,"client"),kf(this,"chainId"),kf(this,"namespace"),kf(this,"httpProviders"),kf(this,"events"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ps(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(Hh(n));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,i,s,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d?.[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:qR(FR({},u.sessionProperties||{}),{capabilities:qR(FR({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const i=this.client.session.get(e.topic),s=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ci("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,n){return`${$Te}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var _ke=Object.defineProperty,Ske=(t,e,n)=>e in t?_ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nf=(t,e,n)=>Ske(t,typeof e!="symbol"?e+"":e,n);class Ake{constructor(e){Nf(this,"name","solana"),Nf(this,"client"),Nf(this,"httpProviders"),Nf(this,"events"),Nf(this,"namespace"),Nf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Hh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var xke=Object.defineProperty,Ike=(t,e,n)=>e in t?xke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$f=(t,e,n)=>Ike(t,typeof e!="symbol"?e+"":e,n);class Oke{constructor(e){$f(this,"name","cosmos"),$f(this,"client"),$f(this,"httpProviders"),$f(this,"events"),$f(this,"namespace"),$f(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Hh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var Pke=Object.defineProperty,Tke=(t,e,n)=>e in t?Pke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rf=(t,e,n)=>Tke(t,typeof e!="symbol"?e+"":e,n);class kke{constructor(e){Rf(this,"name","algorand"),Rf(this,"client"),Rf(this,"httpProviders"),Rf(this,"events"),Rf(this,"namespace"),Rf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ps(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new En(new Tn(r,Tt("disableProviderPing")))}}var Nke=Object.defineProperty,$ke=(t,e,n)=>e in t?Nke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mf=(t,e,n)=>$ke(t,typeof e!="symbol"?e+"":e,n);class Rke{constructor(e){Mf(this,"name","cip34"),Mf(this,"client"),Mf(this,"httpProviders"),Mf(this,"events"),Mf(this,"namespace"),Mf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=Hh(n);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var Mke=Object.defineProperty,Dke=(t,e,n)=>e in t?Mke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Df=(t,e,n)=>Dke(t,typeof e!="symbol"?e+"":e,n);class Bke{constructor(e){Df(this,"name","elrond"),Df(this,"client"),Df(this,"httpProviders"),Df(this,"events"),Df(this,"namespace"),Df(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Hh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var Lke=Object.defineProperty,Uke=(t,e,n)=>e in t?Lke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bf=(t,e,n)=>Uke(t,typeof e!="symbol"?e+"":e,n);class jke{constructor(e){Bf(this,"name","multiversx"),Bf(this,"client"),Bf(this,"httpProviders"),Bf(this,"events"),Bf(this,"namespace"),Bf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Hh(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var Fke=Object.defineProperty,qke=(t,e,n)=>e in t?Fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lf=(t,e,n)=>qke(t,typeof e!="symbol"?e+"":e,n);class Hke{constructor(e){Lf(this,"name","near"),Lf(this,"client"),Lf(this,"httpProviders"),Lf(this,"events"),Lf(this,"namespace"),Lf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ps(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace);return typeof r>"u"?void 0:new En(new Tn(r,Tt("disableProviderPing")))}}var zke=Object.defineProperty,Kke=(t,e,n)=>e in t?zke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uf=(t,e,n)=>Kke(t,typeof e!="symbol"?e+"":e,n);class Vke{constructor(e){Uf(this,"name","tezos"),Uf(this,"client"),Uf(this,"httpProviders"),Uf(this,"events"),Uf(this,"namespace"),Uf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ps(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace);return typeof r>"u"?void 0:new En(new Tn(r))}}var Wke=Object.defineProperty,Gke=(t,e,n)=>e in t?Wke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jf=(t,e,n)=>Gke(t,typeof e!="symbol"?e+"":e,n);class Zke{constructor(e){jf(this,"name",Yf),jf(this,"client"),jf(this,"httpProviders"),jf(this,"events"),jf(this,"namespace"),jf(this,"chainId"),this.namespace=e.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const s=kp(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ps(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new En(new Tn(r,Tt("disableProviderPing")))}}var Yke=Object.defineProperty,Qke=Object.defineProperties,Jke=Object.getOwnPropertyDescriptors,HR=Object.getOwnPropertySymbols,Xke=Object.prototype.hasOwnProperty,eNe=Object.prototype.propertyIsEnumerable,N4=(t,e,n)=>e in t?Yke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rb=(t,e)=>{for(var n in e||(e={}))Xke.call(e,n)&&N4(t,n,e[n]);if(HR)for(var n of HR(e))eNe.call(e,n)&&N4(t,n,e[n]);return t},J_=(t,e)=>Qke(t,Jke(e)),Ys=(t,e,n)=>N4(t,typeof e!="symbol"?e+"":e,n);let tNe=class aW{constructor(e){Ys(this,"client"),Ys(this,"namespaces"),Ys(this,"optionalNamespaces"),Ys(this,"sessionProperties"),Ys(this,"scopedProperties"),Ys(this,"events",new Vg),Ys(this,"rpcProviders",{}),Ys(this,"session"),Ys(this,"providerOpts"),Ys(this,"logger"),Ys(this,"uri"),Ys(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Fu(el({level:e?.logger||kR})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new aW(e);return await n.initialize(),n}async request(e,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:rb({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>n(null,qu(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=UR(this.session.namespaces);this.namespaces=nb(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const s=UR(i.namespaces);return this.namespaces=nb(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,i]=this.validateChain(e),s=this.getProvider(r);s.name===Yf?s.setDefaultChain(`${r}:${i}`,n):s.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Iu(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await PTe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||kR,relayUrl:this.providerOpts.relayUrl||TTe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>wp(n)))];Q_("client",this.client),Q_("events",this.events),Q_("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=fke(n,this.session),i=sW(r),s=nb(this.namespaces,this.optionalNamespaces),o=J_(rb({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new Cke({namespace:o});break;case"algorand":this.rpcProviders[n]=new kke({namespace:o});break;case"solana":this.rpcProviders[n]=new Ake({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Oke({namespace:o});break;case"polkadot":this.rpcProviders[n]=new mke({namespace:o});break;case"cip34":this.rpcProviders[n]=new Rke({namespace:o});break;case"elrond":this.rpcProviders[n]=new Bke({namespace:o});break;case"multiversx":this.rpcProviders[n]=new jke({namespace:o});break;case"near":this.rpcProviders[n]=new Hke({namespace:o});break;case"tezos":this.rpcProviders[n]=new Vke({namespace:o});break;default:this.rpcProviders[Yf]?this.rpcProviders[Yf].updateNamespace(o):this.rpcProviders[Yf]=new Zke({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&Iu(o)&&this.events.emit("accountsChanged",o.map(LR))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=wp(o),l=Y_(o)!==Y_(a)?`${c}:${Y_(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(e);this.session=J_(rb({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",J_(rb({},Wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(mo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Yf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=nb(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>wp(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=wp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(LR);if(!Iu(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${eb}/${e}${i}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${eb}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${eb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(eb)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};function ib(t,e){return pe.getConnectorId(t)===e}function nNe(t){const e=Array.from(V.state.chains.keys());let n=[];return t?(n.push([t,V.state.chains.get(t)]),ib(t,je.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&ib(r,je.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,V.state.chains.get(r)])}):ib(t,je.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&ib(r,je.CONNECTOR_ID.AUTH)&&n.push([r,V.state.chains.get(r)])})):n=Array.from(V.state.chains.entries()),n}const $l={EIP155:"eip155",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},g2={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[je.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[je.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[je.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[je.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[je.CONNECTOR_ID.INJECTED]:"Browser Wallet",[je.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[je.CONNECTOR_ID.COINBASE]:"Coinbase",[je.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[je.CONNECTOR_ID.LEDGER]:"Ledger",[je.CONNECTOR_ID.SAFE]:"Safe"}},Ix={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${$l.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()}};new AbortController;const Ff={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${rNe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function rNe(){return typeof window<"u"}const iNe={createLogger(t,e="error"){const n=el({level:e}),{logger:r}=sx({opts:n});return r.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},r}},sNe="rpc.walletconnect.org";function zR(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const X_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Qf={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===sNe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:je.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${je.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const r=t.rpcUrls?.default?.http?.[0];return X_.includes(e)?zR(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=t.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(t,s,n),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,l=r?.[s]?.map(h=>h.url)||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:g2.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(i=>Qf.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){const r=[];return n?.forEach(i=>{r.push(Xf(i.url,i.config))}),X_.includes(t.caipNetworkId)&&r.push(Xf(zR(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(i=>{r.push(Xf(i))}),Xx(r)},extendWagmiTransports(t,e,n){if(X_.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Xx([n,Xf(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:je.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=Be.getActiveCaipNetworkId(),n=V.getAllRequestedCaipNetworks(),r=Array.from(V.state.chains?.keys()||[]),i=e?.split(":")[0],s=i?r.includes(i):!1,o=n?.find(c=>c.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||n?.[0]}},m2={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Li=hn({providers:{...m2},providerIds:{...m2}}),Cn={state:Li,subscribeKey(t,e){return Gr(Li,t,e)},subscribe(t){return zr(Li,()=>{t(Li)})},subscribeProviders(t){return zr(Li.providers,()=>t(Li.providers))},setProvider(t,e){e&&(Li.providers[t]=dh(e))},getProvider(t){return Li.providers[t]},setProviderId(t,e){e&&(Li.providerIds[t]=e)},getProviderId(t){if(t)return Li.providerIds[t]},reset(){Li.providers={...m2},Li.providerIds={...m2}},resetChain(t){Li.providers[t]=void 0,Li.providerIds[t]=void 0}},hu={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},mh={filterOutDuplicatesByRDNS(t){const e=ae.state.enableEIP6963?pe.state.connectors:[],n=Be.getRecentWallets(),r=e.map(a=>a.info?.rdns).filter(Boolean),i=n.map(a=>a.rdns).filter(Boolean),s=r.concat(i);if(s.includes("io.metamask.mobile")&&ge.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a?.rdns)))},filterOutDuplicatesByIds(t){const e=pe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Be.getRecentWallets(),r=e.map(a=>a.explorerId),i=n.map(a=>a.id),s=r.concat(i);return t.filter(a=>!s.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=pe.state,{featuredWalletIds:n}=ae.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n?.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||ae.state.features?.connectMethodsOrder,r=e||pe.state.connectors;if(n)return n;const{injected:i,announced:s}=zc.getConnectorsByType(r,ye.state.recommended,ye.state.featured),o=i.filter(zc.showConnector),a=s.filter(zc.showConnector);return o.length||a.length?["wallet","email","social"]:hu.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ye.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ye.state.excludedWallets.some(r=>Ix.isLowerCaseMatch(r.name,t.name));return e||n}},zc={getConnectorsByType(t,e,n){const{customWallets:r}=ae.state,i=Be.getRecentWallets(),s=mh.filterOutDuplicateWallets(e),o=mh.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){const e=t.info?.rdns,n=!!e&&ye.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ye.state.excludedWallets.some(i=>Ix.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ge.isMobile()||ge.isMobile()&&!e&&!_e.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(V.state.chains.values()).some(n=>pe.getConnectorId(n.namespace)===je.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=ae.state.features?.connectorTypeOrder??[]}){const l=zc.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:ae.state.enableWalletConnect&&!l},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:b})=>b===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ev=globalThis,Ox=ev.ShadowRoot&&(ev.ShadyCSS===void 0||ev.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Px=Symbol(),KR=new WeakMap;let cW=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Px)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Ox&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=KR.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&KR.set(n,e))}return e}toString(){return this.cssText}};const Qs=t=>new cW(typeof t=="string"?t:t+"",void 0,Px),Ge=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new cW(n,t,Px)},oNe=(t,e)=>{if(Ox)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=ev.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},VR=Ox?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Qs(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:aNe,defineProperty:cNe,getOwnPropertyDescriptor:lNe,getOwnPropertyNames:uNe,getOwnPropertySymbols:dNe,getPrototypeOf:hNe}=Object,Pu=globalThis,WR=Pu.trustedTypes,fNe=WR?WR.emptyScript:"",pNe=Pu.reactiveElementPolyfillSupport,xm=(t,e)=>t,w2={toAttribute(t,e){switch(e){case Boolean:t=t?fNe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Tx=(t,e)=>!aNe(t,e),GR={attribute:!0,type:String,converter:w2,reflect:!1,useDefault:!1,hasChanged:Tx};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Pu.litPropertyMetadata??(Pu.litPropertyMetadata=new WeakMap);let Jf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=GR){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&cNe(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=lNe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??GR}static _$Ei(){if(this.hasOwnProperty(xm("elementProperties")))return;const e=hNe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(xm("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(xm("properties"))){const n=this.properties,r=[...uNe(n),...dNe(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(VR(i))}else e!==void 0&&n.push(VR(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return oNe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:w2).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:w2;this._$Em=i;const a=o.fromAttribute(n,s.type);this[i]=a??this._$Ej?.get(i)??a,this._$Em=null}}requestUpdate(e,n,r){if(e!==void 0){const i=this.constructor,s=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??Tx)(s,n)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Jf.elementStyles=[],Jf.shadowRootOptions={mode:"open"},Jf[xm("elementProperties")]=new Map,Jf[xm("finalized")]=new Map,pNe?.({ReactiveElement:Jf}),(Pu.reactiveElementVersions??(Pu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Im=globalThis,y2=Im.trustedTypes,ZR=y2?y2.createPolicy("lit-html",{createHTML:t=>t}):void 0,lW="$lit$",Zl=`lit$${Math.random().toFixed(9).slice(2)}$`,uW="?"+Zl,gNe=`<${uW}>`,wh=document,vw=()=>wh.createComment(""),Ew=t=>t===null||typeof t!="object"&&typeof t!="function",kx=Array.isArray,mNe=t=>kx(t)||typeof t?.[Symbol.iterator]=="function",e5=`[ 	
\f\r]`,q0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,YR=/-->/g,QR=/>/g,rd=RegExp(`>|${e5}(?:([^\\s"'>=/]+)(${e5}*=${e5}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),JR=/'/g,XR=/"/g,dW=/^(?:script|style|textarea|title)$/i,hW=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Z=hW(1),Ce=hW(2),Gc=Symbol.for("lit-noChange"),Fn=Symbol.for("lit-nothing"),eM=new WeakMap,Nd=wh.createTreeWalker(wh,129);function fW(t,e){if(!kx(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return ZR!==void 0?ZR.createHTML(e):e}const wNe=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=q0;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===q0?u[1]==="!--"?o=YR:u[1]!==void 0?o=QR:u[2]!==void 0?(dW.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=rd):u[3]!==void 0&&(o=rd):o===rd?u[0]===">"?(o=i??q0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?rd:u[3]==='"'?XR:JR):o===XR||o===JR?o=rd:o===YR||o===QR?o=q0:(o=rd,i=void 0);const f=o===rd&&t[a+1].startsWith("/>")?" ":"";s+=o===q0?c+gNe:d>=0?(r.push(l),c.slice(0,d)+lW+c.slice(d)+Zl+f):c+Zl+(d===-2?a:f)}return[fW(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Cw{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=wNe(e,n);if(this.el=Cw.createElement(l,r),Nd.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(i=Nd.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const d of i.getAttributeNames())if(d.endsWith(lW)){const h=u[o++],f=i.getAttribute(d).split(Zl),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:s,name:p[2],strings:f,ctor:p[1]==="."?bNe:p[1]==="?"?vNe:p[1]==="@"?ENe:JE}),i.removeAttribute(d)}else d.startsWith(Zl)&&(c.push({type:6,index:s}),i.removeAttribute(d));if(dW.test(i.tagName)){const d=i.textContent.split(Zl),h=d.length-1;if(h>0){i.textContent=y2?y2.emptyScript:"";for(let f=0;f<h;f++)i.append(d[f],vw()),Nd.nextNode(),c.push({type:2,index:++s});i.append(d[h],vw())}}}else if(i.nodeType===8)if(i.data===uW)c.push({type:2,index:s});else{let d=-1;for(;(d=i.data.indexOf(Zl,d+1))!==-1;)c.push({type:7,index:s}),d+=Zl.length-1}s++}}static createElement(e,n){const r=wh.createElement("template");return r.innerHTML=e,r}}function $g(t,e,n=t,r){if(e===Gc)return e;let i=r!==void 0?n._$Co?.[r]:n._$Cl;const s=Ew(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(e=$g(t,i._$AS(t,e.values),i,r)),e}class yNe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=(e?.creationScope??wh).importNode(n,!0);Nd.currentNode=i;let s=Nd.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new by(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new CNe(s,this,e)),this._$AV.push(l),c=r[++a]}o!==c?.index&&(s=Nd.nextNode(),o++)}return Nd.currentNode=wh,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class by{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=Fn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=$g(this,e,n),Ew(e)?e===Fn||e==null||e===""?(this._$AH!==Fn&&this._$AR(),this._$AH=Fn):e!==this._$AH&&e!==Gc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):mNe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Fn&&Ew(this._$AH)?this._$AA.nextSibling.data=e:this.T(wh.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Cw.createElement(fW(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(n);else{const s=new yNe(i,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=eM.get(e.strings);return n===void 0&&eM.set(e.strings,n=new Cw(e)),n}k(e){kx(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new by(this.O(vw()),this.O(vw()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class JE{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=Fn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Fn}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=$g(this,e,n,0),o=!Ew(e)||e!==this._$AH&&e!==Gc,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=$g(this,a[r+c],n,c),l===Gc&&(l=this._$AH[c]),o||(o=!Ew(l)||l!==this._$AH[c]),l===Fn?e=Fn:e!==Fn&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Fn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class bNe extends JE{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Fn?void 0:e}}class vNe extends JE{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Fn)}}class ENe extends JE{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=$g(this,e,n,0)??Fn)===Gc)return;const r=this._$AH,i=e===Fn&&r!==Fn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Fn&&(r===Fn||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class CNe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){$g(this,e)}}const _Ne=Im.litHtmlPolyfillSupport;_Ne?.(Cw,by),(Im.litHtmlVersions??(Im.litHtmlVersions=[])).push("3.3.1");const SNe=(t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=n?.renderBefore??null;r._$litPart$=i=new by(e.insertBefore(vw(),s),s,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Om=globalThis;let Le=class extends Jf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=SNe(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Gc}};Le._$litElement$=!0,Le.finalized=!0,Om.litElementHydrateSupport?.({LitElement:Le});const ANe=Om.litElementPolyfillSupport;ANe?.({LitElement:Le});(Om.litElementVersions??(Om.litElementVersions=[])).push("4.2.1");let Pm,Tu,ku;function xNe(t,e){Pm=document.createElement("style"),Tu=document.createElement("style"),ku=document.createElement("style"),Pm.textContent=Np(t).core.cssText,Tu.textContent=Np(t).dark.cssText,ku.textContent=Np(t).light.cssText,document.head.appendChild(Pm),document.head.appendChild(Tu),document.head.appendChild(ku),pW(e)}function pW(t){Tu&&ku&&(t==="light"?(Tu.removeAttribute("media"),ku.media="enabled"):(ku.removeAttribute("media"),Tu.media="enabled"))}function INe(t){Pm&&Tu&&ku&&(Pm.textContent=Np(t).core.cssText,Tu.textContent=Np(t).dark.cssText,ku.textContent=Np(t).light.cssText)}function Np(t){return{core:Ge`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Qs(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Qs(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Qs(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${Qs(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${Qs(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Ge`
      :root {
        --w3m-color-mix: ${Qs(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${Qs(uu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Qs(uu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Ge`
      :root {
        --w3m-color-mix: ${Qs(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${Qs(uu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Qs(uu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Nt=Ge`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Yr=Ge`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,vy=Ge`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Er={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--wui-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--wui-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:n,truncate:r}){return t.length<=e+n?t:r==="end"?`${t.substring(0,e)}...`:r==="start"?`...${t.substring(t.length-n)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(n))}`},generateAvatarColors(t){const n=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(n),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(i?.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let l=0;l<5;l+=1){const u=this.tintColor(r,.15*l);c.push(`rgb(${u[0]}, ${u[1]}, ${u[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),n=e>>16&255,r=e>>8&255,i=e&255;return[n,r,i]},tintColor(t,e){const[n,r,i]=t,s=Math.round(n+(255-n)*e),o=Math.round(r+(255-r)*e),a=Math.round(i+(255-i)*e);return[s,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){return t||(typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,n){return t.toString().length>=e?Number(t).toFixed(n):t},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})}};function ONe(t,e){const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(i){customElements.get(t)||customElements.define(t,i)}}}function PNe(t,e){return customElements.get(t)||customElements.define(t,e),e}function De(t){return function(n){return typeof n=="function"?PNe(t,n):ONe(t,n)}}const sm={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function Ey(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const tM=Ey({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),nM=Ey({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Ey({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Ey({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Ey({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const TNe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},tv={getMethodsByChainNamespace(t){return TNe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>r.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>r.add(i)),e.events&&Object.keys(e.events).forEach(i=>r.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&r.add(s)}),r.forEach(i=>{n[i]||(n[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{n[i]&&(n[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{n[i]&&(n[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{n[i]&&(n[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),i.has(a)||(n[a].rpcMap={},i.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=r[o];switch(u.chains.push(l),l){case tM.caipNetworkId:u.chains.push(tM.deprecatedCaipNetworkId);break;case nM.caipNetworkId:u.chains.push(nM.deprecatedCaipNetworkId);break}return u?.rpcMap&&c&&(u.rpcMap[s]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await Cm.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const s=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(s,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class gW{constructor({provider:e,namespace:n}){this.id=je.CONNECTOR_ID.WALLET_CONNECT,this.name=g2.ConnectorNamesMap[je.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=g2.ConnectorImageIds[je.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=V.getCaipNetworks.bind(V),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ae.state.universalProviderConfigOverride,i=tv.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Gd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:kNe})}}const kNe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class NNe{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>V.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:je.CONNECTOR_ID.AUTH,type:"AUTH",name:je.CONNECTOR_NAMES.AUTH,provider:e,imageId:g2.ConnectorImageIds[je.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ue.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(i=>i(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){i.setDefaultChain(n.caipNetworkId);return}if(i&&r==="AUTH"){const s=i,o=Ue.state.preferredAccountTypes?.[n.chainNamespace];await s.switchNetwork(n.caipNetworkId);const a=await s.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof gW);if(!e)throw new Error("WalletConnectConnector not found");return e}}class $Ne extends NNe{setUniversalProvider(e){this.addConnector(new gW({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,s]=i.split(":");return s}).filter((i,s,o)=>o.indexOf(i)===s)||[];return Promise.resolve({accounts:r.map(i=>ge.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Ht.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Ue.state.balanceLoading&&e.chainId===V.state.activeCaipNetwork?.id)return{balance:Ue.state.balance||"0.00",symbol:Ue.state.balanceSymbol||""};const i=(await Ue.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:r,address:i}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return V.state.activeCaipNetwork?.chainNamespace===je.CHAIN.SOLANA?s=(await n.request({method:"solana_signMessage",params:{message:KK.encode(new TextEncoder().encode(r)),pubkey:i}},V.state.activeCaipNetwork?.caipNetworkId)).signature:s=await n.request({method:"personal_sign",params:[r,i]},V.state.activeCaipNetwork?.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===je.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:gu(n.id)}]})}catch(i){if(i.code===sm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===sm.ERROR_INVALID_CHAIN_ID||i.code===sm.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===sm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:gu(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const RNe=["email","socials","swaps","onramp","activity","reownBranding"],sb={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Ht.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Ht.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Ht.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Ht.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},MNe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=sb[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,i){const s=sb[t],o=e[s.localFeatureName];if(i&&!s.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(s.apiFeatureName,n);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return sb[t].processApi(e)},processFallbackFeature(t,e){return sb[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,i=!1;try{r=await ye.fetchProjectConfig(),i=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const s=i&&!e?Ht.DEFAULT_REMOTE_FEATURES:Ht.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of RNe){const a=this.processFeature(o,n,r,i,e);Object.assign(s,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ht.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Uo.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return s}};class DNe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{if(n){const i=V.getNetworkData(n)?.requestedCaipNetworks?.find(a=>a.id===r);if(i)return i;const s=V.getNetworkData(n)?.caipNetwork;return s||V.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n)?.[0]}return V.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getActiveChainNamespace=()=>V.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{V.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>V.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>V.state.activeChain===n||!n?V.state.activeCaipAddress:V.getAccountProp("caipAddress",n),this.setClientId=n=>{Ze.setClientId(n)},this.getProvider=n=>Cn.getProvider(n),this.getProviderType=n=>Cn.getProviderId(n),this.getPreferredAccountType=n=>Ue.state.preferredAccountTypes?.[n],this.setCaipAddress=(n,r)=>{Ue.setCaipAddress(n,r),n&&ae.state.enableEmbedded&&this.close()},this.setBalance=(n,r,i)=>{Ue.setBalance(n,r,i)},this.setProfileName=(n,r)=>{Ue.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ue.setProfileImage(n,r)},this.setUser=(n,r)=>{Ue.setUser(n,r)},this.resetAccount=n=>{Ue.resetAccount(n)},this.setCaipNetwork=n=>{V.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{V.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ue.setAllAccounts(n,r),ae.setHasMultipleAddresses(n?.length>1)},this.setStatus=(n,r)=>{Ue.setStatus(n,r),pe.isConnected()?Be.setConnectionStatus("connected"):Be.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>V.getAccountProp("address",n),this.setConnectors=n=>{const r=[...pe.state.allConnectors,...n];pe.setConnectors(r)},this.setConnections=(n,r)=>{_e.setConnections(n,r)},this.fetchIdentity=n=>Ze.fetchIdentity(n),this.getReownName=n=>Cm.getNamesForAddress(n),this.getConnectors=()=>pe.getConnectors(),this.getConnectorImage=n=>ir.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const i=Cn.getProviderId(r),s=n?{...n,type:i}:void 0;Ue.setConnectedWalletInfo(s,r)},this.getIsConnectedState=()=>!!V.state.activeCaipAddress,this.addAddressLabel=(n,r,i)=>{Ue.addAddressLabel(n,r,i)},this.removeAddressLabel=(n,r)=>{Ue.removeAddressLabel(n,r)},this.getAddress=n=>V.state.activeChain===n||!n?Ue.state.address:V.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>V.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{V.resetNetwork(n)},this.addConnector=n=>{pe.addConnector(n)},this.resetWcConnection=()=>{_e.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ue.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ue.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{V.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ue.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ae.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e?.map(s=>s.namespace).filter(s=>!!s);if(r?.length)return[...new Set(r)];const i=n?.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await MNe.fetchRemoteFeatures(e),ae.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&XA.setOnrampProviders(this.remoteFeatures.onramp),(ae.state.remoteFeatures?.email||Array.isArray(ae.state.remoteFeatures?.socials)&&ae.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ye.fetchAllowedOrigins();if(e&&ge.isClient()){const n=window.location.origin;tv.isOriginAllowed(n,e,sm.DEFAULT_ALLOWED_ANCESTORS)||Uo.open(Ff.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Uo.open(Ff.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,ut.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ur.setThemeMode(e.themeMode),e.themeVariables&&Ur.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");V.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&V.setActiveCaipNetwork(n)}initializeConnectionController(e){_e.setWcBasic(e.basic??!1)}initializeConnectorController(){pe.initialize(this.chainNamespaces)}initializeProjectSettings(e){ae.setProjectId(e.projectId),ae.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){ae.setDebug(e.debug!==!1),ae.setEnableWalletConnect(e.enableWalletConnect!==!1),ae.setEnableWalletGuide(e.enableWalletGuide!==!1),ae.setEnableWallets(e.enableWallets!==!1),ae.setEIP6963Enabled(e.enableEIP6963!==!1),ae.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ae.setEnableAuthLogger(e.enableAuthLogger!==!1),ae.setCustomRpcUrls(e.customRpcUrls),ae.setEnableEmbedded(e.enableEmbedded),ae.setAllWallets(e.allWallets),ae.setIncludeWalletIds(e.includeWalletIds),ae.setExcludeWalletIds(e.excludeWalletIds),ae.setFeaturedWalletIds(e.featuredWalletIds),ae.setTokens(e.tokens),ae.setTermsConditionsUrl(e.termsConditionsUrl),ae.setPrivacyPolicyUrl(e.privacyPolicyUrl),ae.setCustomWallets(e.customWallets),ae.setFeatures(e.features),ae.setAllowUnsupportedChain(e.allowUnsupportedChain),ae.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ae.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ae.setDefaultAccountTypes(e.defaultAccountTypes);const n=Be.getPreferredAccountTypes()||{},r={...ae.state.defaultAccountTypes,...n};Ue.setPreferredAccountTypes(r);const i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),ae.setMetadata(e.metadata),ae.setDisableAppend(e.disableAppend),ae.setEnableEmbedded(e.enableEmbedded),ae.setSIWX(e.siwx),!e.projectId){Uo.open(Ff.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(o=>o.namespace===je.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ae.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ge.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Qf.getUnsupportedNetwork(`${n}:${e}`);V.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Qf.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Qf.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Qf.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(i=>i.id===e.defaultNetwork?.id);return n?Qf.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Cn.getProvider(e),i=Cn.getProviderId(e),{caipAddress:s}=V.getAccountData(e)||{};this.setLoading(!0,e),s&&n?.disconnect&&await n.disconnect({provider:r,providerType:i}),Be.removeConnectedNamespace(e),Cn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),pe.removeConnectorId(e),V.resetAccount(e),V.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=V.state.activeChain,n=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!n)throw new Error("Adapter not found");const i=await n.connectWalletConnect(r);this.close(),this.setClientId(i?.clientId||null),Be.setConnectedNamespaces([...V.state.chains.keys()]),this.chainNamespaces.forEach(s=>{pe.setConnectorId($l.CONNECTOR_TYPE_WALLET_CONNECT,s)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:i,chain:s,caipNetwork:o,socialUri:a})=>{const c=V.state.activeChain,l=s||c,u=this.getAdapter(l);if(s&&s!==c&&!o){const g=this.getCaipNetworks().find(m=>m.chainNamespace===s);g&&this.setCaipNetwork(g)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:i,socialUri:a,chainId:o?.id||d?.id,rpcUrl:o?.rpcUrls?.default?.http?.[0]||d?.rpcUrls?.default?.http?.[0]});if(!h)return;Be.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ue.state.allAccounts,{accounts:p}=f?.length>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:i})=>{const s=V.state.activeChain,o=this.getAdapter(s);o?.reconnect&&(await o?.reconnect({id:e,info:n,type:r,provider:i,chainId:this.getCaipNetwork()?.id}),Be.addConnectedNamespace(s),this.syncConnectedWalletInfo(s))},disconnect:async e=>{const n=nNe(e);try{const r=await Promise.allSettled(n.map(async([s])=>this.disconnectNamespace(s)));kt.resetSend(),_e.resetWcConnection(),await Gd.clearSessions(),pe.setFilterByNamespace(void 0);const i=r.filter(s=>s.status==="rejected");if(i.length>0)throw new Error(i.map(s=>s.reason.message).join(", "));Be.deleteConnectedSocialProvider(),ut.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(V.state.activeChain)?.signMessage({message:e,address:Ue.state.address,provider:Cn.getProvider(V.state.activeChain)}))?.signature||"",sendTransaction:async e=>{const n=e.chainNamespace;if(Ht.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(V.state.activeChain),i=Cn.getProvider(n);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===je.CHAIN.EVM){const n=this.getAdapter(V.state.activeChain),r=Cn.getProvider(V.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");return(await n?.estimateGas({...e,provider:r,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:Ue.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:V.state.activeChain}),Ue.state.profileImage||!1),getEnsAddress:async e=>await tv.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(V.state.activeChain),r=this.getCaipNetwork(),i=this.getCaipAddress(),s=Cn.getProvider(V.state.activeChain);if(!r||!i)throw new Error("CaipNetwork or CaipAddress is undefined");return(await n?.writeContract({...e,caipNetwork:r,provider:s,caipAddress:i}))?.hash},parseUnits:(e,n)=>this.getAdapter(V.state.activeChain)?.parseUnits({value:e,decimals:n})??0n,formatUnits:(e,n)=>this.getAdapter(V.state.activeChain)?.formatUnits({value:e,decimals:n})??"0",getCapabilities:async e=>await this.getAdapter(V.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(V.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{const n=this.getAdapter(V.state.activeChain);return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(V.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ue.state.address||this.updateNativeBalance(Ue.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},_e.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Cn.getProviderId(V.state.activeChain)===$l.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=Cn.getProvider(n),s=Cn.getProviderId(n);if(e.chainNamespace===V.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:i,providerType:s});else if(this.setCaipNetwork(e),s===$l.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],i=n.accounts.map(s=>{const{chainId:o,chainNamespace:a}=El.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...r,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{const i=e?.find(s=>s.namespace===r);return i?(i.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[r]=i):n[r]=new $Ne({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Be.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Be.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(l=>l.id===s||l.caipNetworkId===s),a=V.state.activeChain===e,c=V.getAccountProp("address",e);if(o){const l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",i=>{this.setConnections(i,e)}),n.on("pendingTransactions",()=>{const i=Ue.state.address,s=V.state.activeCaipNetwork;!i||!s?.id||this.updateNativeBalance(i,s.id,s.chainNamespace)}),n.on("accountChanged",({address:i,chainId:s})=>{const o=V.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&V.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:V.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,s,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===je.CHAIN.EVM&&ge.isSafeApp()&&pe.setConnectorId(je.CONNECTOR_ID.SAFE,e);const n=pe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case je.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case je.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const n=this.getAdapter(e),r=pe.getConnectorId(e),i=this.getCaipNetwork(e),o=pe.getConnectors(e).find(a=>a.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const a=await n?.syncConnection({namespace:e,id:o.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});if(a){const c=await n?.getAccounts({namespace:e,id:o.id});c&&c.accounts.length>0?this.setAllAccounts(c.accounts,e):this.setAllAccounts([ge.createAccount(e,a.address,"eoa")],e),this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{const r=this.getAdapter(n),i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],s=V.state.activeCaipNetwork?.id,o=i.find(a=>{const{chainId:c}=El.parseCaipAddress(a);return c===s?.toString()})||i[0];if(o){const a=El.validateCaipAddress(o),{chainId:c,address:l}=El.parseCaipAddress(a);if(Cn.setProviderId(n,$l.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&V.state.activeCaipNetwork&&r?.namespace!==je.CHAIN.EVM){const u=r?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:V.state.activeCaipNetwork});Cn.setProvider(n,u)}else Cn.setProvider(n,this.universalProvider);pe.setConnectorId(je.CONNECTOR_ID.WALLET_CONNECT,n),Be.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:l,chainId:c,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await V.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){const n=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(r=>{const{address:i}=El.parseCaipAddress(r);return i}).filter((r,i,s)=>s.indexOf(r)===i);n&&this.setAllAccounts(n.map(r=>ge.createAccount(e,r,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:i}){Cn.setProviderId(i,e),Cn.setProvider(i,n),pe.setConnectorId(r,i)}async syncAllAccounts(e){const n=pe.getConnectorId(e);if(!n)return;const i=await this.getAdapter(e)?.getAccounts({namespace:e,id:n});i&&i.accounts.length>0&&this.setAllAccounts(i.accounts,e)}async syncAccount(e){const n=e.chainNamespace===V.state.activeChain,r=V.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=Be.getActiveNetworkProps(),c=s||a,l=V.state.activeCaipNetwork?.name===je.UNSUPPORTED_NETWORK_NAME,u=V.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let d=this.getCaipNetworks().find(p=>p.id.toString()===c.toString()),h=this.getCaipNetworks().find(p=>p.chainNamespace===o);if(!u&&!d&&!h){const p=this.getApprovedCaipNetworkIds()||[],g=p.find(w=>El.parseCaipNetworkId(w)?.chainId===c.toString()),m=p.find(w=>El.parseCaipNetworkId(w)?.chainNamespace===o);d=this.getCaipNetworks().find(w=>w.caipNetworkId===g),h=this.getCaipNetworks().find(w=>w.caipNetworkId===m||"deprecatedCaipNetworkId"in w&&w.deprecatedCaipNetworkId===m)}const f=d||h;f?.chainNamespace===V.state.activeChain?ae.state.enableNetworkSwitch&&!ae.state.allowUnsupportedChain&&V.state.activeCaipNetwork?.name===je.UNSUPPORTED_NETWORK_NAME?V.showUnsupportedChainUI():this.setCaipNetwork(f):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Ix.isLowerCaseMatch(i,Ue.state.address)||this.syncAccountInfo(i,f?.id,o),n?await this.syncBalance({address:i,chainId:f?.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:r?.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const i=this.getCaipAddress(r),s=n||i?.split(":")[1];if(!s)return;const o=`${r}:${s}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:s,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const i=r[0];this.setProfileName(i.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=pe.getConnectorId(e),r=Cn.getProviderId(e);if(r===$l.CONNECTOR_TYPE_ANNOUNCED||r===$l.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(s=>s.id===n);if(i){const{info:s,name:o,imageUrl:a}=i,c=a||this.getConnectorImage(i);this.setConnectedWalletInfo({name:o,icon:c,...s},e)}}}else if(r===$l.CONNECTOR_TYPE_WALLET_CONNECT){const i=Cn.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(n&&n===je.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(s=>s.id===je.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!vK.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const i=this.getAdapter(r),s=V.getCaipNetworkByNamespace(r,n);if(i){const o=await i.getBalance({address:e,chainId:n,caipNetwork:s,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){const e=iNe.createLogger((r,...i)=>{r&&this.handleAlertError(r),console.error(...i)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};ae.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await tNe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{_e.setUri(e)}),this.universalProvider.on("connect",_e.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),_e.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(i=>i.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}r?.id!==n?.id&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(tv.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ge.isCaipAddress(r[0])&&this.syncAccount(El.parseCaipAddress(r[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&ge.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ut.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Ff.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,i]=n??[],{message:s,alertErrorKey:o}=i??{};if(r&&s&&!this.reportedAlertErrors[r]){const a=Ff.ALERT_ERRORS[o];a&&(Uo.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&_e.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return Lt.open({...e,data:{swap:e.arguments}})}return Lt.open(e)}async close(){await this.injectModalUi(),Lt.close()}setLoading(e,n){Lt.setLoading(e,n)}async disconnect(e){await _e.disconnect(e)}getSIWX(){return ae.state.siwx}getError(){return""}getChainId(){return V.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Uo.open(Ff.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await V.switchActiveNetwork(n)}getWalletProvider(){return V.state.activeChain?Cn.state.providers[V.state.activeChain]:null}getWalletProviderType(){return Cn.getProviderId(V.state.activeChain)}subscribeProviders(e){return Cn.subscribeProviders(e)}getThemeMode(){return Ur.state.themeMode}getThemeVariables(){return Ur.state.themeVariables}setThemeMode(e){Ur.setThemeMode(e),pW(Ur.state.themeMode)}setTermsConditionsUrl(e){ae.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ae.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ur.setThemeVariables(e),INe(Ur.state.themeVariables)}subscribeTheme(e){return Ur.subscribe(e)}getWalletInfo(){return Ue.state.connectedWalletInfo}getAccount(e){const n=pe.getAuthConnector(e),r=V.getAccountData(e),i=V.state.activeChain,s=Be.getConnectedConnectorId(e||i);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ge.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&s===je.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Be.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||i],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const i=this.getAccount(n);i&&e(i)};n?V.subscribeChainProp("accountState",r,n):V.subscribe(r),pe.subscribe(r)}subscribeNetwork(e){return V.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e){return Ue.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ue.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){V.subscribeKey("activeCaipNetwork",e)}getState(){return Au.state}subscribeState(e){return Au.subscribe(e)}showErrorMessage(e){qn.showError(e)}showSuccessMessage(e){qn.showSuccess(e)}getEvent(){return{...ut.state}}subscribeEvents(e){return ut.subscribe(e)}replace(e){we.replace(e)}redirect(e){we.push(e)}popTransactionStack(e){we.popTransactionStack(e)}isOpen(){return Lt.state.open}isTransactionStackEmpty(){return we.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ae.setFeatures(e)}updateRemoteFeatures(e){ae.setRemoteFeatures(e)}updateOptions(e){const r={...ae.state||{},...e};ae.setOptions(r)}setConnectMethodsOrder(e){ae.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ae.setWalletFeaturesOrder(e)}setCollapseWallets(e){ae.setCollapseWallets(e)}setSocialsOrder(e){ae.setSocialsOrder(e)}getConnectMethodsOrder(){return mh.getConnectOrderMethod(ae.state.features,pe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(i=>i.id===r.id)||V.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===n)&&V.removeNetwork(e,n)}}let rM=!1;class mW extends DNe{async open(e){pe.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&_e.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!rM&&ge.isClient()){if(await me(()=>Promise.resolve().then(()=>LRe),void 0),await me(()=>Promise.resolve().then(()=>eMe),void 0),!document.querySelector("w3m-modal")){const n=document.createElement("w3m-modal");!ae.state.disableAppend&&!ae.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",n)}rM=!0}}}const BNe="1.7.8";function LNe(t){return new mW({...t,basic:!0,sdkVersion:`html-core-${BNe}`})}const UNe=Object.freeze(Object.defineProperty({__proto__:null,AppKit:mW,createAppKit:LNe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jNe={attribute:!0,type:String,converter:w2,reflect:!1,hasChanged:Tx},FNe=(t=jNe,e,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),r==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(n.name,t),r==="accessor"){const{name:o}=n;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(r==="setter"){const{name:o}=n;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+r)};function Q(t){return(e,n)=>typeof n=="object"?FNe(t,e,n):((r,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,r),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Te(t){return Q({...t,state:!0,attribute:!1})}const qNe=Ge`
  :host {
    display: flex;
    width: inherit;
    height: inherit;
  }
`;var Rs=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ii=class extends Le{render(){return this.style.cssText=`
      flex-direction: ${this.flexDirection};
      flex-wrap: ${this.flexWrap};
      flex-basis: ${this.flexBasis};
      flex-grow: ${this.flexGrow};
      flex-shrink: ${this.flexShrink};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&Er.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&Er.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&Er.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&Er.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&Er.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&Er.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&Er.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&Er.getSpacingStyles(this.margin,3)};
    `,Z`<slot></slot>`}};Ii.styles=[Nt,qNe];Rs([Q()],Ii.prototype,"flexDirection",void 0);Rs([Q()],Ii.prototype,"flexWrap",void 0);Rs([Q()],Ii.prototype,"flexBasis",void 0);Rs([Q()],Ii.prototype,"flexGrow",void 0);Rs([Q()],Ii.prototype,"flexShrink",void 0);Rs([Q()],Ii.prototype,"alignItems",void 0);Rs([Q()],Ii.prototype,"justifyContent",void 0);Rs([Q()],Ii.prototype,"columnGap",void 0);Rs([Q()],Ii.prototype,"rowGap",void 0);Rs([Q()],Ii.prototype,"gap",void 0);Rs([Q()],Ii.prototype,"padding",void 0);Rs([Q()],Ii.prototype,"margin",void 0);Ii=Rs([De("wui-flex")],Ii);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const We=t=>t??Fn;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const HNe=t=>t===null||typeof t!="object"&&typeof t!="function",zNe=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wW={ATTRIBUTE:1,CHILD:2},Nx=t=>(...e)=>({_$litDirective$:t,values:e});let yW=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tm=(t,e)=>{const n=t._$AN;if(n===void 0)return!1;for(const r of n)r._$AO?.(e,!1),Tm(r,e);return!0},b2=t=>{let e,n;do{if((e=t._$AM)===void 0)break;n=e._$AN,n.delete(t),t=e}while(n?.size===0)},bW=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(n===void 0)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),WNe(e)}};function KNe(t){this._$AN!==void 0?(b2(this),this._$AM=t,bW(this)):this._$AM=t}function VNe(t,e=!1,n=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(r))for(let s=n;s<r.length;s++)Tm(r[s],!1),b2(r[s]);else r!=null&&(Tm(r,!1),b2(r));else Tm(this,t)}const WNe=t=>{t.type==wW.CHILD&&(t._$AP??(t._$AP=VNe),t._$AQ??(t._$AQ=KNe))};class vW extends yW{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,n,r){super._$AT(e,n,r),bW(this),this.isConnected=e._$AU}_$AO(e,n=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),n&&(Tm(this,e),b2(this))}setValue(e){if(zNe(this._$Ct))this._$Ct._$AI(e,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=e,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class GNe{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class ZNe{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??(this.Y=new Promise(e=>this.Z=e))}resume(){this.Z?.(),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iM=t=>!HNe(t)&&typeof t.then=="function",sM=1073741823;class YNe extends vW{constructor(){super(...arguments),this._$Cwt=sM,this._$Cbt=[],this._$CK=new GNe(this),this._$CX=new ZNe}render(...e){return e.find(n=>!iM(n))??Gc}update(e,n){const r=this._$Cbt;let i=r.length;this._$Cbt=n;const s=this._$CK,o=this._$CX;this.isConnected||this.disconnected();for(let a=0;a<n.length&&!(a>this._$Cwt);a++){const c=n[a];if(!iM(c))return this._$Cwt=a,c;a<i&&c===r[a]||(this._$Cwt=sM,i=0,Promise.resolve(c).then(async l=>{for(;o.get();)await o.get();const u=s.deref();if(u!==void 0){const d=u._$Cbt.indexOf(c);d>-1&&d<u._$Cwt&&(u._$Cwt=d,u.setValue(l))}}))}return Gc}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const QNe=Nx(YNe);class JNe{constructor(){this.cache=new Map}set(e,n){this.cache.set(e,n)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const t5=new JNe,XNe=Ge`
  :host {
    display: flex;
    aspect-ratio: var(--local-aspect-ratio);
    color: var(--local-color);
    width: var(--local-width);
  }

  svg {
    width: inherit;
    height: inherit;
    object-fit: contain;
    object-position: center;
  }

  .fallback {
    width: var(--local-width);
    height: var(--local-height);
  }
`;var Cy=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const oM={add:async()=>(await me(async()=>{const{addSvg:t}=await Promise.resolve().then(()=>nMe);return{addSvg:t}},void 0)).addSvg,allWallets:async()=>(await me(async()=>{const{allWalletsSvg:t}=await Promise.resolve().then(()=>iMe);return{allWalletsSvg:t}},void 0)).allWalletsSvg,arrowBottomCircle:async()=>(await me(async()=>{const{arrowBottomCircleSvg:t}=await Promise.resolve().then(()=>oMe);return{arrowBottomCircleSvg:t}},void 0)).arrowBottomCircleSvg,appStore:async()=>(await me(async()=>{const{appStoreSvg:t}=await Promise.resolve().then(()=>cMe);return{appStoreSvg:t}},void 0)).appStoreSvg,apple:async()=>(await me(async()=>{const{appleSvg:t}=await Promise.resolve().then(()=>uMe);return{appleSvg:t}},void 0)).appleSvg,arrowBottom:async()=>(await me(async()=>{const{arrowBottomSvg:t}=await Promise.resolve().then(()=>hMe);return{arrowBottomSvg:t}},void 0)).arrowBottomSvg,arrowLeft:async()=>(await me(async()=>{const{arrowLeftSvg:t}=await Promise.resolve().then(()=>pMe);return{arrowLeftSvg:t}},void 0)).arrowLeftSvg,arrowRight:async()=>(await me(async()=>{const{arrowRightSvg:t}=await Promise.resolve().then(()=>mMe);return{arrowRightSvg:t}},void 0)).arrowRightSvg,arrowTop:async()=>(await me(async()=>{const{arrowTopSvg:t}=await Promise.resolve().then(()=>yMe);return{arrowTopSvg:t}},void 0)).arrowTopSvg,bank:async()=>(await me(async()=>{const{bankSvg:t}=await Promise.resolve().then(()=>vMe);return{bankSvg:t}},void 0)).bankSvg,browser:async()=>(await me(async()=>{const{browserSvg:t}=await Promise.resolve().then(()=>CMe);return{browserSvg:t}},void 0)).browserSvg,card:async()=>(await me(async()=>{const{cardSvg:t}=await Promise.resolve().then(()=>SMe);return{cardSvg:t}},void 0)).cardSvg,checkmark:async()=>(await me(async()=>{const{checkmarkSvg:t}=await Promise.resolve().then(()=>xMe);return{checkmarkSvg:t}},void 0)).checkmarkSvg,checkmarkBold:async()=>(await me(async()=>{const{checkmarkBoldSvg:t}=await Promise.resolve().then(()=>OMe);return{checkmarkBoldSvg:t}},void 0)).checkmarkBoldSvg,chevronBottom:async()=>(await me(async()=>{const{chevronBottomSvg:t}=await Promise.resolve().then(()=>TMe);return{chevronBottomSvg:t}},void 0)).chevronBottomSvg,chevronLeft:async()=>(await me(async()=>{const{chevronLeftSvg:t}=await Promise.resolve().then(()=>NMe);return{chevronLeftSvg:t}},void 0)).chevronLeftSvg,chevronRight:async()=>(await me(async()=>{const{chevronRightSvg:t}=await Promise.resolve().then(()=>RMe);return{chevronRightSvg:t}},void 0)).chevronRightSvg,chevronTop:async()=>(await me(async()=>{const{chevronTopSvg:t}=await Promise.resolve().then(()=>DMe);return{chevronTopSvg:t}},void 0)).chevronTopSvg,chromeStore:async()=>(await me(async()=>{const{chromeStoreSvg:t}=await Promise.resolve().then(()=>LMe);return{chromeStoreSvg:t}},void 0)).chromeStoreSvg,clock:async()=>(await me(async()=>{const{clockSvg:t}=await Promise.resolve().then(()=>jMe);return{clockSvg:t}},void 0)).clockSvg,close:async()=>(await me(async()=>{const{closeSvg:t}=await Promise.resolve().then(()=>qMe);return{closeSvg:t}},void 0)).closeSvg,compass:async()=>(await me(async()=>{const{compassSvg:t}=await Promise.resolve().then(()=>zMe);return{compassSvg:t}},void 0)).compassSvg,coinPlaceholder:async()=>(await me(async()=>{const{coinPlaceholderSvg:t}=await Promise.resolve().then(()=>VMe);return{coinPlaceholderSvg:t}},void 0)).coinPlaceholderSvg,copy:async()=>(await me(async()=>{const{copySvg:t}=await Promise.resolve().then(()=>GMe);return{copySvg:t}},void 0)).copySvg,cursor:async()=>(await me(async()=>{const{cursorSvg:t}=await Promise.resolve().then(()=>YMe);return{cursorSvg:t}},void 0)).cursorSvg,cursorTransparent:async()=>(await me(async()=>{const{cursorTransparentSvg:t}=await Promise.resolve().then(()=>JMe);return{cursorTransparentSvg:t}},void 0)).cursorTransparentSvg,desktop:async()=>(await me(async()=>{const{desktopSvg:t}=await Promise.resolve().then(()=>eDe);return{desktopSvg:t}},void 0)).desktopSvg,disconnect:async()=>(await me(async()=>{const{disconnectSvg:t}=await Promise.resolve().then(()=>nDe);return{disconnectSvg:t}},void 0)).disconnectSvg,discord:async()=>(await me(async()=>{const{discordSvg:t}=await Promise.resolve().then(()=>iDe);return{discordSvg:t}},void 0)).discordSvg,etherscan:async()=>(await me(async()=>{const{etherscanSvg:t}=await Promise.resolve().then(()=>oDe);return{etherscanSvg:t}},void 0)).etherscanSvg,extension:async()=>(await me(async()=>{const{extensionSvg:t}=await Promise.resolve().then(()=>cDe);return{extensionSvg:t}},void 0)).extensionSvg,externalLink:async()=>(await me(async()=>{const{externalLinkSvg:t}=await Promise.resolve().then(()=>uDe);return{externalLinkSvg:t}},void 0)).externalLinkSvg,facebook:async()=>(await me(async()=>{const{facebookSvg:t}=await Promise.resolve().then(()=>hDe);return{facebookSvg:t}},void 0)).facebookSvg,farcaster:async()=>(await me(async()=>{const{farcasterSvg:t}=await Promise.resolve().then(()=>pDe);return{farcasterSvg:t}},void 0)).farcasterSvg,filters:async()=>(await me(async()=>{const{filtersSvg:t}=await Promise.resolve().then(()=>mDe);return{filtersSvg:t}},void 0)).filtersSvg,github:async()=>(await me(async()=>{const{githubSvg:t}=await Promise.resolve().then(()=>yDe);return{githubSvg:t}},void 0)).githubSvg,google:async()=>(await me(async()=>{const{googleSvg:t}=await Promise.resolve().then(()=>vDe);return{googleSvg:t}},void 0)).googleSvg,helpCircle:async()=>(await me(async()=>{const{helpCircleSvg:t}=await Promise.resolve().then(()=>CDe);return{helpCircleSvg:t}},void 0)).helpCircleSvg,image:async()=>(await me(async()=>{const{imageSvg:t}=await Promise.resolve().then(()=>SDe);return{imageSvg:t}},void 0)).imageSvg,id:async()=>(await me(async()=>{const{idSvg:t}=await Promise.resolve().then(()=>xDe);return{idSvg:t}},void 0)).idSvg,infoCircle:async()=>(await me(async()=>{const{infoCircleSvg:t}=await Promise.resolve().then(()=>ODe);return{infoCircleSvg:t}},void 0)).infoCircleSvg,lightbulb:async()=>(await me(async()=>{const{lightbulbSvg:t}=await Promise.resolve().then(()=>TDe);return{lightbulbSvg:t}},void 0)).lightbulbSvg,mail:async()=>(await me(async()=>{const{mailSvg:t}=await Promise.resolve().then(()=>NDe);return{mailSvg:t}},void 0)).mailSvg,mobile:async()=>(await me(async()=>{const{mobileSvg:t}=await Promise.resolve().then(()=>RDe);return{mobileSvg:t}},void 0)).mobileSvg,more:async()=>(await me(async()=>{const{moreSvg:t}=await Promise.resolve().then(()=>DDe);return{moreSvg:t}},void 0)).moreSvg,networkPlaceholder:async()=>(await me(async()=>{const{networkPlaceholderSvg:t}=await Promise.resolve().then(()=>LDe);return{networkPlaceholderSvg:t}},void 0)).networkPlaceholderSvg,nftPlaceholder:async()=>(await me(async()=>{const{nftPlaceholderSvg:t}=await Promise.resolve().then(()=>jDe);return{nftPlaceholderSvg:t}},void 0)).nftPlaceholderSvg,off:async()=>(await me(async()=>{const{offSvg:t}=await Promise.resolve().then(()=>qDe);return{offSvg:t}},void 0)).offSvg,playStore:async()=>(await me(async()=>{const{playStoreSvg:t}=await Promise.resolve().then(()=>zDe);return{playStoreSvg:t}},void 0)).playStoreSvg,plus:async()=>(await me(async()=>{const{plusSvg:t}=await Promise.resolve().then(()=>VDe);return{plusSvg:t}},void 0)).plusSvg,qrCode:async()=>(await me(async()=>{const{qrCodeIcon:t}=await Promise.resolve().then(()=>GDe);return{qrCodeIcon:t}},void 0)).qrCodeIcon,recycleHorizontal:async()=>(await me(async()=>{const{recycleHorizontalSvg:t}=await Promise.resolve().then(()=>YDe);return{recycleHorizontalSvg:t}},void 0)).recycleHorizontalSvg,refresh:async()=>(await me(async()=>{const{refreshSvg:t}=await Promise.resolve().then(()=>JDe);return{refreshSvg:t}},void 0)).refreshSvg,search:async()=>(await me(async()=>{const{searchSvg:t}=await Promise.resolve().then(()=>eBe);return{searchSvg:t}},void 0)).searchSvg,send:async()=>(await me(async()=>{const{sendSvg:t}=await Promise.resolve().then(()=>nBe);return{sendSvg:t}},void 0)).sendSvg,swapHorizontal:async()=>(await me(async()=>{const{swapHorizontalSvg:t}=await Promise.resolve().then(()=>iBe);return{swapHorizontalSvg:t}},void 0)).swapHorizontalSvg,swapHorizontalMedium:async()=>(await me(async()=>{const{swapHorizontalMediumSvg:t}=await Promise.resolve().then(()=>oBe);return{swapHorizontalMediumSvg:t}},void 0)).swapHorizontalMediumSvg,swapHorizontalBold:async()=>(await me(async()=>{const{swapHorizontalBoldSvg:t}=await Promise.resolve().then(()=>cBe);return{swapHorizontalBoldSvg:t}},void 0)).swapHorizontalBoldSvg,swapHorizontalRoundedBold:async()=>(await me(async()=>{const{swapHorizontalRoundedBoldSvg:t}=await Promise.resolve().then(()=>uBe);return{swapHorizontalRoundedBoldSvg:t}},void 0)).swapHorizontalRoundedBoldSvg,swapVertical:async()=>(await me(async()=>{const{swapVerticalSvg:t}=await Promise.resolve().then(()=>hBe);return{swapVerticalSvg:t}},void 0)).swapVerticalSvg,telegram:async()=>(await me(async()=>{const{telegramSvg:t}=await Promise.resolve().then(()=>pBe);return{telegramSvg:t}},void 0)).telegramSvg,threeDots:async()=>(await me(async()=>{const{threeDotsSvg:t}=await Promise.resolve().then(()=>mBe);return{threeDotsSvg:t}},void 0)).threeDotsSvg,twitch:async()=>(await me(async()=>{const{twitchSvg:t}=await Promise.resolve().then(()=>yBe);return{twitchSvg:t}},void 0)).twitchSvg,twitter:async()=>(await me(async()=>{const{xSvg:t}=await Promise.resolve().then(()=>wM);return{xSvg:t}},void 0)).xSvg,twitterIcon:async()=>(await me(async()=>{const{twitterIconSvg:t}=await Promise.resolve().then(()=>EBe);return{twitterIconSvg:t}},void 0)).twitterIconSvg,verify:async()=>(await me(async()=>{const{verifySvg:t}=await Promise.resolve().then(()=>_Be);return{verifySvg:t}},void 0)).verifySvg,verifyFilled:async()=>(await me(async()=>{const{verifyFilledSvg:t}=await Promise.resolve().then(()=>ABe);return{verifyFilledSvg:t}},void 0)).verifyFilledSvg,wallet:async()=>(await me(async()=>{const{walletSvg:t}=await Promise.resolve().then(()=>IBe);return{walletSvg:t}},void 0)).walletSvg,walletConnect:async()=>(await me(async()=>{const{walletConnectSvg:t}=await Promise.resolve().then(()=>d5);return{walletConnectSvg:t}},void 0)).walletConnectSvg,walletConnectLightBrown:async()=>(await me(async()=>{const{walletConnectLightBrownSvg:t}=await Promise.resolve().then(()=>d5);return{walletConnectLightBrownSvg:t}},void 0)).walletConnectLightBrownSvg,walletConnectBrown:async()=>(await me(async()=>{const{walletConnectBrownSvg:t}=await Promise.resolve().then(()=>d5);return{walletConnectBrownSvg:t}},void 0)).walletConnectBrownSvg,walletPlaceholder:async()=>(await me(async()=>{const{walletPlaceholderSvg:t}=await Promise.resolve().then(()=>NBe);return{walletPlaceholderSvg:t}},void 0)).walletPlaceholderSvg,warningCircle:async()=>(await me(async()=>{const{warningCircleSvg:t}=await Promise.resolve().then(()=>RBe);return{warningCircleSvg:t}},void 0)).warningCircleSvg,x:async()=>(await me(async()=>{const{xSvg:t}=await Promise.resolve().then(()=>wM);return{xSvg:t}},void 0)).xSvg,info:async()=>(await me(async()=>{const{infoSvg:t}=await Promise.resolve().then(()=>DBe);return{infoSvg:t}},void 0)).infoSvg,exclamationTriangle:async()=>(await me(async()=>{const{exclamationTriangleSvg:t}=await Promise.resolve().then(()=>LBe);return{exclamationTriangleSvg:t}},void 0)).exclamationTriangleSvg,reown:async()=>(await me(async()=>{const{reownSvg:t}=await Promise.resolve().then(()=>jBe);return{reownSvg:t}},void 0)).reownSvg};async function e$e(t){if(t5.has(t))return t5.get(t);const n=(oM[t]??oM.copy)();return t5.set(t,n),n}let yh=class extends Le{constructor(){super(...arguments),this.size="md",this.name="copy",this.color="fg-300",this.aspectRatio="1 / 1"}render(){return this.style.cssText=`
      --local-color: ${`var(--wui-color-${this.color});`}
      --local-width: ${`var(--wui-icon-size-${this.size});`}
      --local-aspect-ratio: ${this.aspectRatio}
    `,Z`${QNe(e$e(this.name),Z`<div class="fallback"></div>`)}`}};yh.styles=[Nt,vy,XNe];Cy([Q()],yh.prototype,"size",void 0);Cy([Q()],yh.prototype,"name",void 0);Cy([Q()],yh.prototype,"color",void 0);Cy([Q()],yh.prototype,"aspectRatio",void 0);yh=Cy([De("wui-icon")],yh);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const EW=Nx(class extends yW{constructor(t){if(super(t),t.type!==wW.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return Gc}}),t$e=Ge`
  :host {
    display: inline-flex !important;
  }

  slot {
    width: 100%;
    display: inline-block;
    font-style: normal;
    font-family: var(--wui-font-family);
    font-feature-settings:
      'tnum' on,
      'lnum' on,
      'case' on;
    line-height: 130%;
    font-weight: var(--wui-font-weight-regular);
    overflow: inherit;
    text-overflow: inherit;
    text-align: var(--local-align);
    color: var(--local-color);
  }

  .wui-line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .wui-line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .wui-font-medium-400 {
    font-size: var(--wui-font-size-medium);
    font-weight: var(--wui-font-weight-light);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-medium-600 {
    font-size: var(--wui-font-size-medium);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-title-600 {
    font-size: var(--wui-font-size-title);
    letter-spacing: var(--wui-letter-spacing-title);
  }

  .wui-font-title-6-600 {
    font-size: var(--wui-font-size-title-6);
    letter-spacing: var(--wui-letter-spacing-title-6);
  }

  .wui-font-mini-700 {
    font-size: var(--wui-font-size-mini);
    letter-spacing: var(--wui-letter-spacing-mini);
    text-transform: uppercase;
  }

  .wui-font-large-500,
  .wui-font-large-600,
  .wui-font-large-700 {
    font-size: var(--wui-font-size-large);
    letter-spacing: var(--wui-letter-spacing-large);
  }

  .wui-font-2xl-500,
  .wui-font-2xl-600,
  .wui-font-2xl-700 {
    font-size: var(--wui-font-size-2xl);
    letter-spacing: var(--wui-letter-spacing-2xl);
  }

  .wui-font-paragraph-400,
  .wui-font-paragraph-500,
  .wui-font-paragraph-600,
  .wui-font-paragraph-700 {
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
  }

  .wui-font-small-400,
  .wui-font-small-500,
  .wui-font-small-600 {
    font-size: var(--wui-font-size-small);
    letter-spacing: var(--wui-letter-spacing-small);
  }

  .wui-font-tiny-400,
  .wui-font-tiny-500,
  .wui-font-tiny-600 {
    font-size: var(--wui-font-size-tiny);
    letter-spacing: var(--wui-letter-spacing-tiny);
  }

  .wui-font-micro-700,
  .wui-font-micro-600 {
    font-size: var(--wui-font-size-micro);
    letter-spacing: var(--wui-letter-spacing-micro);
    text-transform: uppercase;
  }

  .wui-font-tiny-400,
  .wui-font-small-400,
  .wui-font-medium-400,
  .wui-font-paragraph-400 {
    font-weight: var(--wui-font-weight-light);
  }

  .wui-font-large-700,
  .wui-font-paragraph-700,
  .wui-font-micro-700,
  .wui-font-mini-700 {
    font-weight: var(--wui-font-weight-bold);
  }

  .wui-font-medium-600,
  .wui-font-medium-title-600,
  .wui-font-title-6-600,
  .wui-font-large-600,
  .wui-font-paragraph-600,
  .wui-font-small-600,
  .wui-font-tiny-600,
  .wui-font-micro-600 {
    font-weight: var(--wui-font-weight-medium);
  }

  :host([disabled]) {
    opacity: 0.4;
  }
`;var _y=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let bh=class extends Le{constructor(){super(...arguments),this.variant="paragraph-500",this.color="fg-300",this.align="left",this.lineClamp=void 0}render(){const e={[`wui-font-${this.variant}`]:!0,[`wui-color-${this.color}`]:!0,[`wui-line-clamp-${this.lineClamp}`]:!!this.lineClamp};return this.style.cssText=`
      --local-align: ${this.align};
      --local-color: var(--wui-color-${this.color});
    `,Z`<slot class=${EW(e)}></slot>`}};bh.styles=[Nt,t$e];_y([Q()],bh.prototype,"variant",void 0);_y([Q()],bh.prototype,"color",void 0);_y([Q()],bh.prototype,"align",void 0);_y([Q()],bh.prototype,"lineClamp",void 0);bh=_y([De("wui-text")],bh);const n$e=Ge`
  :host {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    background-color: var(--wui-color-gray-glass-020);
    border-radius: var(--local-border-radius);
    border: var(--local-border);
    box-sizing: content-box;
    width: var(--local-size);
    height: var(--local-size);
    min-height: var(--local-size);
    min-width: var(--local-size);
  }

  @supports (background: color-mix(in srgb, white 50%, black)) {
    :host {
      background-color: color-mix(in srgb, var(--local-bg-value) var(--local-bg-mix), transparent);
    }
  }
`;var tl=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Zo=class extends Le{constructor(){super(...arguments),this.size="md",this.backgroundColor="accent-100",this.iconColor="accent-100",this.background="transparent",this.border=!1,this.borderColor="wui-color-bg-125",this.icon="copy"}render(){const e=this.iconSize||this.size,n=this.size==="lg",r=this.size==="xl",i=n?"12%":"16%",s=n?"xxs":r?"s":"3xl",o=this.background==="gray",a=this.background==="opaque",c=this.backgroundColor==="accent-100"&&a||this.backgroundColor==="success-100"&&a||this.backgroundColor==="error-100"&&a||this.backgroundColor==="inverse-100"&&a;let l=`var(--wui-color-${this.backgroundColor})`;return c?l=`var(--wui-icon-box-bg-${this.backgroundColor})`:o&&(l=`var(--wui-color-gray-${this.backgroundColor})`),this.style.cssText=`
       --local-bg-value: ${l};
       --local-bg-mix: ${c||o?"100%":i};
       --local-border-radius: var(--wui-border-radius-${s});
       --local-size: var(--wui-icon-box-size-${this.size});
       --local-border: ${this.borderColor==="wui-color-bg-125"?"2px":"1px"} solid ${this.border?`var(--${this.borderColor})`:"transparent"}
   `,Z` <wui-icon color=${this.iconColor} size=${e} name=${this.icon}></wui-icon> `}};Zo.styles=[Nt,Yr,n$e];tl([Q()],Zo.prototype,"size",void 0);tl([Q()],Zo.prototype,"backgroundColor",void 0);tl([Q()],Zo.prototype,"iconColor",void 0);tl([Q()],Zo.prototype,"iconSize",void 0);tl([Q()],Zo.prototype,"background",void 0);tl([Q({type:Boolean})],Zo.prototype,"border",void 0);tl([Q()],Zo.prototype,"borderColor",void 0);tl([Q()],Zo.prototype,"icon",void 0);Zo=tl([De("wui-icon-box")],Zo);const r$e=Ge`
  :host {
    display: block;
    width: var(--local-width);
    height: var(--local-height);
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    border-radius: inherit;
  }
`;var XE=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Rg=class extends Le{constructor(){super(...arguments),this.src="./path/to/image.jpg",this.alt="Image",this.size=void 0}render(){return this.style.cssText=`
      --local-width: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      --local-height: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      `,Z`<img src=${this.src} alt=${this.alt} @error=${this.handleImageError} />`}handleImageError(){this.dispatchEvent(new CustomEvent("onLoadError",{bubbles:!0,composed:!0}))}};Rg.styles=[Nt,vy,r$e];XE([Q()],Rg.prototype,"src",void 0);XE([Q()],Rg.prototype,"alt",void 0);XE([Q()],Rg.prototype,"size",void 0);Rg=XE([De("wui-image")],Rg);const i$e=Ge`
  :host {
    position: relative;
    background-color: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    width: var(--local-size);
    height: var(--local-size);
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host > wui-flex {
    overflow: hidden;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host([name='Extension'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  :host([data-wallet-icon='allWallets']) {
    background-color: var(--wui-all-wallets-bg-100);
  }

  :host([data-wallet-icon='allWallets'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  wui-icon[data-parent-size='inherit'] {
    width: 75%;
    height: 75%;
    align-items: center;
  }

  wui-icon[data-parent-size='sm'] {
    width: 18px;
    height: 18px;
  }

  wui-icon[data-parent-size='md'] {
    width: 24px;
    height: 24px;
  }

  wui-icon[data-parent-size='lg'] {
    width: 42px;
    height: 42px;
  }

  wui-icon[data-parent-size='full'] {
    width: 100%;
    height: 100%;
  }

  :host > wui-icon-box {
    position: absolute;
    overflow: hidden;
    right: -1px;
    bottom: -2px;
    z-index: 1;
    border: 2px solid var(--wui-color-bg-150, #1e1f1f);
    padding: 1px;
  }
`;var zh=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Zc=class extends Le{constructor(){super(...arguments),this.size="md",this.name="",this.installed=!1,this.badgeSize="xs"}render(){let e="xxs";return this.size==="lg"?e="m":this.size==="md"?e="xs":e="xxs",this.style.cssText=`
       --local-border-radius: var(--wui-border-radius-${e});
       --local-size: var(--wui-wallet-image-size-${this.size});
   `,this.walletIcon&&(this.dataset.walletIcon=this.walletIcon),Z`
      <wui-flex justifyContent="center" alignItems="center"> ${this.templateVisual()} </wui-flex>
    `}templateVisual(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt=${this.name}></wui-image>`:this.walletIcon?Z`<wui-icon
        data-parent-size="md"
        size="md"
        color="inherit"
        name=${this.walletIcon}
      ></wui-icon>`:Z`<wui-icon
      data-parent-size=${this.size}
      size="inherit"
      color="inherit"
      name="walletPlaceholder"
    ></wui-icon>`}};Zc.styles=[Yr,Nt,i$e];zh([Q()],Zc.prototype,"size",void 0);zh([Q()],Zc.prototype,"name",void 0);zh([Q()],Zc.prototype,"imageSrc",void 0);zh([Q()],Zc.prototype,"walletIcon",void 0);zh([Q({type:Boolean})],Zc.prototype,"installed",void 0);zh([Q()],Zc.prototype,"badgeSize",void 0);Zc=zh([De("wui-wallet-image")],Zc);const s$e=Ge`
  :host {
    position: relative;
    border-radius: var(--wui-border-radius-xxs);
    width: 40px;
    height: 40px;
    overflow: hidden;
    background: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--wui-spacing-4xs);
    padding: 3.75px !important;
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host > wui-wallet-image {
    width: 14px;
    height: 14px;
    border-radius: var(--wui-border-radius-5xs);
  }

  :host > wui-flex {
    padding: 2px;
    position: fixed;
    overflow: hidden;
    left: 34px;
    bottom: 8px;
    background: var(--dark-background-150, #1e1f1f);
    border-radius: 50%;
    z-index: 2;
    display: flex;
  }
`;var CW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const n5=4;let v2=class extends Le{constructor(){super(...arguments),this.walletImages=[]}render(){const e=this.walletImages.length<n5;return Z`${this.walletImages.slice(0,n5).map(({src:n,walletName:r})=>Z`
            <wui-wallet-image
              size="inherit"
              imageSrc=${n}
              name=${We(r)}
            ></wui-wallet-image>
          `)}
      ${e?[...Array(n5-this.walletImages.length)].map(()=>Z` <wui-wallet-image size="inherit" name=""></wui-wallet-image>`):null}
      <wui-flex>
        <wui-icon-box
          size="xxs"
          iconSize="xxs"
          iconcolor="success-100"
          backgroundcolor="success-100"
          icon="checkmark"
          background="opaque"
        ></wui-icon-box>
      </wui-flex>`}};v2.styles=[Nt,s$e];CW([Q({type:Array})],v2.prototype,"walletImages",void 0);v2=CW([De("wui-all-wallets-image")],v2);const o$e=Ge`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    height: var(--wui-spacing-m);
    padding: 0 var(--wui-spacing-3xs) !important;
    border-radius: var(--wui-border-radius-5xs);
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host > wui-text {
    transform: translateY(5%);
  }

  :host([data-variant='main']) {
    background-color: var(--wui-color-accent-glass-015);
    color: var(--wui-color-accent-100);
  }

  :host([data-variant='shade']) {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-200);
  }

  :host([data-variant='success']) {
    background-color: var(--wui-icon-box-bg-success-100);
    color: var(--wui-color-success-100);
  }

  :host([data-variant='error']) {
    background-color: var(--wui-icon-box-bg-error-100);
    color: var(--wui-color-error-100);
  }

  :host([data-size='lg']) {
    padding: 11px 5px !important;
  }

  :host([data-size='lg']) > wui-text {
    transform: translateY(2%);
  }
`;var $x=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let _w=class extends Le{constructor(){super(...arguments),this.variant="main",this.size="lg"}render(){this.dataset.variant=this.variant,this.dataset.size=this.size;const e=this.size==="md"?"mini-700":"micro-700";return Z`
      <wui-text data-variant=${this.variant} variant=${e} color="inherit">
        <slot></slot>
      </wui-text>
    `}};_w.styles=[Nt,o$e];$x([Q()],_w.prototype,"variant",void 0);$x([Q()],_w.prototype,"size",void 0);_w=$x([De("wui-tag")],_w);const a$e=Ge`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 7px var(--wui-spacing-l) 7px var(--wui-spacing-xs);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-100);
  }

  button > wui-text:nth-child(2) {
    display: flex;
    flex: 1;
  }

  button:disabled {
    background-color: var(--wui-color-gray-glass-015);
    color: var(--wui-color-gray-glass-015);
  }

  button:disabled > wui-tag {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-300);
  }

  wui-icon {
    color: var(--wui-color-fg-200) !important;
  }
`;var ts=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let ci=class extends Le{constructor(){super(...arguments),this.walletImages=[],this.imageSrc="",this.name="",this.tabIdx=void 0,this.installed=!1,this.disabled=!1,this.showAllWallets=!1,this.loading=!1,this.loadingSpinnerColor="accent-100"}render(){return Z`
      <button ?disabled=${this.disabled} tabindex=${We(this.tabIdx)}>
        ${this.templateAllWallets()} ${this.templateWalletImage()}
        <wui-text variant="paragraph-500" color="inherit">${this.name}</wui-text>
        ${this.templateStatus()}
      </button>
    `}templateAllWallets(){return this.showAllWallets&&this.imageSrc?Z` <wui-all-wallets-image .imageeSrc=${this.imageSrc}> </wui-all-wallets-image> `:this.showAllWallets&&this.walletIcon?Z` <wui-wallet-image .walletIcon=${this.walletIcon} size="sm"> </wui-wallet-image> `:null}templateWalletImage(){return!this.showAllWallets&&this.imageSrc?Z`<wui-wallet-image
        size="sm"
        imageSrc=${this.imageSrc}
        name=${this.name}
        .installed=${this.installed}
      ></wui-wallet-image>`:!this.showAllWallets&&!this.imageSrc?Z`<wui-wallet-image size="sm" name=${this.name}></wui-wallet-image>`:null}templateStatus(){return this.loading?Z`<wui-loading-spinner
        size="lg"
        color=${this.loadingSpinnerColor}
      ></wui-loading-spinner>`:this.tagLabel&&this.tagVariant?Z`<wui-tag variant=${this.tagVariant}>${this.tagLabel}</wui-tag>`:this.icon?Z`<wui-icon color="inherit" size="sm" name=${this.icon}></wui-icon>`:null}};ci.styles=[Nt,Yr,a$e];ts([Q({type:Array})],ci.prototype,"walletImages",void 0);ts([Q()],ci.prototype,"imageSrc",void 0);ts([Q()],ci.prototype,"name",void 0);ts([Q()],ci.prototype,"tagLabel",void 0);ts([Q()],ci.prototype,"tagVariant",void 0);ts([Q()],ci.prototype,"icon",void 0);ts([Q()],ci.prototype,"walletIcon",void 0);ts([Q()],ci.prototype,"tabIdx",void 0);ts([Q({type:Boolean})],ci.prototype,"installed",void 0);ts([Q({type:Boolean})],ci.prototype,"disabled",void 0);ts([Q({type:Boolean})],ci.prototype,"showAllWallets",void 0);ts([Q({type:Boolean})],ci.prototype,"loading",void 0);ts([Q({type:String})],ci.prototype,"loadingSpinnerColor",void 0);ci=ts([De("wui-list-wallet")],ci);var l0=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let vh=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.count=ye.state.count,this.filteredCount=ye.state.filteredWallets.length,this.isFetchingRecommendedWallets=ye.state.isFetchingRecommendedWallets,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e),ye.subscribeKey("count",e=>this.count=e),ye.subscribeKey("filteredWallets",e=>this.filteredCount=e.length),ye.subscribeKey("isFetchingRecommendedWallets",e=>this.isFetchingRecommendedWallets=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.find(c=>c.id==="walletConnect"),{allWallets:n}=ae.state;if(!e||n==="HIDE"||n==="ONLY_MOBILE"&&!ge.isMobile())return null;const r=ye.state.featured.length,i=this.count+r,s=i<10?i:Math.floor(i/10)*10,o=this.filteredCount>0?this.filteredCount:s;let a=`${o}`;return this.filteredCount>0?a=`${this.filteredCount}`:o<i&&(a=`${o}+`),Z`
      <wui-list-wallet
        name="All Wallets"
        walletIcon="allWallets"
        showAllWallets
        @click=${this.onAllWallets.bind(this)}
        tagLabel=${a}
        tagVariant="shade"
        data-testid="all-wallets"
        tabIdx=${We(this.tabIdx)}
        .loading=${this.isFetchingRecommendedWallets}
        loadingSpinnerColor=${this.isFetchingRecommendedWallets?"fg-300":"accent-100"}
      ></wui-list-wallet>
    `}onAllWallets(){ut.sendEvent({type:"track",event:"CLICK_ALL_WALLETS"}),we.push("AllWallets")}};l0([Q()],vh.prototype,"tabIdx",void 0);l0([Te()],vh.prototype,"connectors",void 0);l0([Te()],vh.prototype,"count",void 0);l0([Te()],vh.prototype,"filteredCount",void 0);l0([Te()],vh.prototype,"isFetchingRecommendedWallets",void 0);vh=l0([De("w3m-all-wallets-widget")],vh);var Rx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let E2=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(n=>n.type==="ANNOUNCED");return e?.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.filter(zc.showConnector).map(n=>Z`
              <wui-list-wallet
                imageSrc=${We(ir.getConnectorImage(n))}
                name=${n.name??"Unknown"}
                @click=${()=>this.onConnector(n)}
                tagVariant="success"
                tagLabel="installed"
                data-testid=${`wallet-selector-${n.id}`}
                .installed=${!0}
                tabIdx=${We(this.tabIdx)}
              >
              </wui-list-wallet>
            `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){e.id==="walletConnect"?ge.isMobile()?we.push("AllWallets"):we.push("ConnectingWalletConnect"):we.push("ConnectingExternal",{connector:e})}};Rx([Q()],E2.prototype,"tabIdx",void 0);Rx([Te()],E2.prototype,"connectors",void 0);E2=Rx([De("w3m-connect-announced-widget")],E2);var e3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Sw=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.loading=!1,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e)),ge.isTelegram()&&ge.isIos()&&(this.loading=!_e.state.wcUri,this.unsubscribe.push(_e.subscribeKey("wcUri",e=>this.loading=!e)))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{customWallets:e}=ae.state;if(!e?.length)return this.style.cssText="display: none",null;const n=this.filterOutDuplicateWallets(e);return Z`<wui-flex flexDirection="column" gap="xs">
      ${n.map(r=>Z`
          <wui-list-wallet
            imageSrc=${We(ir.getWalletImage(r))}
            name=${r.name??"Unknown"}
            @click=${()=>this.onConnectWallet(r)}
            data-testid=${`wallet-selector-${r.id}`}
            tabIdx=${We(this.tabIdx)}
            ?loading=${this.loading}
          >
          </wui-list-wallet>
        `)}
    </wui-flex>`}filterOutDuplicateWallets(e){const n=Be.getRecentWallets(),r=this.connectors.map(a=>a.info?.rdns).filter(Boolean),i=n.map(a=>a.rdns).filter(Boolean),s=r.concat(i);if(s.includes("io.metamask.mobile")&&ge.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return e.filter(a=>!s.includes(String(a?.rdns)))}onConnectWallet(e){this.loading||we.push("ConnectingWalletConnect",{wallet:e})}};e3([Q()],Sw.prototype,"tabIdx",void 0);e3([Te()],Sw.prototype,"connectors",void 0);e3([Te()],Sw.prototype,"loading",void 0);Sw=e3([De("w3m-connect-custom-widget")],Sw);var Mx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let C2=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const r=this.connectors.filter(i=>i.type==="EXTERNAL").filter(zc.showConnector).filter(i=>i.id!==je.CONNECTOR_ID.COINBASE_SDK);return r?.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${r.map(i=>Z`
            <wui-list-wallet
              imageSrc=${We(ir.getConnectorImage(i))}
              .installed=${!0}
              name=${i.name??"Unknown"}
              data-testid=${`wallet-selector-external-${i.id}`}
              @click=${()=>this.onConnector(i)}
              tabIdx=${We(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){we.push("ConnectingExternal",{connector:e})}};Mx([Q()],C2.prototype,"tabIdx",void 0);Mx([Te()],C2.prototype,"connectors",void 0);C2=Mx([De("w3m-connect-external-widget")],C2);var Dx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let _2=class extends Le{constructor(){super(...arguments),this.tabIdx=void 0,this.wallets=[]}render(){return this.wallets.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${this.wallets.map(e=>Z`
            <wui-list-wallet
              data-testid=${`wallet-selector-featured-${e.id}`}
              imageSrc=${We(ir.getWalletImage(e))}
              name=${e.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tabIdx=${We(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){pe.selectWalletConnector(e)}};Dx([Q()],_2.prototype,"tabIdx",void 0);Dx([Q()],_2.prototype,"wallets",void 0);_2=Dx([De("w3m-connect-featured-widget")],_2);var Bx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let S2=class extends Le{constructor(){super(...arguments),this.tabIdx=void 0,this.connectors=[]}render(){const e=this.connectors.filter(zc.showConnector);return e.length===0?(this.style.cssText="display: none",null):Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(n=>Z`
            <wui-list-wallet
              imageSrc=${We(ir.getConnectorImage(n))}
              .installed=${!0}
              name=${n.name??"Unknown"}
              tagVariant="success"
              tagLabel="installed"
              data-testid=${`wallet-selector-${n.id}`}
              @click=${()=>this.onConnector(n)}
              tabIdx=${We(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnector(e){pe.setActiveConnector(e),we.push("ConnectingExternal",{connector:e})}};Bx([Q()],S2.prototype,"tabIdx",void 0);Bx([Q()],S2.prototype,"connectors",void 0);S2=Bx([De("w3m-connect-injected-widget")],S2);var Lx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let A2=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(n=>n.type==="MULTI_CHAIN"&&n.name!=="WalletConnect");return e?.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(n=>Z`
            <wui-list-wallet
              imageSrc=${We(ir.getConnectorImage(n))}
              .installed=${!0}
              name=${n.name??"Unknown"}
              tagVariant="shade"
              tagLabel="multichain"
              data-testid=${`wallet-selector-${n.id}`}
              @click=${()=>this.onConnector(n)}
              tabIdx=${We(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){pe.setActiveConnector(e),we.push("ConnectingMultiChain")}};Lx([Q()],A2.prototype,"tabIdx",void 0);Lx([Te()],A2.prototype,"connectors",void 0);A2=Lx([De("w3m-connect-multi-chain-widget")],A2);var t3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Aw=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.loading=!1,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e)),ge.isTelegram()&&ge.isIos()&&(this.loading=!_e.state.wcUri,this.unsubscribe.push(_e.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const n=Be.getRecentWallets().filter(r=>!mh.isExcluded(r)).filter(r=>!this.hasWalletConnector(r)).filter(r=>this.isWalletCompatibleWithCurrentChain(r));return n.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${n.map(r=>Z`
            <wui-list-wallet
              imageSrc=${We(ir.getWalletImage(r))}
              name=${r.name??"Unknown"}
              @click=${()=>this.onConnectWallet(r)}
              tagLabel="recent"
              tagVariant="shade"
              tabIdx=${We(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){this.loading||pe.selectWalletConnector(e)}hasWalletConnector(e){return this.connectors.some(n=>n.id===e.id||n.name===e.name)}isWalletCompatibleWithCurrentChain(e){const n=V.state.activeChain;return n&&e.chains?e.chains.some(r=>{const i=r.split(":")[0];return n===i}):!0}};t3([Q()],Aw.prototype,"tabIdx",void 0);t3([Te()],Aw.prototype,"connectors",void 0);t3([Te()],Aw.prototype,"loading",void 0);Aw=t3([De("w3m-connect-recent-widget")],Aw);var n3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let xw=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.wallets=[],this.loading=!1,ge.isTelegram()&&ge.isIos()&&(this.loading=!_e.state.wcUri,this.unsubscribe.push(_e.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const{connectors:e}=pe.state,{customWallets:n,featuredWalletIds:r}=ae.state,i=Be.getRecentWallets(),s=e.find(d=>d.id==="walletConnect"),a=e.filter(d=>d.type==="INJECTED"||d.type==="ANNOUNCED"||d.type==="MULTI_CHAIN").filter(d=>d.name!=="Browser Wallet");if(!s)return null;if(r||n||!this.wallets.length)return this.style.cssText="display: none",null;const c=a.length+i.length,l=Math.max(0,2-c),u=mh.filterOutDuplicateWallets(this.wallets).slice(0,l);return u.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${u.map(d=>Z`
            <wui-list-wallet
              imageSrc=${We(ir.getWalletImage(d))}
              name=${d?.name??"Unknown"}
              @click=${()=>this.onConnectWallet(d)}
              tabIdx=${We(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){if(this.loading)return;const n=pe.getConnector(e.id,e.rdns);n?we.push("ConnectingExternal",{connector:n}):we.push("ConnectingWalletConnect",{wallet:e})}};n3([Q()],xw.prototype,"tabIdx",void 0);n3([Q()],xw.prototype,"wallets",void 0);n3([Te()],xw.prototype,"loading",void 0);xw=n3([De("w3m-connect-recommended-widget")],xw);var r3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Iw=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.connectorImages=Yi.state.connectorImages,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e),Yi.subscribeKey("connectorImages",e=>this.connectorImages=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(ge.isMobile())return this.style.cssText="display: none",null;const e=this.connectors.find(r=>r.id==="walletConnect");if(!e)return this.style.cssText="display: none",null;const n=e.imageUrl||this.connectorImages[e?.imageId??""];return Z`
      <wui-list-wallet
        imageSrc=${We(n)}
        name=${e.name??"Unknown"}
        @click=${()=>this.onConnector(e)}
        tagLabel="qr code"
        tagVariant="main"
        tabIdx=${We(this.tabIdx)}
        data-testid="wallet-selector-walletconnect"
      >
      </wui-list-wallet>
    `}onConnector(e){pe.setActiveConnector(e),we.push("ConnectingWalletConnect")}};r3([Q()],Iw.prototype,"tabIdx",void 0);r3([Te()],Iw.prototype,"connectors",void 0);r3([Te()],Iw.prototype,"connectorImages",void 0);Iw=r3([De("w3m-connect-walletconnect-widget")],Iw);const c$e=Ge`
  :host {
    margin-top: var(--wui-spacing-3xs);
  }
  wui-separator {
    margin: var(--wui-spacing-m) calc(var(--wui-spacing-m) * -1) var(--wui-spacing-xs)
      calc(var(--wui-spacing-m) * -1);
    width: calc(100% + var(--wui-spacing-s) * 2);
  }
`;var Sy=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Eh=class extends Le{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=pe.state.connectors,this.recommended=ye.state.recommended,this.featured=ye.state.featured,this.unsubscribe.push(pe.subscribeKey("connectors",e=>this.connectors=e),ye.subscribeKey("recommended",e=>this.recommended=e),ye.subscribeKey("featured",e=>this.featured=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      <wui-flex flexDirection="column" gap="xs"> ${this.connectorListTemplate()} </wui-flex>
    `}connectorListTemplate(){const{custom:e,recent:n,announced:r,injected:i,multiChain:s,recommended:o,featured:a,external:c}=zc.getConnectorsByType(this.connectors,this.recommended,this.featured);return zc.getConnectorTypeOrder({custom:e,recent:n,announced:r,injected:i,multiChain:s,recommended:o,featured:a,external:c}).map(u=>{switch(u){case"injected":return Z`
            ${s.length?Z`<w3m-connect-multi-chain-widget
                  tabIdx=${We(this.tabIdx)}
                ></w3m-connect-multi-chain-widget>`:null}
            ${r.length?Z`<w3m-connect-announced-widget
                  tabIdx=${We(this.tabIdx)}
                ></w3m-connect-announced-widget>`:null}
            ${i.length?Z`<w3m-connect-injected-widget
                  .connectors=${i}
                  tabIdx=${We(this.tabIdx)}
                ></w3m-connect-injected-widget>`:null}
          `;case"walletConnect":return Z`<w3m-connect-walletconnect-widget
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-walletconnect-widget>`;case"recent":return Z`<w3m-connect-recent-widget
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-recent-widget>`;case"featured":return Z`<w3m-connect-featured-widget
            .wallets=${a}
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-featured-widget>`;case"custom":return Z`<w3m-connect-custom-widget
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-custom-widget>`;case"external":return Z`<w3m-connect-external-widget
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-external-widget>`;case"recommended":return Z`<w3m-connect-recommended-widget
            .wallets=${o}
            tabIdx=${We(this.tabIdx)}
          ></w3m-connect-recommended-widget>`;default:return console.warn(`Unknown connector type: ${u}`),null}})}};Eh.styles=c$e;Sy([Q()],Eh.prototype,"tabIdx",void 0);Sy([Te()],Eh.prototype,"connectors",void 0);Sy([Te()],Eh.prototype,"recommended",void 0);Sy([Te()],Eh.prototype,"featured",void 0);Eh=Sy([De("w3m-connector-list")],Eh);const l$e=Ge`
  :host {
    display: inline-flex;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-3xl);
    padding: var(--wui-spacing-3xs);
    position: relative;
    height: 36px;
    min-height: 36px;
    overflow: hidden;
  }

  :host::before {
    content: '';
    position: absolute;
    pointer-events: none;
    top: 4px;
    left: 4px;
    display: block;
    width: var(--local-tab-width);
    height: 28px;
    border-radius: var(--wui-border-radius-3xl);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transform: translateX(calc(var(--local-tab) * var(--local-tab-width)));
    transition: transform var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color, opacity;
  }

  :host([data-type='flex'])::before {
    left: 3px;
    transform: translateX(calc((var(--local-tab) * 34px) + (var(--local-tab) * 4px)));
  }

  :host([data-type='flex']) {
    display: flex;
    padding: 0px 0px 0px 12px;
    gap: 4px;
  }

  :host([data-type='flex']) > button > wui-text {
    position: absolute;
    left: 18px;
    opacity: 0;
  }

  button[data-active='true'] > wui-icon,
  button[data-active='true'] > wui-text {
    color: var(--wui-color-fg-100);
  }

  button[data-active='false'] > wui-icon,
  button[data-active='false'] > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='true']:disabled,
  button[data-active='false']:disabled {
    background-color: transparent;
    opacity: 0.5;
    cursor: not-allowed;
  }

  button[data-active='true']:disabled > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='false']:disabled > wui-text {
    color: var(--wui-color-fg-300);
  }

  button > wui-icon,
  button > wui-text {
    pointer-events: none;
    transition: color var(--wui-e ase-out-power-1) var(--wui-duration-md);
    will-change: color;
  }

  button {
    width: var(--local-tab-width);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
  }

  :host([data-type='flex']) > button {
    width: 34px;
    position: relative;
    display: flex;
    justify-content: flex-start;
  }

  button:hover:enabled,
  button:active:enabled {
    background-color: transparent !important;
  }

  button:hover:enabled > wui-icon,
  button:active:enabled > wui-icon {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button:hover:enabled > wui-text,
  button:active:enabled > wui-text {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button {
    border-radius: var(--wui-border-radius-3xl);
  }
`;var zu=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let qa=class extends Le{constructor(){super(...arguments),this.tabs=[],this.onTabChange=()=>null,this.buttons=[],this.disabled=!1,this.localTabWidth="100px",this.activeTab=0,this.isDense=!1}render(){return this.isDense=this.tabs.length>3,this.style.cssText=`
      --local-tab: ${this.activeTab};
      --local-tab-width: ${this.localTabWidth};
    `,this.dataset.type=this.isDense?"flex":"block",this.tabs.map((e,n)=>{const r=n===this.activeTab;return Z`
        <button
          ?disabled=${this.disabled}
          @click=${()=>this.onTabClick(n)}
          data-active=${r}
          data-testid="tab-${e.label?.toLowerCase()}"
        >
          ${this.iconTemplate(e)}
          <wui-text variant="small-600" color="inherit"> ${e.label} </wui-text>
        </button>
      `})}firstUpdated(){this.shadowRoot&&this.isDense&&(this.buttons=[...this.shadowRoot.querySelectorAll("button")],setTimeout(()=>{this.animateTabs(0,!0)},0))}iconTemplate(e){return e.icon?Z`<wui-icon size="xs" color="inherit" name=${e.icon}></wui-icon>`:null}onTabClick(e){this.buttons&&this.animateTabs(e,!1),this.activeTab=e,this.onTabChange(e)}animateTabs(e,n){const r=this.buttons[this.activeTab],i=this.buttons[e],s=r?.querySelector("wui-text"),o=i?.querySelector("wui-text"),a=i?.getBoundingClientRect(),c=o?.getBoundingClientRect();r&&s&&!n&&e!==this.activeTab&&(s.animate([{opacity:0}],{duration:50,easing:"ease",fill:"forwards"}),r.animate([{width:"34px"}],{duration:500,easing:"ease",fill:"forwards"})),i&&a&&c&&o&&(e!==this.activeTab||n)&&(this.localTabWidth=`${Math.round(a.width+c.width)+6}px`,i.animate([{width:`${a.width+c.width}px`}],{duration:n?0:500,fill:"forwards",easing:"ease"}),o.animate([{opacity:1}],{duration:n?0:125,delay:n?0:200,fill:"forwards",easing:"ease"}))}};qa.styles=[Nt,Yr,l$e];zu([Q({type:Array})],qa.prototype,"tabs",void 0);zu([Q()],qa.prototype,"onTabChange",void 0);zu([Q({type:Array})],qa.prototype,"buttons",void 0);zu([Q({type:Boolean})],qa.prototype,"disabled",void 0);zu([Q()],qa.prototype,"localTabWidth",void 0);zu([Te()],qa.prototype,"activeTab",void 0);zu([Te()],qa.prototype,"isDense",void 0);qa=zu([De("wui-tabs")],qa);var Ux=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let x2=class extends Le{constructor(){super(...arguments),this.platformTabs=[],this.unsubscribe=[],this.platforms=[],this.onSelectPlatfrom=void 0}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.generateTabs();return Z`
      <wui-flex justifyContent="center" .padding=${["0","0","l","0"]}>
        <wui-tabs .tabs=${e} .onTabChange=${this.onTabChange.bind(this)}></wui-tabs>
      </wui-flex>
    `}generateTabs(){const e=this.platforms.map(n=>n==="browser"?{label:"Browser",icon:"extension",platform:"browser"}:n==="mobile"?{label:"Mobile",icon:"mobile",platform:"mobile"}:n==="qrcode"?{label:"Mobile",icon:"mobile",platform:"qrcode"}:n==="web"?{label:"Webapp",icon:"browser",platform:"web"}:n==="desktop"?{label:"Desktop",icon:"desktop",platform:"desktop"}:{label:"Browser",icon:"extension",platform:"unsupported"});return this.platformTabs=e.map(({platform:n})=>n),e}onTabChange(e){const n=this.platformTabs[e];n&&this.onSelectPlatfrom?.(n)}};Ux([Q({type:Array})],x2.prototype,"platforms",void 0);Ux([Q()],x2.prototype,"onSelectPlatfrom",void 0);x2=Ux([De("w3m-connecting-header")],x2);const u$e=Ge`
  :host {
    display: flex;
  }

  :host([data-size='sm']) > svg {
    width: 12px;
    height: 12px;
  }

  :host([data-size='md']) > svg {
    width: 16px;
    height: 16px;
  }

  :host([data-size='lg']) > svg {
    width: 24px;
    height: 24px;
  }

  :host([data-size='xl']) > svg {
    width: 32px;
    height: 32px;
  }

  svg {
    animation: rotate 2s linear infinite;
  }

  circle {
    fill: none;
    stroke: var(--local-color);
    stroke-width: 4px;
    stroke-dasharray: 1, 124;
    stroke-dashoffset: 0;
    stroke-linecap: round;
    animation: dash 1.5s ease-in-out infinite;
  }

  :host([data-size='md']) > svg > circle {
    stroke-width: 6px;
  }

  :host([data-size='sm']) > svg > circle {
    stroke-width: 8px;
  }

  @keyframes rotate {
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes dash {
    0% {
      stroke-dasharray: 1, 124;
      stroke-dashoffset: 0;
    }

    50% {
      stroke-dasharray: 90, 124;
      stroke-dashoffset: -35;
    }

    100% {
      stroke-dashoffset: -125;
    }
  }
`;var jx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ow=class extends Le{constructor(){super(...arguments),this.color="accent-100",this.size="lg"}render(){return this.style.cssText=`--local-color: ${this.color==="inherit"?"inherit":`var(--wui-color-${this.color})`}`,this.dataset.size=this.size,Z`<svg viewBox="25 25 50 50">
      <circle r="20" cy="50" cx="50"></circle>
    </svg>`}};Ow.styles=[Nt,u$e];jx([Q()],Ow.prototype,"color",void 0);jx([Q()],Ow.prototype,"size",void 0);Ow=jx([De("wui-loading-spinner")],Ow);const d$e=Ge`
  :host {
    width: var(--local-width);
    position: relative;
  }

  button {
    border: none;
    border-radius: var(--local-border-radius);
    width: var(--local-width);
    white-space: nowrap;
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='md'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-l);
    height: 36px;
  }

  button[data-size='md'][data-icon-left='true'][data-icon-right='false'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-s);
  }

  button[data-size='md'][data-icon-right='true'][data-icon-left='false'] {
    padding: 8.2px var(--wui-spacing-s) 9px var(--wui-spacing-l);
  }

  button[data-size='lg'] {
    padding: var(--wui-spacing-m) var(--wui-spacing-2l);
    height: 48px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='inverse'] {
    background-color: var(--wui-color-inverse-100);
    color: var(--wui-color-inverse-000);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='accent-error'] {
    background: var(--wui-color-error-glass-015);
    color: var(--wui-color-error-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-error-glass-010);
  }

  button[data-variant='accent-success'] {
    background: var(--wui-color-success-glass-015);
    color: var(--wui-color-success-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-success-glass-010);
  }

  button[data-variant='neutral'] {
    background: transparent;
    color: var(--wui-color-fg-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  /* -- Focus states --------------------------------------------------- */
  button[data-variant='main']:focus-visible:enabled {
    background-color: var(--wui-color-accent-090);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='inverse']:focus-visible:enabled {
    background-color: var(--wui-color-inverse-100);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent']:focus-visible:enabled {
    background-color: var(--wui-color-accent-glass-010);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent-error']:focus-visible:enabled {
    background: var(--wui-color-error-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-error-100),
      0 0 0 4px var(--wui-color-error-glass-020);
  }
  button[data-variant='accent-success']:focus-visible:enabled {
    background: var(--wui-color-success-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-success-100),
      0 0 0 4px var(--wui-color-success-glass-020);
  }
  button[data-variant='neutral']:focus-visible:enabled {
    background: var(--wui-color-gray-glass-005);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-gray-glass-002);
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='accent-error']:hover:enabled {
      background: var(--wui-color-error-glass-020);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-error']:active:enabled {
      background: var(--wui-color-error-glass-030);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-success']:hover:enabled {
      background: var(--wui-color-success-glass-020);
      color: var(--wui-color-success-100);
    }

    button[data-variant='accent-success']:active:enabled {
      background: var(--wui-color-success-glass-030);
      color: var(--wui-color-success-100);
    }

    button[data-variant='neutral']:hover:enabled {
      background: var(--wui-color-gray-glass-002);
    }

    button[data-variant='neutral']:active:enabled {
      background: var(--wui-color-gray-glass-005);
    }

    button[data-size='lg'][data-icon-left='true'][data-icon-right='false'] {
      padding-left: var(--wui-spacing-m);
    }

    button[data-size='lg'][data-icon-right='true'][data-icon-left='false'] {
      padding-right: var(--wui-spacing-m);
    }
  }

  /* -- Disabled state --------------------------------------------------- */
  button:disabled {
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    color: var(--wui-color-gray-glass-020);
    cursor: not-allowed;
  }

  button > wui-text {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  ::slotted(*) {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  wui-loading-spinner {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: var(--local-opacity-000);
  }
`;var Ha=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const aM={main:"inverse-100",inverse:"inverse-000",accent:"accent-100","accent-error":"error-100","accent-success":"success-100",neutral:"fg-100",disabled:"gray-glass-020"},h$e={lg:"paragraph-600",md:"small-600"},f$e={lg:"md",md:"md"};let fo=class extends Le{constructor(){super(...arguments),this.size="lg",this.disabled=!1,this.fullWidth=!1,this.loading=!1,this.variant="main",this.hasIconLeft=!1,this.hasIconRight=!1,this.borderRadius="m"}render(){this.style.cssText=`
    --local-width: ${this.fullWidth?"100%":"auto"};
    --local-opacity-100: ${this.loading?0:1};
    --local-opacity-000: ${this.loading?1:0};
    --local-border-radius: var(--wui-border-radius-${this.borderRadius});
    `;const e=this.textVariant??h$e[this.size];return Z`
      <button
        data-variant=${this.variant}
        data-icon-left=${this.hasIconLeft}
        data-icon-right=${this.hasIconRight}
        data-size=${this.size}
        ?disabled=${this.disabled}
      >
        ${this.loadingTemplate()}
        <slot name="iconLeft" @slotchange=${()=>this.handleSlotLeftChange()}></slot>
        <wui-text variant=${e} color="inherit">
          <slot></slot>
        </wui-text>
        <slot name="iconRight" @slotchange=${()=>this.handleSlotRightChange()}></slot>
      </button>
    `}handleSlotLeftChange(){this.hasIconLeft=!0}handleSlotRightChange(){this.hasIconRight=!0}loadingTemplate(){if(this.loading){const e=f$e[this.size],n=this.disabled?aM.disabled:aM[this.variant];return Z`<wui-loading-spinner color=${n} size=${e}></wui-loading-spinner>`}return Z``}};fo.styles=[Nt,Yr,d$e];Ha([Q()],fo.prototype,"size",void 0);Ha([Q({type:Boolean})],fo.prototype,"disabled",void 0);Ha([Q({type:Boolean})],fo.prototype,"fullWidth",void 0);Ha([Q({type:Boolean})],fo.prototype,"loading",void 0);Ha([Q()],fo.prototype,"variant",void 0);Ha([Q({type:Boolean})],fo.prototype,"hasIconLeft",void 0);Ha([Q({type:Boolean})],fo.prototype,"hasIconRight",void 0);Ha([Q()],fo.prototype,"borderRadius",void 0);Ha([Q()],fo.prototype,"textVariant",void 0);fo=Ha([De("wui-button")],fo);const p$e=Ge`
  button {
    padding: var(--wui-spacing-4xs) var(--wui-spacing-xxs);
    border-radius: var(--wui-border-radius-3xs);
    background-color: transparent;
    color: var(--wui-color-accent-100);
  }

  button:disabled {
    background-color: transparent;
    color: var(--wui-color-gray-glass-015);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-005);
  }
`;var i3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Mg=class extends Le{constructor(){super(...arguments),this.tabIdx=void 0,this.disabled=!1,this.color="inherit"}render(){return Z`
      <button ?disabled=${this.disabled} tabindex=${We(this.tabIdx)}>
        <slot name="iconLeft"></slot>
        <wui-text variant="small-600" color=${this.color}>
          <slot></slot>
        </wui-text>
        <slot name="iconRight"></slot>
      </button>
    `}};Mg.styles=[Nt,Yr,p$e];i3([Q()],Mg.prototype,"tabIdx",void 0);i3([Q({type:Boolean})],Mg.prototype,"disabled",void 0);i3([Q()],Mg.prototype,"color",void 0);Mg=i3([De("wui-link")],Mg);const g$e=Ge`
  :host {
    display: block;
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  svg {
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  rect {
    fill: none;
    stroke: var(--wui-color-accent-100);
    stroke-width: 4px;
    stroke-linecap: round;
    animation: dash 1s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0px;
    }
  }
`;var _W=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let I2=class extends Le{constructor(){super(...arguments),this.radius=36}render(){return this.svgLoaderTemplate()}svgLoaderTemplate(){const e=this.radius>50?50:this.radius,r=36-e,i=116+r,s=245+r,o=360+r*1.75;return Z`
      <svg viewBox="0 0 110 110" width="110" height="110">
        <rect
          x="2"
          y="2"
          width="106"
          height="106"
          rx=${e}
          stroke-dasharray="${i} ${s}"
          stroke-dashoffset=${o}
        />
      </svg>
    `}};I2.styles=[Nt,g$e];_W([Q({type:Number})],I2.prototype,"radius",void 0);I2=_W([De("wui-loading-thumbnail")],I2);const m$e=Ge`
  button {
    border: none;
    border-radius: var(--wui-border-radius-3xl);
  }

  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='gray'] {
    background-color: transparent;
    color: var(--wui-color-fg-200);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='shade'] {
    background-color: transparent;
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-size='sm'] {
    height: 32px;
    padding: 0 var(--wui-spacing-s);
  }

  button[data-size='md'] {
    height: 40px;
    padding: 0 var(--wui-spacing-l);
  }

  button[data-size='sm'] > wui-image {
    width: 16px;
    height: 16px;
  }

  button[data-size='md'] > wui-image {
    width: 24px;
    height: 24px;
  }

  button[data-size='sm'] > wui-icon {
    width: 12px;
    height: 12px;
  }

  button[data-size='md'] > wui-icon {
    width: 14px;
    height: 14px;
  }

  wui-image {
    border-radius: var(--wui-border-radius-3xl);
    overflow: hidden;
  }

  button.disabled > wui-icon,
  button.disabled > wui-image {
    filter: grayscale(1);
  }

  button[data-variant='main'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-accent-090);
  }

  button[data-variant='shade'] > wui-image,
  button[data-variant='gray'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:focus-visible {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='shade']:focus-visible,
    button[data-variant='gray']:focus-visible,
    button[data-variant='shade']:hover,
    button[data-variant='gray']:hover {
      background-color: var(--wui-color-gray-glass-002);
    }

    button[data-variant='gray']:active,
    button[data-variant='shade']:active {
      background-color: var(--wui-color-gray-glass-005);
    }
  }

  button.disabled {
    color: var(--wui-color-gray-glass-020);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    pointer-events: none;
  }
`;var Kh=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Yc=class extends Le{constructor(){super(...arguments),this.variant="accent",this.imageSrc="",this.disabled=!1,this.icon="externalLink",this.size="md",this.text=""}render(){const e=this.size==="sm"?"small-600":"paragraph-600";return Z`
      <button
        class=${this.disabled?"disabled":""}
        data-variant=${this.variant}
        data-size=${this.size}
      >
        ${this.imageSrc?Z`<wui-image src=${this.imageSrc}></wui-image>`:null}
        <wui-text variant=${e} color="inherit"> ${this.text} </wui-text>
        <wui-icon name=${this.icon} color="inherit" size="inherit"></wui-icon>
      </button>
    `}};Yc.styles=[Nt,Yr,m$e];Kh([Q()],Yc.prototype,"variant",void 0);Kh([Q()],Yc.prototype,"imageSrc",void 0);Kh([Q({type:Boolean})],Yc.prototype,"disabled",void 0);Kh([Q()],Yc.prototype,"icon",void 0);Kh([Q()],Yc.prototype,"size",void 0);Kh([Q()],Yc.prototype,"text",void 0);Yc=Kh([De("wui-chip-button")],Yc);const w$e=Ge`
  wui-flex {
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
  }
`;var s3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Dg=class extends Le{constructor(){super(...arguments),this.disabled=!1,this.label="",this.buttonLabel=""}render(){return Z`
      <wui-flex
        justifyContent="space-between"
        alignItems="center"
        .padding=${["1xs","2l","1xs","2l"]}
      >
        <wui-text variant="paragraph-500" color="fg-200">${this.label}</wui-text>
        <wui-chip-button size="sm" variant="shade" text=${this.buttonLabel} icon="chevronRight">
        </wui-chip-button>
      </wui-flex>
    `}};Dg.styles=[Nt,Yr,w$e];s3([Q({type:Boolean})],Dg.prototype,"disabled",void 0);s3([Q()],Dg.prototype,"label",void 0);s3([Q()],Dg.prototype,"buttonLabel",void 0);Dg=s3([De("wui-cta-button")],Dg);const y$e=Ge`
  :host {
    display: block;
    padding: 0 var(--wui-spacing-xl) var(--wui-spacing-xl);
  }
`;var SW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let O2=class extends Le{constructor(){super(...arguments),this.wallet=void 0}render(){if(!this.wallet)return this.style.display="none",null;const{name:e,app_store:n,play_store:r,chrome_store:i,homepage:s}=this.wallet,o=ge.isMobile(),a=ge.isIos(),c=ge.isAndroid(),l=[n,r,s,i].filter(Boolean).length>1,u=Er.getTruncateString({string:e,charsStart:12,charsEnd:0,truncate:"end"});return l&&!o?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${()=>we.push("Downloads",{wallet:this.wallet})}
        ></wui-cta-button>
      `:!l&&s?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onHomePage.bind(this)}
        ></wui-cta-button>
      `:n&&a?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onAppStore.bind(this)}
        ></wui-cta-button>
      `:r&&c?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onPlayStore.bind(this)}
        ></wui-cta-button>
      `:(this.style.display="none",null)}onAppStore(){this.wallet?.app_store&&ge.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&ge.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&ge.openHref(this.wallet.homepage,"_blank")}};O2.styles=[y$e];SW([Q({type:Object})],O2.prototype,"wallet",void 0);O2=SW([De("w3m-mobile-download-links")],O2);const b$e=Ge`
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(3px);
    }
    50% {
      transform: translateX(-3px);
    }
    75% {
      transform: translateX(3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-loading-thumbnail {
    position: absolute;
  }

  wui-icon-box {
    position: absolute;
    right: calc(var(--wui-spacing-3xs) * -1);
    bottom: calc(var(--wui-spacing-3xs) * -1);
    opacity: 0;
    transform: scale(0.5);
    transition-property: opacity, transform;
    transition-duration: var(--wui-duration-lg);
    transition-timing-function: var(--wui-ease-out-power-2);
    will-change: opacity, transform;
  }

  wui-text[align='center'] {
    width: 100%;
    padding: 0px var(--wui-spacing-l);
  }

  [data-error='true'] wui-icon-box {
    opacity: 1;
    transform: scale(1);
  }

  [data-error='true'] > wui-flex:first-child {
    animation: shake 250ms cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  }

  [data-retry='false'] wui-link {
    display: none;
  }

  [data-retry='true'] wui-link {
    display: block;
    opacity: 1;
  }
`;var za=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};class li extends Le{constructor(){super(),this.wallet=we.state.data?.wallet,this.connector=we.state.data?.connector,this.timeout=void 0,this.secondaryBtnIcon="refresh",this.onConnect=void 0,this.onRender=void 0,this.onAutoConnect=void 0,this.isWalletConnect=!0,this.unsubscribe=[],this.imageSrc=ir.getWalletImage(this.wallet)??ir.getConnectorImage(this.connector),this.name=this.wallet?.name??this.connector?.name??"Wallet",this.isRetrying=!1,this.uri=_e.state.wcUri,this.error=_e.state.wcError,this.ready=!1,this.showRetry=!1,this.secondaryBtnLabel="Try again",this.secondaryLabel="Accept connection request in the wallet",this.isLoading=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(_e.subscribeKey("wcUri",e=>{this.uri=e,this.isRetrying&&this.onRetry&&(this.isRetrying=!1,this.onConnect?.())}),_e.subscribeKey("wcError",e=>this.error=e)),(ge.isTelegram()||ge.isSafari())&&ge.isIos()&&_e.state.wcUri&&this.onConnect?.()}firstUpdated(){this.onAutoConnect?.(),this.showRetry=!this.onAutoConnect}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),_e.setWcError(!1),clearTimeout(this.timeout)}render(){this.onRender?.(),this.onShowRetry();const e=this.error?"Connection can be declined if a previous request is still active":this.secondaryLabel;let n=`Continue in ${this.name}`;return this.error&&(n="Connection declined"),Z`
      <wui-flex
        data-error=${We(this.error)}
        data-retry=${this.showRetry}
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-flex justifyContent="center" alignItems="center">
          <wui-wallet-image size="lg" imageSrc=${We(this.imageSrc)}></wui-wallet-image>

          ${this.error?null:this.loaderTemplate()}

          <wui-icon-box
            backgroundColor="error-100"
            background="opaque"
            iconColor="error-100"
            icon="close"
            size="sm"
            border
            borderColor="wui-color-bg-125"
          ></wui-icon-box>
        </wui-flex>

        <wui-flex flexDirection="column" alignItems="center" gap="xs">
          <wui-text variant="paragraph-500" color=${this.error?"error-100":"fg-100"}>
            ${n}
          </wui-text>
          <wui-text align="center" variant="small-500" color="fg-200">${e}</wui-text>
        </wui-flex>

        ${this.secondaryBtnLabel?Z`
              <wui-button
                variant="accent"
                size="md"
                ?disabled=${this.isRetrying||this.isLoading}
                @click=${this.onTryAgain.bind(this)}
                data-testid="w3m-connecting-widget-secondary-button"
              >
                <wui-icon color="inherit" slot="iconLeft" name=${this.secondaryBtnIcon}></wui-icon>
                ${this.secondaryBtnLabel}
              </wui-button>
            `:null}
      </wui-flex>

      ${this.isWalletConnect?Z`
            <wui-flex .padding=${["0","xl","xl","xl"]} justifyContent="center">
              <wui-link @click=${this.onCopyUri} color="fg-200" data-testid="wui-link-copy">
                <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
                Copy link
              </wui-link>
            </wui-flex>
          `:null}

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onShowRetry(){this.error&&!this.showRetry&&(this.showRetry=!0,this.shadowRoot?.querySelector("wui-button")?.animate([{opacity:0},{opacity:1}],{fill:"forwards",easing:"ease"}))}onTryAgain(){_e.setWcError(!1),this.onRetry?(this.isRetrying=!0,this.onRetry?.()):this.onConnect?.()}loaderTemplate(){const e=Ur.state.themeVariables["--w3m-border-radius-master"],n=e?parseInt(e.replace("px",""),10):4;return Z`<wui-loading-thumbnail radius=${n*9}></wui-loading-thumbnail>`}onCopyUri(){try{this.uri&&(ge.copyToClopboard(this.uri),qn.showSuccess("Link copied"))}catch{qn.showError("Failed to copy")}}}li.styles=b$e;za([Te()],li.prototype,"isRetrying",void 0);za([Te()],li.prototype,"uri",void 0);za([Te()],li.prototype,"error",void 0);za([Te()],li.prototype,"ready",void 0);za([Te()],li.prototype,"showRetry",void 0);za([Te()],li.prototype,"secondaryBtnLabel",void 0);za([Te()],li.prototype,"secondaryLabel",void 0);za([Te()],li.prototype,"isLoading",void 0);za([Q({type:Boolean})],li.prototype,"isMobile",void 0);za([Q()],li.prototype,"onRetry",void 0);var v$e=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let cM=class extends li{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-browser: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onAutoConnect=this.onConnectProxy.bind(this),ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}async onConnectProxy(){try{this.error=!1;const{connectors:e}=pe.state,n=e.find(r=>r.type==="ANNOUNCED"&&r.info?.rdns===this.wallet?.rdns||r.type==="INJECTED"||r.name===this.wallet?.name);if(n)await _e.connectExternal(n,n.chain);else throw new Error("w3m-connecting-wc-browser: No connector found");Lt.close(),ut.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"browser",name:this.wallet?.name||"Unknown"}})}catch(e){ut.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:e?.message??"Unknown"}}),this.error=!0}}};cM=v$e([De("w3m-connecting-wc-browser")],cM);var E$e=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let lM=class extends li{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-desktop: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onRender=this.onRenderProxy.bind(this),ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"desktop"}})}onRenderProxy(){!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onConnectProxy(){if(this.wallet?.desktop_link&&this.uri)try{this.error=!1;const{desktop_link:e,name:n}=this.wallet,{redirect:r,href:i}=ge.formatNativeUrl(e,this.uri);_e.setWcLinking({name:n,href:i}),_e.setRecentWallet(this.wallet),ge.openHref(r,"_blank")}catch{this.error=!0}}};lM=E$e([De("w3m-connecting-wc-desktop")],lM);var u0=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ch=class extends li{constructor(){if(super(),this.btnLabelTimeout=void 0,this.redirectDeeplink=void 0,this.redirectUniversalLink=void 0,this.target=void 0,this.preferUniversalLinks=ae.state.experimental_preferUniversalLinks,this.isLoading=!0,this.onConnect=()=>{if(this.wallet?.mobile_link&&this.uri)try{this.error=!1;const{mobile_link:e,link_mode:n,name:r}=this.wallet,{redirect:i,redirectUniversalLink:s,href:o}=ge.formatNativeUrl(e,this.uri,n);this.redirectDeeplink=i,this.redirectUniversalLink=s,this.target=ge.isIframe()?"_top":"_self",_e.setWcLinking({name:r,href:o}),_e.setRecentWallet(this.wallet),this.preferUniversalLinks&&this.redirectUniversalLink?ge.openHref(this.redirectUniversalLink,this.target):ge.openHref(this.redirectDeeplink,this.target)}catch(e){ut.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:e instanceof Error?e.message:"Error parsing the deeplink",uri:this.uri,mobile_link:this.wallet.mobile_link,name:this.wallet.name}}),this.error=!0}},!this.wallet)throw new Error("w3m-connecting-wc-mobile: No wallet provided");this.secondaryBtnLabel="Open",this.secondaryLabel=Ht.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.onHandleURI(),this.unsubscribe.push(_e.subscribeKey("wcUri",()=>{this.onHandleURI()})),ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"mobile"}})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.btnLabelTimeout)}onHandleURI(){this.isLoading=!this.uri,!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onTryAgain(){_e.setWcError(!1),this.onConnect?.()}};u0([Te()],Ch.prototype,"redirectDeeplink",void 0);u0([Te()],Ch.prototype,"redirectUniversalLink",void 0);u0([Te()],Ch.prototype,"target",void 0);u0([Te()],Ch.prototype,"preferUniversalLinks",void 0);u0([Te()],Ch.prototype,"isLoading",void 0);Ch=u0([De("w3m-connecting-wc-mobile")],Ch);var Ay={},C$e=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},AW={},Ms={};let Fx;const _$e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ms.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ms.getSymbolTotalCodewords=function(e){return _$e[e]};Ms.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Ms.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Fx=e};Ms.isKanjiModeEnabled=function(){return typeof Fx<"u"};Ms.toSJIS=function(e){return Fx(e)};var o3={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(o3);function xW(){this.buffer=[],this.length=0}xW.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var S$e=xW;function xy(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}xy.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};xy.prototype.get=function(t,e){return this.data[t*this.size+e]};xy.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};xy.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var A$e=xy,IW={};(function(t){const e=Ms.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(IW);var OW={};const x$e=Ms.getSymbolSize,uM=7;OW.getPositions=function(e){const n=x$e(e);return[[0,0],[n-uM,0],[0,n-uM]]};var PW={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let d=0;d<s;d++){a=c=0,l=u=null;for(let h=0;h<s;h++){let f=i.get(d,h);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=i.get(h,d),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,n(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(PW);var a3={};const fu=o3,ob=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ab=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];a3.getBlocksCount=function(e,n){switch(n){case fu.L:return ob[(e-1)*4+0];case fu.M:return ob[(e-1)*4+1];case fu.Q:return ob[(e-1)*4+2];case fu.H:return ob[(e-1)*4+3];default:return}};a3.getTotalCodewordsCount=function(e,n){switch(n){case fu.L:return ab[(e-1)*4+0];case fu.M:return ab[(e-1)*4+1];case fu.Q:return ab[(e-1)*4+2];case fu.H:return ab[(e-1)*4+3];default:return}};var TW={},c3={};const km=new Uint8Array(512),P2=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)km[n]=e,P2[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)km[n]=km[n-255]})();c3.log=function(e){if(e<1)throw new Error("log("+e+")");return P2[e]};c3.exp=function(e){return km[e]};c3.mul=function(e,n){return e===0||n===0?0:km[P2[e]+P2[n]]};(function(t){const e=c3;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(TW);const kW=TW;function qx(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}qx.prototype.initialize=function(e){this.degree=e,this.genPoly=kW.generateECPolynomial(this.degree)};qx.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=kW.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var I$e=qx,NW={},Ku={},Hx={};Hx.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ka={};const $W="[0-9]+",O$e="[A-Z $%*+\\-./:]+";let Pw="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Pw=Pw.replace(/u/g,"\\u");const P$e="(?:(?![A-Z0-9 $%*+\\-./:]|"+Pw+`)(?:.|[\r
]))+`;Ka.KANJI=new RegExp(Pw,"g");Ka.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ka.BYTE=new RegExp(P$e,"g");Ka.NUMERIC=new RegExp($W,"g");Ka.ALPHANUMERIC=new RegExp(O$e,"g");const T$e=new RegExp("^"+Pw+"$"),k$e=new RegExp("^"+$W+"$"),N$e=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ka.testKanji=function(e){return T$e.test(e)};Ka.testNumeric=function(e){return k$e.test(e)};Ka.testAlphanumeric=function(e){return N$e.test(e)};(function(t){const e=Hx,n=Ka;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(Ku);(function(t){const e=Ms,n=a3,r=o3,i=Ku,s=Hx,o=7973,a=e.getBCHDigit(o);function c(h,f,p){for(let g=1;g<=40;g++)if(f<=t.getCapacity(g,p,h))return g}function l(h,f){return i.getCharCountIndicator(h,f)+4}function u(h,f){let p=0;return h.forEach(function(g){const m=l(g.mode,f);p+=m+g.getBitsLength()}),p}function d(h,f){for(let p=1;p<=40;p++)if(u(h,p)<=t.getCapacity(p,f,i.MIXED))return p}t.from=function(f,p){return s.isValid(f)?parseInt(f,10):p},t.getCapacity=function(f,p,g){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof g>"u"&&(g=i.BYTE);const m=e.getSymbolTotalCodewords(f),w=n.getTotalCodewordsCount(f,p),b=(m-w)*8;if(g===i.MIXED)return b;const y=b-l(g,f);switch(g){case i.NUMERIC:return Math.floor(y/10*3);case i.ALPHANUMERIC:return Math.floor(y/11*2);case i.KANJI:return Math.floor(y/13);case i.BYTE:default:return Math.floor(y/8)}},t.getBestVersionForData=function(f,p){let g;const m=r.from(p,r.M);if(Array.isArray(f)){if(f.length>1)return d(f,m);if(f.length===0)return 1;g=f[0]}else g=f;return c(g.mode,g.getLength(),m)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let p=f<<12;for(;e.getBCHDigit(p)-a>=0;)p^=o<<e.getBCHDigit(p)-a;return f<<12|p}})(NW);var RW={};const $4=Ms,MW=1335,$$e=21522,dM=$4.getBCHDigit(MW);RW.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;$4.getBCHDigit(i)-dM>=0;)i^=MW<<$4.getBCHDigit(i)-dM;return(r<<10|i)^$$e};var DW={};const R$e=Ku;function Bg(t){this.mode=R$e.NUMERIC,this.data=t.toString()}Bg.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Bg.prototype.getLength=function(){return this.data.length};Bg.prototype.getBitsLength=function(){return Bg.getBitsLength(this.data.length)};Bg.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var M$e=Bg;const D$e=Ku,r5=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Lg(t){this.mode=D$e.ALPHANUMERIC,this.data=t}Lg.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Lg.prototype.getLength=function(){return this.data.length};Lg.prototype.getBitsLength=function(){return Lg.getBitsLength(this.data.length)};Lg.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=r5.indexOf(this.data[n])*45;r+=r5.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(r5.indexOf(this.data[n]),6)};var B$e=Lg,L$e=function(e){for(var n=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const U$e=L$e,j$e=Ku;function Ug(t){this.mode=j$e.BYTE,typeof t=="string"&&(t=U$e(t)),this.data=new Uint8Array(t)}Ug.getBitsLength=function(e){return e*8};Ug.prototype.getLength=function(){return this.data.length};Ug.prototype.getBitsLength=function(){return Ug.getBitsLength(this.data.length)};Ug.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var F$e=Ug;const q$e=Ku,H$e=Ms;function jg(t){this.mode=q$e.KANJI,this.data=t}jg.getBitsLength=function(e){return e*13};jg.prototype.getLength=function(){return this.data.length};jg.prototype.getBitsLength=function(){return jg.getBitsLength(this.data.length)};jg.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=H$e.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var z$e=jg,BW={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,d,h,f,p,g,m;!a.empty();){c=a.pop(),l=c.value,d=c.cost,h=n[l]||{};for(u in h)h.hasOwnProperty(u)&&(f=h[u],p=d+f,g=o[u],m=typeof o[u]>"u",(m||g>p)&&(o[u]=p,a.push(u,p),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var w=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(BW);var K$e=BW.exports;(function(t){const e=Ku,n=M$e,r=B$e,i=F$e,s=z$e,o=Ka,a=Ms,c=K$e;function l(w){return unescape(encodeURIComponent(w)).length}function u(w,b,y){const _=[];let A;for(;(A=w.exec(y))!==null;)_.push({data:A[0],index:A.index,mode:b,length:A[0].length});return _}function d(w){const b=u(o.NUMERIC,e.NUMERIC,w),y=u(o.ALPHANUMERIC,e.ALPHANUMERIC,w);let _,A;return a.isKanjiModeEnabled()?(_=u(o.BYTE,e.BYTE,w),A=u(o.KANJI,e.KANJI,w)):(_=u(o.BYTE_KANJI,e.BYTE,w),A=[]),b.concat(y,_,A).sort(function($,D){return $.index-D.index}).map(function($){return{data:$.data,mode:$.mode,length:$.length}})}function h(w,b){switch(b){case e.NUMERIC:return n.getBitsLength(w);case e.ALPHANUMERIC:return r.getBitsLength(w);case e.KANJI:return s.getBitsLength(w);case e.BYTE:return i.getBitsLength(w)}}function f(w){return w.reduce(function(b,y){const _=b.length-1>=0?b[b.length-1]:null;return _&&_.mode===y.mode?(b[b.length-1].data+=y.data,b):(b.push(y),b)},[])}function p(w){const b=[];for(let y=0;y<w.length;y++){const _=w[y];switch(_.mode){case e.NUMERIC:b.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:b.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:b.push([_,{data:_.data,mode:e.BYTE,length:l(_.data)}]);break;case e.BYTE:b.push([{data:_.data,mode:e.BYTE,length:l(_.data)}])}}return b}function g(w,b){const y={},_={start:{}};let A=["start"];for(let T=0;T<w.length;T++){const $=w[T],D=[];for(let O=0;O<$.length;O++){const j=$[O],F=""+T+O;D.push(F),y[F]={node:j,lastCount:0},_[F]={};for(let L=0;L<A.length;L++){const B=A[L];y[B]&&y[B].node.mode===j.mode?(_[B][F]=h(y[B].lastCount+j.length,j.mode)-h(y[B].lastCount,j.mode),y[B].lastCount+=j.length):(y[B]&&(y[B].lastCount=j.length),_[B][F]=h(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,b))}}A=D}for(let T=0;T<A.length;T++)_[A[T]].end=0;return{map:_,table:y}}function m(w,b){let y;const _=e.getBestModeForData(w);if(y=e.from(b,_),y!==e.BYTE&&y.bit<_.bit)throw new Error('"'+w+'" cannot be encoded with mode '+e.toString(y)+`.
 Suggested mode is: `+e.toString(_));switch(y===e.KANJI&&!a.isKanjiModeEnabled()&&(y=e.BYTE),y){case e.NUMERIC:return new n(w);case e.ALPHANUMERIC:return new r(w);case e.KANJI:return new s(w);case e.BYTE:return new i(w)}}t.fromArray=function(b){return b.reduce(function(y,_){return typeof _=="string"?y.push(m(_,null)):_.data&&y.push(m(_.data,_.mode)),y},[])},t.fromString=function(b,y){const _=d(b,a.isKanjiModeEnabled()),A=p(_),T=g(A,y),$=c.find_path(T.map,"start","end"),D=[];for(let O=1;O<$.length-1;O++)D.push(T.table[$[O]].node);return t.fromArray(f(D))},t.rawSplit=function(b){return t.fromArray(d(b,a.isKanjiModeEnabled()))}})(DW);const l3=Ms,i5=o3,V$e=S$e,W$e=A$e,G$e=IW,Z$e=OW,R4=PW,M4=a3,Y$e=I$e,T2=NW,Q$e=RW,J$e=Ku,s5=DW;function X$e(t,e){const n=t.size,r=Z$e.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function eRe(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function tRe(t,e){const n=G$e.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function nRe(t,e){const n=t.size,r=T2.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function o5(t,e,n){const r=t.size,i=Q$e.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function rRe(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function iRe(t,e,n){const r=new V$e;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),J$e.getCharCountIndicator(c.mode,t)),c.write(r)});const i=l3.getSymbolTotalCodewords(t),s=M4.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return sRe(r,t,e)}function sRe(t,e,n){const r=l3.getSymbolTotalCodewords(e),i=M4.getTotalCodewordsCount(e,n),s=r-i,o=M4.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(s/o),d=u+1,h=l-u,f=new Y$e(h);let p=0;const g=new Array(o),m=new Array(o);let w=0;const b=new Uint8Array(t.buffer);for(let $=0;$<o;$++){const D=$<c?u:d;g[$]=b.slice(p,p+D),m[$]=f.encode(g[$]),p+=D,w=Math.max(w,D)}const y=new Uint8Array(r);let _=0,A,T;for(A=0;A<w;A++)for(T=0;T<o;T++)A<g[T].length&&(y[_++]=g[T][A]);for(A=0;A<h;A++)for(T=0;T<o;T++)y[_++]=m[T][A];return y}function oRe(t,e,n,r){let i;if(Array.isArray(t))i=s5.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=s5.rawSplit(t);l=T2.getBestVersionForData(u,n)}i=s5.fromString(t,l||40)}else throw new Error("Invalid data");const s=T2.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=iRe(e,n,i),a=l3.getSymbolSize(e),c=new W$e(a);return X$e(c,e),eRe(c),tRe(c,e),o5(c,n,0),e>=7&&nRe(c,e),rRe(c,o),isNaN(r)&&(r=R4.getBestMask(c,o5.bind(null,c,n))),R4.applyMask(r,c),o5(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}AW.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=i5.M,i,s;return typeof n<"u"&&(r=i5.from(n.errorCorrectionLevel,i5.M),i=T2.from(n.version),s=R4.from(n.maskPattern),n.toSJISFunc&&l3.setToSJISFunction(n.toSJISFunc)),oRe(e,i,r,s)};var LW={},zx={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,d=[s.color.light,s.color.dark];for(let h=0;h<l;h++)for(let f=0;f<l;f++){let p=(h*l+f)*4,g=s.color.light;if(h>=u&&f>=u&&h<l-u&&f<l-u){const m=Math.floor((h-u)/c),w=Math.floor((f-u)/c);g=d[a[m*o+w]?1:0]}r[p++]=g.r,r[p++]=g.g,r[p++]=g.b,r[p]=g.a}}})(zx);(function(t){const e=zx;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),d=l.getContext("2d"),h=d.createImageData(u,u);return e.qrToImageData(h.data,s,c),n(d,l,u),d.putImageData(h,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}})(LW);var UW={};const aRe=zx;function hM(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a5(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function cRe(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?a5("M",c+n,.5+l+n):a5("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=a5("h",o),o=0)):i++}return r}UW.render=function(e,n,r){const i=aRe.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+hM(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+hM(i.color.dark,"stroke")+' d="'+cRe(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,h),h};const lRe=C$e,D4=AW,jW=LW,uRe=UW;function Kx(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!lRe())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=D4.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=D4.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}Ay.create=D4.create;Ay.toCanvas=Kx.bind(null,jW.render);Ay.toDataURL=Kx.bind(null,jW.renderToDataURL);Ay.toString=Kx.bind(null,function(t,e,n){return uRe.render(t,n)});const dRe=.1,fM=2.5,dc=7;function c5(t,e,n){return t===e?!1:(t-e<0?e-t:t-e)<=n+dRe}function hRe(t,e){const n=Array.prototype.slice.call(Ay.create(t,{errorCorrectionLevel:e}).modules.data,0),r=Math.sqrt(n.length);return n.reduce((i,s,o)=>(o%r===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const fRe={generate({uri:t,size:e,logoSize:n,dotColor:r="#141414"}){const i="transparent",o=[],a=hRe(t,"Q"),c=e/a.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:g,y:m})=>{const w=(a.length-dc)*c*g,b=(a.length-dc)*c*m,y=.45;for(let _=0;_<l.length;_+=1){const A=c*(dc-_*2);o.push(Ce`
            <rect
              fill=${_===2?r:i}
              width=${_===0?A-5:A}
              rx= ${_===0?(A-5)*y:A*y}
              ry= ${_===0?(A-5)*y:A*y}
              stroke=${r}
              stroke-width=${_===0?5:0}
              height=${_===0?A-5:A}
              x= ${_===0?b+c*_+5/2:b+c*_}
              y= ${_===0?w+c*_+5/2:w+c*_}
            />
          `)}});const u=Math.floor((n+25)/c),d=a.length/2-u/2,h=a.length/2+u/2-1,f=[];a.forEach((g,m)=>{g.forEach((w,b)=>{if(a[m][b]&&!(m<dc&&b<dc||m>a.length-(dc+1)&&b<dc||m<dc&&b>a.length-(dc+1))&&!(m>d&&m<h&&b>d&&b<h)){const y=m*c+c/2,_=b*c+c/2;f.push([y,_])}})});const p={};return f.forEach(([g,m])=>{p[g]?p[g]?.push(m):p[g]=[m]}),Object.entries(p).map(([g,m])=>{const w=m.filter(b=>m.every(y=>!c5(b,y,c)));return[Number(g),w]}).forEach(([g,m])=>{m.forEach(w=>{o.push(Ce`<circle cx=${g} cy=${w} fill=${r} r=${c/fM} />`)})}),Object.entries(p).filter(([g,m])=>m.length>1).map(([g,m])=>{const w=m.filter(b=>m.some(y=>c5(b,y,c)));return[Number(g),w]}).map(([g,m])=>{m.sort((b,y)=>b<y?-1:1);const w=[];for(const b of m){const y=w.find(_=>_.some(A=>c5(b,A,c)));y?y.push(b):w.push([b])}return[g,w.map(b=>[b[0],b[b.length-1]])]}).forEach(([g,m])=>{m.forEach(([w,b])=>{o.push(Ce`
              <line
                x1=${g}
                x2=${g}
                y1=${w}
                y2=${b}
                stroke=${r}
                stroke-width=${c/(fM/2)}
                stroke-linecap="round"
              />
            `)})}),o}},pRe=Ge`
  :host {
    position: relative;
    user-select: none;
    display: block;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    width: var(--local-size);
  }

  :host([data-theme='dark']) {
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px);
    background-color: var(--wui-color-inverse-100);
    padding: var(--wui-spacing-l);
  }

  :host([data-theme='light']) {
    box-shadow: 0 0 0 1px var(--wui-color-bg-125);
    background-color: var(--wui-color-bg-125);
  }

  :host([data-clear='true']) > wui-icon {
    display: none;
  }

  svg:first-child,
  wui-image,
  wui-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
  }

  wui-image {
    width: 25%;
    height: 25%;
    border-radius: var(--wui-border-radius-xs);
  }

  wui-icon {
    width: 100%;
    height: 100%;
    color: var(--local-icon-color) !important;
    transform: translateY(-50%) translateX(-50%) scale(0.25);
  }
`;var nl=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const gRe="#3396ff";let Yo=class extends Le{constructor(){super(...arguments),this.uri="",this.size=0,this.theme="dark",this.imageSrc=void 0,this.alt=void 0,this.arenaClear=void 0,this.farcaster=void 0}render(){return this.dataset.theme=this.theme,this.dataset.clear=String(this.arenaClear),this.style.cssText=`
     --local-size: ${this.size}px;
     --local-icon-color: ${this.color??gRe}
    `,Z`${this.templateVisual()} ${this.templateSvg()}`}templateSvg(){const e=this.theme==="light"?this.size:this.size-32;return Ce`
      <svg height=${e} width=${e}>
        ${fRe.generate({uri:this.uri,size:e,logoSize:this.arenaClear?0:e/4,dotColor:this.color})}
      </svg>
    `}templateVisual(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt=${this.alt??"logo"}></wui-image>`:this.farcaster?Z`<wui-icon
        class="farcaster"
        size="inherit"
        color="inherit"
        name="farcaster"
      ></wui-icon>`:Z`<wui-icon size="inherit" color="inherit" name="walletConnect"></wui-icon>`}};Yo.styles=[Nt,pRe];nl([Q()],Yo.prototype,"uri",void 0);nl([Q({type:Number})],Yo.prototype,"size",void 0);nl([Q()],Yo.prototype,"theme",void 0);nl([Q()],Yo.prototype,"imageSrc",void 0);nl([Q()],Yo.prototype,"alt",void 0);nl([Q()],Yo.prototype,"color",void 0);nl([Q({type:Boolean})],Yo.prototype,"arenaClear",void 0);nl([Q({type:Boolean})],Yo.prototype,"farcaster",void 0);Yo=nl([De("wui-qr-code")],Yo);const mRe=Ge`
  :host {
    display: block;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-200) 5%,
      var(--wui-color-bg-200) 48%,
      var(--wui-color-bg-300) 55%,
      var(--wui-color-bg-300) 60%,
      var(--wui-color-bg-300) calc(60% + 10px),
      var(--wui-color-bg-200) calc(60% + 12px),
      var(--wui-color-bg-200) 100%
    );
    background-size: 250%;
    animation: shimmer 3s linear infinite reverse;
  }

  :host([variant='light']) {
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-150) 5%,
      var(--wui-color-bg-150) 48%,
      var(--wui-color-bg-200) 55%,
      var(--wui-color-bg-200) 60%,
      var(--wui-color-bg-200) calc(60% + 10px),
      var(--wui-color-bg-150) calc(60% + 12px),
      var(--wui-color-bg-150) 100%
    );
    background-size: 250%;
  }

  @keyframes shimmer {
    from {
      background-position: -250% 0;
    }
    to {
      background-position: 250% 0;
    }
  }
`;var Iy=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let _h=class extends Le{constructor(){super(...arguments),this.width="",this.height="",this.borderRadius="m",this.variant="default"}render(){return this.style.cssText=`
      width: ${this.width};
      height: ${this.height};
      border-radius: ${`clamp(0px,var(--wui-border-radius-${this.borderRadius}), 40px)`};
    `,Z`<slot></slot>`}};_h.styles=[mRe];Iy([Q()],_h.prototype,"width",void 0);Iy([Q()],_h.prototype,"height",void 0);Iy([Q()],_h.prototype,"borderRadius",void 0);Iy([Q()],_h.prototype,"variant",void 0);_h=Iy([De("wui-shimmer")],_h);const wRe="https://reown.com",yRe=Ge`
  .reown-logo {
    height: var(--wui-spacing-xxl);
  }

  a {
    text-decoration: none;
    cursor: pointer;
  }

  a:hover {
    opacity: 0.9;
  }
`;var bRe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let B4=class extends Le{render(){return Z`
      <a
        data-testid="ux-branding-reown"
        href=${wRe}
        rel="noreferrer"
        target="_blank"
        style="text-decoration: none;"
      >
        <wui-flex
          justifyContent="center"
          alignItems="center"
          gap="xs"
          .padding=${["0","0","l","0"]}
        >
          <wui-text variant="small-500" color="fg-100"> UX by </wui-text>
          <wui-icon name="reown" size="xxxl" class="reown-logo"></wui-icon>
        </wui-flex>
      </a>
    `}};B4.styles=[Nt,Yr,yRe];B4=bRe([De("wui-ux-by-reown")],B4);const vRe=Ge`
  @keyframes fadein {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  wui-shimmer {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px) !important;
  }

  wui-qr-code {
    opacity: 0;
    animation-duration: 200ms;
    animation-timing-function: ease;
    animation-name: fadein;
    animation-fill-mode: forwards;
  }
`;var ERe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let L4=class extends li{constructor(){super(),this.forceUpdate=()=>{this.requestUpdate()},window.addEventListener("resize",this.forceUpdate),ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet?.name??"WalletConnect",platform:"qrcode"}})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe?.forEach(e=>e()),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),Z`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["0","xl","xl","xl"]}
        gap="xl"
      >
        <wui-shimmer borderRadius="l" width="100%"> ${this.qrCodeTemplate()} </wui-shimmer>

        <wui-text variant="paragraph-500" color="fg-100">
          Scan this QR Code with your phone
        </wui-text>
        ${this.copyTemplate()}
      </wui-flex>
      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout(()=>{this.ready=!0},200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;const e=this.getBoundingClientRect().width-40,n=this.wallet?this.wallet.name:void 0;return _e.setWcLinking(void 0),_e.setRecentWallet(this.wallet),Z` <wui-qr-code
      size=${e}
      theme=${Ur.state.themeMode}
      uri=${this.uri}
      imageSrc=${We(ir.getWalletImage(this.wallet))}
      color=${We(Ur.state.themeVariables["--w3m-qr-color"])}
      alt=${We(n)}
      data-testid="wui-qr-code"
    ></wui-qr-code>`}copyTemplate(){const e=!this.uri||!this.ready;return Z`<wui-link
      .disabled=${e}
      @click=${this.onCopyUri}
      color="fg-200"
      data-testid="copy-wc2-uri"
    >
      <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
      Copy link
    </wui-link>`}};L4.styles=vRe;L4=ERe([De("w3m-connecting-wc-qrcode")],L4);var CRe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let pM=class extends Le{constructor(){if(super(),this.wallet=we.state.data?.wallet,!this.wallet)throw new Error("w3m-connecting-wc-unsupported: No wallet provided");ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}render(){return Z`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-wallet-image
          size="lg"
          imageSrc=${We(ir.getWalletImage(this.wallet))}
        ></wui-wallet-image>

        <wui-text variant="paragraph-500" color="fg-100">Not Detected</wui-text>
      </wui-flex>

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}};pM=CRe([De("w3m-connecting-wc-unsupported")],pM);var FW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let U4=class extends li{constructor(){if(super(),this.isLoading=!0,!this.wallet)throw new Error("w3m-connecting-wc-web: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.secondaryBtnLabel="Open",this.secondaryLabel=Ht.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.updateLoadingState(),this.unsubscribe.push(_e.subscribeKey("wcUri",()=>{this.updateLoadingState()})),ut.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"web"}})}updateLoadingState(){this.isLoading=!this.uri}onConnectProxy(){if(this.wallet?.webapp_link&&this.uri)try{this.error=!1;const{webapp_link:e,name:n}=this.wallet,{redirect:r,href:i}=ge.formatUniversalUrl(e,this.uri);_e.setWcLinking({name:n,href:i}),_e.setRecentWallet(this.wallet),ge.openHref(r,"_blank")}catch{this.error=!0}}};FW([Te()],U4.prototype,"isLoading",void 0);U4=FW([De("w3m-connecting-wc-web")],U4);var Oy=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Fg=class extends Le{constructor(){super(),this.wallet=we.state.data?.wallet,this.unsubscribe=[],this.platform=void 0,this.platforms=[],this.isSiwxEnabled=!!ae.state.siwx,this.remoteFeatures=ae.state.remoteFeatures,this.determinePlatforms(),this.initializeConnection(),this.unsubscribe.push(ae.subscribeKey("remoteFeatures",e=>this.remoteFeatures=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      ${this.headerTemplate()}
      <div>${this.platformTemplate()}</div>
      ${this.reownBrandingTemplate()}
    `}reownBrandingTemplate(){return this.remoteFeatures?.reownBranding?Z`<wui-ux-by-reown></wui-ux-by-reown>`:null}async initializeConnection(e=!1){if(!(this.platform==="browser"||ae.state.manualWCControl&&!e))try{const{wcPairingExpiry:n,status:r}=_e.state;(e||ae.state.enableEmbedded||ge.isPairingExpired(n)||r==="connecting")&&(await _e.connectWalletConnect(),this.isSiwxEnabled||Lt.close())}catch(n){ut.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:n?.message??"Unknown"}}),_e.setWcError(!0),qn.showError(n.message??"Connection error"),_e.resetWcConnection(),we.goBack()}}determinePlatforms(){if(!this.wallet){this.platforms.push("qrcode"),this.platform="qrcode";return}if(this.platform)return;const{mobile_link:e,desktop_link:n,webapp_link:r,injected:i,rdns:s}=this.wallet,o=i?.map(({injected_id:p})=>p).filter(Boolean),a=[...s?[s]:o??[]],c=ae.state.isUniversalProvider?!1:a.length,l=e,u=r,d=_e.checkInstalled(a),h=c&&d,f=n&&!ge.isMobile();h&&!V.state.noAdapters&&this.platforms.push("browser"),l&&this.platforms.push(ge.isMobile()?"mobile":"qrcode"),u&&this.platforms.push("web"),f&&this.platforms.push("desktop"),!h&&c&&!V.state.noAdapters&&this.platforms.push("unsupported"),this.platform=this.platforms[0]}platformTemplate(){switch(this.platform){case"browser":return Z`<w3m-connecting-wc-browser></w3m-connecting-wc-browser>`;case"web":return Z`<w3m-connecting-wc-web></w3m-connecting-wc-web>`;case"desktop":return Z`
          <w3m-connecting-wc-desktop .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-desktop>
        `;case"mobile":return Z`
          <w3m-connecting-wc-mobile isMobile .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-mobile>
        `;case"qrcode":return Z`<w3m-connecting-wc-qrcode></w3m-connecting-wc-qrcode>`;default:return Z`<w3m-connecting-wc-unsupported></w3m-connecting-wc-unsupported>`}}headerTemplate(){return this.platforms.length>1?Z`
      <w3m-connecting-header
        .platforms=${this.platforms}
        .onSelectPlatfrom=${this.onSelectPlatform.bind(this)}
      >
      </w3m-connecting-header>
    `:null}async onSelectPlatform(e){const n=this.shadowRoot?.querySelector("div");n&&(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.platform=e,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}};Oy([Te()],Fg.prototype,"platform",void 0);Oy([Te()],Fg.prototype,"platforms",void 0);Oy([Te()],Fg.prototype,"isSiwxEnabled",void 0);Oy([Te()],Fg.prototype,"remoteFeatures",void 0);Fg=Oy([De("w3m-connecting-wc-view")],Fg);var qW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let k2=class extends Le{constructor(){super(...arguments),this.isMobile=ge.isMobile()}render(){if(this.isMobile){const{featured:e,recommended:n}=ye.state,{customWallets:r}=ae.state,i=Be.getRecentWallets(),s=e.length||n.length||r?.length||i.length;return Z`<wui-flex
        flexDirection="column"
        gap="xs"
        .margin=${["3xs","s","s","s"]}
      >
        ${s?Z`<w3m-connector-list></w3m-connector-list>`:null}
        <w3m-all-wallets-widget></w3m-all-wallets-widget>
      </wui-flex>`}return Z`<wui-flex flexDirection="column" .padding=${["0","0","l","0"]}>
      <w3m-connecting-wc-view></w3m-connecting-wc-view>
      <wui-flex flexDirection="column" .padding=${["0","m","0","m"]}>
        <w3m-all-wallets-widget></w3m-all-wallets-widget> </wui-flex
    ></wui-flex>`}};qW([Te()],k2.prototype,"isMobile",void 0);k2=qW([De("w3m-connecting-wc-basic-view")],k2);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vx=()=>new _Re;class _Re{}const l5=new WeakMap,Wx=Nx(class extends vW{render(t){return Fn}update(t,[e]){const n=e!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),Fn}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let n=l5.get(e);n===void 0&&(n=new WeakMap,l5.set(e,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?l5.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),SRe=Ge`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  label {
    position: relative;
    display: inline-block;
    width: 32px;
    height: 22px;
  }

  input {
    width: 0;
    height: 0;
    opacity: 0;
  }

  span {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--wui-color-blue-100);
    border-width: 1px;
    border-style: solid;
    border-color: var(--wui-color-gray-glass-002);
    border-radius: 999px;
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color;
  }

  span:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 3px;
    top: 2px;
    background-color: var(--wui-color-inverse-100);
    transition: transform var(--wui-ease-inout-power-1) var(--wui-duration-lg);
    will-change: transform;
    border-radius: 50%;
  }

  input:checked + span {
    border-color: var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-blue-100);
  }

  input:not(:checked) + span {
    background-color: var(--wui-color-gray-glass-010);
  }

  input:checked + span:before {
    transform: translateX(calc(100% - 7px));
  }
`;var HW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let N2=class extends Le{constructor(){super(...arguments),this.inputElementRef=Vx(),this.checked=void 0}render(){return Z`
      <label>
        <input
          ${Wx(this.inputElementRef)}
          type="checkbox"
          ?checked=${We(this.checked)}
          @change=${this.dispatchChangeEvent.bind(this)}
        />
        <span></span>
      </label>
    `}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("switchChange",{detail:this.inputElementRef.value?.checked,bubbles:!0,composed:!0}))}};N2.styles=[Nt,Yr,vy,SRe];HW([Q({type:Boolean})],N2.prototype,"checked",void 0);N2=HW([De("wui-switch")],N2);const ARe=Ge`
  :host {
    height: 100%;
  }

  button {
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: var(--wui-spacing-1xs);
    padding: var(--wui-spacing-xs) var(--wui-spacing-s);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
    cursor: pointer;
  }

  wui-switch {
    pointer-events: none;
  }
`;var zW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let $2=class extends Le{constructor(){super(...arguments),this.checked=void 0}render(){return Z`
      <button>
        <wui-icon size="xl" name="walletConnectBrown"></wui-icon>
        <wui-switch ?checked=${We(this.checked)}></wui-switch>
      </button>
    `}};$2.styles=[Nt,Yr,ARe];zW([Q({type:Boolean})],$2.prototype,"checked",void 0);$2=zW([De("wui-certified-switch")],$2);const xRe=Ge`
  button {
    background-color: var(--wui-color-fg-300);
    border-radius: var(--wui-border-radius-4xs);
    width: 16px;
    height: 16px;
  }

  button:disabled {
    background-color: var(--wui-color-bg-300);
  }

  wui-icon {
    color: var(--wui-color-bg-200) !important;
  }

  button:focus-visible {
    background-color: var(--wui-color-fg-250);
    border: 1px solid var(--wui-color-accent-100);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-fg-250);
    }

    button:active:enabled {
      background-color: var(--wui-color-fg-225);
    }
  }
`;var KW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let R2=class extends Le{constructor(){super(...arguments),this.icon="copy"}render(){return Z`
      <button>
        <wui-icon color="inherit" size="xxs" name=${this.icon}></wui-icon>
      </button>
    `}};R2.styles=[Nt,Yr,xRe];KW([Q()],R2.prototype,"icon",void 0);R2=KW([De("wui-input-element")],R2);const IRe=Ge`
  :host {
    position: relative;
    width: 100%;
    display: inline-block;
    color: var(--wui-color-fg-275);
  }

  input {
    width: 100%;
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    background: var(--wui-color-gray-glass-002);
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
    color: var(--wui-color-fg-100);
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color, box-shadow;
    caret-color: var(--wui-color-accent-100);
  }

  input:disabled {
    cursor: not-allowed;
    border: 1px solid var(--wui-color-gray-glass-010);
  }

  input:disabled::placeholder,
  input:disabled + wui-icon {
    color: var(--wui-color-fg-300);
  }

  input::placeholder {
    color: var(--wui-color-fg-275);
  }

  input:focus:enabled {
    background-color: var(--wui-color-gray-glass-005);
    -webkit-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    -moz-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
  }

  input:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  wui-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
  }

  .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px var(--wui-spacing-s);
  }

  wui-icon + .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px 36px;
  }

  wui-icon[data-input='sm'] {
    left: var(--wui-spacing-s);
  }

  .wui-size-md {
    padding: 15px var(--wui-spacing-m) var(--wui-spacing-l) var(--wui-spacing-m);
  }

  wui-icon + .wui-size-md,
  wui-loading-spinner + .wui-size-md {
    padding: 10.5px var(--wui-spacing-3xl) 10.5px var(--wui-spacing-3xl);
  }

  wui-icon[data-input='md'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-lg {
    padding: var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-l);
    letter-spacing: var(--wui-letter-spacing-medium-title);
    font-size: var(--wui-font-size-medium-title);
    font-weight: var(--wui-font-weight-light);
    line-height: 130%;
    color: var(--wui-color-fg-100);
    height: 64px;
  }

  .wui-padding-right-xs {
    padding-right: var(--wui-spacing-xs);
  }

  .wui-padding-right-s {
    padding-right: var(--wui-spacing-s);
  }

  .wui-padding-right-m {
    padding-right: var(--wui-spacing-m);
  }

  .wui-padding-right-l {
    padding-right: var(--wui-spacing-l);
  }

  .wui-padding-right-xl {
    padding-right: var(--wui-spacing-xl);
  }

  .wui-padding-right-2xl {
    padding-right: var(--wui-spacing-2xl);
  }

  .wui-padding-right-3xl {
    padding-right: var(--wui-spacing-3xl);
  }

  .wui-padding-right-4xl {
    padding-right: var(--wui-spacing-4xl);
  }

  .wui-padding-right-5xl {
    padding-right: var(--wui-spacing-5xl);
  }

  wui-icon + .wui-size-lg,
  wui-loading-spinner + .wui-size-lg {
    padding-left: 50px;
  }

  wui-icon[data-input='lg'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-m) 17.25px var(--wui-spacing-m);
  }
  wui-icon + .wui-size-mdl,
  wui-loading-spinner + .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-3xl) 17.25px 40px;
  }
  wui-icon[data-input='mdl'] {
    left: var(--wui-spacing-m);
  }

  input:placeholder-shown ~ ::slotted(wui-input-element),
  input:placeholder-shown ~ ::slotted(wui-icon) {
    opacity: 0;
    pointer-events: none;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  ::slotted(wui-input-element),
  ::slotted(wui-icon) {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }

  ::slotted(wui-input-element) {
    right: var(--wui-spacing-m);
  }

  ::slotted(wui-icon) {
    right: 0px;
  }
`;var Va=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let po=class extends Le{constructor(){super(...arguments),this.inputElementRef=Vx(),this.size="md",this.disabled=!1,this.placeholder="",this.type="text",this.value=""}render(){const e=`wui-padding-right-${this.inputRightPadding}`,r={[`wui-size-${this.size}`]:!0,[e]:!!this.inputRightPadding};return Z`${this.templateIcon()}
      <input
        data-testid="wui-input-text"
        ${Wx(this.inputElementRef)}
        class=${EW(r)}
        type=${this.type}
        enterkeyhint=${We(this.enterKeyHint)}
        ?disabled=${this.disabled}
        placeholder=${this.placeholder}
        @input=${this.dispatchInputChangeEvent.bind(this)}
        .value=${this.value||""}
        tabindex=${We(this.tabIdx)}
      />
      <slot></slot>`}templateIcon(){return this.icon?Z`<wui-icon
        data-input=${this.size}
        size=${this.size}
        color="inherit"
        name=${this.icon}
      ></wui-icon>`:null}dispatchInputChangeEvent(){this.dispatchEvent(new CustomEvent("inputChange",{detail:this.inputElementRef.value?.value,bubbles:!0,composed:!0}))}};po.styles=[Nt,Yr,IRe];Va([Q()],po.prototype,"size",void 0);Va([Q()],po.prototype,"icon",void 0);Va([Q({type:Boolean})],po.prototype,"disabled",void 0);Va([Q()],po.prototype,"placeholder",void 0);Va([Q()],po.prototype,"type",void 0);Va([Q()],po.prototype,"keyHint",void 0);Va([Q()],po.prototype,"value",void 0);Va([Q()],po.prototype,"inputRightPadding",void 0);Va([Q()],po.prototype,"tabIdx",void 0);po=Va([De("wui-input-text")],po);const ORe=Ge`
  :host {
    position: relative;
    display: inline-block;
    width: 100%;
  }
`;var PRe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let j4=class extends Le{constructor(){super(...arguments),this.inputComponentRef=Vx()}render(){return Z`
      <wui-input-text
        ${Wx(this.inputComponentRef)}
        placeholder="Search wallet"
        icon="search"
        type="search"
        enterKeyHint="search"
        size="sm"
      >
        <wui-input-element @click=${this.clearValue} icon="close"></wui-input-element>
      </wui-input-text>
    `}clearValue(){const n=this.inputComponentRef.value?.inputElementRef.value;n&&(n.value="",n.focus(),n.dispatchEvent(new Event("input")))}};j4.styles=[Nt,ORe];j4=PRe([De("wui-search-bar")],j4);const TRe=Ce`<svg  viewBox="0 0 48 54" fill="none">
  <path
    d="M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z"
  />
</svg>`,kRe=Ge`
  :host {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-xs) 10px;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    position: relative;
  }

  wui-shimmer[data-type='network'] {
    border: none;
    -webkit-clip-path: var(--wui-path-network);
    clip-path: var(--wui-path-network);
  }

  svg {
    position: absolute;
    width: 48px;
    height: 54px;
    z-index: 1;
  }

  svg > path {
    stroke: var(--wui-color-gray-glass-010);
    stroke-width: 1px;
  }

  @media (max-width: 350px) {
    :host {
      width: 100%;
    }
  }
`;var VW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let M2=class extends Le{constructor(){super(...arguments),this.type="wallet"}render(){return Z`
      ${this.shimmerTemplate()}
      <wui-shimmer width="56px" height="20px" borderRadius="xs"></wui-shimmer>
    `}shimmerTemplate(){return this.type==="network"?Z` <wui-shimmer
          data-type=${this.type}
          width="48px"
          height="54px"
          borderRadius="xs"
        ></wui-shimmer>
        ${TRe}`:Z`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}};M2.styles=[Nt,Yr,kRe];VW([Q()],M2.prototype,"type",void 0);M2=VW([De("wui-card-select-loader")],M2);const NRe=Ge`
  :host {
    display: grid;
    width: inherit;
    height: inherit;
  }
`;var wo=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ji=class extends Le{render(){return this.style.cssText=`
      grid-template-rows: ${this.gridTemplateRows};
      grid-template-columns: ${this.gridTemplateColumns};
      justify-items: ${this.justifyItems};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      align-content: ${this.alignContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&Er.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&Er.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&Er.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&Er.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&Er.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&Er.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&Er.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&Er.getSpacingStyles(this.margin,3)};
    `,Z`<slot></slot>`}};Ji.styles=[Nt,NRe];wo([Q()],Ji.prototype,"gridTemplateRows",void 0);wo([Q()],Ji.prototype,"gridTemplateColumns",void 0);wo([Q()],Ji.prototype,"justifyItems",void 0);wo([Q()],Ji.prototype,"alignItems",void 0);wo([Q()],Ji.prototype,"justifyContent",void 0);wo([Q()],Ji.prototype,"alignContent",void 0);wo([Q()],Ji.prototype,"columnGap",void 0);wo([Q()],Ji.prototype,"rowGap",void 0);wo([Q()],Ji.prototype,"gap",void 0);wo([Q()],Ji.prototype,"padding",void 0);wo([Q()],Ji.prototype,"margin",void 0);Ji=wo([De("wui-grid")],Ji);const $Re=Ge`
  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-s) var(--wui-spacing-0);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border-radius;
    outline: none;
    border: none;
  }

  button > wui-flex > wui-text {
    color: var(--wui-color-fg-100);
    max-width: 86px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    justify-content: center;
  }

  button > wui-flex > wui-text.certified {
    max-width: 66px;
  }

  button:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  button:disabled > wui-flex > wui-text {
    color: var(--wui-color-gray-glass-015);
  }

  [data-selected='true'] {
    background-color: var(--wui-color-accent-glass-020);
  }

  @media (hover: hover) and (pointer: fine) {
    [data-selected='true']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }
  }

  [data-selected='true']:active:enabled {
    background-color: var(--wui-color-accent-glass-010);
  }

  @media (max-width: 350px) {
    button {
      width: 100%;
    }
  }
`;var Py=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Sh=class extends Le{constructor(){super(),this.observer=new IntersectionObserver(()=>{}),this.visible=!1,this.imageSrc=void 0,this.imageLoading=!1,this.wallet=void 0,this.observer=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting?(this.visible=!0,this.fetchImageSrc()):this.visible=!1})},{threshold:.01})}firstUpdated(){this.observer.observe(this)}disconnectedCallback(){this.observer.disconnect()}render(){const e=this.wallet?.badge_type==="certified";return Z`
      <button>
        ${this.imageTemplate()}
        <wui-flex flexDirection="row" alignItems="center" justifyContent="center" gap="3xs">
          <wui-text
            variant="tiny-500"
            color="inherit"
            class=${We(e?"certified":void 0)}
            >${this.wallet?.name}</wui-text
          >
          ${e?Z`<wui-icon size="sm" name="walletConnectBrown"></wui-icon>`:null}
        </wui-flex>
      </button>
    `}imageTemplate(){return!this.visible&&!this.imageSrc||this.imageLoading?this.shimmerTemplate():Z`
      <wui-wallet-image
        size="md"
        imageSrc=${We(this.imageSrc)}
        name=${this.wallet?.name}
        .installed=${this.wallet?.installed}
        badgeSize="sm"
      >
      </wui-wallet-image>
    `}shimmerTemplate(){return Z`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}async fetchImageSrc(){this.wallet&&(this.imageSrc=ir.getWalletImage(this.wallet),!this.imageSrc&&(this.imageLoading=!0,this.imageSrc=await ir.fetchWalletImage(this.wallet.image_id),this.imageLoading=!1))}};Sh.styles=$Re;Py([Te()],Sh.prototype,"visible",void 0);Py([Te()],Sh.prototype,"imageSrc",void 0);Py([Te()],Sh.prototype,"imageLoading",void 0);Py([Q()],Sh.prototype,"wallet",void 0);Sh=Py([De("w3m-all-wallets-list-item")],Sh);const RRe=Ge`
  wui-grid {
    max-height: clamp(360px, 400px, 80vh);
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    padding-top: var(--wui-spacing-l);
    padding-bottom: var(--wui-spacing-l);
    justify-content: center;
    grid-column: 1 / span 4;
  }
`;var d0=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const gM="local-paginator";let Bu=class extends Le{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.loading=!ye.state.wallets.length,this.wallets=ye.state.wallets,this.recommended=ye.state.recommended,this.featured=ye.state.featured,this.filteredWallets=ye.state.filteredWallets,this.unsubscribe.push(ye.subscribeKey("wallets",e=>this.wallets=e),ye.subscribeKey("recommended",e=>this.recommended=e),ye.subscribeKey("featured",e=>this.featured=e),ye.subscribeKey("filteredWallets",e=>this.filteredWallets=e))}firstUpdated(){this.initialFetch(),this.createPaginationObserver()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.paginationObserver?.disconnect()}render(){return Z`
      <wui-grid
        data-scroll=${!this.loading}
        .padding=${["0","s","s","s"]}
        columnGap="xxs"
        rowGap="l"
        justifyContent="space-between"
      >
        ${this.loading?this.shimmerTemplate(16):this.walletsTemplate()}
        ${this.paginationLoaderTemplate()}
      </wui-grid>
    `}async initialFetch(){this.loading=!0;const e=this.shadowRoot?.querySelector("wui-grid");e&&(await ye.fetchWalletsByPage({page:1}),await e.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.loading=!1,e.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}shimmerTemplate(e,n){return[...Array(e)].map(()=>Z`
        <wui-card-select-loader type="wallet" id=${We(n)}></wui-card-select-loader>
      `)}walletsTemplate(){const e=this.filteredWallets?.length>0?ge.uniqueBy([...this.featured,...this.recommended,...this.filteredWallets],"id"):ge.uniqueBy([...this.featured,...this.recommended,...this.wallets],"id");return mh.markWalletsAsInstalled(e).map(r=>Z`
        <w3m-all-wallets-list-item
          @click=${()=>this.onConnectWallet(r)}
          .wallet=${r}
        ></w3m-all-wallets-list-item>
      `)}paginationLoaderTemplate(){const{wallets:e,recommended:n,featured:r,count:i}=ye.state,s=window.innerWidth<352?3:4,o=e.length+n.length;let c=Math.ceil(o/s)*s-o+s;return c-=e.length?r.length%s:0,i===0&&r.length>0?null:i===0||[...r,...e,...n].length<i?this.shimmerTemplate(c,gM):null}createPaginationObserver(){const e=this.shadowRoot?.querySelector(`#${gM}`);e&&(this.paginationObserver=new IntersectionObserver(([n])=>{if(n?.isIntersecting&&!this.loading){const{page:r,count:i,wallets:s}=ye.state;s.length<i&&ye.fetchWalletsByPage({page:r+1})}}),this.paginationObserver.observe(e))}onConnectWallet(e){pe.selectWalletConnector(e)}};Bu.styles=RRe;d0([Te()],Bu.prototype,"loading",void 0);d0([Te()],Bu.prototype,"wallets",void 0);d0([Te()],Bu.prototype,"recommended",void 0);d0([Te()],Bu.prototype,"featured",void 0);d0([Te()],Bu.prototype,"filteredWallets",void 0);Bu=d0([De("w3m-all-wallets-list")],Bu);const MRe=Ge`
  wui-grid,
  wui-loading-spinner,
  wui-flex {
    height: 360px;
  }

  wui-grid {
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
`;var u3=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let qg=class extends Le{constructor(){super(...arguments),this.prevQuery="",this.prevBadge=void 0,this.loading=!0,this.query=""}render(){return this.onSearch(),this.loading?Z`<wui-loading-spinner color="accent-100"></wui-loading-spinner>`:this.walletsTemplate()}async onSearch(){(this.query.trim()!==this.prevQuery.trim()||this.badge!==this.prevBadge)&&(this.prevQuery=this.query,this.prevBadge=this.badge,this.loading=!0,await ye.searchWallet({search:this.query,badge:this.badge}),this.loading=!1)}walletsTemplate(){const{search:e}=ye.state,n=mh.markWalletsAsInstalled(e);return e.length?Z`
      <wui-grid
        data-testid="wallet-list"
        .padding=${["0","s","s","s"]}
        rowGap="l"
        columnGap="xs"
        justifyContent="space-between"
      >
        ${n.map(r=>Z`
            <w3m-all-wallets-list-item
              @click=${()=>this.onConnectWallet(r)}
              .wallet=${r}
              data-testid="wallet-search-item-${r.id}"
            ></w3m-all-wallets-list-item>
          `)}
      </wui-grid>
    `:Z`
        <wui-flex
          data-testid="no-wallet-found"
          justifyContent="center"
          alignItems="center"
          gap="s"
          flexDirection="column"
        >
          <wui-icon-box
            size="lg"
            iconColor="fg-200"
            backgroundColor="fg-300"
            icon="wallet"
            background="transparent"
          ></wui-icon-box>
          <wui-text data-testid="no-wallet-found-text" color="fg-200" variant="paragraph-500">
            No Wallet found
          </wui-text>
        </wui-flex>
      `}onConnectWallet(e){pe.selectWalletConnector(e)}};qg.styles=MRe;u3([Te()],qg.prototype,"loading",void 0);u3([Q()],qg.prototype,"query",void 0);u3([Q()],qg.prototype,"badge",void 0);qg=u3([De("w3m-all-wallets-search")],qg);var Gx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Tw=class extends Le{constructor(){super(...arguments),this.search="",this.onDebouncedSearch=ge.debounce(e=>{this.search=e})}render(){const e=this.search.length>=2;return Z`
      <wui-flex .padding=${["0","s","s","s"]} gap="xs">
        <wui-search-bar @inputChange=${this.onInputChange.bind(this)}></wui-search-bar>
        <wui-certified-switch
          ?checked=${this.badge}
          @click=${this.onClick.bind(this)}
          data-testid="wui-certified-switch"
        ></wui-certified-switch>
        ${this.qrButtonTemplate()}
      </wui-flex>
      ${e||this.badge?Z`<w3m-all-wallets-search
            query=${this.search}
            badge=${We(this.badge)}
          ></w3m-all-wallets-search>`:Z`<w3m-all-wallets-list badge=${We(this.badge)}></w3m-all-wallets-list>`}
    `}onInputChange(e){this.onDebouncedSearch(e.detail)}onClick(){if(this.badge==="certified"){this.badge=void 0;return}this.badge="certified",qn.showSvg("Only WalletConnect certified",{icon:"walletConnectBrown",iconColor:"accent-100"})}qrButtonTemplate(){return ge.isMobile()?Z`
        <wui-icon-box
          size="lg"
          iconSize="xl"
          iconColor="accent-100"
          backgroundColor="accent-100"
          icon="qrCode"
          background="transparent"
          border
          borderColor="wui-accent-glass-010"
          @click=${this.onWalletConnectQr.bind(this)}
        ></wui-icon-box>
      `:null}onWalletConnectQr(){we.push("ConnectingWalletConnect")}};Gx([Te()],Tw.prototype,"search",void 0);Gx([Te()],Tw.prototype,"badge",void 0);Tw=Gx([De("w3m-all-wallets-view")],Tw);const DRe=Ge`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 11px 18px 11px var(--wui-spacing-s);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-250);
    transition:
      color var(--wui-ease-out-power-1) var(--wui-duration-md),
      background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: color, background-color;
  }

  button[data-iconvariant='square'],
  button[data-iconvariant='square-blue'] {
    padding: 6px 18px 6px 9px;
  }

  button > wui-flex {
    flex: 1;
  }

  button > wui-image {
    width: 32px;
    height: 32px;
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
    border-radius: var(--wui-border-radius-3xl);
  }

  button > wui-icon {
    width: 36px;
    height: 36px;
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
  }

  button > wui-icon-box[data-variant='blue'] {
    box-shadow: 0 0 0 2px var(--wui-color-accent-glass-005);
  }

  button > wui-icon-box[data-variant='overlay'] {
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
  }

  button > wui-icon-box[data-variant='square-blue'] {
    border-radius: var(--wui-border-radius-3xs);
    position: relative;
    border: none;
    width: 36px;
    height: 36px;
  }

  button > wui-icon-box[data-variant='square-blue']::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-accent-glass-010);
    pointer-events: none;
  }

  button > wui-icon:last-child {
    width: 14px;
    height: 14px;
  }

  button:disabled {
    color: var(--wui-color-gray-glass-020);
  }

  button[data-loading='true'] > wui-icon {
    opacity: 0;
  }

  wui-loading-spinner {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
  }
`;var Xo=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ts=class extends Le{constructor(){super(...arguments),this.tabIdx=void 0,this.variant="icon",this.disabled=!1,this.imageSrc=void 0,this.alt=void 0,this.chevron=!1,this.loading=!1}render(){return Z`
      <button
        ?disabled=${this.loading?!0:!!this.disabled}
        data-loading=${this.loading}
        data-iconvariant=${We(this.iconVariant)}
        tabindex=${We(this.tabIdx)}
      >
        ${this.loadingTemplate()} ${this.visualTemplate()}
        <wui-flex gap="3xs">
          <slot></slot>
        </wui-flex>
        ${this.chevronTemplate()}
      </button>
    `}visualTemplate(){if(this.variant==="image"&&this.imageSrc)return Z`<wui-image src=${this.imageSrc} alt=${this.alt??"list item"}></wui-image>`;if(this.iconVariant==="square"&&this.icon&&this.variant==="icon")return Z`<wui-icon name=${this.icon}></wui-icon>`;if(this.variant==="icon"&&this.icon&&this.iconVariant){const e=["blue","square-blue"].includes(this.iconVariant)?"accent-100":"fg-200",n=this.iconVariant==="square-blue"?"mdl":"md",r=this.iconSize?this.iconSize:n;return Z`
        <wui-icon-box
          data-variant=${this.iconVariant}
          icon=${this.icon}
          iconSize=${r}
          background="transparent"
          iconColor=${e}
          backgroundColor=${e}
          size=${n}
        ></wui-icon-box>
      `}return null}loadingTemplate(){return this.loading?Z`<wui-loading-spinner
        data-testid="wui-list-item-loading-spinner"
        color="fg-300"
      ></wui-loading-spinner>`:Z``}chevronTemplate(){return this.chevron?Z`<wui-icon size="inherit" color="fg-200" name="chevronRight"></wui-icon>`:null}};Ts.styles=[Nt,Yr,DRe];Xo([Q()],Ts.prototype,"icon",void 0);Xo([Q()],Ts.prototype,"iconSize",void 0);Xo([Q()],Ts.prototype,"tabIdx",void 0);Xo([Q()],Ts.prototype,"variant",void 0);Xo([Q()],Ts.prototype,"iconVariant",void 0);Xo([Q({type:Boolean})],Ts.prototype,"disabled",void 0);Xo([Q()],Ts.prototype,"imageSrc",void 0);Xo([Q()],Ts.prototype,"alt",void 0);Xo([Q({type:Boolean})],Ts.prototype,"chevron",void 0);Xo([Q({type:Boolean})],Ts.prototype,"loading",void 0);Ts=Xo([De("wui-list-item")],Ts);var BRe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let F4=class extends Le{constructor(){super(...arguments),this.wallet=we.state.data?.wallet}render(){if(!this.wallet)throw new Error("w3m-downloads-view");return Z`
      <wui-flex gap="xs" flexDirection="column" .padding=${["s","s","l","s"]}>
        ${this.chromeTemplate()} ${this.iosTemplate()} ${this.androidTemplate()}
        ${this.homepageTemplate()}
      </wui-flex>
    `}chromeTemplate(){return this.wallet?.chrome_store?Z`<wui-list-item
      variant="icon"
      icon="chromeStore"
      iconVariant="square"
      @click=${this.onChromeStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Chrome Extension</wui-text>
    </wui-list-item>`:null}iosTemplate(){return this.wallet?.app_store?Z`<wui-list-item
      variant="icon"
      icon="appStore"
      iconVariant="square"
      @click=${this.onAppStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">iOS App</wui-text>
    </wui-list-item>`:null}androidTemplate(){return this.wallet?.play_store?Z`<wui-list-item
      variant="icon"
      icon="playStore"
      iconVariant="square"
      @click=${this.onPlayStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Android App</wui-text>
    </wui-list-item>`:null}homepageTemplate(){return this.wallet?.homepage?Z`
      <wui-list-item
        variant="icon"
        icon="browser"
        iconVariant="square-blue"
        @click=${this.onHomePage.bind(this)}
        chevron
      >
        <wui-text variant="paragraph-500" color="fg-100">Website</wui-text>
      </wui-list-item>
    `:null}onChromeStore(){this.wallet?.chrome_store&&ge.openHref(this.wallet.chrome_store,"_blank")}onAppStore(){this.wallet?.app_store&&ge.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&ge.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&ge.openHref(this.wallet.homepage,"_blank")}};F4=BRe([De("w3m-downloads-view")],F4);const LRe=Object.freeze(Object.defineProperty({__proto__:null,get W3mAllWalletsView(){return Tw},get W3mConnectingWcBasicView(){return k2},get W3mDownloadsView(){return F4}},Symbol.toStringTag,{value:"Module"})),URe=Ge`
  :host {
    display: block;
    border-radius: clamp(0px, var(--wui-border-radius-l), 44px);
    box-shadow: 0 0 0 1px var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-modal-bg);
    overflow: hidden;
  }

  :host([data-embedded='true']) {
    box-shadow:
      0 0 0 1px var(--wui-color-gray-glass-005),
      0px 4px 12px 4px var(--w3m-card-embedded-shadow-color);
  }
`;var jRe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let q4=class extends Le{render(){return Z`<slot></slot>`}};q4.styles=[Nt,URe];q4=jRe([De("wui-card")],q4);const FRe=Ge`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-dark-glass-100);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-325);
    box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.25);
  }

  wui-flex {
    width: 100%;
  }

  wui-text {
    word-break: break-word;
    flex: 1;
  }

  .close {
    cursor: pointer;
  }

  .icon-box {
    height: 40px;
    width: 40px;
    border-radius: var(--wui-border-radius-3xs);
    background-color: var(--local-icon-bg-value);
  }
`;var Ty=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ah=class extends Le{constructor(){super(...arguments),this.message="",this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="info"}render(){return this.style.cssText=`
      --local-icon-bg-value: var(--wui-color-${this.backgroundColor});
   `,Z`
      <wui-flex flexDirection="row" justifyContent="space-between" alignItems="center">
        <wui-flex columnGap="xs" flexDirection="row" alignItems="center">
          <wui-flex
            flexDirection="row"
            alignItems="center"
            justifyContent="center"
            class="icon-box"
          >
            <wui-icon color=${this.iconColor} size="md" name=${this.icon}></wui-icon>
          </wui-flex>
          <wui-text variant="small-500" color="bg-350" data-testid="wui-alertbar-text"
            >${this.message}</wui-text
          >
        </wui-flex>
        <wui-icon
          class="close"
          color="bg-350"
          size="sm"
          name="close"
          @click=${this.onClose}
        ></wui-icon>
      </wui-flex>
    `}onClose(){Uo.close()}};Ah.styles=[Nt,FRe];Ty([Q()],Ah.prototype,"message",void 0);Ty([Q()],Ah.prototype,"backgroundColor",void 0);Ty([Q()],Ah.prototype,"iconColor",void 0);Ty([Q()],Ah.prototype,"icon",void 0);Ah=Ty([De("wui-alertbar")],Ah);const qRe=Ge`
  :host {
    display: block;
    position: absolute;
    top: var(--wui-spacing-s);
    left: var(--wui-spacing-l);
    right: var(--wui-spacing-l);
    opacity: 0;
    pointer-events: none;
  }
`;var WW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const HRe={info:{backgroundColor:"fg-350",iconColor:"fg-325",icon:"info"},success:{backgroundColor:"success-glass-reown-020",iconColor:"success-125",icon:"checkmark"},warning:{backgroundColor:"warning-glass-reown-020",iconColor:"warning-100",icon:"warningCircle"},error:{backgroundColor:"error-glass-reown-020",iconColor:"error-125",icon:"exclamationTriangle"}};let D2=class extends Le{constructor(){super(),this.unsubscribe=[],this.open=Uo.state.open,this.onOpen(!0),this.unsubscribe.push(Uo.subscribeKey("open",e=>{this.open=e,this.onOpen(!1)}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:n}=Uo.state,r=HRe[n];return Z`
      <wui-alertbar
        message=${e}
        backgroundColor=${r?.backgroundColor}
        iconColor=${r?.iconColor}
        icon=${r?.icon}
      ></wui-alertbar>
    `}onOpen(e){this.open?(this.animate([{opacity:0,transform:"scale(0.85)"},{opacity:1,transform:"scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: auto"):e||(this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: none")}};D2.styles=qRe;WW([Te()],D2.prototype,"open",void 0);D2=WW([De("w3m-alertbar")],D2);const zRe=Ge`
  button {
    border-radius: var(--local-border-radius);
    color: var(--wui-color-fg-100);
    padding: var(--local-padding);
  }

  @media (max-width: 700px) {
    button {
      padding: var(--wui-spacing-s);
    }
  }

  button > wui-icon {
    pointer-events: none;
  }

  button:disabled > wui-icon {
    color: var(--wui-color-bg-300) !important;
  }

  button:disabled {
    background-color: transparent;
  }
`;var ky=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let xh=class extends Le{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.icon="copy",this.iconColor="inherit"}render(){const e=this.size==="lg"?"--wui-border-radius-xs":"--wui-border-radius-xxs",n=this.size==="lg"?"--wui-spacing-1xs":"--wui-spacing-2xs";return this.style.cssText=`
    --local-border-radius: var(${e});
    --local-padding: var(${n});
`,Z`
      <button ?disabled=${this.disabled}>
        <wui-icon color=${this.iconColor} size=${this.size} name=${this.icon}></wui-icon>
      </button>
    `}};xh.styles=[Nt,Yr,vy,zRe];ky([Q()],xh.prototype,"size",void 0);ky([Q({type:Boolean})],xh.prototype,"disabled",void 0);ky([Q()],xh.prototype,"icon",void 0);ky([Q()],xh.prototype,"iconColor",void 0);xh=ky([De("wui-icon-link")],xh);const KRe=Ge`
  button {
    display: block;
    display: flex;
    align-items: center;
    padding: var(--wui-spacing-xxs);
    gap: var(--wui-spacing-xxs);
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-md);
    border-radius: var(--wui-border-radius-xxs);
  }

  wui-image {
    border-radius: 100%;
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  wui-icon-box {
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-002);
  }

  button:active {
    background-color: var(--wui-color-gray-glass-005);
  }
`;var GW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let B2=class extends Le{constructor(){super(...arguments),this.imageSrc=""}render(){return Z`<button>
      ${this.imageTemplate()}
      <wui-icon size="xs" color="fg-200" name="chevronBottom"></wui-icon>
    </button>`}imageTemplate(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt="select visual"></wui-image>`:Z`<wui-icon-box
      size="xxs"
      iconColor="fg-200"
      backgroundColor="fg-100"
      background="opaque"
      icon="networkPlaceholder"
    ></wui-icon-box>`}};B2.styles=[Nt,Yr,vy,KRe];GW([Q()],B2.prototype,"imageSrc",void 0);B2=GW([De("wui-select")],B2);const VRe=Ge`
  :host {
    height: 64px;
  }

  wui-text {
    text-transform: capitalize;
  }

  wui-flex.w3m-header-title {
    transform: translateY(0);
    opacity: 1;
  }

  wui-flex.w3m-header-title[view-direction='prev'] {
    animation:
      slide-down-out 120ms forwards var(--wui-ease-out-power-2),
      slide-down-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-flex.w3m-header-title[view-direction='next'] {
    animation:
      slide-up-out 120ms forwards var(--wui-ease-out-power-2),
      slide-up-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-icon-link[data-hidden='true'] {
    opacity: 0 !important;
    pointer-events: none;
  }

  @keyframes slide-up-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(3px);
      opacity: 0;
    }
  }

  @keyframes slide-up-in {
    from {
      transform: translateY(-3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-down-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(-3px);
      opacity: 0;
    }
  }

  @keyframes slide-down-in {
    from {
      transform: translateY(3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`;var rl=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const WRe=["SmartSessionList"];function u5(){const t=we.state.data?.connector?.name,e=we.state.data?.wallet?.name,n=we.state.data?.network?.name,r=e??t,i=pe.getConnectors();return{Connect:`Connect ${i.length===1&&i[0]?.id==="w3m-email"?"Email":""} Wallet`,Create:"Create Wallet",ChooseAccountName:void 0,Account:void 0,AccountSettings:void 0,AllWallets:"All Wallets",ApproveTransaction:"Approve Transaction",BuyInProgress:"Buy",ConnectingExternal:r??"Connect Wallet",ConnectingWalletConnect:r??"WalletConnect",ConnectingWalletConnectBasic:"WalletConnect",ConnectingSiwe:"Sign In",Convert:"Convert",ConvertSelectToken:"Select token",ConvertPreview:"Preview convert",Downloads:r?`Get ${r}`:"Downloads",EmailLogin:"Email Login",EmailVerifyOtp:"Confirm Email",EmailVerifyDevice:"Register Device",GetWallet:"Get a wallet",Networks:"Choose Network",OnRampProviders:"Choose Provider",OnRampActivity:"Activity",OnRampTokenSelect:"Select Token",OnRampFiatSelect:"Select Currency",Pay:"How you pay",Profile:void 0,SwitchNetwork:n??"Switch Network",SwitchAddress:"Switch Address",Transactions:"Activity",UnsupportedChain:"Switch Network",UpgradeEmailWallet:"Upgrade your Wallet",UpdateEmailWallet:"Edit Email",UpdateEmailPrimaryOtp:"Confirm Current Email",UpdateEmailSecondaryOtp:"Confirm New Email",WhatIsABuy:"What is Buy?",RegisterAccountName:"Choose name",RegisterAccountNameSuccess:"",WalletReceive:"Receive",WalletCompatibleNetworks:"Compatible Networks",Swap:"Swap",SwapSelectToken:"Select token",SwapPreview:"Preview swap",WalletSend:"Send",WalletSendPreview:"Review send",WalletSendSelectToken:"Select Token",WhatIsANetwork:"What is a network?",WhatIsAWallet:"What is a wallet?",ConnectWallets:"Connect wallet",ConnectSocials:"All socials",ConnectingSocial:Ue.state.socialProvider?Ue.state.socialProvider:"Connect Social",ConnectingMultiChain:"Select chain",ConnectingFarcaster:"Farcaster",SwitchActiveChain:"Switch chain",SmartSessionCreated:void 0,SmartSessionList:"Smart Sessions",SIWXSignMessage:"Sign In",PayLoading:"Payment in progress"}}let Qo=class extends Le{constructor(){super(),this.unsubscribe=[],this.heading=u5()[we.state.view],this.network=V.state.activeCaipNetwork,this.networkImage=ir.getNetworkImage(this.network),this.showBack=!1,this.prevHistoryLength=1,this.view=we.state.view,this.viewDirection="",this.headerText=u5()[we.state.view],this.unsubscribe.push(Yi.subscribeNetworkImages(()=>{this.networkImage=ir.getNetworkImage(this.network)}),we.subscribeKey("view",e=>{setTimeout(()=>{this.view=e,this.headerText=u5()[e]},hu.ANIMATION_DURATIONS.HeaderText),this.onViewChange(),this.onHistoryChange()}),V.subscribeKey("activeCaipNetwork",e=>{this.network=e,this.networkImage=ir.getNetworkImage(this.network)}))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      <wui-flex .padding=${this.getPadding()} justifyContent="space-between" alignItems="center">
        ${this.leftHeaderTemplate()} ${this.titleTemplate()} ${this.rightHeaderTemplate()}
      </wui-flex>
    `}onWalletHelp(){ut.sendEvent({type:"track",event:"CLICK_WALLET_HELP"}),we.push("WhatIsAWallet")}async onClose(){await xK.safeClose()}rightHeaderTemplate(){const e=ae?.state?.features?.smartSessions;return we.state.view!=="Account"||!e?this.closeButtonTemplate():Z`<wui-flex>
      <wui-icon-link
        icon="clock"
        @click=${()=>we.push("SmartSessionList")}
        data-testid="w3m-header-smart-sessions"
      ></wui-icon-link>
      ${this.closeButtonTemplate()}
    </wui-flex> `}closeButtonTemplate(){return Z`
      <wui-icon-link
        icon="close"
        @click=${this.onClose.bind(this)}
        data-testid="w3m-header-close"
      ></wui-icon-link>
    `}titleTemplate(){const e=WRe.includes(this.view);return Z`
      <wui-flex
        view-direction="${this.viewDirection}"
        class="w3m-header-title"
        alignItems="center"
        gap="xs"
      >
        <wui-text variant="paragraph-700" color="fg-100" data-testid="w3m-header-text"
          >${this.headerText}</wui-text
        >
        ${e?Z`<wui-tag variant="main">Beta</wui-tag>`:null}
      </wui-flex>
    `}leftHeaderTemplate(){const{view:e}=we.state,n=e==="Connect",r=ae.state.enableEmbedded,i=e==="ApproveTransaction",s=e==="ConnectingSiwe",o=e==="Account",a=ae.state.enableNetworkSwitch,c=i||s||n&&r;return o&&a?Z`<wui-select
        id="dynamic"
        data-testid="w3m-account-select-network"
        active-network=${We(this.network?.name)}
        @click=${this.onNetworks.bind(this)}
        imageSrc=${We(this.networkImage)}
      ></wui-select>`:this.showBack&&!c?Z`<wui-icon-link
        data-testid="header-back"
        id="dynamic"
        icon="chevronLeft"
        @click=${this.onGoBack.bind(this)}
      ></wui-icon-link>`:Z`<wui-icon-link
      data-hidden=${!n}
      id="dynamic"
      icon="helpCircle"
      @click=${this.onWalletHelp.bind(this)}
    ></wui-icon-link>`}onNetworks(){this.isAllowedNetworkSwitch()&&(ut.sendEvent({type:"track",event:"CLICK_NETWORKS"}),we.push("Networks"))}isAllowedNetworkSwitch(){const e=V.getAllRequestedCaipNetworks(),n=e?e.length>1:!1,r=e?.find(({id:i})=>i===this.network?.id);return n||!r}getPadding(){return this.heading?["l","2l","l","2l"]:["0","2l","0","2l"]}onViewChange(){const{history:e}=we.state;let n=hu.VIEW_DIRECTION.Next;e.length<this.prevHistoryLength&&(n=hu.VIEW_DIRECTION.Prev),this.prevHistoryLength=e.length,this.viewDirection=n}async onHistoryChange(){const{history:e}=we.state,n=this.shadowRoot?.querySelector("#dynamic");e.length>1&&!this.showBack&&n?(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!0,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"})):e.length<=1&&this.showBack&&n&&(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!1,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}onGoBack(){we.goBack()}};Qo.styles=VRe;rl([Te()],Qo.prototype,"heading",void 0);rl([Te()],Qo.prototype,"network",void 0);rl([Te()],Qo.prototype,"networkImage",void 0);rl([Te()],Qo.prototype,"showBack",void 0);rl([Te()],Qo.prototype,"prevHistoryLength",void 0);rl([Te()],Qo.prototype,"view",void 0);rl([Te()],Qo.prototype,"viewDirection",void 0);rl([Te()],Qo.prototype,"headerText",void 0);Qo=rl([De("w3m-header")],Qo);const GRe=Ge`
  :host {
    display: flex;
    column-gap: var(--wui-spacing-s);
    align-items: center;
    padding: var(--wui-spacing-xs) var(--wui-spacing-m) var(--wui-spacing-xs) var(--wui-spacing-xs);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-gray-glass-005);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-175);
    box-shadow:
      0px 14px 64px -4px rgba(0, 0, 0, 0.15),
      0px 8px 22px -6px rgba(0, 0, 0, 0.15);

    max-width: 300px;
  }

  :host wui-loading-spinner {
    margin-left: var(--wui-spacing-3xs);
  }
`;var Vh=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Qc=class extends Le{constructor(){super(...arguments),this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="checkmark",this.message="",this.loading=!1,this.iconType="default"}render(){return Z`
      ${this.templateIcon()}
      <wui-text variant="paragraph-500" color="fg-100" data-testid="wui-snackbar-message"
        >${this.message}</wui-text
      >
    `}templateIcon(){return this.loading?Z`<wui-loading-spinner size="md" color="accent-100"></wui-loading-spinner>`:this.iconType==="default"?Z`<wui-icon size="xl" color=${this.iconColor} name=${this.icon}></wui-icon>`:Z`<wui-icon-box
      size="sm"
      iconSize="xs"
      iconColor=${this.iconColor}
      backgroundColor=${this.backgroundColor}
      icon=${this.icon}
      background="opaque"
    ></wui-icon-box>`}};Qc.styles=[Nt,GRe];Vh([Q()],Qc.prototype,"backgroundColor",void 0);Vh([Q()],Qc.prototype,"iconColor",void 0);Vh([Q()],Qc.prototype,"icon",void 0);Vh([Q()],Qc.prototype,"message",void 0);Vh([Q()],Qc.prototype,"loading",void 0);Vh([Q()],Qc.prototype,"iconType",void 0);Qc=Vh([De("wui-snackbar")],Qc);const ZRe=Ge`
  :host {
    display: block;
    position: absolute;
    opacity: 0;
    pointer-events: none;
    top: 11px;
    left: 50%;
    width: max-content;
  }
`;var ZW=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const YRe={loading:void 0,success:{backgroundColor:"success-100",iconColor:"success-100",icon:"checkmark"},error:{backgroundColor:"error-100",iconColor:"error-100",icon:"close"}};let L2=class extends Le{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.open=qn.state.open,this.unsubscribe.push(qn.subscribeKey("open",e=>{this.open=e,this.onOpen()}))}disconnectedCallback(){clearTimeout(this.timeout),this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:n,svg:r}=qn.state,i=YRe[n],{icon:s,iconColor:o}=r??i??{};return Z`
      <wui-snackbar
        message=${e}
        backgroundColor=${i?.backgroundColor}
        iconColor=${o}
        icon=${s}
        .loading=${n==="loading"}
      ></wui-snackbar>
    `}onOpen(){clearTimeout(this.timeout),this.open?(this.animate([{opacity:0,transform:"translateX(-50%) scale(0.85)"},{opacity:1,transform:"translateX(-50%) scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.timeout&&clearTimeout(this.timeout),qn.state.autoClose&&(this.timeout=setTimeout(()=>qn.hide(),2500))):this.animate([{opacity:1,transform:"translateX(-50%) scale(1)"},{opacity:0,transform:"translateX(-50%) scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"})}};L2.styles=ZRe;ZW([Te()],L2.prototype,"open",void 0);L2=ZW([De("w3m-snackbar")],L2);const QRe=Ge`
  :host {
    pointer-events: none;
  }

  :host > wui-flex {
    display: var(--w3m-tooltip-display);
    opacity: var(--w3m-tooltip-opacity);
    padding: 9px var(--wui-spacing-s) 10px var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-xxs);
    color: var(--wui-color-bg-100);
    position: fixed;
    top: var(--w3m-tooltip-top);
    left: var(--w3m-tooltip-left);
    transform: translate(calc(-50% + var(--w3m-tooltip-parent-width)), calc(-100% - 8px));
    max-width: calc(var(--w3m-modal-width) - var(--wui-spacing-xl));
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host([data-variant='shade']) > wui-flex {
    background-color: var(--wui-color-bg-150);
    border: 1px solid var(--wui-color-gray-glass-005);
  }

  :host([data-variant='shade']) > wui-flex > wui-text {
    color: var(--wui-color-fg-150);
  }

  :host([data-variant='fill']) > wui-flex {
    background-color: var(--wui-color-fg-100);
    border: none;
  }

  wui-icon {
    position: absolute;
    width: 12px !important;
    height: 4px !important;
    color: var(--wui-color-bg-150);
  }

  wui-icon[data-placement='top'] {
    bottom: 0px;
    left: 50%;
    transform: translate(-50%, 95%);
  }

  wui-icon[data-placement='bottom'] {
    top: 0;
    left: 50%;
    transform: translate(-50%, -95%) rotate(180deg);
  }

  wui-icon[data-placement='right'] {
    top: 50%;
    left: 0;
    transform: translate(-65%, -50%) rotate(90deg);
  }

  wui-icon[data-placement='left'] {
    top: 50%;
    right: 0%;
    transform: translate(65%, -50%) rotate(270deg);
  }
`;var Ny=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ih=class extends Le{constructor(){super(),this.unsubscribe=[],this.open=Zf.state.open,this.message=Zf.state.message,this.triggerRect=Zf.state.triggerRect,this.variant=Zf.state.variant,this.unsubscribe.push(Zf.subscribe(e=>{this.open=e.open,this.message=e.message,this.triggerRect=e.triggerRect,this.variant=e.variant}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){this.dataset.variant=this.variant;const e=this.triggerRect.top,n=this.triggerRect.left;return this.style.cssText=`
    --w3m-tooltip-top: ${e}px;
    --w3m-tooltip-left: ${n}px;
    --w3m-tooltip-parent-width: ${this.triggerRect.width/2}px;
    --w3m-tooltip-display: ${this.open?"flex":"none"};
    --w3m-tooltip-opacity: ${this.open?1:0};
    `,Z`<wui-flex>
      <wui-icon data-placement="top" color="fg-100" size="inherit" name="cursor"></wui-icon>
      <wui-text color="inherit" variant="small-500">${this.message}</wui-text>
    </wui-flex>`}};Ih.styles=[QRe];Ny([Te()],Ih.prototype,"open",void 0);Ny([Te()],Ih.prototype,"message",void 0);Ny([Te()],Ih.prototype,"triggerRect",void 0);Ny([Te()],Ih.prototype,"variant",void 0);Ih=Ny([De("w3m-tooltip"),De("w3m-tooltip")],Ih);const JRe=Ge`
  :host {
    --prev-height: 0px;
    --new-height: 0px;
    display: block;
  }

  div.w3m-router-container {
    transform: translateY(0);
    opacity: 1;
  }

  div.w3m-router-container[view-direction='prev'] {
    animation:
      slide-left-out 150ms forwards ease,
      slide-left-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  div.w3m-router-container[view-direction='next'] {
    animation:
      slide-right-out 150ms forwards ease,
      slide-right-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  @keyframes slide-left-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(10px);
      opacity: 0;
    }
  }

  @keyframes slide-left-in {
    from {
      transform: translateX(-10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-right-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(-10px);
      opacity: 0;
    }
  }

  @keyframes slide-right-in {
    from {
      transform: translateX(10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`;var Zx=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let kw=class extends Le{constructor(){super(),this.resizeObserver=void 0,this.prevHeight="0px",this.prevHistoryLength=1,this.unsubscribe=[],this.view=we.state.view,this.viewDirection="",this.unsubscribe.push(we.subscribeKey("view",e=>this.onViewChange(e)))}firstUpdated(){this.resizeObserver=new ResizeObserver(([e])=>{const n=`${e?.contentRect.height}px`;this.prevHeight!=="0px"&&(this.style.setProperty("--prev-height",this.prevHeight),this.style.setProperty("--new-height",n),this.style.animation="w3m-view-height 150ms forwards ease",this.style.height="auto"),setTimeout(()=>{this.prevHeight=n,this.style.animation="unset"},hu.ANIMATION_DURATIONS.ModalHeight)}),this.resizeObserver?.observe(this.getWrapper())}disconnectedCallback(){this.resizeObserver?.unobserve(this.getWrapper()),this.unsubscribe.forEach(e=>e())}render(){return Z`<div class="w3m-router-container" view-direction="${this.viewDirection}">
      ${this.viewTemplate()}
    </div>`}viewTemplate(){switch(this.view){case"AccountSettings":return Z`<w3m-account-settings-view></w3m-account-settings-view>`;case"Account":return Z`<w3m-account-view></w3m-account-view>`;case"AllWallets":return Z`<w3m-all-wallets-view></w3m-all-wallets-view>`;case"ApproveTransaction":return Z`<w3m-approve-transaction-view></w3m-approve-transaction-view>`;case"BuyInProgress":return Z`<w3m-buy-in-progress-view></w3m-buy-in-progress-view>`;case"ChooseAccountName":return Z`<w3m-choose-account-name-view></w3m-choose-account-name-view>`;case"Connect":return Z`<w3m-connect-view></w3m-connect-view>`;case"Create":return Z`<w3m-connect-view walletGuide="explore"></w3m-connect-view>`;case"ConnectingWalletConnect":return Z`<w3m-connecting-wc-view></w3m-connecting-wc-view>`;case"ConnectingWalletConnectBasic":return Z`<w3m-connecting-wc-basic-view></w3m-connecting-wc-basic-view>`;case"ConnectingExternal":return Z`<w3m-connecting-external-view></w3m-connecting-external-view>`;case"ConnectingSiwe":return Z`<w3m-connecting-siwe-view></w3m-connecting-siwe-view>`;case"ConnectWallets":return Z`<w3m-connect-wallets-view></w3m-connect-wallets-view>`;case"ConnectSocials":return Z`<w3m-connect-socials-view></w3m-connect-socials-view>`;case"ConnectingSocial":return Z`<w3m-connecting-social-view></w3m-connecting-social-view>`;case"Downloads":return Z`<w3m-downloads-view></w3m-downloads-view>`;case"EmailLogin":return Z`<w3m-email-login-view></w3m-email-login-view>`;case"EmailVerifyOtp":return Z`<w3m-email-verify-otp-view></w3m-email-verify-otp-view>`;case"EmailVerifyDevice":return Z`<w3m-email-verify-device-view></w3m-email-verify-device-view>`;case"GetWallet":return Z`<w3m-get-wallet-view></w3m-get-wallet-view>`;case"Networks":return Z`<w3m-networks-view></w3m-networks-view>`;case"SwitchNetwork":return Z`<w3m-network-switch-view></w3m-network-switch-view>`;case"Profile":return Z`<w3m-profile-view></w3m-profile-view>`;case"SwitchAddress":return Z`<w3m-switch-address-view></w3m-switch-address-view>`;case"Transactions":return Z`<w3m-transactions-view></w3m-transactions-view>`;case"OnRampProviders":return Z`<w3m-onramp-providers-view></w3m-onramp-providers-view>`;case"OnRampActivity":return Z`<w3m-onramp-activity-view></w3m-onramp-activity-view>`;case"OnRampTokenSelect":return Z`<w3m-onramp-token-select-view></w3m-onramp-token-select-view>`;case"OnRampFiatSelect":return Z`<w3m-onramp-fiat-select-view></w3m-onramp-fiat-select-view>`;case"UpgradeEmailWallet":return Z`<w3m-upgrade-wallet-view></w3m-upgrade-wallet-view>`;case"UpdateEmailWallet":return Z`<w3m-update-email-wallet-view></w3m-update-email-wallet-view>`;case"UpdateEmailPrimaryOtp":return Z`<w3m-update-email-primary-otp-view></w3m-update-email-primary-otp-view>`;case"UpdateEmailSecondaryOtp":return Z`<w3m-update-email-secondary-otp-view></w3m-update-email-secondary-otp-view>`;case"UnsupportedChain":return Z`<w3m-unsupported-chain-view></w3m-unsupported-chain-view>`;case"Swap":return Z`<w3m-swap-view></w3m-swap-view>`;case"SwapSelectToken":return Z`<w3m-swap-select-token-view></w3m-swap-select-token-view>`;case"SwapPreview":return Z`<w3m-swap-preview-view></w3m-swap-preview-view>`;case"WalletSend":return Z`<w3m-wallet-send-view></w3m-wallet-send-view>`;case"WalletSendSelectToken":return Z`<w3m-wallet-send-select-token-view></w3m-wallet-send-select-token-view>`;case"WalletSendPreview":return Z`<w3m-wallet-send-preview-view></w3m-wallet-send-preview-view>`;case"WhatIsABuy":return Z`<w3m-what-is-a-buy-view></w3m-what-is-a-buy-view>`;case"WalletReceive":return Z`<w3m-wallet-receive-view></w3m-wallet-receive-view>`;case"WalletCompatibleNetworks":return Z`<w3m-wallet-compatible-networks-view></w3m-wallet-compatible-networks-view>`;case"WhatIsAWallet":return Z`<w3m-what-is-a-wallet-view></w3m-what-is-a-wallet-view>`;case"ConnectingMultiChain":return Z`<w3m-connecting-multi-chain-view></w3m-connecting-multi-chain-view>`;case"WhatIsANetwork":return Z`<w3m-what-is-a-network-view></w3m-what-is-a-network-view>`;case"ConnectingFarcaster":return Z`<w3m-connecting-farcaster-view></w3m-connecting-farcaster-view>`;case"SwitchActiveChain":return Z`<w3m-switch-active-chain-view></w3m-switch-active-chain-view>`;case"RegisterAccountName":return Z`<w3m-register-account-name-view></w3m-register-account-name-view>`;case"RegisterAccountNameSuccess":return Z`<w3m-register-account-name-success-view></w3m-register-account-name-success-view>`;case"SmartSessionCreated":return Z`<w3m-smart-session-created-view></w3m-smart-session-created-view>`;case"SmartSessionList":return Z`<w3m-smart-session-list-view></w3m-smart-session-list-view>`;case"SIWXSignMessage":return Z`<w3m-siwx-sign-message-view></w3m-siwx-sign-message-view>`;case"Pay":return Z`<w3m-pay-view></w3m-pay-view>`;case"PayLoading":return Z`<w3m-pay-loading-view></w3m-pay-loading-view>`;default:return Z`<w3m-connect-view></w3m-connect-view>`}}onViewChange(e){Zf.hide();let n=hu.VIEW_DIRECTION.Next;const{history:r}=we.state;r.length<this.prevHistoryLength&&(n=hu.VIEW_DIRECTION.Prev),this.prevHistoryLength=r.length,this.viewDirection=n,setTimeout(()=>{this.view=e},hu.ANIMATION_DURATIONS.ViewTransition)}getWrapper(){return this.shadowRoot?.querySelector("div")}};kw.styles=JRe;Zx([Te()],kw.prototype,"view",void 0);Zx([Te()],kw.prototype,"viewDirection",void 0);kw=Zx([De("w3m-router")],kw);const XRe=Ge`
  :host {
    z-index: var(--w3m-z-index);
    display: block;
    backface-visibility: hidden;
    will-change: opacity;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0;
    background-color: var(--wui-cover);
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host(.open) {
    opacity: 1;
  }

  :host(.appkit-modal) {
    position: relative;
    pointer-events: unset;
    background: none;
    width: 100%;
    opacity: 1;
  }

  wui-card {
    max-width: var(--w3m-modal-width);
    width: 100%;
    position: relative;
    animation: zoom-in 0.2s var(--wui-ease-out-power-2);
    animation-fill-mode: backwards;
    outline: none;
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host(.appkit-modal) wui-card {
    max-width: 400px;
  }

  wui-card[shake='true'] {
    animation:
      zoom-in 0.2s var(--wui-ease-out-power-2),
      w3m-shake 0.5s var(--wui-ease-out-power-2);
  }

  wui-flex {
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  @media (max-height: 700px) and (min-width: 431px) {
    wui-flex {
      align-items: flex-start;
    }

    wui-card {
      margin: var(--wui-spacing-xxl) 0px;
    }
  }

  @media (max-width: 430px) {
    wui-flex {
      align-items: flex-end;
    }

    wui-card {
      max-width: 100%;
      border-bottom-left-radius: var(--local-border-bottom-mobile-radius);
      border-bottom-right-radius: var(--local-border-bottom-mobile-radius);
      border-bottom: none;
      animation: slide-in 0.2s var(--wui-ease-out-power-2);
    }

    wui-card[shake='true'] {
      animation:
        slide-in 0.2s var(--wui-ease-out-power-2),
        w3m-shake 0.5s var(--wui-ease-out-power-2);
    }
  }

  @keyframes zoom-in {
    0% {
      transform: scale(0.95) translateY(0);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes slide-in {
    0% {
      transform: scale(1) translateY(50px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes w3m-shake {
    0% {
      transform: scale(1) rotate(0deg);
    }
    20% {
      transform: scale(1) rotate(-1deg);
    }
    40% {
      transform: scale(1) rotate(1.5deg);
    }
    60% {
      transform: scale(1) rotate(-1.5deg);
    }
    80% {
      transform: scale(1) rotate(1deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes w3m-view-height {
    from {
      height: var(--prev-height);
    }
    to {
      height: var(--new-height);
    }
  }
`;var Vu=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const mM="scroll-lock";class Wa extends Le{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.hasPrefetched=!1,this.enableEmbedded=ae.state.enableEmbedded,this.open=Lt.state.open,this.caipAddress=V.state.activeCaipAddress,this.caipNetwork=V.state.activeCaipNetwork,this.shake=Lt.state.shake,this.filterByNamespace=pe.state.filterByNamespace,this.initializeTheming(),ye.prefetchAnalyticsConfig(),this.unsubscribe.push(Lt.subscribeKey("open",e=>e?this.onOpen():this.onClose()),Lt.subscribeKey("shake",e=>this.shake=e),V.subscribeKey("activeCaipNetwork",e=>this.onNewNetwork(e)),V.subscribeKey("activeCaipAddress",e=>this.onNewAddress(e)),ae.subscribeKey("enableEmbedded",e=>this.enableEmbedded=e),pe.subscribeKey("filterByNamespace",e=>{this.filterByNamespace!==e&&!V.getAccountData(e)?.caipAddress&&(ye.fetchRecommendedWallets(),this.filterByNamespace=e)}))}firstUpdated(){if(this.caipAddress){if(this.enableEmbedded){Lt.close(),this.prefetch();return}this.onNewAddress(this.caipAddress)}this.open&&this.onOpen(),this.enableEmbedded&&this.prefetch()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return this.style.cssText=`
      --local-border-bottom-mobile-radius: ${this.enableEmbedded?"clamp(0px, var(--wui-border-radius-l), 44px)":"0px"};
    `,this.enableEmbedded?Z`${this.contentTemplate()}
        <w3m-tooltip></w3m-tooltip> `:this.open?Z`
          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid="w3m-modal-overlay">
            ${this.contentTemplate()}
          </wui-flex>
          <w3m-tooltip></w3m-tooltip>
        `:null}contentTemplate(){return Z` <wui-card
      shake="${this.shake}"
      data-embedded="${We(this.enableEmbedded)}"
      role="alertdialog"
      aria-modal="true"
      tabindex="0"
      data-testid="w3m-modal-card"
    >
      <w3m-header></w3m-header>
      <w3m-router></w3m-router>
      <w3m-snackbar></w3m-snackbar>
      <w3m-alertbar></w3m-alertbar>
    </wui-card>`}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){await xK.safeClose()}initializeTheming(){const{themeVariables:e,themeMode:n}=Ur.state,r=Er.getColorTheme(n);xNe(e,r)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),qn.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){const e=document.createElement("style");e.dataset.w3m=mM,e.textContent=`
      body {
        touch-action: none;
        overflow: hidden;
        overscroll-behavior: contain;
      }
      w3m-modal {
        pointer-events: auto;
      }
    `,document.head.appendChild(e)}onScrollUnlock(){const e=document.head.querySelector(`style[data-w3m="${mM}"]`);e&&e.remove()}onAddKeyboardListener(){this.abortController=new AbortController;const e=this.shadowRoot?.querySelector("wui-card");e?.focus(),window.addEventListener("keydown",n=>{if(n.key==="Escape")this.handleClose();else if(n.key==="Tab"){const{tagName:r}=n.target;r&&!r.includes("W3M-")&&!r.includes("WUI-")&&e?.focus()}},this.abortController)}onRemoveKeyboardListener(){this.abortController?.abort(),this.abortController=void 0}async onNewAddress(e){const n=V.state.isSwitchingNamespace,r=ge.getPlainAddress(e);!r&&!n?Lt.close():n&&r&&we.goBack(),await Gd.initializeIfEnabled(),this.caipAddress=e,V.setIsSwitchingNamespace(!1)}onNewNetwork(e){const n=this.caipNetwork,r=n?.caipNetworkId?.toString(),i=n?.chainNamespace,s=e?.caipNetworkId?.toString(),o=e?.chainNamespace,a=r!==s,l=a&&!(i!==o),u=n?.name===je.UNSUPPORTED_NETWORK_NAME,d=we.state.view==="ConnectingExternal",h=!V.getAccountData(e?.chainNamespace)?.caipAddress,f=we.state.view==="UnsupportedChain",p=Lt.state.open;let g=!1;p&&!d&&(h?a&&(g=!0):(f||l&&!u)&&(g=!0)),g&&we.state.view!=="SIWXSignMessage"&&we.goBack(),this.caipNetwork=e}prefetch(){this.hasPrefetched||(ye.prefetch(),ye.fetchWalletsByPage({page:1}),this.hasPrefetched=!0)}}Wa.styles=XRe;Vu([Q({type:Boolean})],Wa.prototype,"enableEmbedded",void 0);Vu([Te()],Wa.prototype,"open",void 0);Vu([Te()],Wa.prototype,"caipAddress",void 0);Vu([Te()],Wa.prototype,"caipNetwork",void 0);Vu([Te()],Wa.prototype,"shake",void 0);Vu([Te()],Wa.prototype,"filterByNamespace",void 0);let H4=class extends Wa{};H4=Vu([De("w3m-modal")],H4);let z4=class extends Wa{};z4=Vu([De("appkit-modal")],z4);const eMe=Object.freeze(Object.defineProperty({__proto__:null,get AppKitModal(){return z4},get W3mModal(){return H4},W3mModalBase:Wa},Symbol.toStringTag,{value:"Module"})),tMe=Ce`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.0023 0.875C7.48571 0.875 7.8776 1.26675 7.8776 1.75V6.125H12.2541C12.7375 6.125 13.1294 6.51675 13.1294 7C13.1294 7.48325 12.7375 7.875 12.2541 7.875H7.8776V12.25C7.8776 12.7332 7.48571 13.125 7.0023 13.125C6.51889 13.125 6.12701 12.7332 6.12701 12.25V7.875H1.75054C1.26713 7.875 0.875244 7.48325 0.875244 7C0.875244 6.51675 1.26713 6.125 1.75054 6.125H6.12701V1.75C6.12701 1.26675 6.51889 0.875 7.0023 0.875Z"
    fill="#667dff"
  /></svg
>`,nMe=Object.freeze(Object.defineProperty({__proto__:null,addSvg:tMe},Symbol.toStringTag,{value:"Module"})),rMe=Ce`<svg fill="none" viewBox="0 0 24 24">
  <path
    style="fill: var(--wui-color-accent-100);"
    d="M10.2 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM10.2 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0Z"
  />
</svg>`,iMe=Object.freeze(Object.defineProperty({__proto__:null,allWalletsSvg:rMe},Symbol.toStringTag,{value:"Module"})),sMe=Ce`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10.5 2.42908C6.31875 2.42908 2.92859 5.81989 2.92859 10.0034C2.92859 14.1869 6.31875 17.5777 10.5 17.5777C14.6813 17.5777 18.0714 14.1869 18.0714 10.0034C18.0714 5.81989 14.6813 2.42908 10.5 2.42908ZM0.928589 10.0034C0.928589 4.71596 5.21355 0.429077 10.5 0.429077C15.7865 0.429077 20.0714 4.71596 20.0714 10.0034C20.0714 15.2908 15.7865 19.5777 10.5 19.5777C5.21355 19.5777 0.928589 15.2908 0.928589 10.0034ZM10.5 5.75003C11.0523 5.75003 11.5 6.19774 11.5 6.75003L11.5 10.8343L12.7929 9.54137C13.1834 9.15085 13.8166 9.15085 14.2071 9.54137C14.5976 9.9319 14.5976 10.5651 14.2071 10.9556L11.2071 13.9556C10.8166 14.3461 10.1834 14.3461 9.79291 13.9556L6.79291 10.9556C6.40239 10.5651 6.40239 9.9319 6.79291 9.54137C7.18343 9.15085 7.8166 9.15085 8.20712 9.54137L9.50002 10.8343L9.50002 6.75003C9.50002 6.19774 9.94773 5.75003 10.5 5.75003Z"
    clip-rule="evenodd"
  /></svg
>`,oMe=Object.freeze(Object.defineProperty({__proto__:null,arrowBottomCircleSvg:sMe},Symbol.toStringTag,{value:"Module"})),aMe=Ce`
<svg width="36" height="36">
  <path
    d="M28.724 0H7.271A7.269 7.269 0 0 0 0 7.272v21.46A7.268 7.268 0 0 0 7.271 36H28.73A7.272 7.272 0 0 0 36 28.728V7.272A7.275 7.275 0 0 0 28.724 0Z"
    fill="url(#a)"
  />
  <path
    d="m17.845 8.271.729-1.26a1.64 1.64 0 1 1 2.843 1.638l-7.023 12.159h5.08c1.646 0 2.569 1.935 1.853 3.276H6.434a1.632 1.632 0 0 1-1.638-1.638c0-.909.73-1.638 1.638-1.638h4.176l5.345-9.265-1.67-2.898a1.642 1.642 0 0 1 2.844-1.638l.716 1.264Zm-6.317 17.5-1.575 2.732a1.64 1.64 0 1 1-2.844-1.638l1.17-2.025c1.323-.41 2.398-.095 3.249.931Zm13.56-4.954h4.262c.909 0 1.638.729 1.638 1.638 0 .909-.73 1.638-1.638 1.638h-2.367l1.597 2.772c.45.788.185 1.782-.602 2.241a1.642 1.642 0 0 1-2.241-.603c-2.69-4.666-4.711-8.159-6.052-10.485-1.372-2.367-.391-4.743.576-5.549 1.075 1.846 2.682 4.631 4.828 8.348Z"
    fill="#fff"
  />
  <defs>
    <linearGradient id="a" x1="18" y1="0" x2="18" y2="36" gradientUnits="userSpaceOnUse">
      <stop stop-color="#18BFFB" />
      <stop offset="1" stop-color="#2072F3" />
    </linearGradient>
  </defs>
</svg>`,cMe=Object.freeze(Object.defineProperty({__proto__:null,appStoreSvg:aMe},Symbol.toStringTag,{value:"Module"})),lMe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#000" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M28.77 23.3c-.69 1.99-2.75 5.52-4.87 5.56-1.4.03-1.86-.84-3.46-.84-1.61 0-2.12.81-3.45.86-2.25.1-5.72-5.1-5.72-9.62 0-4.15 2.9-6.2 5.42-6.25 1.36-.02 2.64.92 3.47.92.83 0 2.38-1.13 4.02-.97.68.03 2.6.28 3.84 2.08-3.27 2.14-2.76 6.61.75 8.25ZM24.2 7.88c-2.47.1-4.49 2.69-4.2 4.84 2.28.17 4.47-2.39 4.2-4.84Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,uMe=Object.freeze(Object.defineProperty({__proto__:null,appleSvg:lMe},Symbol.toStringTag,{value:"Module"})),dMe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 1.99a1 1 0 0 1 1 1v7.58l2.46-2.46a1 1 0 0 1 1.41 1.42L7.7 13.69a1 1 0 0 1-1.41 0L2.12 9.53A1 1 0 0 1 3.54 8.1L6 10.57V3a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`,hMe=Object.freeze(Object.defineProperty({__proto__:null,arrowBottomSvg:dMe},Symbol.toStringTag,{value:"Module"})),fMe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13 7.99a1 1 0 0 1-1 1H4.4l2.46 2.46a1 1 0 1 1-1.41 1.41L1.29 8.7a1 1 0 0 1 0-1.41L5.46 3.1a1 1 0 0 1 1.41 1.42L4.41 6.99H12a1 1 0 0 1 1 1Z"
    clip-rule="evenodd"
  />
</svg>`,pMe=Object.freeze(Object.defineProperty({__proto__:null,arrowLeftSvg:fMe},Symbol.toStringTag,{value:"Module"})),gMe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1 7.99a1 1 0 0 1 1-1h7.58L7.12 4.53A1 1 0 1 1 8.54 3.1l4.16 4.17a1 1 0 0 1 0 1.41l-4.16 4.17a1 1 0 1 1-1.42-1.41l2.46-2.46H2a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,mMe=Object.freeze(Object.defineProperty({__proto__:null,arrowRightSvg:gMe},Symbol.toStringTag,{value:"Module"})),wMe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 13.99a1 1 0 0 1-1-1V5.4L3.54 7.86a1 1 0 0 1-1.42-1.41L6.3 2.28a1 1 0 0 1 1.41 0l4.17 4.17a1 1 0 1 1-1.41 1.41L8 5.4v7.59a1 1 0 0 1-1 1Z"
    clip-rule="evenodd"
  />
</svg>`,yMe=Object.freeze(Object.defineProperty({__proto__:null,arrowTopSvg:wMe},Symbol.toStringTag,{value:"Module"})),bMe=Ce`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.61391 1.57124C5.85142 1.42873 6.14813 1.42873 6.38564 1.57124L11.0793 4.38749C11.9179 4.89067 11.5612 6.17864 10.5832 6.17864H9.96398V10.0358H10.2854C10.6996 10.0358 11.0354 10.3716 11.0354 10.7858C11.0354 11.2 10.6996 11.5358 10.2854 11.5358H1.71416C1.29995 11.5358 0.964172 11.2 0.964172 10.7858C0.964172 10.3716 1.29995 10.0358 1.71416 10.0358H2.03558L2.03558 6.17864H1.41637C0.438389 6.17864 0.0816547 4.89066 0.920263 4.38749L5.61391 1.57124ZM3.53554 6.17864V10.0358H5.24979V6.17864H3.53554ZM6.74976 6.17864V10.0358H8.46401V6.17864H6.74976ZM8.64913 4.67864H3.35043L5.99978 3.089L8.64913 4.67864Z"
    fill="currentColor"
  /></svg
>`,vMe=Object.freeze(Object.defineProperty({__proto__:null,bankSvg:bMe},Symbol.toStringTag,{value:"Module"})),EMe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4 6.4a1 1 0 0 1-.46.89 6.98 6.98 0 0 0 .38 6.18A7 7 0 0 0 16.46 7.3a1 1 0 0 1-.47-.92 7 7 0 0 0-12 .03Zm-2.02-.5a9 9 0 1 1 16.03 8.2A9 9 0 0 1 1.98 5.9Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.03 8.63c-1.46-.3-2.72-.75-3.6-1.35l-.02-.01-.14-.11a1 1 0 0 1 1.2-1.6l.1.08c.6.4 1.52.74 2.69 1 .16-.99.39-1.88.67-2.65.3-.79.68-1.5 1.15-2.02A2.58 2.58 0 0 1 9.99 1c.8 0 1.45.44 1.92.97.47.52.84 1.23 1.14 2.02.29.77.52 1.66.68 2.64a8 8 0 0 0 2.7-1l.26-.18h.48a1 1 0 0 1 .12 2c-.86.51-2.01.91-3.34 1.18a22.24 22.24 0 0 1-.03 3.19c1.45.29 2.7.73 3.58 1.31a1 1 0 0 1-1.1 1.68c-.6-.4-1.56-.76-2.75-1-.15.8-.36 1.55-.6 2.2-.3.79-.67 1.5-1.14 2.02-.47.53-1.12.97-1.92.97-.8 0-1.45-.44-1.91-.97a6.51 6.51 0 0 1-1.15-2.02c-.24-.65-.44-1.4-.6-2.2-1.18.24-2.13.6-2.73.99a1 1 0 1 1-1.1-1.67c.88-.58 2.12-1.03 3.57-1.31a22.03 22.03 0 0 1-.04-3.2Zm2.2-1.7c.15-.86.34-1.61.58-2.24.24-.65.51-1.12.76-1.4.25-.28.4-.29.42-.29.03 0 .17.01.42.3.25.27.52.74.77 1.4.23.62.43 1.37.57 2.22a19.96 19.96 0 0 1-3.52 0Zm-.18 4.6a20.1 20.1 0 0 1-.03-2.62 21.95 21.95 0 0 0 3.94 0 20.4 20.4 0 0 1-.03 2.63 21.97 21.97 0 0 0-3.88 0Zm.27 2c.13.66.3 1.26.49 1.78.24.65.51 1.12.76 1.4.25.28.4.29.42.29.03 0 .17-.01.42-.3.25-.27.52-.74.77-1.4.19-.5.36-1.1.49-1.78a20.03 20.03 0 0 0-3.35 0Z"
    clip-rule="evenodd"
  />
</svg>`,CMe=Object.freeze(Object.defineProperty({__proto__:null,browserSvg:EMe},Symbol.toStringTag,{value:"Module"})),_Me=Ce`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.16072 2C4.17367 2 4.18665 2 4.19968 2L7.83857 2C8.36772 1.99998 8.82398 1.99996 9.19518 2.04018C9.5895 2.0829 9.97577 2.17811 10.3221 2.42971C10.5131 2.56849 10.6811 2.73647 10.8198 2.92749C11.0714 3.27379 11.1666 3.66007 11.2094 4.0544C11.2496 4.42561 11.2496 4.88188 11.2495 5.41105V7.58896C11.2496 8.11812 11.2496 8.57439 11.2094 8.94561C11.1666 9.33994 11.0714 9.72621 10.8198 10.0725C10.6811 10.2635 10.5131 10.4315 10.3221 10.5703C9.97577 10.8219 9.5895 10.9171 9.19518 10.9598C8.82398 11 8.36772 11 7.83856 11H4.16073C3.63157 11 3.17531 11 2.80411 10.9598C2.40979 10.9171 2.02352 10.8219 1.67722 10.5703C1.48621 10.4315 1.31824 10.2635 1.17946 10.0725C0.927858 9.72621 0.832652 9.33994 0.78993 8.94561C0.749713 8.5744 0.749733 8.11813 0.749757 7.58896L0.749758 5.45C0.749758 5.43697 0.749758 5.42399 0.749757 5.41104C0.749733 4.88188 0.749713 4.42561 0.78993 4.0544C0.832652 3.66007 0.927858 3.27379 1.17946 2.92749C1.31824 2.73647 1.48621 2.56849 1.67722 2.42971C2.02352 2.17811 2.40979 2.0829 2.80411 2.04018C3.17531 1.99996 3.63157 1.99998 4.16072 2ZM2.96567 3.53145C2.69897 3.56034 2.60687 3.60837 2.55888 3.64324C2.49521 3.6895 2.43922 3.74549 2.39296 3.80916C2.35809 3.85715 2.31007 3.94926 2.28117 4.21597C2.26629 4.35335 2.25844 4.51311 2.25431 4.70832H9.74498C9.74085 4.51311 9.733 4.35335 9.71812 4.21597C9.68922 3.94926 9.6412 3.85715 9.60633 3.80916C9.56007 3.74549 9.50408 3.6895 9.44041 3.64324C9.39242 3.60837 9.30031 3.56034 9.03362 3.53145C8.75288 3.50103 8.37876 3.5 7.79961 3.5H4.19968C3.62053 3.5 3.24641 3.50103 2.96567 3.53145ZM9.74956 6.20832H2.24973V7.55C2.24973 8.12917 2.25076 8.5033 2.28117 8.78404C2.31007 9.05074 2.35809 9.14285 2.39296 9.19084C2.43922 9.25451 2.49521 9.31051 2.55888 9.35677C2.60687 9.39163 2.69897 9.43966 2.96567 9.46856C3.24641 9.49897 3.62053 9.5 4.19968 9.5H7.79961C8.37876 9.5 8.75288 9.49897 9.03362 9.46856C9.30032 9.43966 9.39242 9.39163 9.44041 9.35677C9.50408 9.31051 9.56007 9.25451 9.60633 9.19084C9.6412 9.14285 9.68922 9.05075 9.71812 8.78404C9.74854 8.5033 9.74956 8.12917 9.74956 7.55V6.20832ZM6.74963 8C6.74963 7.58579 7.08541 7.25 7.49961 7.25H8.2496C8.6638 7.25 8.99958 7.58579 8.99958 8C8.99958 8.41422 8.6638 8.75 8.2496 8.75H7.49961C7.08541 8.75 6.74963 8.41422 6.74963 8Z"
    fill="currentColor"
  /></svg
>`,SMe=Object.freeze(Object.defineProperty({__proto__:null,cardSvg:_Me},Symbol.toStringTag,{value:"Module"})),AMe=Ce`<svg
  width="28"
  height="28"
  viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M25.5297 4.92733C26.1221 5.4242 26.1996 6.30724 25.7027 6.89966L12.2836 22.8997C12.0316 23.2001 11.6652 23.3811 11.2735 23.3986C10.8817 23.4161 10.5006 23.2686 10.2228 22.9919L2.38218 15.1815C1.83439 14.6358 1.83268 13.7494 2.37835 13.2016C2.92403 12.6538 3.81046 12.6521 4.35825 13.1978L11.1183 19.9317L23.5573 5.10036C24.0542 4.50794 24.9372 4.43047 25.5297 4.92733Z"
    fill="currentColor"/>
</svg>
`,xMe=Object.freeze(Object.defineProperty({__proto__:null,checkmarkSvg:AMe},Symbol.toStringTag,{value:"Module"})),IMe=Ce`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M12.9576 2.23383C13.3807 2.58873 13.4361 3.21947 13.0812 3.64263L6.37159 11.6426C6.19161 11.8572 5.92989 11.9865 5.65009 11.999C5.3703 12.0115 5.09808 11.9062 4.89965 11.7085L0.979321 7.80331C0.588042 7.41354 0.586817 6.78038 0.976585 6.3891C1.36635 5.99782 1.99952 5.99659 2.3908 6.38636L5.53928 9.52268L11.5488 2.35742C11.9037 1.93426 12.5344 1.87893 12.9576 2.23383Z"
    clip-rule="evenodd"
  />
</svg>`,OMe=Object.freeze(Object.defineProperty({__proto__:null,checkmarkBoldSvg:IMe},Symbol.toStringTag,{value:"Module"})),PMe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1.46 4.96a1 1 0 0 1 1.41 0L8 10.09l5.13-5.13a1 1 0 1 1 1.41 1.41l-5.83 5.84a1 1 0 0 1-1.42 0L1.46 6.37a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`,TMe=Object.freeze(Object.defineProperty({__proto__:null,chevronBottomSvg:PMe},Symbol.toStringTag,{value:"Module"})),kMe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M11.04 1.46a1 1 0 0 1 0 1.41L5.91 8l5.13 5.13a1 1 0 1 1-1.41 1.41L3.79 8.71a1 1 0 0 1 0-1.42l5.84-5.83a1 1 0 0 1 1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`,NMe=Object.freeze(Object.defineProperty({__proto__:null,chevronLeftSvg:kMe},Symbol.toStringTag,{value:"Module"})),$Me=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.96 14.54a1 1 0 0 1 0-1.41L10.09 8 4.96 2.87a1 1 0 0 1 1.41-1.41l5.84 5.83a1 1 0 0 1 0 1.42l-5.84 5.83a1 1 0 0 1-1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`,RMe=Object.freeze(Object.defineProperty({__proto__:null,chevronRightSvg:$Me},Symbol.toStringTag,{value:"Module"})),MMe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.54 11.04a1 1 0 0 1-1.41 0L8 5.92l-5.13 5.12a1 1 0 1 1-1.41-1.41l5.83-5.84a1 1 0 0 1 1.42 0l5.83 5.84a1 1 0 0 1 0 1.41Z"
    clip-rule="evenodd"
  />
</svg>`,DMe=Object.freeze(Object.defineProperty({__proto__:null,chevronTopSvg:MMe},Symbol.toStringTag,{value:"Module"})),BMe=Ce`<svg width="36" height="36" fill="none">
  <path
    fill="#fff"
    fill-opacity=".05"
    d="M0 14.94c0-5.55 0-8.326 1.182-10.4a9 9 0 0 1 3.359-3.358C6.614 0 9.389 0 14.94 0h6.12c5.55 0 8.326 0 10.4 1.182a9 9 0 0 1 3.358 3.359C36 6.614 36 9.389 36 14.94v6.12c0 5.55 0 8.326-1.182 10.4a9 9 0 0 1-3.359 3.358C29.386 36 26.611 36 21.06 36h-6.12c-5.55 0-8.326 0-10.4-1.182a9 9 0 0 1-3.358-3.359C0 29.386 0 26.611 0 21.06v-6.12Z"
  />
  <path
    stroke="#fff"
    stroke-opacity=".05"
    d="M14.94.5h6.12c2.785 0 4.84 0 6.46.146 1.612.144 2.743.43 3.691.97a8.5 8.5 0 0 1 3.172 3.173c.541.948.826 2.08.971 3.692.145 1.62.146 3.675.146 6.459v6.12c0 2.785 0 4.84-.146 6.46-.145 1.612-.43 2.743-.97 3.691a8.5 8.5 0 0 1-3.173 3.172c-.948.541-2.08.826-3.692.971-1.62.145-3.674.146-6.459.146h-6.12c-2.784 0-4.84 0-6.46-.146-1.612-.145-2.743-.43-3.691-.97a8.5 8.5 0 0 1-3.172-3.173c-.541-.948-.827-2.08-.971-3.692C.5 25.9.5 23.845.5 21.06v-6.12c0-2.784 0-4.84.146-6.46.144-1.612.43-2.743.97-3.691A8.5 8.5 0 0 1 4.79 1.617C5.737 1.076 6.869.79 8.48.646 10.1.5 12.156.5 14.94.5Z"
  />
  <path
    fill="url(#a)"
    d="M17.998 10.8h12.469a14.397 14.397 0 0 0-24.938.001l6.234 10.798.006-.001a7.19 7.19 0 0 1 6.23-10.799Z"
  />
  <path
    fill="url(#b)"
    d="m24.237 21.598-6.234 10.798A14.397 14.397 0 0 0 30.47 10.798H18.002l-.002.006a7.191 7.191 0 0 1 6.237 10.794Z"
  />
  <path
    fill="url(#c)"
    d="M11.765 21.601 5.531 10.803A14.396 14.396 0 0 0 18.001 32.4l6.235-10.798-.004-.004a7.19 7.19 0 0 1-12.466.004Z"
  />
  <path fill="#fff" d="M18 25.2a7.2 7.2 0 1 0 0-14.4 7.2 7.2 0 0 0 0 14.4Z" />
  <path fill="#1A73E8" d="M18 23.7a5.7 5.7 0 1 0 0-11.4 5.7 5.7 0 0 0 0 11.4Z" />
  <defs>
    <linearGradient
      id="a"
      x1="6.294"
      x2="41.1"
      y1="5.995"
      y2="5.995"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#D93025" />
      <stop offset="1" stop-color="#EA4335" />
    </linearGradient>
    <linearGradient
      id="b"
      x1="20.953"
      x2="37.194"
      y1="32.143"
      y2="2.701"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#FCC934" />
      <stop offset="1" stop-color="#FBBC04" />
    </linearGradient>
    <linearGradient
      id="c"
      x1="25.873"
      x2="9.632"
      y1="31.2"
      y2="1.759"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#1E8E3E" />
      <stop offset="1" stop-color="#34A853" />
    </linearGradient>
  </defs>
</svg>`,LMe=Object.freeze(Object.defineProperty({__proto__:null,chromeStoreSvg:BMe},Symbol.toStringTag,{value:"Module"})),UMe=Ce`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path 
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M7.00235 2C4.24 2 2.00067 4.23858 2.00067 7C2.00067 9.76142 4.24 12 7.00235 12C9.7647 12 12.004 9.76142 12.004 7C12.004 4.23858 9.7647 2 7.00235 2ZM0 7C0 3.13401 3.13506 0 7.00235 0C10.8696 0 14.0047 3.13401 14.0047 7C14.0047 10.866 10.8696 14 7.00235 14C3.13506 14 0 10.866 0 7ZM7.00235 3C7.55482 3 8.00269 3.44771 8.00269 4V6.58579L9.85327 8.43575C10.2439 8.82627 10.2439 9.45944 9.85327 9.84996C9.46262 10.2405 8.82924 10.2405 8.43858 9.84996L6.29501 7.70711C6.10741 7.51957 6.00201 7.26522 6.00201 7V4C6.00201 3.44771 6.44988 3 7.00235 3Z" 
    fill="currentColor"
  />
</svg>`,jMe=Object.freeze(Object.defineProperty({__proto__:null,clockSvg:UMe},Symbol.toStringTag,{value:"Module"})),FMe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M2.54 2.54a1 1 0 0 1 1.42 0L8 6.6l4.04-4.05a1 1 0 1 1 1.42 1.42L9.4 8l4.05 4.04a1 1 0 0 1-1.42 1.42L8 9.4l-4.04 4.05a1 1 0 0 1-1.42-1.42L6.6 8 2.54 3.96a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`,qMe=Object.freeze(Object.defineProperty({__proto__:null,closeSvg:FMe},Symbol.toStringTag,{value:"Module"})),HMe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2ZM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm10.66-2.65a1 1 0 0 1 .23 1.06L9.83 9.24a1 1 0 0 1-.59.58l-2.83 1.06A1 1 0 0 1 5.13 9.6l1.06-2.82a1 1 0 0 1 .58-.59L9.6 5.12a1 1 0 0 1 1.06.23ZM7.9 7.89l-.13.35.35-.13.12-.35-.34.13Z"
    clip-rule="evenodd"
  />
</svg>`,zMe=Object.freeze(Object.defineProperty({__proto__:null,compassSvg:HMe},Symbol.toStringTag,{value:"Module"})),KMe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 3a7 7 0 0 0-6.85 8.44l8.29-8.3C10.97 3.06 10.49 3 10 3Zm3.49.93-9.56 9.56c.32.55.71 1.06 1.16 1.5L15 5.1a7.03 7.03 0 0 0-1.5-1.16Zm2.7 2.8-9.46 9.46a7 7 0 0 0 9.46-9.46ZM1.99 5.9A9 9 0 1 1 18 14.09 9 9 0 0 1 1.98 5.91Z"
    clip-rule="evenodd"
  />
</svg>`,VMe=Object.freeze(Object.defineProperty({__proto__:null,coinPlaceholderSvg:KMe},Symbol.toStringTag,{value:"Module"})),WMe=Ce`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.21498 1.28565H10.5944C11.1458 1.28562 11.6246 1.2856 12.0182 1.32093C12.4353 1.35836 12.853 1.44155 13.2486 1.66724C13.7005 1.92498 14.0749 2.29935 14.3326 2.75122C14.5583 3.14689 14.6415 3.56456 14.6789 3.9817C14.7143 4.37531 14.7142 4.85403 14.7142 5.40545V6.78489C14.7142 7.33631 14.7143 7.81503 14.6789 8.20865C14.6415 8.62578 14.5583 9.04345 14.3326 9.43912C14.0749 9.89099 13.7005 10.2654 13.2486 10.5231C12.853 10.7488 12.4353 10.832 12.0182 10.8694C11.7003 10.8979 11.3269 10.9034 10.9045 10.9045C10.9034 11.3269 10.8979 11.7003 10.8694 12.0182C10.832 12.4353 10.7488 12.853 10.5231 13.2486C10.2654 13.7005 9.89099 14.0749 9.43912 14.3326C9.04345 14.5583 8.62578 14.6415 8.20865 14.6789C7.81503 14.7143 7.33631 14.7142 6.78489 14.7142H5.40545C4.85403 14.7142 4.37531 14.7143 3.9817 14.6789C3.56456 14.6415 3.14689 14.5583 2.75122 14.3326C2.29935 14.0749 1.92498 13.7005 1.66724 13.2486C1.44155 12.853 1.35836 12.4353 1.32093 12.0182C1.2856 11.6246 1.28562 11.1458 1.28565 10.5944V9.21498C1.28562 8.66356 1.2856 8.18484 1.32093 7.79122C1.35836 7.37409 1.44155 6.95642 1.66724 6.56074C1.92498 6.10887 2.29935 5.73451 2.75122 5.47677C3.14689 5.25108 3.56456 5.16789 3.9817 5.13045C4.2996 5.10192 4.67301 5.09645 5.09541 5.09541C5.09645 4.67302 5.10192 4.2996 5.13045 3.9817C5.16789 3.56456 5.25108 3.14689 5.47676 2.75122C5.73451 2.29935 6.10887 1.92498 6.56074 1.66724C6.95642 1.44155 7.37409 1.35836 7.79122 1.32093C8.18484 1.2856 8.66356 1.28562 9.21498 1.28565ZM5.09541 7.09552C4.68397 7.09667 4.39263 7.10161 4.16046 7.12245C3.88053 7.14757 3.78516 7.18949 3.74214 7.21403C3.60139 7.29431 3.48478 7.41091 3.4045 7.55166C3.37997 7.59468 3.33804 7.69005 3.31292 7.96999C3.28659 8.26345 3.28565 8.65147 3.28565 9.25708V10.5523C3.28565 11.1579 3.28659 11.5459 3.31292 11.8394C3.33804 12.1193 3.37997 12.2147 3.4045 12.2577C3.48478 12.3985 3.60139 12.5151 3.74214 12.5954C3.78516 12.6199 3.88053 12.6618 4.16046 12.6869C4.45393 12.7133 4.84195 12.7142 5.44755 12.7142H6.74279C7.3484 12.7142 7.73641 12.7133 8.02988 12.6869C8.30981 12.6618 8.40518 12.6199 8.44821 12.5954C8.58895 12.5151 8.70556 12.3985 8.78584 12.2577C8.81038 12.2147 8.8523 12.1193 8.87742 11.8394C8.89825 11.6072 8.90319 11.3159 8.90435 10.9045C8.48219 10.9034 8.10898 10.8979 7.79122 10.8694C7.37409 10.832 6.95641 10.7488 6.56074 10.5231C6.10887 10.2654 5.73451 9.89099 5.47676 9.43912C5.25108 9.04345 5.16789 8.62578 5.13045 8.20865C5.10194 7.89089 5.09645 7.51767 5.09541 7.09552ZM7.96999 3.31292C7.69005 3.33804 7.59468 3.37997 7.55166 3.4045C7.41091 3.48478 7.29431 3.60139 7.21403 3.74214C7.18949 3.78516 7.14757 3.88053 7.12245 4.16046C7.09611 4.45393 7.09517 4.84195 7.09517 5.44755V6.74279C7.09517 7.3484 7.09611 7.73641 7.12245 8.02988C7.14757 8.30981 7.18949 8.40518 7.21403 8.4482C7.29431 8.58895 7.41091 8.70556 7.55166 8.78584C7.59468 8.81038 7.69005 8.8523 7.96999 8.87742C8.26345 8.90376 8.65147 8.9047 9.25708 8.9047H10.5523C11.1579 8.9047 11.5459 8.90376 11.8394 8.87742C12.1193 8.8523 12.2147 8.81038 12.2577 8.78584C12.3985 8.70556 12.5151 8.58895 12.5954 8.4482C12.6199 8.40518 12.6618 8.30981 12.6869 8.02988C12.7133 7.73641 12.7142 7.3484 12.7142 6.74279V5.44755C12.7142 4.84195 12.7133 4.45393 12.6869 4.16046C12.6618 3.88053 12.6199 3.78516 12.5954 3.74214C12.5151 3.60139 12.3985 3.48478 12.2577 3.4045C12.2147 3.37997 12.1193 3.33804 11.8394 3.31292C11.5459 3.28659 11.1579 3.28565 10.5523 3.28565H9.25708C8.65147 3.28565 8.26345 3.28659 7.96999 3.31292Z"
    fill="#788181"
  /></svg
>`,GMe=Object.freeze(Object.defineProperty({__proto__:null,copySvg:WMe},Symbol.toStringTag,{value:"Module"})),ZMe=Ce` <svg fill="none" viewBox="0 0 13 4">
  <path fill="currentColor" d="M.5 0h12L8.9 3.13a3.76 3.76 0 0 1-4.8 0L.5 0Z" />
</svg>`,YMe=Object.freeze(Object.defineProperty({__proto__:null,cursorSvg:ZMe},Symbol.toStringTag,{value:"Module"})),QMe=Ce`<svg fill="none" viewBox="0 0 14 6">
  <path style="fill: var(--wui-color-bg-150);" d="M0 1h14L9.21 5.12a3.31 3.31 0 0 1-4.49 0L0 1Z" />
  <path
    style="stroke: var(--wui-color-inverse-100);"
    stroke-opacity=".05"
    d="M1.33 1.5h11.32L8.88 4.75l-.01.01a2.81 2.81 0 0 1-3.8 0l-.02-.01L1.33 1.5Z"
  />
  <path
    style="fill: var(--wui-color-bg-150);"
    d="M1.25.71h11.5L9.21 3.88a3.31 3.31 0 0 1-4.49 0L1.25.71Z"
  />
</svg> `,JMe=Object.freeze(Object.defineProperty({__proto__:null,cursorTransparentSvg:QMe},Symbol.toStringTag,{value:"Module"})),XMe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13.66 2H6.34c-1.07 0-1.96 0-2.68.08-.74.08-1.42.25-2.01.68a4 4 0 0 0-.89.89c-.43.6-.6 1.27-.68 2.01C0 6.38 0 7.26 0 8.34v.89c0 1.07 0 1.96.08 2.68.08.74.25 1.42.68 2.01a4 4 0 0 0 .89.89c.6.43 1.27.6 2.01.68a27 27 0 0 0 2.68.08h7.32a27 27 0 0 0 2.68-.08 4.03 4.03 0 0 0 2.01-.68 4 4 0 0 0 .89-.89c.43-.6.6-1.27.68-2.01.08-.72.08-1.6.08-2.68v-.89c0-1.07 0-1.96-.08-2.68a4.04 4.04 0 0 0-.68-2.01 4 4 0 0 0-.89-.89c-.6-.43-1.27-.6-2.01-.68C15.62 2 14.74 2 13.66 2ZM2.82 4.38c.2-.14.48-.25 1.06-.31C4.48 4 5.25 4 6.4 4h7.2c1.15 0 1.93 0 2.52.07.58.06.86.17 1.06.31a2 2 0 0 1 .44.44c.14.2.25.48.31 1.06.07.6.07 1.37.07 2.52v.77c0 1.15 0 1.93-.07 2.52-.06.58-.17.86-.31 1.06a2 2 0 0 1-.44.44c-.2.14-.48.25-1.06.32-.6.06-1.37.06-2.52.06H6.4c-1.15 0-1.93 0-2.52-.06-.58-.07-.86-.18-1.06-.32a2 2 0 0 1-.44-.44c-.14-.2-.25-.48-.31-1.06C2 11.1 2 10.32 2 9.17V8.4c0-1.15 0-1.93.07-2.52.06-.58.17-.86.31-1.06a2 2 0 0 1 .44-.44Z"
    clip-rule="evenodd"
  />
  <path fill="currentColor" d="M6.14 17.57a1 1 0 1 0 0 2h7.72a1 1 0 1 0 0-2H6.14Z" />
</svg>`,eDe=Object.freeze(Object.defineProperty({__proto__:null,desktopSvg:XMe},Symbol.toStringTag,{value:"Module"})),tDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.07 1h.57a1 1 0 0 1 0 2h-.52c-.98 0-1.64 0-2.14.06-.48.05-.7.14-.84.24-.13.1-.25.22-.34.35-.1.14-.2.35-.25.83-.05.5-.05 1.16-.05 2.15v2.74c0 .99 0 1.65.05 2.15.05.48.14.7.25.83.1.14.2.25.34.35.14.1.36.2.84.25.5.05 1.16.05 2.14.05h.52a1 1 0 0 1 0 2h-.57c-.92 0-1.69 0-2.3-.07a3.6 3.6 0 0 1-1.8-.61c-.3-.22-.57-.49-.8-.8a3.6 3.6 0 0 1-.6-1.79C.5 11.11.5 10.35.5 9.43V6.58c0-.92 0-1.7.06-2.31a3.6 3.6 0 0 1 .62-1.8c.22-.3.48-.57.79-.79a3.6 3.6 0 0 1 1.8-.61C4.37 1 5.14 1 6.06 1ZM9.5 3a1 1 0 0 1 1.42 0l4.28 4.3a1 1 0 0 1 0 1.4L10.93 13a1 1 0 0 1-1.42-1.42L12.1 9H6.8a1 1 0 1 1 0-2h5.3L9.51 4.42a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`,nDe=Object.freeze(Object.defineProperty({__proto__:null,disconnectSvg:tDe},Symbol.toStringTag,{value:"Module"})),rDe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5865F2" />
      <path
        fill="#fff"
        fill-rule="evenodd"
        d="M25.71 28.15C30.25 28 32 25.02 32 25.02c0-6.61-2.96-11.98-2.96-11.98-2.96-2.22-5.77-2.15-5.77-2.15l-.29.32c3.5 1.07 5.12 2.61 5.12 2.61a16.75 16.75 0 0 0-10.34-1.93l-.35.04a15.43 15.43 0 0 0-5.88 1.9s1.71-1.63 5.4-2.7l-.2-.24s-2.81-.07-5.77 2.15c0 0-2.96 5.37-2.96 11.98 0 0 1.73 2.98 6.27 3.13l1.37-1.7c-2.6-.79-3.6-2.43-3.6-2.43l.58.35.09.06.08.04.02.01.08.05a17.25 17.25 0 0 0 4.52 1.58 14.4 14.4 0 0 0 8.3-.86c.72-.27 1.52-.66 2.37-1.21 0 0-1.03 1.68-3.72 2.44.61.78 1.35 1.67 1.35 1.67Zm-9.55-9.6c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28.01-1.25-.93-2.28-2.1-2.28Zm7.5 0c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28 0-1.25-.93-2.28-2.1-2.28Z"
        clip-rule="evenodd"
      />
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
  </defs>
</svg>`,iDe=Object.freeze(Object.defineProperty({__proto__:null,discordSvg:rDe},Symbol.toStringTag,{value:"Module"})),sDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M4.25 7a.63.63 0 0 0-.63.63v3.97c0 .28-.2.51-.47.54l-.75.07a.93.93 0 0 1-.9-.47A7.51 7.51 0 0 1 5.54.92a7.5 7.5 0 0 1 9.54 4.62c.12.35.06.72-.16 1-.74.97-1.68 1.78-2.6 2.44V4.44a.64.64 0 0 0-.63-.64h-1.06c-.35 0-.63.3-.63.64v5.5c0 .23-.12.42-.32.5l-.52.23V6.05c0-.36-.3-.64-.64-.64H7.45c-.35 0-.64.3-.64.64v4.97c0 .25-.17.46-.4.52a5.8 5.8 0 0 0-.45.11v-4c0-.36-.3-.65-.64-.65H4.25ZM14.07 12.4A7.49 7.49 0 0 1 3.6 14.08c4.09-.58 9.14-2.5 11.87-6.6v.03a7.56 7.56 0 0 1-1.41 4.91Z"
  />
</svg>`,oDe=Object.freeze(Object.defineProperty({__proto__:null,etherscanSvg:sDe},Symbol.toStringTag,{value:"Module"})),aDe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.71 2.99a.57.57 0 0 0-.57.57 1 1 0 0 1-1 1c-.58 0-.96 0-1.24.03-.27.03-.37.07-.42.1a.97.97 0 0 0-.36.35c-.04.08-.09.21-.11.67a2.57 2.57 0 0 1 0 5.13c.02.45.07.6.11.66.09.15.21.28.36.36.07.04.21.1.67.12a2.57 2.57 0 0 1 5.12 0c.46-.03.6-.08.67-.12a.97.97 0 0 0 .36-.36c.03-.04.07-.14.1-.41.02-.29.03-.66.03-1.24a1 1 0 0 1 1-1 .57.57 0 0 0 0-1.15 1 1 0 0 1-1-1c0-.58 0-.95-.03-1.24a1.04 1.04 0 0 0-.1-.42.97.97 0 0 0-.36-.36 1.04 1.04 0 0 0-.42-.1c-.28-.02-.65-.02-1.24-.02a1 1 0 0 1-1-1 .57.57 0 0 0-.57-.57ZM5.15 13.98a1 1 0 0 0 .99-1v-.78a.57.57 0 0 1 1.14 0v.78a1 1 0 0 0 .99 1H8.36a66.26 66.26 0 0 0 .73 0 3.78 3.78 0 0 0 1.84-.38c.46-.26.85-.64 1.1-1.1.23-.4.32-.8.36-1.22.02-.2.03-.4.03-.63a2.57 2.57 0 0 0 0-4.75c0-.23-.01-.44-.03-.63a2.96 2.96 0 0 0-.35-1.22 2.97 2.97 0 0 0-1.1-1.1c-.4-.22-.8-.31-1.22-.35a8.7 8.7 0 0 0-.64-.04 2.57 2.57 0 0 0-4.74 0c-.23 0-.44.02-.63.04-.42.04-.83.13-1.22.35-.46.26-.84.64-1.1 1.1-.33.57-.37 1.2-.39 1.84a21.39 21.39 0 0 0 0 .72v.1a1 1 0 0 0 1 .99h.78a.57.57 0 0 1 0 1.15h-.77a1 1 0 0 0-1 .98v.1a63.87 63.87 0 0 0 0 .73c0 .64.05 1.27.38 1.83.26.47.64.85 1.1 1.11.56.32 1.2.37 1.84.38a20.93 20.93 0 0 0 .72 0h.1Z"
    clip-rule="evenodd"
  />
</svg>`,cDe=Object.freeze(Object.defineProperty({__proto__:null,extensionSvg:aDe},Symbol.toStringTag,{value:"Module"})),lDe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.74 3.99a1 1 0 0 1 1-1H11a1 1 0 0 1 1 1v6.26a1 1 0 0 1-2 0V6.4l-6.3 6.3a1 1 0 0 1-1.4-1.42l6.29-6.3H4.74a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,uDe=Object.freeze(Object.defineProperty({__proto__:null,externalLinkSvg:lDe},Symbol.toStringTag,{value:"Module"})),dDe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1877F2" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M26 12.38h-2.89c-.92 0-1.61.38-1.61 1.34v1.66H26l-.36 4.5H21.5v12H17v-12h-3v-4.5h3V12.5c0-3.03 1.6-4.62 5.2-4.62H26v4.5Z"
        />
      </g>
    </g>
    <path
      fill="#1877F2"
      d="M40 20a20 20 0 1 0-23.13 19.76V25.78H11.8V20h5.07v-4.4c0-5.02 3-7.79 7.56-7.79 2.19 0 4.48.4 4.48.4v4.91h-2.53c-2.48 0-3.25 1.55-3.25 3.13V20h5.54l-.88 5.78h-4.66v13.98A20 20 0 0 0 40 20Z"
    />
    <path
      fill="#fff"
      d="m27.79 25.78.88-5.78h-5.55v-3.75c0-1.58.78-3.13 3.26-3.13h2.53V8.2s-2.3-.39-4.48-.39c-4.57 0-7.55 2.77-7.55 7.78V20H11.8v5.78h5.07v13.98a20.15 20.15 0 0 0 6.25 0V25.78h4.67Z"
    />
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,hDe=Object.freeze(Object.defineProperty({__proto__:null,facebookSvg:dDe},Symbol.toStringTag,{value:"Module"})),fDe=Ce`<svg style="border-radius: 9999px; overflow: hidden;"  fill="none" viewBox="0 0 1000 1000">
  <rect width="1000" height="1000" rx="9999" ry="9999" fill="#855DCD"/>
  <path fill="#855DCD" d="M0 0h1000v1000H0V0Z" />
  <path
    fill="#fff"
    d="M320 248h354v504h-51.96V521.13h-.5c-5.76-63.8-59.31-113.81-124.54-113.81s-118.78 50-124.53 113.81h-.5V752H320V248Z"
  />
  <path
    fill="#fff"
    d="m225 320 21.16 71.46h17.9v289.09a16.29 16.29 0 0 0-16.28 16.24v19.49h-3.25a16.3 16.3 0 0 0-16.28 16.24V752h182.26v-19.48a16.22 16.22 0 0 0-16.28-16.24h-3.25v-19.5a16.22 16.22 0 0 0-16.28-16.23h-19.52V320H225Zm400.3 360.55a16.3 16.3 0 0 0-15.04 10.02 16.2 16.2 0 0 0-1.24 6.22v19.49h-3.25a16.29 16.29 0 0 0-16.27 16.24V752h182.24v-19.48a16.23 16.23 0 0 0-16.27-16.24h-3.25v-19.5a16.2 16.2 0 0 0-10.04-15 16.3 16.3 0 0 0-6.23-1.23v-289.1h17.9L775 320H644.82v360.55H625.3Z"
  />
</svg>`,pDe=Object.freeze(Object.defineProperty({__proto__:null,farcasterSvg:fDe},Symbol.toStringTag,{value:"Module"})),gDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 3a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1Zm2.63 5.25a1 1 0 0 1 1-1h8.75a1 1 0 1 1 0 2H3.63a1 1 0 0 1-1-1Zm2.62 5.25a1 1 0 0 1 1-1h3.5a1 1 0 0 1 0 2h-3.5a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,mDe=Object.freeze(Object.defineProperty({__proto__:null,filtersSvg:gDe},Symbol.toStringTag,{value:"Module"})),wDe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1B1F23" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M8 19.89a12 12 0 1 1 15.8 11.38c-.6.12-.8-.26-.8-.57v-3.3c0-1.12-.4-1.85-.82-2.22 2.67-.3 5.48-1.31 5.48-5.92 0-1.31-.47-2.38-1.24-3.22.13-.3.54-1.52-.12-3.18 0 0-1-.32-3.3 1.23a11.54 11.54 0 0 0-6 0c-2.3-1.55-3.3-1.23-3.3-1.23a4.32 4.32 0 0 0-.12 3.18 4.64 4.64 0 0 0-1.24 3.22c0 4.6 2.8 5.63 5.47 5.93-.34.3-.65.83-.76 1.6-.69.31-2.42.84-3.5-1 0 0-.63-1.15-1.83-1.23 0 0-1.18-.02-.09.73 0 0 .8.37 1.34 1.76 0 0 .7 2.14 4.03 1.41v2.24c0 .31-.2.68-.8.57A12 12 0 0 1 8 19.9Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,yDe=Object.freeze(Object.defineProperty({__proto__:null,githubSvg:wDe},Symbol.toStringTag,{value:"Module"})),bDe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <path
    fill="#4285F4"
    d="M32.74 20.3c0-.93-.08-1.81-.24-2.66H20.26v5.03h7a6 6 0 0 1-2.62 3.91v3.28h4.22c2.46-2.27 3.88-5.6 3.88-9.56Z"
  />
  <path
    fill="#34A853"
    d="M20.26 33a12.4 12.4 0 0 0 8.6-3.14l-4.22-3.28a7.74 7.74 0 0 1-4.38 1.26 7.76 7.76 0 0 1-7.28-5.36H8.65v3.36A12.99 12.99 0 0 0 20.26 33Z"
  />
  <path
    fill="#FBBC05"
    d="M12.98 22.47a7.79 7.79 0 0 1 0-4.94v-3.36H8.65a12.84 12.84 0 0 0 0 11.66l3.37-2.63.96-.73Z"
  />
  <path
    fill="#EA4335"
    d="M20.26 12.18a7.1 7.1 0 0 1 4.98 1.93l3.72-3.72A12.47 12.47 0 0 0 20.26 7c-5.08 0-9.47 2.92-11.6 7.17l4.32 3.36a7.76 7.76 0 0 1 7.28-5.35Z"
  />
</svg>`,vDe=Object.freeze(Object.defineProperty({__proto__:null,googleSvg:bDe},Symbol.toStringTag,{value:"Module"})),EDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M8.51 5.66a.83.83 0 0 0-.57-.2.83.83 0 0 0-.52.28.8.8 0 0 0-.25.52 1 1 0 0 1-2 0c0-.75.34-1.43.81-1.91a2.75 2.75 0 0 1 4.78 1.92c0 1.24-.8 1.86-1.25 2.2l-.04.03c-.47.36-.5.43-.5.65a1 1 0 1 1-2 0c0-1.25.8-1.86 1.24-2.2l.04-.04c.47-.36.5-.43.5-.65 0-.3-.1-.49-.24-.6ZM9.12 11.87a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6a6 6 0 1 0 0 12A6 6 0 0 0 8 2Z"
    clip-rule="evenodd"
  />
</svg>`,CDe=Object.freeze(Object.defineProperty({__proto__:null,helpCircleSvg:EDe},Symbol.toStringTag,{value:"Module"})),_De=Ce`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M4.98926 3.73932C4.2989 3.73932 3.73926 4.29896 3.73926 4.98932C3.73926 5.67968 4.2989 6.23932 4.98926 6.23932C5.67962 6.23932 6.23926 5.67968 6.23926 4.98932C6.23926 4.29896 5.67962 3.73932 4.98926 3.73932Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.60497 0.500001H6.39504C5.41068 0.499977 4.59185 0.499958 3.93178 0.571471C3.24075 0.64634 2.60613 0.809093 2.04581 1.21619C1.72745 1.44749 1.44749 1.72745 1.21619 2.04581C0.809093 2.60613 0.64634 3.24075 0.571471 3.93178C0.499958 4.59185 0.499977 5.41065 0.500001 6.39501V7.57815C0.499998 8.37476 0.499995 9.05726 0.534869 9.62725C0.570123 10.2034 0.644114 10.7419 0.828442 11.2302C0.925651 11.4877 1.05235 11.7287 1.21619 11.9542C1.44749 12.2726 1.72745 12.5525 2.04581 12.7838C2.60613 13.1909 3.24075 13.3537 3.93178 13.4285C4.59185 13.5001 5.41066 13.5 6.39503 13.5H7.60496C8.58933 13.5 9.40815 13.5001 10.0682 13.4285C10.7593 13.3537 11.3939 13.1909 11.9542 12.7838C12.2726 12.5525 12.5525 12.2726 12.7838 11.9542C13.1909 11.3939 13.3537 10.7593 13.4285 10.0682C13.5 9.40816 13.5 8.58935 13.5 7.60497V6.39505C13.5 5.41068 13.5 4.59185 13.4285 3.93178C13.3537 3.24075 13.1909 2.60613 12.7838 2.04581C12.5525 1.72745 12.2726 1.44749 11.9542 1.21619C11.3939 0.809093 10.7593 0.64634 10.0682 0.571471C9.40816 0.499958 8.58933 0.499977 7.60497 0.500001ZM3.22138 2.83422C3.38394 2.71612 3.62634 2.61627 4.14721 2.55984C4.68679 2.50138 5.39655 2.5 6.45 2.5H7.55C8.60345 2.5 9.31322 2.50138 9.8528 2.55984C10.3737 2.61627 10.6161 2.71612 10.7786 2.83422C10.9272 2.94216 11.0578 3.07281 11.1658 3.22138C11.2839 3.38394 11.3837 3.62634 11.4402 4.14721C11.4986 4.68679 11.5 5.39655 11.5 6.45V6.49703C10.9674 6.11617 10.386 5.84936 9.74213 5.81948C8.40536 5.75745 7.3556 6.73051 6.40509 7.84229C6.33236 7.92737 6.27406 7.98735 6.22971 8.02911L6.1919 8.00514L6.17483 7.99427C6.09523 7.94353 5.98115 7.87083 5.85596 7.80302C5.56887 7.64752 5.18012 7.4921 4.68105 7.4921C4.66697 7.4921 4.6529 7.49239 4.63884 7.49299C3.79163 7.52878 3.09922 8.1106 2.62901 8.55472C2.58751 8.59392 2.54594 8.6339 2.50435 8.6745C2.50011 8.34653 2.5 7.97569 2.5 7.55V6.45C2.5 5.39655 2.50138 4.68679 2.55984 4.14721C2.61627 3.62634 2.71612 3.38394 2.83422 3.22138C2.94216 3.07281 3.07281 2.94216 3.22138 2.83422ZM10.3703 8.14825C10.6798 8.37526 11.043 8.71839 11.4832 9.20889C11.4744 9.44992 11.4608 9.662 11.4402 9.8528C11.3837 10.3737 11.2839 10.6161 11.1658 10.7786C11.0578 10.9272 10.9272 11.0578 10.7786 11.1658C10.6161 11.2839 10.3737 11.3837 9.8528 11.4402C9.31322 11.4986 8.60345 11.5 7.55 11.5H6.45C5.39655 11.5 4.68679 11.4986 4.14721 11.4402C3.62634 11.3837 3.38394 11.2839 3.22138 11.1658C3.15484 11.1174 3.0919 11.0645 3.03298 11.0075C3.10126 10.9356 3.16806 10.8649 3.23317 10.7959L3.29772 10.7276C3.55763 10.4525 3.78639 10.2126 4.00232 10.0087C4.22016 9.80294 4.39412 9.66364 4.53524 9.57742C4.63352 9.51738 4.69022 9.49897 4.71275 9.49345C4.76387 9.49804 4.81803 9.51537 4.90343 9.56162C4.96409 9.59447 5.02355 9.63225 5.11802 9.69238L5.12363 9.69595C5.20522 9.74789 5.32771 9.82587 5.46078 9.89278C5.76529 10.0459 6.21427 10.186 6.74977 10.0158C7.21485 9.86796 7.59367 9.52979 7.92525 9.14195C8.91377 7.98571 9.38267 7.80495 9.64941 7.81733C9.7858 7.82366 10.0101 7.884 10.3703 8.14825Z" fill="currentColor"/>
</svg>`,SDe=Object.freeze(Object.defineProperty({__proto__:null,imageSvg:_De},Symbol.toStringTag,{value:"Module"})),ADe=Ce`<svg
 xmlns="http://www.w3.org/2000/svg"
 width="28"
 height="28"
 viewBox="0 0 28 28"
 fill="none">
  <path
    fill="#949E9E"
    fill-rule="evenodd"
    d="M7.974 2.975h12.052c1.248 0 2.296 0 3.143.092.89.096 1.723.307 2.461.844a4.9 4.9 0 0 1 1.084 1.084c.537.738.748 1.57.844 2.461.092.847.092 1.895.092 3.143v6.802c0 1.248 0 2.296-.092 3.143-.096.89-.307 1.723-.844 2.461a4.9 4.9 0 0 1-1.084 1.084c-.738.537-1.57.748-2.461.844-.847.092-1.895.092-3.143.092H7.974c-1.247 0-2.296 0-3.143-.092-.89-.096-1.723-.307-2.461-.844a4.901 4.901 0 0 1-1.084-1.084c-.537-.738-.748-1.571-.844-2.461C.35 19.697.35 18.649.35 17.4v-6.802c0-1.248 0-2.296.092-3.143.096-.89.307-1.723.844-2.461A4.9 4.9 0 0 1 2.37 3.91c.738-.537 1.571-.748 2.461-.844.847-.092 1.895-.092 3.143-.092ZM5.133 5.85c-.652.071-.936.194-1.117.326a2.1 2.1 0 0 0-.465.465c-.132.181-.255.465-.325 1.117-.074.678-.076 1.573-.076 2.917v6.65c0 1.344.002 2.239.076 2.917.07.652.193.936.325 1.117a2.1 2.1 0 0 0 .465.465c.181.132.465.255 1.117.326.678.073 1.574.075 2.917.075h11.9c1.344 0 2.239-.002 2.917-.075.652-.071.936-.194 1.117-.326.179-.13.335-.286.465-.465.132-.181.255-.465.326-1.117.073-.678.075-1.573.075-2.917v-6.65c0-1.344-.002-2.239-.075-2.917-.071-.652-.194-.936-.326-1.117a2.1 2.1 0 0 0-.465-.465c-.181-.132-.465-.255-1.117-.326-.678-.073-1.573-.075-2.917-.075H8.05c-1.343 0-2.239.002-2.917.075Zm.467 7.275a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0Zm8.75-1.75a1.4 1.4 0 0 1 1.4-1.4h3.5a1.4 1.4 0 0 1 0 2.8h-3.5a1.4 1.4 0 0 1-1.4-1.4Zm0 5.25a1.4 1.4 0 0 1 1.4-1.4H21a1.4 1.4 0 1 1 0 2.8h-5.25a1.4 1.4 0 0 1-1.4-1.4Z"
    clip-rule="evenodd"/>
</svg>`,xDe=Object.freeze(Object.defineProperty({__proto__:null,idSvg:ADe},Symbol.toStringTag,{value:"Module"})),IDe=Ce`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    d="M6 10.49a1 1 0 1 0 2 0v-2a1 1 0 0 0-2 0v2ZM7 4.49a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 14.99a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm5-7a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"
    clip-rule="evenodd"
  />
</svg>`,ODe=Object.freeze(Object.defineProperty({__proto__:null,infoCircleSvg:IDe},Symbol.toStringTag,{value:"Module"})),PDe=Ce`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.00177 1.78569C3.8179 1.78569 2.85819 2.74508 2.85819 3.92855C2.85819 4.52287 3.09928 5.05956 3.49077 5.4485L3.5005 5.45817C3.64381 5.60054 3.76515 5.72108 3.85631 5.81845C3.93747 5.90512 4.05255 6.03218 4.12889 6.1805C4.16999 6.26034 4.19 6.30843 4.21768 6.39385C4.22145 6.40546 4.22499 6.41703 4.22833 6.42855H5.77521C5.77854 6.41703 5.78208 6.40547 5.78585 6.39385C5.81353 6.30843 5.83354 6.26034 5.87464 6.1805C5.95098 6.03218 6.06606 5.90512 6.14722 5.81845C6.23839 5.72108 6.35973 5.60053 6.50304 5.45816L6.51276 5.4485C6.90425 5.05956 7.14534 4.52287 7.14534 3.92855C7.14534 2.74508 6.18563 1.78569 5.00177 1.78569ZM5.71629 7.85712H4.28724C4.28724 8.21403 4.28876 8.40985 4.30703 8.54571C4.30727 8.54748 4.30751 8.54921 4.30774 8.55091C4.30944 8.55115 4.31118 8.55138 4.31295 8.55162C4.44884 8.56989 4.64474 8.5714 5.00177 8.5714C5.3588 8.5714 5.55469 8.56989 5.69059 8.55162C5.69236 8.55138 5.69409 8.55115 5.69579 8.55091C5.69603 8.54921 5.69627 8.54748 5.6965 8.54571C5.71477 8.40985 5.71629 8.21403 5.71629 7.85712ZM2.85819 7.14283C2.85819 6.9948 2.85796 6.91114 2.8548 6.85032C2.85461 6.84656 2.85441 6.84309 2.85421 6.83988C2.84393 6.8282 2.83047 6.81334 2.81301 6.79469C2.74172 6.71856 2.63908 6.61643 2.48342 6.46178C1.83307 5.81566 1.42914 4.91859 1.42914 3.92855C1.42914 1.9561 3.02866 0.357117 5.00177 0.357117C6.97487 0.357117 8.57439 1.9561 8.57439 3.92855C8.57439 4.91859 8.17047 5.81566 7.52012 6.46178C7.36445 6.61643 7.26182 6.71856 7.19053 6.79469C7.17306 6.81334 7.1596 6.8282 7.14932 6.83988C7.14912 6.84309 7.14892 6.84656 7.14873 6.85032C7.14557 6.91114 7.14534 6.9948 7.14534 7.14283V7.85712C7.14534 7.87009 7.14535 7.88304 7.14535 7.89598C7.14541 8.19889 7.14547 8.49326 7.11281 8.73606C7.076 9.00978 6.98631 9.32212 6.72678 9.58156C6.46726 9.841 6.15481 9.93065 5.881 9.96745C5.63813 10.0001 5.34365 10 5.04064 9.99998C5.0277 9.99998 5.01474 9.99998 5.00177 9.99998C4.98879 9.99998 4.97583 9.99998 4.96289 9.99998C4.65988 10 4.36541 10.0001 4.12253 9.96745C3.84872 9.93065 3.53628 9.841 3.27675 9.58156C3.01722 9.32212 2.92753 9.00978 2.89072 8.73606C2.85807 8.49326 2.85812 8.19889 2.85818 7.89598C2.85819 7.88304 2.85819 7.87008 2.85819 7.85712V7.14283ZM7.1243 6.86977C7.12366 6.87069 7.1233 6.87116 7.12327 6.87119C7.12323 6.87123 7.12356 6.87076 7.1243 6.86977ZM2.88027 6.8712C2.88025 6.87119 2.87988 6.8707 2.87921 6.86975C2.87995 6.87072 2.88028 6.8712 2.88027 6.8712Z" fill="#949E9E"/>
</svg>`,TDe=Object.freeze(Object.defineProperty({__proto__:null,lightbulbSvg:PDe},Symbol.toStringTag,{value:"Module"})),kDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.83 1.34h6.34c.68 0 1.26 0 1.73.04.5.05.97.15 1.42.4.52.3.95.72 1.24 1.24.26.45.35.92.4 1.42.04.47.04 1.05.04 1.73v3.71c0 .69 0 1.26-.04 1.74-.05.5-.14.97-.4 1.41-.3.52-.72.95-1.24 1.25-.45.25-.92.35-1.42.4-.47.03-1.05.03-1.73.03H4.83c-.68 0-1.26 0-1.73-.04-.5-.04-.97-.14-1.42-.4-.52-.29-.95-.72-1.24-1.24a3.39 3.39 0 0 1-.4-1.41A20.9 20.9 0 0 1 0 9.88v-3.7c0-.7 0-1.27.04-1.74.05-.5.14-.97.4-1.42.3-.52.72-.95 1.24-1.24.45-.25.92-.35 1.42-.4.47-.04 1.05-.04 1.73-.04ZM3.28 3.38c-.36.03-.51.08-.6.14-.21.11-.39.29-.5.5a.8.8 0 0 0-.08.19l5.16 3.44c.45.3 1.03.3 1.48 0L13.9 4.2a.79.79 0 0 0-.08-.2c-.11-.2-.29-.38-.5-.5-.09-.05-.24-.1-.6-.13-.37-.04-.86-.04-1.6-.04H4.88c-.73 0-1.22 0-1.6.04ZM14 6.54 9.85 9.31a3.33 3.33 0 0 1-3.7 0L2 6.54v3.3c0 .74 0 1.22.03 1.6.04.36.1.5.15.6.11.2.29.38.5.5.09.05.24.1.6.14.37.03.86.03 1.6.03h6.25c.73 0 1.22 0 1.6-.03.35-.03.5-.09.6-.14.2-.12.38-.3.5-.5.05-.1.1-.24.14-.6.03-.38.03-.86.03-1.6v-3.3Z"
    clip-rule="evenodd"
  />
</svg>`,NDe=Object.freeze(Object.defineProperty({__proto__:null,mailSvg:kDe},Symbol.toStringTag,{value:"Module"})),$De=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path fill="currentColor" d="M10.81 5.81a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z" />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3 4.75A4.75 4.75 0 0 1 7.75 0h4.5A4.75 4.75 0 0 1 17 4.75v10.5A4.75 4.75 0 0 1 12.25 20h-4.5A4.75 4.75 0 0 1 3 15.25V4.75ZM7.75 2A2.75 2.75 0 0 0 5 4.75v10.5A2.75 2.75 0 0 0 7.75 18h4.5A2.75 2.75 0 0 0 15 15.25V4.75A2.75 2.75 0 0 0 12.25 2h-4.5Z"
    clip-rule="evenodd"
  />
</svg>`,RDe=Object.freeze(Object.defineProperty({__proto__:null,mobileSvg:$De},Symbol.toStringTag,{value:"Module"})),MDe=Ce`<svg fill="none" viewBox="0 0 41 40">
  <path
    style="fill: var(--wui-color-fg-100);"
    fill-opacity=".05"
    d="M.6 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z"
  />
  <path
    fill="#949E9E"
    d="M15.6 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM23.1 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM28.1 22.81a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"
  />
</svg>`,DDe=Object.freeze(Object.defineProperty({__proto__:null,moreSvg:MDe},Symbol.toStringTag,{value:"Module"})),BDe=Ce`<svg fill="none" viewBox="0 0 22 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M16.32 13.62a3.14 3.14 0 1 1-.99 1.72l-1.6-.93a3.83 3.83 0 0 1-3.71 1 3.66 3.66 0 0 1-1.74-1l-1.6.94a3.14 3.14 0 1 1-1-1.73l1.6-.94a3.7 3.7 0 0 1 0-2 3.81 3.81 0 0 1 1.8-2.33c.29-.17.6-.3.92-.38V6.1a3.14 3.14 0 1 1 2 0l-.01.02v1.85H12a3.82 3.82 0 0 1 2.33 1.8 3.7 3.7 0 0 1 .39 2.91l1.6.93ZM2.6 16.54a1.14 1.14 0 0 0 1.98-1.14 1.14 1.14 0 0 0-1.98 1.14ZM11 2.01a1.14 1.14 0 1 0 0 2.28 1.14 1.14 0 0 0 0-2.28Zm1.68 10.45c.08-.19.14-.38.16-.58v-.05l.02-.13v-.13a1.92 1.92 0 0 0-.24-.8l-.11-.15a1.89 1.89 0 0 0-.74-.6 1.86 1.86 0 0 0-.77-.17h-.19a1.97 1.97 0 0 0-.89.34 1.98 1.98 0 0 0-.61.74 1.99 1.99 0 0 0-.16.9v.05a1.87 1.87 0 0 0 .24.74l.1.15c.12.16.26.3.42.42l.16.1.13.07.04.02a1.84 1.84 0 0 0 .76.17h.17a2 2 0 0 0 .91-.35 1.78 1.78 0 0 0 .52-.58l.03-.05a.84.84 0 0 0 .05-.11Zm5.15 4.5a1.14 1.14 0 0 0 1.14-1.97 1.13 1.13 0 0 0-1.55.41c-.32.55-.13 1.25.41 1.56Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.63 9.43a1.5 1.5 0 1 0 1.5-2.6 1.5 1.5 0 0 0-1.5 2.6Zm.32-1.55a.5.5 0 0 1 .68-.19.5.5 0 0 1 .18.68.5.5 0 0 1-.68.19.5.5 0 0 1-.18-.68ZM17.94 8.88a1.5 1.5 0 1 1-2.6-1.5 1.5 1.5 0 1 1 2.6 1.5ZM16.9 7.69a.5.5 0 0 0-.68.19.5.5 0 0 0 .18.68.5.5 0 0 0 .68-.19.5.5 0 0 0-.18-.68ZM9.75 17.75a1.5 1.5 0 1 1 2.6 1.5 1.5 1.5 0 1 1-2.6-1.5Zm1.05 1.18a.5.5 0 0 0 .68-.18.5.5 0 0 0-.18-.68.5.5 0 0 0-.68.18.5.5 0 0 0 .18.68Z"
    clip-rule="evenodd"
  />
</svg>`,LDe=Object.freeze(Object.defineProperty({__proto__:null,networkPlaceholderSvg:BDe},Symbol.toStringTag,{value:"Module"})),UDe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.13 1h1.71c1.46 0 2.63 0 3.56.1.97.1 1.8.33 2.53.85a5 5 0 0 1 1.1 1.11c.53.73.75 1.56.86 2.53.1.93.1 2.1.1 3.55v1.72c0 1.45 0 2.62-.1 3.55-.1.97-.33 1.8-.86 2.53a5 5 0 0 1-1.1 1.1c-.73.53-1.56.75-2.53.86-.93.1-2.1.1-3.55.1H9.13c-1.45 0-2.62 0-3.56-.1-.96-.1-1.8-.33-2.52-.85a5 5 0 0 1-1.1-1.11 5.05 5.05 0 0 1-.86-2.53c-.1-.93-.1-2.1-.1-3.55V9.14c0-1.45 0-2.62.1-3.55.1-.97.33-1.8.85-2.53a5 5 0 0 1 1.1-1.1 5.05 5.05 0 0 1 2.53-.86C6.51 1 7.67 1 9.13 1ZM5.79 3.09a3.1 3.1 0 0 0-1.57.48 3 3 0 0 0-.66.67c-.24.32-.4.77-.48 1.56-.1.82-.1 1.88-.1 3.4v1.6c0 1.15 0 2.04.05 2.76l.41-.42c.5-.5.93-.92 1.32-1.24.41-.33.86-.6 1.43-.7a3 3 0 0 1 .94 0c.35.06.66.2.95.37a17.11 17.11 0 0 0 .8.45c.1-.08.2-.2.41-.4l.04-.03a27 27 0 0 1 1.95-1.84 4.03 4.03 0 0 1 1.91-.94 4 4 0 0 1 1.25 0c.73.11 1.33.46 1.91.94l.64.55V9.2c0-1.52 0-2.58-.1-3.4a3.1 3.1 0 0 0-.48-1.56 3 3 0 0 0-.66-.67 3.1 3.1 0 0 0-1.56-.48C13.37 3 12.3 3 10.79 3h-1.6c-1.52 0-2.59 0-3.4.09Zm11.18 10-.04-.05a26.24 26.24 0 0 0-1.83-1.74c-.45-.36-.73-.48-.97-.52a2 2 0 0 0-.63 0c-.24.04-.51.16-.97.52-.46.38-1.01.93-1.83 1.74l-.02.02c-.17.18-.34.34-.49.47a2.04 2.04 0 0 1-1.08.5 1.97 1.97 0 0 1-1.25-.27l-.79-.46-.02-.02a.65.65 0 0 0-.24-.1 1 1 0 0 0-.31 0c-.08.02-.21.06-.49.28-.3.24-.65.59-1.2 1.14l-.56.56-.65.66a3 3 0 0 0 .62.6c.33.24.77.4 1.57.49.81.09 1.88.09 3.4.09h1.6c1.52 0 2.58 0 3.4-.09a3.1 3.1 0 0 0 1.56-.48 3 3 0 0 0 .66-.67c.24-.32.4-.77.49-1.56l.07-1.12Zm-8.02-1.03ZM4.99 7a2 2 0 1 1 4 0 2 2 0 0 1-4 0Z"
    clip-rule="evenodd"
  />
</svg>`,jDe=Object.freeze(Object.defineProperty({__proto__:null,nftPlaceholderSvg:UDe},Symbol.toStringTag,{value:"Module"})),FDe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 0a1 1 0 0 1 1 1v5.38a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1ZM5.26 2.6a1 1 0 0 1-.28 1.39 5.46 5.46 0 1 0 6.04 0 1 1 0 1 1 1.1-1.67 7.46 7.46 0 1 1-8.25 0 1 1 0 0 1 1.4.28Z"
    clip-rule="evenodd"
  />
</svg>`,qDe=Object.freeze(Object.defineProperty({__proto__:null,offSvg:FDe},Symbol.toStringTag,{value:"Module"})),HDe=Ce` <svg
  width="36"
  height="36"
  fill="none"
>
  <path
    d="M0 8a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V8Z"
    fill="#fff"
    fill-opacity=".05"
  />
  <path
    d="m18.262 17.513-8.944 9.49v.01a2.417 2.417 0 0 0 3.56 1.452l.026-.017 10.061-5.803-4.703-5.132Z"
    fill="#EA4335"
  />
  <path
    d="m27.307 15.9-.008-.008-4.342-2.52-4.896 4.36 4.913 4.912 4.325-2.494a2.42 2.42 0 0 0 .008-4.25Z"
    fill="#FBBC04"
  />
  <path
    d="M9.318 8.997c-.05.202-.084.403-.084.622V26.39c0 .218.025.42.084.621l9.246-9.247-9.246-8.768Z"
    fill="#4285F4"
  />
  <path
    d="m18.33 18 4.627-4.628-10.053-5.828a2.427 2.427 0 0 0-3.586 1.444L18.329 18Z"
    fill="#34A853"
  />
  <path
    d="M8 .5h20A7.5 7.5 0 0 1 35.5 8v20a7.5 7.5 0 0 1-7.5 7.5H8A7.5 7.5 0 0 1 .5 28V8A7.5 7.5 0 0 1 8 .5Z"
    stroke="#fff"
    stroke-opacity=".05"
  />
</svg>`,zDe=Object.freeze(Object.defineProperty({__proto__:null,playStoreSvg:HDe},Symbol.toStringTag,{value:"Module"})),KDe=Ce`<svg
  width="13"
  height="12"
  viewBox="0 0 13 12"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M0.794373 5.99982C0.794373 5.52643 1.17812 5.14268 1.6515 5.14268H5.643V1.15109C5.643 0.677701 6.02675 0.293946 6.50012 0.293945C6.9735 0.293946 7.35725 0.677701 7.35725 1.15109V5.14268H11.3488C11.8221 5.14268 12.2059 5.52643 12.2059 5.99982C12.2059 6.47321 11.8221 6.85696 11.3488 6.85696H7.35725V10.8486C7.35725 11.3219 6.9735 11.7057 6.50012 11.7057C6.02675 11.7057 5.643 11.3219 5.643 10.8486V6.85696H1.6515C1.17812 6.85696 0.794373 6.47321 0.794373 5.99982Z"
  /></svg
>`,VDe=Object.freeze(Object.defineProperty({__proto__:null,plusSvg:KDe},Symbol.toStringTag,{value:"Module"})),WDe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M3 6a3 3 0 0 1 3-3h1a1 1 0 1 0 0-2H6a5 5 0 0 0-5 5v1a1 1 0 0 0 2 0V6ZM13 1a1 1 0 1 0 0 2h1a3 3 0 0 1 3 3v1a1 1 0 1 0 2 0V6a5 5 0 0 0-5-5h-1ZM3 13a1 1 0 1 0-2 0v1a5 5 0 0 0 5 5h1a1 1 0 1 0 0-2H6a3 3 0 0 1-3-3v-1ZM19 13a1 1 0 1 0-2 0v1a3 3 0 0 1-3 3h-1a1 1 0 1 0 0 2h1.01a5 5 0 0 0 5-5v-1ZM5.3 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05A1.5 1.5 0 0 0 9.2 8.14c.06-.2.06-.43.06-.89s0-.7-.06-.89A1.5 1.5 0 0 0 8.14 5.3c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM10.8 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM5.26 12.75c0-.46 0-.7.05-.89a1.5 1.5 0 0 1 1.06-1.06c.19-.05.42-.05.89-.05.46 0 .7 0 .88.05.52.14.93.54 1.06 1.06.06.2.06.43.06.89s0 .7-.06.89a1.5 1.5 0 0 1-1.06 1.06c-.19.05-.42.05-.88.05-.47 0-.7 0-.9-.05a1.5 1.5 0 0 1-1.05-1.06c-.05-.2-.05-.43-.05-.89ZM10.8 11.86c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06Z"
  />
</svg>`,GDe=Object.freeze(Object.defineProperty({__proto__:null,qrCodeIcon:WDe},Symbol.toStringTag,{value:"Module"})),ZDe=Ce`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    d="M8.8071 0.292893C9.19763 0.683417 9.19763 1.31658 8.8071 1.70711L6.91421 3.6H11.8404C14.3368 3.6 16.5533 5.1975 17.3427 7.56588L17.4487 7.88377C17.6233 8.40772 17.3402 8.97404 16.8162 9.14868C16.2923 9.32333 15.726 9.04017 15.5513 8.51623L15.4453 8.19834C14.9281 6.64664 13.476 5.6 11.8404 5.6H6.91421L8.8071 7.49289C9.19763 7.88342 9.19763 8.51658 8.8071 8.90711C8.41658 9.29763 7.78341 9.29763 7.39289 8.90711L3.79289 5.30711C3.40236 4.91658 3.40236 4.28342 3.79289 3.89289L7.39289 0.292893C7.78341 -0.0976311 8.41658 -0.0976311 8.8071 0.292893ZM4.18377 10.8513C4.70771 10.6767 5.27403 10.9598 5.44868 11.4838L5.55464 11.8017C6.07188 13.3534 7.52401 14.4 9.15964 14.4L14.0858 14.4L12.1929 12.5071C11.8024 12.1166 11.8024 11.4834 12.1929 11.0929C12.5834 10.7024 13.2166 10.7024 13.6071 11.0929L17.2071 14.6929C17.5976 15.0834 17.5976 15.7166 17.2071 16.1071L13.6071 19.7071C13.2166 20.0976 12.5834 20.0976 12.1929 19.7071C11.8024 19.3166 11.8024 18.6834 12.1929 18.2929L14.0858 16.4L9.15964 16.4C6.66314 16.4 4.44674 14.8025 3.65728 12.4341L3.55131 12.1162C3.37667 11.5923 3.65983 11.026 4.18377 10.8513Z"
  /></svg
>`,YDe=Object.freeze(Object.defineProperty({__proto__:null,recycleHorizontalSvg:ZDe},Symbol.toStringTag,{value:"Module"})),QDe=Ce`<svg fill="none" viewBox="0 0 14 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.94 1.04a1 1 0 0 1 .7 1.23l-.48 1.68a5.85 5.85 0 0 1 8.53 4.32 5.86 5.86 0 0 1-11.4 2.56 1 1 0 0 1 1.9-.57 3.86 3.86 0 1 0 1.83-4.5l1.87.53a1 1 0 0 1-.55 1.92l-4.1-1.15a1 1 0 0 1-.69-1.23l1.16-4.1a1 1 0 0 1 1.23-.7Z"
    clip-rule="evenodd"
  />
</svg>`,JDe=Object.freeze(Object.defineProperty({__proto__:null,refreshSvg:QDe},Symbol.toStringTag,{value:"Module"})),XDe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.36 4.21a5.14 5.14 0 1 0 0 10.29 5.14 5.14 0 0 0 0-10.29ZM1.64 9.36a7.71 7.71 0 1 1 14 4.47l2.52 2.5a1.29 1.29 0 1 1-1.82 1.83l-2.51-2.51A7.71 7.71 0 0 1 1.65 9.36Z"
    clip-rule="evenodd"
  />
</svg>`,eBe=Object.freeze(Object.defineProperty({__proto__:null,searchSvg:XDe},Symbol.toStringTag,{value:"Module"})),tBe=Ce`<svg fill="none" viewBox="0 0 21 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.3808 4.34812C13.72 4.47798 12.8501 4.7587 11.5748 5.17296L9.00869 6.00646C6.90631 6.68935 5.40679 7.17779 4.38121 7.63178C3.87166 7.85734 3.5351 8.05091 3.32022 8.22035C3.11183 8.38466 3.07011 8.48486 3.05969 8.51817C2.98058 8.77103 2.98009 9.04195 3.05831 9.29509C3.06861 9.32844 3.10998 9.42878 3.31777 9.59384C3.53205 9.76404 3.86792 9.95881 4.37667 10.1862C5.29287 10.5957 6.58844 11.0341 8.35529 11.6164L10.8876 8.59854C11.2426 8.17547 11.8733 8.12028 12.2964 8.47528C12.7195 8.83029 12.7746 9.46104 12.4196 9.88412L9.88738 12.9019C10.7676 14.5408 11.4244 15.7406 11.9867 16.5718C12.299 17.0333 12.5491 17.3303 12.7539 17.5117C12.9526 17.6877 13.0586 17.711 13.0932 17.7154C13.3561 17.7484 13.6228 17.7009 13.8581 17.5791C13.8891 17.563 13.9805 17.5046 14.1061 17.2708C14.2357 17.0298 14.3679 16.6647 14.5015 16.1237C14.7705 15.0349 14.9912 13.4733 15.2986 11.2843L15.6738 8.61249C15.8603 7.28456 15.9857 6.37917 15.9989 5.7059C16.012 5.03702 15.9047 4.8056 15.8145 4.69183C15.7044 4.55297 15.5673 4.43792 15.4114 4.35365C15.2837 4.28459 15.0372 4.2191 14.3808 4.34812ZM7.99373 13.603C6.11919 12.9864 4.6304 12.4902 3.5606 12.0121C2.98683 11.7557 2.4778 11.4808 2.07383 11.1599C1.66337 10.8339 1.31312 10.4217 1.14744 9.88551C0.949667 9.24541 0.950886 8.56035 1.15094 7.92096C1.31852 7.38534 1.67024 6.97442 2.08185 6.64985C2.48697 6.33041 2.99697 6.05734 3.57166 5.80295C4.70309 5.3021 6.30179 4.78283 8.32903 4.12437L11.0196 3.25042C12.2166 2.86159 13.2017 2.54158 13.9951 2.38566C14.8065 2.22618 15.6202 2.19289 16.3627 2.59437C16.7568 2.80747 17.1035 3.09839 17.3818 3.4495C17.9062 4.111 18.0147 4.91815 17.9985 5.74496C17.9827 6.55332 17.8386 7.57903 17.6636 8.82534L17.2701 11.6268C16.9737 13.7376 16.7399 15.4022 16.4432 16.6034C16.2924 17.2135 16.1121 17.7632 15.8678 18.2176C15.6197 18.6794 15.2761 19.0971 14.7777 19.3551C14.1827 19.6632 13.5083 19.7833 12.8436 19.6997C12.2867 19.6297 11.82 19.3563 11.4277 19.0087C11.0415 18.6666 10.6824 18.213 10.3302 17.6925C9.67361 16.722 8.92648 15.342 7.99373 13.603Z"
    clip-rule="evenodd"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="21"
    height="20"
    viewBox="0 0 21 20"
    fill="none"
  ></svg></svg
>`,nBe=Object.freeze(Object.defineProperty({__proto__:null,sendSvg:tBe},Symbol.toStringTag,{value:"Module"})),rBe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.76.3a1 1 0 0 1 0 1.4L4.07 4.4h9a1 1 0 1 1 0 2h-9l2.69 2.68a1 1 0 1 1-1.42 1.42L.95 6.09a1 1 0 0 1 0-1.4l4.4-4.4a1 1 0 0 1 1.4 0Zm6.49 9.21a1 1 0 0 1 1.41 0l4.39 4.4a1 1 0 0 1 0 1.4l-4.39 4.4a1 1 0 0 1-1.41-1.42l2.68-2.68h-9a1 1 0 0 1 0-2h9l-2.68-2.68a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`,iBe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalSvg:rBe},Symbol.toStringTag,{value:"Module"})),sBe=Ce`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.7306 3.24213C14.0725 3.58384 14.0725 4.13786 13.7306 4.47957L10.7418 7.46737C10.4 7.80908 9.84581 7.80908 9.50399 7.46737C9.16216 7.12567 9.16216 6.57165 9.50399 6.22994L10.9986 4.73585H5.34082C4.85741 4.73585 4.46553 4.3441 4.46553 3.86085C4.46553 3.3776 4.85741 2.98585 5.34082 2.98585L10.9986 2.98585L9.50399 1.49177C9.16216 1.15006 9.16216 0.596037 9.50399 0.254328C9.84581 -0.0873803 10.4 -0.0873803 10.7418 0.254328L13.7306 3.24213ZM9.52515 10.1352C9.52515 10.6185 9.13327 11.0102 8.64986 11.0102L2.9921 11.0102L4.48669 12.5043C4.82852 12.846 4.82852 13.4001 4.48669 13.7418C4.14487 14.0835 3.59066 14.0835 3.24884 13.7418L0.26003 10.754C0.0958806 10.5899 0.0036621 10.3673 0.00366211 10.1352C0.00366212 9.90318 0.0958806 9.68062 0.26003 9.51652L3.24884 6.52872C3.59066 6.18701 4.14487 6.18701 4.48669 6.52872C4.82851 6.87043 4.82851 7.42445 4.48669 7.76616L2.9921 9.26024L8.64986 9.26024C9.13327 9.26024 9.52515 9.65199 9.52515 10.1352Z"
    fill="currentColor"
  />
</svg>

`,oBe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalMediumSvg:sBe},Symbol.toStringTag,{value:"Module"})),aBe=Ce`<svg width="10" height="10" viewBox="0 0 10 10">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.77986 0.566631C4.0589 0.845577 4.0589 1.29784 3.77986 1.57678L3.08261 2.2738H6.34184C6.73647 2.2738 7.05637 2.5936 7.05637 2.98808C7.05637 3.38257 6.73647 3.70237 6.34184 3.70237H3.08261L3.77986 4.39938C4.0589 4.67833 4.0589 5.13059 3.77986 5.40954C3.50082 5.68848 3.04841 5.68848 2.76937 5.40954L0.852346 3.49316C0.573306 3.21421 0.573306 2.76195 0.852346 2.48301L2.76937 0.566631C3.04841 0.287685 3.50082 0.287685 3.77986 0.566631ZM6.22 4.59102C6.49904 4.31208 6.95145 4.31208 7.23049 4.59102L9.14751 6.5074C9.42655 6.78634 9.42655 7.23861 9.14751 7.51755L7.23049 9.43393C6.95145 9.71287 6.49904 9.71287 6.22 9.43393C5.94096 9.15498 5.94096 8.70272 6.22 8.42377L6.91725 7.72676L3.65802 7.72676C3.26339 7.72676 2.94349 7.40696 2.94349 7.01247C2.94349 6.61798 3.26339 6.29819 3.65802 6.29819L6.91725 6.29819L6.22 5.60117C5.94096 5.32223 5.94096 4.86997 6.22 4.59102Z"
    clip-rule="evenodd"
  />
</svg>`,cBe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalBoldSvg:aBe},Symbol.toStringTag,{value:"Module"})),lBe=Ce`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <path 
    fill="currentColor"
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M8.3071 0.292893C8.69763 0.683417 8.69763 1.31658 8.3071 1.70711L6.41421 3.6H11.3404C13.8368 3.6 16.0533 5.1975 16.8427 7.56588L16.9487 7.88377C17.1233 8.40772 16.8402 8.97404 16.3162 9.14868C15.7923 9.32333 15.226 9.04017 15.0513 8.51623L14.9453 8.19834C14.4281 6.64664 12.976 5.6 11.3404 5.6H6.41421L8.3071 7.49289C8.69763 7.88342 8.69763 8.51658 8.3071 8.90711C7.91658 9.29763 7.28341 9.29763 6.89289 8.90711L3.29289 5.30711C2.90236 4.91658 2.90236 4.28342 3.29289 3.89289L6.89289 0.292893C7.28341 -0.0976311 7.91658 -0.0976311 8.3071 0.292893ZM3.68377 10.8513C4.20771 10.6767 4.77403 10.9598 4.94868 11.4838L5.05464 11.8017C5.57188 13.3534 7.024 14.4 8.65964 14.4L13.5858 14.4L11.6929 12.5071C11.3024 12.1166 11.3024 11.4834 11.6929 11.0929C12.0834 10.7024 12.7166 10.7024 13.1071 11.0929L16.7071 14.6929C17.0976 15.0834 17.0976 15.7166 16.7071 16.1071L13.1071 19.7071C12.7166 20.0976 12.0834 20.0976 11.6929 19.7071C11.3024 19.3166 11.3024 18.6834 11.6929 18.2929L13.5858 16.4L8.65964 16.4C6.16314 16.4 3.94674 14.8025 3.15728 12.4341L3.05131 12.1162C2.87667 11.5923 3.15983 11.026 3.68377 10.8513Z" 
  />
</svg>`,uBe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalRoundedBoldSvg:lBe},Symbol.toStringTag,{value:"Module"})),dBe=Ce`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.48 2.18a1 1 0 0 1 1.41 0l2.68 2.68a1 1 0 1 1-1.41 1.42l-.98-.98v4.56a1 1 0 0 1-2 0V5.3l-.97.98A1 1 0 0 1 .79 4.86l2.69-2.68Zm6.34 2.93a1 1 0 0 1 1 1v4.56l.97-.98a1 1 0 1 1 1.42 1.42l-2.69 2.68a1 1 0 0 1-1.41 0l-2.68-2.68a1 1 0 0 1 1.41-1.42l.98.98V6.1a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`,hBe=Object.freeze(Object.defineProperty({__proto__:null,swapVerticalSvg:dBe},Symbol.toStringTag,{value:"Module"})),fBe=Ce`<svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <g clip-path="url(#a)">
    <path fill="url(#b)" d="M0 0h32v32H0z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.034 15.252c4.975-2.167 8.293-3.596 9.953-4.287 4.74-1.971 5.725-2.314 6.366-2.325.142-.002.457.033.662.198.172.14.22.33.243.463.022.132.05.435.028.671-.257 2.7-1.368 9.248-1.933 12.27-.24 1.28-.71 1.708-1.167 1.75-.99.091-1.743-.655-2.703-1.284-1.502-.985-2.351-1.598-3.81-2.558-1.684-1.11-.592-1.721.368-2.718.252-.261 4.619-4.233 4.703-4.594.01-.045.02-.213-.08-.301-.1-.09-.246-.059-.353-.035-.15.034-2.55 1.62-7.198 4.758-.682.468-1.298.696-1.851.684-.61-.013-1.782-.344-2.653-.628-1.069-.347-1.918-.53-1.845-1.12.039-.308.462-.623 1.27-.944Z" fill="#fff"/>
  </g>
  <path d="M.5 16C.5 7.44 7.44.5 16 .5 24.56.5 31.5 7.44 31.5 16c0 8.56-6.94 15.5-15.5 15.5C7.44 31.5.5 24.56.5 16Z" stroke="#141414" stroke-opacity=".05"/>
  <defs>
    <linearGradient id="b" x1="1600" y1="0" x2="1600" y2="3176.27" gradientUnits="userSpaceOnUse">
      <stop stop-color="#2AABEE"/>
      <stop offset="1" stop-color="#229ED9"/>
    </linearGradient>
    <clipPath id="a">
      <path d="M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z" fill="#fff"/>
    </clipPath>
  </defs>
</svg>`,pBe=Object.freeze(Object.defineProperty({__proto__:null,telegramSvg:fBe},Symbol.toStringTag,{value:"Module"})),gBe=Ce`<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M7 3.71875C6.0335 3.71875 5.25 2.93525 5.25 1.96875C5.25 1.00225 6.0335 0.21875 7 0.21875C7.9665 0.21875 8.75 1.00225 8.75 1.96875C8.75 2.93525 7.9665 3.71875 7 3.71875Z" fill="#949E9E"/>
  <path d="M7 8.96875C6.0335 8.96875 5.25 8.18525 5.25 7.21875C5.25 6.25225 6.0335 5.46875 7 5.46875C7.9665 5.46875 8.75 6.25225 8.75 7.21875C8.75 8.18525 7.9665 8.96875 7 8.96875Z" fill="#949E9E"/>
  <path d="M5.25 12.4688C5.25 13.4352 6.0335 14.2187 7 14.2187C7.9665 14.2187 8.75 13.4352 8.75 12.4688C8.75 11.5023 7.9665 10.7188 7 10.7188C6.0335 10.7188 5.25 11.5023 5.25 12.4688Z" fill="#949E9E"/>
</svg>`,mBe=Object.freeze(Object.defineProperty({__proto__:null,threeDotsSvg:gBe},Symbol.toStringTag,{value:"Module"})),wBe=Ce`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5A3E85" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M18.22 25.7 20 23.91h3.34l2.1-2.1v-6.68H15.4v8.78h2.82v1.77Zm3.87-8.16h1.25v3.66H22.1v-3.66Zm-3.34 0H20v3.66h-1.25v-3.66ZM20 7.9a12 12 0 1 0 0 24 12 12 0 0 0 0-24Zm6.69 14.56-3.66 3.66h-2.72l-1.77 1.78h-1.88V26.1H13.3v-9.82l.94-2.4H26.7v8.56Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,yBe=Object.freeze(Object.defineProperty({__proto__:null,twitchSvg:wBe},Symbol.toStringTag,{value:"Module"})),bBe=Ce`<svg fill="none" viewBox="0 0 41 40">
  <g clip-path="url(#a)">
    <path fill="#000" d="M.8 0h40v40H.8z" />
    <path
      fill="#fff"
      d="m22.63 18.46 7.14-8.3h-1.69l-6.2 7.2-4.96-7.2H11.2l7.5 10.9-7.5 8.71h1.7l6.55-7.61 5.23 7.61h5.72l-7.77-11.31Zm-9.13-7.03h2.6l11.98 17.13h-2.6L13.5 11.43Z"
    />
  </g>
  <defs>
    <clipPath id="a"><path fill="#fff" d="M.8 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z" /></clipPath>
  </defs>
</svg>`,wM=Object.freeze(Object.defineProperty({__proto__:null,xSvg:bBe},Symbol.toStringTag,{value:"Module"})),vBe=Ce`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="m14.36 4.74.01.42c0 4.34-3.3 9.34-9.34 9.34A9.3 9.3 0 0 1 0 13.03a6.6 6.6 0 0 0 4.86-1.36 3.29 3.29 0 0 1-3.07-2.28c.5.1 1 .07 1.48-.06A3.28 3.28 0 0 1 .64 6.11v-.04c.46.26.97.4 1.49.41A3.29 3.29 0 0 1 1.11 2.1a9.32 9.32 0 0 0 6.77 3.43 3.28 3.28 0 0 1 5.6-3 6.59 6.59 0 0 0 2.08-.8 3.3 3.3 0 0 1-1.45 1.82A6.53 6.53 0 0 0 16 3.04c-.44.66-1 1.23-1.64 1.7Z"
  />
</svg>`,EBe=Object.freeze(Object.defineProperty({__proto__:null,twitterIconSvg:vBe},Symbol.toStringTag,{value:"Module"})),CBe=Ce`<svg fill="none" viewBox="0 0 28 28">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M18.1 4.76c-.42-.73-1.33-1.01-2.09-.66l-1.42.66c-.37.18-.8.18-1.18 0l-1.4-.65a1.63 1.63 0 0 0-2.1.66l-.84 1.45c-.2.34-.53.59-.92.67l-1.7.35c-.83.17-1.39.94-1.3 1.78l.19 1.56c.04.39-.08.78-.33 1.07l-1.12 1.3c-.52.6-.52 1.5 0 2.11L5 16.38c.25.3.37.68.33 1.06l-.18 1.57c-.1.83.46 1.6 1.28 1.78l1.7.35c.4.08.73.32.93.66l.84 1.43a1.63 1.63 0 0 0 2.09.66l1.41-.66c.37-.17.8-.17 1.18 0l1.43.67c.76.35 1.66.07 2.08-.65l.86-1.45c.2-.34.54-.58.92-.66l1.68-.35A1.63 1.63 0 0 0 22.84 19l-.18-1.57a1.4 1.4 0 0 1 .33-1.06l1.12-1.32c.52-.6.52-1.5 0-2.11l-1.12-1.3a1.4 1.4 0 0 1-.33-1.07l.18-1.57c.1-.83-.46-1.6-1.28-1.77l-1.68-.35a1.4 1.4 0 0 1-.92-.66l-.86-1.47Zm-3.27-3.2a4.43 4.43 0 0 1 5.69 1.78l.54.93 1.07.22a4.43 4.43 0 0 1 3.5 4.84l-.11.96.7.83a4.43 4.43 0 0 1 .02 5.76l-.72.85.1.96a4.43 4.43 0 0 1-3.5 4.84l-1.06.22-.54.92a4.43 4.43 0 0 1-5.68 1.77l-.84-.4-.82.39a4.43 4.43 0 0 1-5.7-1.79l-.51-.89-1.09-.22a4.43 4.43 0 0 1-3.5-4.84l.1-.96-.72-.85a4.43 4.43 0 0 1 .01-5.76l.71-.83-.1-.95a4.43 4.43 0 0 1 3.5-4.84l1.08-.23.53-.9a4.43 4.43 0 0 1 5.7-1.8l.81.38.83-.39ZM18.2 9.4c.65.42.84 1.28.42 1.93l-4.4 6.87a1.4 1.4 0 0 1-2.26.14L9.5 15.39a1.4 1.4 0 0 1 2.15-1.8l1.23 1.48 3.38-5.26a1.4 1.4 0 0 1 1.93-.42Z"
    clip-rule="evenodd"
  />
</svg>`,_Be=Object.freeze(Object.defineProperty({__proto__:null,verifySvg:CBe},Symbol.toStringTag,{value:"Module"})),SBe=Ce`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="m4.1 12.43-.45-.78-.93-.2a1.65 1.65 0 0 1-1.31-1.8l.1-.86-.61-.71a1.65 1.65 0 0 1 0-2.16l.6-.7-.09-.85c-.1-.86.47-1.64 1.3-1.81l.94-.2.45-.78A1.65 1.65 0 0 1 6.23.9l.77.36.78-.36c.77-.36 1.69-.07 2.12.66l.47.8.91.2c.84.17 1.4.95 1.31 1.8l-.1.86.6.7c.54.62.54 1.54.01 2.16l-.6.71.09.86c.1.85-.47 1.63-1.3 1.8l-.92.2-.47.79a1.65 1.65 0 0 1-2.12.66L7 12.74l-.77.36c-.78.35-1.7.07-2.13-.67Zm5.74-6.9a1 1 0 1 0-1.68-1.07L6.32 7.3l-.55-.66a1 1 0 0 0-1.54 1.28l1.43 1.71a1 1 0 0 0 1.61-.1l2.57-4Z"
    clip-rule="evenodd"
  />
</svg>`,ABe=Object.freeze(Object.defineProperty({__proto__:null,verifyFilledSvg:SBe},Symbol.toStringTag,{value:"Module"})),xBe=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 5.5c0-1.8 1.46-3.25 3.25-3.25H14.5c1.8 0 3.25 1.46 3.25 3.25v.28A3.25 3.25 0 0 1 20 8.88v2.24c0 1.45-.94 2.68-2.25 3.1v.28c0 1.8-1.46 3.25-3.25 3.25H3.25A3.25 3.25 0 0 1 0 14.5v-9Zm15.75 8.88h-2.38a4.38 4.38 0 0 1 0-8.76h2.38V5.5c0-.69-.56-1.25-1.25-1.25H3.25C2.56 4.25 2 4.81 2 5.5v9c0 .69.56 1.25 1.25 1.25H14.5c.69 0 1.25-.56 1.25-1.25v-.13Zm-2.38-6.76a2.37 2.37 0 1 0 0 4.75h3.38c.69 0 1.25-.55 1.25-1.24V8.87c0-.69-.56-1.24-1.25-1.24h-3.38Z"
    clip-rule="evenodd"
  />
</svg>`,IBe=Object.freeze(Object.defineProperty({__proto__:null,walletSvg:xBe},Symbol.toStringTag,{value:"Module"})),OBe=Ce`<svg fill="none" viewBox="0 0 96 67">
  <path
    fill="currentColor"
    d="M25.32 18.8a32.56 32.56 0 0 1 45.36 0l1.5 1.47c.63.62.63 1.61 0 2.22l-5.15 5.05c-.31.3-.82.3-1.14 0l-2.07-2.03a22.71 22.71 0 0 0-31.64 0l-2.22 2.18c-.31.3-.82.3-1.14 0l-5.15-5.05a1.55 1.55 0 0 1 0-2.22l1.65-1.62Zm56.02 10.44 4.59 4.5c.63.6.63 1.6 0 2.21l-20.7 20.26c-.62.61-1.63.61-2.26 0L48.28 41.83a.4.4 0 0 0-.56 0L33.03 56.21c-.63.61-1.64.61-2.27 0L10.07 35.95a1.55 1.55 0 0 1 0-2.22l4.59-4.5a1.63 1.63 0 0 1 2.27 0L31.6 43.63a.4.4 0 0 0 .57 0l14.69-14.38a1.63 1.63 0 0 1 2.26 0l14.69 14.38a.4.4 0 0 0 .57 0l14.68-14.38a1.63 1.63 0 0 1 2.27 0Z"
  />
  <path
    stroke="#000"
    stroke-opacity=".1"
    d="M25.67 19.15a32.06 32.06 0 0 1 44.66 0l1.5 1.48c.43.42.43 1.09 0 1.5l-5.15 5.05a.31.31 0 0 1-.44 0l-2.07-2.03a23.21 23.21 0 0 0-32.34 0l-2.22 2.18a.31.31 0 0 1-.44 0l-5.15-5.05a1.05 1.05 0 0 1 0-1.5l1.65-1.63ZM81 29.6l4.6 4.5c.42.41.42 1.09 0 1.5l-20.7 20.26c-.43.43-1.14.43-1.57 0L48.63 41.47a.9.9 0 0 0-1.26 0L32.68 55.85c-.43.43-1.14.43-1.57 0L10.42 35.6a1.05 1.05 0 0 1 0-1.5l4.59-4.5a1.13 1.13 0 0 1 1.57 0l14.68 14.38a.9.9 0 0 0 1.27 0l-.35-.35.35.35L47.22 29.6a1.13 1.13 0 0 1 1.56 0l14.7 14.38a.9.9 0 0 0 1.26 0L79.42 29.6a1.13 1.13 0 0 1 1.57 0Z"
  />
</svg>`,PBe=Ce`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_22274_4692)">
<path d="M0 6.64C0 4.17295 0 2.93942 0.525474 2.01817C0.880399 1.39592 1.39592 0.880399 2.01817 0.525474C2.93942 0 4.17295 0 6.64 0H9.36C11.8271 0 13.0606 0 13.9818 0.525474C14.6041 0.880399 15.1196 1.39592 15.4745 2.01817C16 2.93942 16 4.17295 16 6.64V9.36C16 11.8271 16 13.0606 15.4745 13.9818C15.1196 14.6041 14.6041 15.1196 13.9818 15.4745C13.0606 16 11.8271 16 9.36 16H6.64C4.17295 16 2.93942 16 2.01817 15.4745C1.39592 15.1196 0.880399 14.6041 0.525474 13.9818C0 13.0606 0 11.8271 0 9.36V6.64Z" fill="#C7B994"/>
<path d="M4.49038 5.76609C6.42869 3.86833 9.5713 3.86833 11.5096 5.76609L11.7429 5.99449C11.8398 6.08938 11.8398 6.24323 11.7429 6.33811L10.9449 7.11942C10.8964 7.16686 10.8179 7.16686 10.7694 7.11942L10.4484 6.80512C9.09617 5.48119 6.90381 5.48119 5.5516 6.80512L5.20782 7.14171C5.15936 7.18915 5.08079 7.18915 5.03234 7.14171L4.23434 6.3604C4.13742 6.26552 4.13742 6.11167 4.23434 6.01678L4.49038 5.76609ZM13.1599 7.38192L13.8702 8.07729C13.9671 8.17217 13.9671 8.32602 13.8702 8.4209L10.6677 11.5564C10.5708 11.6513 10.4137 11.6513 10.3168 11.5564L8.04388 9.33105C8.01965 9.30733 7.98037 9.30733 7.95614 9.33105L5.6833 11.5564C5.58638 11.6513 5.42925 11.6513 5.33234 11.5564L2.12982 8.42087C2.0329 8.32598 2.0329 8.17213 2.12982 8.07724L2.84004 7.38188C2.93695 7.28699 3.09408 7.28699 3.191 7.38188L5.46392 9.60726C5.48815 9.63098 5.52743 9.63098 5.55166 9.60726L7.82447 7.38188C7.92138 7.28699 8.07851 7.28699 8.17543 7.38187L10.4484 9.60726C10.4726 9.63098 10.5119 9.63098 10.5361 9.60726L12.809 7.38192C12.9059 7.28703 13.063 7.28703 13.1599 7.38192Z" fill="#202020"/>
</g>
<defs>
<clipPath id="clip0_22274_4692">
<path d="M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,TBe=Ce`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="11" r="11" transform="matrix(-1 0 0 1 23 1)" fill="#202020"/>
<circle cx="11" cy="11" r="11.5" transform="matrix(-1 0 0 1 23 1)" stroke="#C7B994" stroke-opacity="0.7"/>
<path d="M15.4523 11.0686L16.7472 9.78167C13.8205 6.87297 10.1838 6.87297 7.25708 9.78167L8.55201 11.0686C10.7779 8.85645 13.2279 8.85645 15.4538 11.0686H15.4523Z" fill="#C7B994"/>
<path d="M15.0199 14.067L12 11.0656L8.98 14.067L5.96004 11.0656L4.66663 12.3511L8.98 16.6393L12 13.638L15.0199 16.6393L19.3333 12.3511L18.0399 11.0656L15.0199 14.067Z" fill="#C7B994"/>
</svg>
`,d5=Object.freeze(Object.defineProperty({__proto__:null,walletConnectBrownSvg:TBe,walletConnectLightBrownSvg:PBe,walletConnectSvg:OBe},Symbol.toStringTag,{value:"Module"})),kBe=Ce`
  <svg fill="none" viewBox="0 0 48 44">
    <path
      style="fill: var(--wui-color-bg-300);"
      d="M4.56 8.64c-1.23 1.68-1.23 4.08-1.23 8.88v8.96c0 4.8 0 7.2 1.23 8.88.39.55.87 1.02 1.41 1.42C7.65 38 10.05 38 14.85 38h14.3c4.8 0 7.2 0 8.88-1.22a6.4 6.4 0 0 0 1.41-1.42c.83-1.14 1.1-2.6 1.19-4.92a6.4 6.4 0 0 0 5.16-4.65c.21-.81.21-1.8.21-3.79 0-1.98 0-2.98-.22-3.79a6.4 6.4 0 0 0-5.15-4.65c-.1-2.32-.36-3.78-1.19-4.92a6.4 6.4 0 0 0-1.41-1.42C36.35 6 33.95 6 29.15 6h-14.3c-4.8 0-7.2 0-8.88 1.22a6.4 6.4 0 0 0-1.41 1.42Z"
    />
    <path
      style="fill: var(--wui-color-fg-200);"
      fill-rule="evenodd"
      d="M2.27 11.33a6.4 6.4 0 0 1 6.4-6.4h26.66a6.4 6.4 0 0 1 6.4 6.4v1.7a6.4 6.4 0 0 1 5.34 6.3v5.34a6.4 6.4 0 0 1-5.34 6.3v1.7a6.4 6.4 0 0 1-6.4 6.4H8.67a6.4 6.4 0 0 1-6.4-6.4V11.33ZM39.6 31.07h-6.93a9.07 9.07 0 1 1 0-18.14h6.93v-1.6a4.27 4.27 0 0 0-4.27-4.26H8.67a4.27 4.27 0 0 0-4.27 4.26v21.34a4.27 4.27 0 0 0 4.27 4.26h26.66a4.27 4.27 0 0 0 4.27-4.26v-1.6Zm-6.93-16a6.93 6.93 0 0 0 0 13.86h8a4.27 4.27 0 0 0 4.26-4.26v-5.34a4.27 4.27 0 0 0-4.26-4.26h-8Z"
      clip-rule="evenodd"
    />
  </svg>
`,NBe=Object.freeze(Object.defineProperty({__proto__:null,walletPlaceholderSvg:kBe},Symbol.toStringTag,{value:"Module"})),$Be=Ce`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M11 6.67a1 1 0 1 0-2 0v2.66a1 1 0 0 0 2 0V6.67ZM10 14.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 1a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm-7 9a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"
    clip-rule="evenodd"
  />
</svg>`,RBe=Object.freeze(Object.defineProperty({__proto__:null,warningCircleSvg:$Be},Symbol.toStringTag,{value:"Module"})),MBe=Ce`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.125 6.875C9.125 6.57833 9.21298 6.28832 9.3778 6.04165C9.54262 5.79497 9.77689 5.60271 10.051 5.48918C10.3251 5.37565 10.6267 5.34594 10.9176 5.40382C11.2086 5.4617 11.4759 5.60456 11.6857 5.81434C11.8954 6.02412 12.0383 6.29139 12.0962 6.58236C12.1541 6.87334 12.1244 7.17494 12.0108 7.44903C11.8973 7.72311 11.705 7.95738 11.4584 8.1222C11.2117 8.28703 10.9217 8.375 10.625 8.375C10.2272 8.375 9.84565 8.21696 9.56434 7.93566C9.28304 7.65436 9.125 7.27282 9.125 6.875ZM21.125 11C21.125 13.0025 20.5312 14.9601 19.4186 16.6251C18.3061 18.2902 16.7248 19.5879 14.8747 20.3543C13.0246 21.1206 10.9888 21.3211 9.02471 20.9305C7.06066 20.5398 5.25656 19.5755 3.84055 18.1595C2.42454 16.7435 1.46023 14.9393 1.06955 12.9753C0.678878 11.0112 0.879387 8.97543 1.64572 7.12533C2.41206 5.27523 3.70981 3.69392 5.37486 2.58137C7.0399 1.46882 8.99747 0.875 11 0.875C13.6844 0.877978 16.258 1.94567 18.1562 3.84383C20.0543 5.74199 21.122 8.3156 21.125 11ZM18.875 11C18.875 9.44247 18.4131 7.91992 17.5478 6.62488C16.6825 5.32985 15.4526 4.32049 14.0136 3.72445C12.5747 3.12841 10.9913 2.97246 9.46367 3.27632C7.93607 3.58017 6.53288 4.3302 5.43154 5.43153C4.3302 6.53287 3.58018 7.93606 3.27632 9.46366C2.97246 10.9913 3.12841 12.5747 3.72445 14.0136C4.32049 15.4526 5.32985 16.6825 6.62489 17.5478C7.91993 18.4131 9.44248 18.875 11 18.875C13.0879 18.8728 15.0896 18.0424 16.566 16.566C18.0424 15.0896 18.8728 13.0879 18.875 11ZM12.125 14.4387V11.375C12.125 10.8777 11.9275 10.4008 11.5758 10.0492C11.2242 9.69754 10.7473 9.5 10.25 9.5C9.98433 9.4996 9.72708 9.59325 9.52383 9.76435C9.32058 9.93544 9.18444 10.173 9.13952 10.4348C9.09461 10.6967 9.14381 10.966 9.27843 11.195C9.41304 11.4241 9.62438 11.5981 9.875 11.6863V14.75C9.875 15.2473 10.0725 15.7242 10.4242 16.0758C10.7758 16.4275 11.2527 16.625 11.75 16.625C12.0157 16.6254 12.2729 16.5318 12.4762 16.3607C12.6794 16.1896 12.8156 15.952 12.8605 15.6902C12.9054 15.4283 12.8562 15.159 12.7216 14.93C12.587 14.7009 12.3756 14.5269 12.125 14.4387Z" fill="currentColor"/>
</svg>`,DBe=Object.freeze(Object.defineProperty({__proto__:null,infoSvg:MBe},Symbol.toStringTag,{value:"Module"})),BBe=Ce`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.0162 11.6312L9.55059 2.13937C9.39228 1.86862 9.16584 1.64405 8.8938 1.48798C8.62176 1.33192 8.3136 1.2498 7.99997 1.2498C7.68634 1.2498 7.37817 1.33192 7.10613 1.48798C6.83409 1.64405 6.60765 1.86862 6.44934 2.13937L0.983716 11.6312C0.830104 11.894 0.749146 12.1928 0.749146 12.4972C0.749146 12.8015 0.830104 13.1004 0.983716 13.3631C1.14027 13.6352 1.3664 13.8608 1.63889 14.0166C1.91139 14.1725 2.22044 14.253 2.53434 14.25H13.4656C13.7793 14.2528 14.0881 14.1721 14.3603 14.0163C14.6326 13.8604 14.8585 13.635 15.015 13.3631C15.1688 13.1005 15.2499 12.8017 15.2502 12.4973C15.2504 12.193 15.1696 11.8941 15.0162 11.6312ZM13.7162 12.6125C13.6908 12.6558 13.6541 12.6914 13.6101 12.7157C13.5661 12.7399 13.5164 12.7517 13.4662 12.75H2.53434C2.48415 12.7517 2.43442 12.7399 2.39042 12.7157C2.34641 12.6914 2.30976 12.6558 2.28434 12.6125C2.26278 12.5774 2.25137 12.5371 2.25137 12.4959C2.25137 12.4548 2.26278 12.4144 2.28434 12.3794L7.74997 2.88749C7.77703 2.84583 7.81408 2.8116 7.85774 2.7879C7.9014 2.7642 7.95029 2.75178 7.99997 2.75178C8.04964 2.75178 8.09854 2.7642 8.1422 2.7879C8.18586 2.8116 8.2229 2.84583 8.24997 2.88749L13.715 12.3794C13.7367 12.4143 13.7483 12.4546 13.7486 12.4958C13.7488 12.5369 13.7376 12.5773 13.7162 12.6125ZM7.24997 8.49999V6.49999C7.24997 6.30108 7.32898 6.11031 7.46964 5.96966C7.61029 5.82901 7.80105 5.74999 7.99997 5.74999C8.19888 5.74999 8.38964 5.82901 8.5303 5.96966C8.67095 6.11031 8.74997 6.30108 8.74997 6.49999V8.49999C8.74997 8.6989 8.67095 8.88967 8.5303 9.03032C8.38964 9.17097 8.19888 9.24999 7.99997 9.24999C7.80105 9.24999 7.61029 9.17097 7.46964 9.03032C7.32898 8.88967 7.24997 8.6989 7.24997 8.49999ZM8.99997 11C8.99997 11.1978 8.94132 11.3911 8.83144 11.5556C8.72155 11.72 8.56538 11.8482 8.38265 11.9239C8.19992 11.9996 7.99886 12.0194 7.80488 11.9808C7.6109 11.9422 7.43271 11.847 7.29286 11.7071C7.15301 11.5672 7.05777 11.3891 7.01918 11.1951C6.9806 11.0011 7.0004 10.8 7.07609 10.6173C7.15177 10.4346 7.27995 10.2784 7.4444 10.1685C7.60885 10.0586 7.80219 9.99999 7.99997 9.99999C8.26518 9.99999 8.51954 10.1053 8.70707 10.2929C8.89461 10.4804 8.99997 10.7348 8.99997 11Z" fill="currentColor"/>
</svg>
`,LBe=Object.freeze(Object.defineProperty({__proto__:null,exclamationTriangleSvg:BBe},Symbol.toStringTag,{value:"Module"})),UBe=Ce`<svg width="60" height="16" viewBox="0 0 60 16" fill="none"">
  <path d="M9.3335 4.66667C9.3335 2.08934 11.4229 0 14.0002 0H20.6669C23.2442 0 25.3335 2.08934 25.3335 4.66667V11.3333C25.3335 13.9106 23.2442 16 20.6669 16H14.0002C11.4229 16 9.3335 13.9106 9.3335 11.3333V4.66667Z" fill="#363636"/>
  <path d="M15.6055 11.0003L17.9448 4.66699H18.6316L16.2923 11.0003H15.6055Z" fill="#F6F6F6"/>
  <path d="M0 4.33333C0 1.9401 1.9401 0 4.33333 0C6.72657 0 8.66669 1.9401 8.66669 4.33333V11.6667C8.66669 14.0599 6.72657 16 4.33333 16C1.9401 16 0 14.0599 0 11.6667V4.33333Z" fill="#363636"/>
  <path d="M3.9165 9.99934V9.16602H4.74983V9.99934H3.9165Z" fill="#F6F6F6"/>
  <path d="M26 8C26 3.58172 29.3517 0 33.4863 0H52.5137C56.6483 0 60 3.58172 60 8C60 12.4183 56.6483 16 52.5137 16H33.4863C29.3517 16 26 12.4183 26 8Z" fill="#363636"/>
  <path d="M49.3687 9.95834V6.26232H50.0213V6.81966C50.256 6.40899 50.7326 6.16699 51.2606 6.16699C52.0599 6.16699 52.6173 6.67299 52.6173 7.65566V9.95834H51.972V7.69234C51.972 7.04696 51.6053 6.70966 51.07 6.70966C50.4906 6.70966 50.0213 7.17168 50.0213 7.82433V9.95834H49.3687Z" fill="#F6F6F6"/>
  <path d="M45.2538 9.95773L44.5718 6.26172H45.1877L45.6717 9.31242L46.3098 7.30306H46.9184L47.5491 9.29041L48.0404 6.26172H48.6564L47.9744 9.95773H47.2411L46.6178 8.03641L45.9871 9.95773H45.2538Z" fill="#F6F6F6"/>
  <path d="M42.3709 10.0536C41.2489 10.0536 40.5889 9.21765 40.5889 8.1103C40.5889 7.01035 41.2489 6.16699 42.3709 6.16699C43.4929 6.16699 44.1529 7.01035 44.1529 8.1103C44.1529 9.21765 43.4929 10.0536 42.3709 10.0536ZM42.3709 9.51096C43.1775 9.51096 43.4856 8.82164 43.4856 8.10296C43.4856 7.39163 43.1775 6.70966 42.3709 6.70966C41.5642 6.70966 41.2562 7.39163 41.2562 8.10296C41.2562 8.82164 41.5642 9.51096 42.3709 9.51096Z" fill="#F6F6F6"/>
  <path d="M38.2805 10.0536C37.1952 10.0536 36.5132 9.22499 36.5132 8.1103C36.5132 7.00302 37.1952 6.16699 38.2805 6.16699C39.1972 6.16699 40.0038 6.68766 39.9159 8.27896H37.1805C37.2319 8.96103 37.5472 9.5183 38.2805 9.5183C38.7718 9.5183 39.0945 9.21765 39.2045 8.87299H39.8499C39.7472 9.48903 39.1679 10.0536 38.2805 10.0536ZM37.1952 7.78765H39.2852C39.2338 7.04696 38.8892 6.70232 38.2805 6.70232C37.6132 6.70232 37.2832 7.18635 37.1952 7.78765Z" fill="#F6F6F6"/>
  <path d="M33.3828 9.95773V6.26172H34.0501V6.88506C34.2848 6.47439 34.6882 6.26172 35.1061 6.26172H35.9935V6.88506H35.0548C34.4682 6.88506 34.0501 7.26638 34.0501 8.00706V9.95773H33.3828Z" fill="#F6F6F6"/>
</svg>`,jBe=Object.freeze(Object.defineProperty({__proto__:null,reownSvg:UBe},Symbol.toStringTag,{value:"Module"}));export{DLe as $,pLe as A,gLe as B,np as C,fLe as D,uLe as E,lLe as F,wLe as G,mLe as H,PLe as I,Uu as J,Kp as K,kLe as L,SQ as M,ELe as N,RLe as O,CLe as P,yLe as Q,BLe as R,TLe as S,bLe as T,SLe as U,vLe as V,VLe as W,MLe as X,_Le as Y,TQ as Z,GX as _,pv as a,LLe as a0,ULe as a1,ALe as a2,$Q as a3,jLe as a4,FLe as a5,qLe as a6,HLe as a7,YLe as a8,UUe as a9,DFe as aa,$Le as ab,zLe as ac,zUe as ad,BFe as ae,QLe as b,XLe as c,OLe as d,eUe as e,WLe as f,oX as g,sUe as h,GLe as i,ZLe as j,nUe as k,KLe as l,rUe as m,xLe as n,iUe as o,bB as p,s6 as q,KBe as r,_B as s,tUe as t,JLe as u,y5 as v,SB as w,tLe as x,VBe as y,hLe as z};
